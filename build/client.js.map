{"version":3,"file":"client.js?5e6faacf14241f650820","sources":["webpack:///webpack/bootstrap","webpack:///./shared/dayjs-convert.js","webpack:///./src/app.jsx","webpack:///./src/client.jsx","webpack:///./src/models/collection.js","webpack:///./src/models/project.js","webpack:///./src/models/team.js","webpack:///./src/models/user.js","webpack:///./src/models/words.js","webpack:///./src/polyfills.js","webpack:///./src/presenters/analytics.jsx","webpack:///./src/presenters/categories.jsx","webpack:///./src/presenters/collection-editor.jsx","webpack:///./src/presenters/collection-item.jsx","webpack:///./src/presenters/collections-list.jsx","webpack:///./src/presenters/current-user.jsx","webpack:///./src/presenters/deleted-projects.jsx","webpack:///./src/presenters/entity-page-featured-project.jsx","webpack:///./src/presenters/entity-page-projects.jsx","webpack:///./src/presenters/error-handlers.jsx","webpack:///./src/presenters/featured-embed.jsx","webpack:///./src/presenters/featured.jsx","webpack:///./src/presenters/footer.jsx","webpack:///./src/presenters/header.jsx","webpack:///./src/presenters/includes/add-collection-project.jsx","webpack:///./src/presenters/includes/add-project-to-collection.jsx","webpack:///./src/presenters/includes/add-team-project.jsx","webpack:///./src/presenters/includes/avatar.jsx","webpack:///./src/presenters/includes/collection-avatar.jsx","webpack:///./src/presenters/includes/collection-result-item.jsx","webpack:///./src/presenters/includes/delete-team.jsx","webpack:///./src/presenters/includes/description-field.jsx","webpack:///./src/presenters/includes/dev-toggles.jsx","webpack:///./src/presenters/includes/edit-collection-color.jsx","webpack:///./src/presenters/includes/edit-collection-name-and-url.jsx","webpack:///./src/presenters/includes/editable-field.jsx","webpack:///./src/presenters/includes/editable-wrapping-field.jsx","webpack:///./src/presenters/includes/embed.jsx","webpack:///./src/presenters/includes/error-boundary.jsx","webpack:///./src/presenters/includes/expander.jsx","webpack:///./src/presenters/includes/field-helpers.jsx","webpack:///./src/presenters/includes/konami.jsx","webpack:///./src/presenters/includes/link.jsx","webpack:///./src/presenters/includes/loader.jsx","webpack:///./src/presenters/includes/local-storage.jsx","webpack:///./src/presenters/includes/logo.jsx","webpack:///./src/presenters/includes/markdown.jsx","webpack:///./src/presenters/includes/name-conflict.jsx","webpack:///./src/presenters/includes/not-found.jsx","webpack:///./src/presenters/includes/profile.jsx","webpack:///./src/presenters/includes/project-actions.jsx","webpack:///./src/presenters/includes/project-result-item.jsx","webpack:///./src/presenters/includes/related-projects.jsx","webpack:///./src/presenters/includes/team-analytics-activity.jsx","webpack:///./src/presenters/includes/team-analytics-project-details.jsx","webpack:///./src/presenters/includes/team-analytics-referrers.jsx","webpack:///./src/presenters/includes/team-analytics-summary.jsx","webpack:///./src/presenters/includes/team-analytics.jsx","webpack:///./src/presenters/includes/team-elements.jsx","webpack:///./src/presenters/includes/team-users.jsx","webpack:///./src/presenters/includes/thanks.jsx","webpack:///./src/presenters/includes/uploader.jsx","webpack:///./src/presenters/includes/user-prefs.jsx","webpack:///./src/presenters/includes/user-result-item.jsx","webpack:///./src/presenters/includes/wrapping-link.jsx","webpack:///./src/presenters/layout.jsx","webpack:///./src/presenters/notifications.jsx","webpack:///./src/presenters/overlays/new-stuff.jsx","webpack:///./src/presenters/overlays/overlay-video.jsx","webpack:///./src/presenters/pages/category.jsx","webpack:///./src/presenters/pages/collection.jsx","webpack:///./src/presenters/pages/error.jsx","webpack:///./src/presenters/pages/index.jsx","webpack:///./src/presenters/pages/join-team.jsx","webpack:///./src/presenters/pages/login.jsx","webpack:///./src/presenters/pages/project.jsx","webpack:///./src/presenters/pages/questions.jsx","webpack:///./src/presenters/pages/router.jsx","webpack:///./src/presenters/pages/search.jsx","webpack:///./src/presenters/pages/secret.jsx","webpack:///./src/presenters/pages/team-or-user.jsx","webpack:///./src/presenters/pages/team.jsx","webpack:///./src/presenters/pages/user.jsx","webpack:///./src/presenters/pop-overs/add-collection-project-pop.jsx","webpack:///./src/presenters/pop-overs/add-project-to-collection-pop.jsx","webpack:///./src/presenters/pop-overs/add-team-project-pop.jsx","webpack:///./src/presenters/pop-overs/add-team-user-pop.jsx","webpack:///./src/presenters/pop-overs/collection-options-pop.jsx","webpack:///./src/presenters/pop-overs/create-team-pop.jsx","webpack:///./src/presenters/pop-overs/delete-team-pop.jsx","webpack:///./src/presenters/pop-overs/edit-collection-color-pop.jsx","webpack:///./src/presenters/pop-overs/featured-project-options-pop.jsx","webpack:///./src/presenters/pop-overs/new-project-pop.jsx","webpack:///./src/presenters/pop-overs/popover-button.jsx","webpack:///./src/presenters/pop-overs/popover-container.jsx","webpack:///./src/presenters/pop-overs/popover-nested.jsx","webpack:///./src/presenters/pop-overs/popover-with-button.jsx","webpack:///./src/presenters/pop-overs/project-options-pop.jsx","webpack:///./src/presenters/pop-overs/report-abuse-pop.jsx","webpack:///./src/presenters/pop-overs/sign-in-pop.jsx","webpack:///./src/presenters/pop-overs/team-analytics-project-pop.jsx","webpack:///./src/presenters/pop-overs/team-analytics-time-pop.jsx","webpack:///./src/presenters/pop-overs/team-user-info-pop.jsx","webpack:///./src/presenters/pop-overs/team-user-remove-pop.jsx","webpack:///./src/presenters/pop-overs/user-options-pop.jsx","webpack:///./src/presenters/project-editor.jsx","webpack:///./src/presenters/project-item.jsx","webpack:///./src/presenters/projects-list.jsx","webpack:///./src/presenters/projects-loader.jsx","webpack:///./src/presenters/question-item.jsx","webpack:///./src/presenters/questions.jsx","webpack:///./src/presenters/random-categories.jsx","webpack:///./src/presenters/recent-projects.jsx","webpack:///./src/presenters/team-editor.jsx","webpack:///./src/presenters/team-item.jsx","webpack:///./src/presenters/teams-list.jsx","webpack:///./src/presenters/user-editor.jsx","webpack:///./src/presenters/user-item.jsx","webpack:///./src/presenters/users-list.jsx","webpack:///./src/utils/abuse-reporting.js","webpack:///./src/utils/assets.js","webpack:///./src/utils/models.js","webpack:///./src/utils/progress-promise.js","webpack:///./src/utils/s3-uploader.js","webpack:///./src/utils/sentry.js"],"sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"client\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"c3-bundle\":\"c3-bundle\"}[chunkId]||chunkId) + \".js?\" + {\"c3-bundle\":\"51fb3bd29bf0615226cb\"}[chunkId] + \"\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/client.jsx\",\"react\",\"curated\",\"dependencies\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = function convertPlugin(option, dayjsClass, dayjsFactory) {\n  dayjsFactory.convert = (amount, from, to) => {\n    const now = dayjsFactory();\n    return now.add(amount, from).diff(now, to);\n  };\n};","import React from 'react';\nimport {BrowserRouter} from 'react-router-dom';\n\nimport ErrorBoundary from './presenters/includes/error-boundary.jsx';\nimport {AnalyticsContext} from './presenters/analytics';\nimport {CurrentUserProvider} from './presenters/current-user.jsx';\nimport {UserPrefsProvider} from './presenters/includes/user-prefs.jsx';\nimport {DevTogglesProvider} from './presenters/includes/dev-toggles.jsx';\nimport {Notifications} from './presenters/notifications.jsx';\n\nimport Router from './presenters/pages/router';\n\nconst App = () => (\n  <ErrorBoundary fallback=\"Something went very wrong, try refreshing?\">\n    <BrowserRouter>\n      <Notifications>\n        <UserPrefsProvider>\n          <DevTogglesProvider>\n            <AnalyticsContext context={{groupId: '0'}}>\n              <CurrentUserProvider>\n                {api => <Router api={api}/>}\n              </CurrentUserProvider>\n            </AnalyticsContext>\n          </DevTogglesProvider>\n        </UserPrefsProvider>\n      </Notifications>\n    </BrowserRouter>\n  </ErrorBoundary>\n);\n\nexport default App;\n\n","/* globals EDITOR_URL */\n\n// Import Sentry early to help it initialize.\nimport {configureScope} from './utils/sentry';\nimport './polyfills.js';\n\n// Init our dayjs plugins\nimport dayjs from 'dayjs';\nimport relativeTimePlugin from 'dayjs/plugin/relativeTime';\ndayjs.extend(relativeTimePlugin);\nimport convertPlugin from '../shared/dayjs-convert';\ndayjs.extend(convertPlugin);\n\nimport React from 'react';\nimport {render} from 'react-dom';\nimport App from './app.jsx';\n\n// This function is used in index.ejs to set up the app\nwindow.bootstrap = () => {\n  if (location.hash.startsWith(\"#!/\")) {\n    window.location.replace(EDITOR_URL + window.location.hash);\n    return;\n  }\n  \n  // Mark that bootstrapping has occurred,\n  // ..and more importantly, use this as an excuse\n  // to call into Sentry so that its initialization\n  // happens early in our JS bundle.\n  configureScope((scope) => {\n    scope.setTag(\"bootstrap\", \"true\");\n  });\n\n  const dom = document.createElement('div');\n  document.body.appendChild(dom);\n  render(<App/>, dom);\n};","/* global CDN_URL */\n\nimport {getLink as getTeamLink} from './team';\nimport {getLink as getUserLink} from './user';\n\nexport const FALLBACK_AVATAR_URL = \"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fcollection-avatar.svg?1541449590339\";\nexport const defaultAvatar = \"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fcollection-avatar.svg?1540389405633\";\n\n// from http://dannyruchtie.com/color-contrast-calculator-with-yiq/\nexport const getContrastTextColor = (hex) =>{\n  if(hex){\n    hex = hex.substring(1);\n    const r = parseInt(hex.substr(0,2),16);\n    const g = parseInt(hex.substr(2,2),16);\n    const b = parseInt(hex.substr(4,2),16);\n    const yiq = ((r*299)+(g*587)+(b*114))/1000;\n    return (yiq >= 128) ? 'black' : 'white';\n  }\n  \n  return 'black';\n};\n\n// from https://stackoverflow.com/a/21648508/1720985\nexport const hexToRgbA = (hex) => {\n  if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){\n    let c = hex.substring(1).split('');\n    if(c.length== 3){\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\n    }\n    c = '0x'+c.join('');\n    return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+',0.5)';\n  }\n  return false;\n};\n\nexport function getAvatarUrl(id) {\n  return `${CDN_URL}/collection-avatar/${id}.png`;\n}\n\nexport function getOwnerLink(collection) {\n  if (collection.team) {\n    return getTeamLink(collection.team);\n  }\n  if (collection.user) {\n    return getUserLink(collection.user);\n  }\n  throw new Error('This collection has no team or user field!');\n}\n\nexport function getLink(collection) {\n  return `${getOwnerLink(collection)}/${collection.url}`;\n}\n\n// Circular dependencies must go below module.exports\n// eventually want to handle whether the collection belongs to a team or a user\n\nexport const defaultAvatarSVG = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<svg width=\"159px\" height=\"147px\" viewBox=\"0 0 159 147\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><!-- Generator: Sketch 52.3 (67297) - http://www.bohemiancoding.com/sketch --><title>collection-avatar</title><desc>Created with Sketch.</desc><defs><polygon id=\"path-1\" points=\"0 0 159 0 159 132 0 132\"></polygon><polygon id=\"path-3\" points=\"0 0 124 0 124 102 0 102\"></polygon></defs><g id=\"collection-avatar\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><polygon id=\"frame\" fill=\"#FFFB98\" points=\"0 147 159 147 159 15 0 15\"></polygon><rect id=\"Rectangle\" stroke=\"#979797\" fill=\"#FFFFFF\" fill-rule=\"nonzero\" x=\"19.5\" y=\"34.5\" width=\"119\" height=\"93\"></rect><polygon class=\"background\" fill=\"#45C1F7\" points=\"17 132 141 132 141 30 17 30\"></polygon><g id=\"picture-frame-copy\"><g id=\"Group-4\" transform=\"translate(0.000000, 15.000000)\"><mask id=\"mask-2\" fill=\"white\"><use xlink:href=\"#path-1\"></use></mask><g id=\"Clip-3\"></g><path d=\"M4.41666667,127.550562 L154.583333,127.550562 L154.583333,4.4494382 L4.41666667,4.4494382 L4.41666667,127.550562 Z M159,136.449438 L-3.55271368e-15,136.449438 C-2.43947222,136.449438 -4.41666667,134.457573 -4.41666667,132 L-4.41666667,4.4408921e-15 C-4.41666667,-2.45757303 -2.43947222,-4.4494382 -3.55271368e-15,-4.4494382 L159,-4.4494382 C161.439472,-4.4494382 163.416667,-2.45757303 163.416667,4.4408921e-15 L163.416667,132 C163.416667,134.457573 161.439472,136.449438 159,136.449438 Z\" id=\"Fill-2\" fill=\"#222222\" mask=\"url(#mask-2)\"></path></g><g id=\"Group-9\" transform=\"translate(63.000000, 0.000000)\" fill=\"#222222\"><path d=\"M5.39511061,14.06 L29.8773227,14.06 C28.7177318,8.99988 23.6693227,5.18 17.6362167,5.18 C11.6031106,5.18 6.55617121,8.99988 5.39511061,14.06 M32.3331864,18.5 L2.93924697,18.5 C1.72086818,18.5 0.734701515,17.50692 0.734701515,16.28 C0.734701515,7.7108 8.31686818,0.74 17.6362167,0.74 C26.9555652,0.74 34.5377318,7.7108 34.5377318,16.28 C34.5377318,17.50692 33.5515652,18.5 32.3331864,18.5\" id=\"Fill-5\"></path><polygon id=\"Fill-7\" points=\"92.9008682 146.683984 73.3215652 130.551984 76.1139894 127.115424 95.6932924 143.247424\"></polygon></g><g id=\"Group-13\" transform=\"translate(17.000000, 30.000000)\"><mask id=\"mask-4\" fill=\"white\"><use xlink:href=\"#path-3\"></use></mask><g id=\"Clip-12\"></g><path d=\"M4.42857143,97.5652174 L119.571429,97.5652174 L119.571429,4.43478261 L4.42857143,4.43478261 L4.42857143,97.5652174 Z M124,106.434783 L-8.8817842e-14,106.434783 C-2.44604762,106.434783 -4.42857143,104.449478 -4.42857143,102 L-4.42857143,-2.48689958e-14 C-4.42857143,-2.44947826 -2.44604762,-4.43478261 -8.8817842e-14,-4.43478261 L124,-4.43478261 C126.446048,-4.43478261 128.428571,-2.44947826 128.428571,-2.48689958e-14 L128.428571,102 C128.428571,104.449478 126.446048,106.434783 124,106.434783 Z\" id=\"Combined-Shape\" fill=\"#222222\" mask=\"url(#mask-4)\"></path><path d=\"\" id=\"Path-2\" stroke=\"#979797\" fill-rule=\"nonzero\" mask=\"url(#mask-4)\"></path></g><g id=\"corners\" transform=\"translate(0.000000, 16.000000)\" fill=\"#222222\"><polygon id=\"Fill-14\" points=\"140.496387 18 138 14.8389049 155.503613 0 158 3.16109514\"></polygon><polygon id=\"Fill-15\" points=\"17.5036132 18 0 3.16109514 2.49638681 0 20 14.8389049\"></polygon><polygon id=\"Fill-16\" points=\"2.74602549 131 0 127.487672 19.2539745 111 22 114.512328\"></polygon></g><path d=\"M19.4882812,94.8593842 C44.7643229,101.507816 67.0872396,101.059896 86.4570312,93.515625 C115.511719,82.1992188 108.802734,83.5839844 116.876953,81.3066406 C124.951172,79.0292969 136.530273,77.3828125 138.008789,78.2841797 C138.068685,83.0810547 138.235352,100.222656 138.508789,129.708984 C70.5751953,130.298828 31.0029297,130.347656 19.7919922,129.855469 C19.9182943,114.765309 19.8170573,103.099947 19.4882812,94.8593842 Z\" id=\"Path-3\" stroke=\"#222222\" stroke-width=\"4\" fill=\"#05D458\" fill-rule=\"nonzero\"></path></g><circle id=\"Oval\" stroke=\"#000000\" stroke-width=\"4\" fill=\"#E8DE1B\" fill-rule=\"nonzero\" cx=\"40.8486328\" cy=\"59.6357422\" r=\"16\"></circle><path d=\"M60.3348254,77.5704551 C58.9993547,80.6825277 55.8689424,82.8666205 52.2201169,82.8666205 C51.0942738,82.8666205 50.017785,82.6586888 49.0281483,82.2797234 C47.8967722,83.2670781 46.4079181,83.8666205 44.7767575,83.8666205 C41.2366977,83.8666205 38.3669121,81.042731 38.3669121,77.5592868 C38.3669121,74.362029 40.7845266,71.7204047 43.9190364,71.3079336 C44.4206293,69.9153121 45.2738944,68.6864115 46.3737706,67.7246127 C46.0662734,66.8112197 45.8994141,65.8316421 45.8994141,64.8125 C45.8994141,59.8419373 49.8685147,55.8125 54.7646484,55.8125 C58.4425588,55.8125 61.5973616,58.0862365 62.9395833,61.3246338 C63.8172067,61.0552858 64.7505289,60.9101562 65.7182989,60.9101562 C70.8661431,60.9101562 75.0392954,65.0165679 75.0392954,70.0820833 C75.0392954,75.1475988 70.8661431,79.2540104 65.7182989,79.2540104 C63.7128485,79.2540104 61.8553227,78.6307987 60.3348254,77.5704551 Z\" id=\"Combined-Shape\" stroke=\"#000000\" stroke-width=\"4\" fill=\"#FFFFFF\" fill-rule=\"nonzero\"></path><path d=\"M121.554267,48.9330178 C121.561107,48.9330067 121.567948,48.9330011 121.57479,48.9330011 C128.315872,48.9330011 133.780598,54.3103309 133.780598,60.9436034 C133.780598,67.5768759 128.315872,72.9542057 121.57479,72.9542057 C118.736067,72.9542057 116.123683,72.0006337 114.050407,70.4012578 C112.497386,71.7531025 110.455645,72.5736517 108.21914,72.5736517 C103.3565,72.5736517 99.4145508,68.6947458 99.4145508,63.9098727 C99.4145508,62.7888762 99.6309116,61.7176053 100.024784,60.7342885 C98.6643533,59.5776974 97.8034355,57.8676186 97.8034355,55.9596774 C97.8034355,52.4762332 100.673221,49.6523438 104.213281,49.6523438 C104.670308,49.6523438 105.116163,49.69941 105.546114,49.7888854 C106.871499,46.5129316 110.045383,44.2060547 113.75,44.2060547 C117.122846,44.2060547 120.055763,46.1182434 121.554267,48.9330178 Z\" id=\"Combined-Shape-Copy\" stroke=\"#000000\" stroke-width=\"4\" fill=\"#FFFFFF\" fill-rule=\"nonzero\"></path><path d=\"M82.3606089,42.5137208 C86.0065614,42.5895456 88.9384448,45.5215419 88.9384448,49.1273647 C88.9384448,52.7808104 85.928606,55.7425133 82.2157816,55.7425133 C79.6428183,55.7425133 77.4074568,54.3201849 76.2774254,52.2309783 C75.8404163,52.3576604 75.3778461,52.425639 74.8991407,52.425639 C72.2100723,52.425639 70.0301517,50.2805815 70.0301517,47.634519 C70.0301517,44.9884565 72.2100723,42.843399 74.8991407,42.843399 C75.2392876,42.843399 75.5712879,42.8777207 75.8917602,42.9430366 C76.3155392,41.4927371 77.63826,40.4348278 79.2043688,40.4348278 C80.6113173,40.4348278 81.8218341,41.2886374 82.3606089,42.5137208 Z\" id=\"Combined-Shape-Copy-2\" stroke=\"#000000\" stroke-width=\"4\" fill=\"#FFFFFF\" fill-rule=\"nonzero\" transform=\"translate(79.484298, 48.088671) rotate(-27.000000) translate(-79.484298, -48.088671) \"></path></g>\n</svg>`;","/* global CDN_URL EDITOR_URL PROJECTS_DOMAIN */\n\nexport const FALLBACK_AVATAR_URL = \"https://cdn.glitch.com/c53fd895-ee00-4295-b111-7e024967a033%2Ffallback-project-avatar.svg?1528812220123\";\n\nexport function getAvatarUrl(id, cdnUrl=CDN_URL) {\n  return `${cdnUrl}/project-avatar/${id}.png`;\n}\n\nexport function getLink({domain}) {\n  return `/~${domain}`;\n}\n\nexport function getShowUrl(domain, projectsDomain=PROJECTS_DOMAIN) {\n  return `//${domain}.${projectsDomain}`;\n}\n\nexport function getEditorUrl(domain, path, line, character, editorUrl=EDITOR_URL) {\n  if (path && !isNaN(line) && !isNaN(character)) {\n    return `${editorUrl}#!/${domain}?path=${path}:${line}:${character}`;\n  }\n  return `${editorUrl}#!/${domain}`;\n}\n\nexport function getRemixUrl(domain, editorUrl=EDITOR_URL) {\n  return `${editorUrl}#!/remix/${domain}`;\n}\n","/* globals CDN_URL */\nconst cacheBuster = Math.floor(Math.random() * 1000);\n\nexport const DEFAULT_TEAM_AVATAR = \"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-team-avatar.svg?1503510366819\";\n\nexport const getLink = ({url}) => {\n  return `/@${url}`;\n};\n\nexport const getAvatarUrl = ({id, hasAvatarImage, cache=cacheBuster, size='large'}) => {\n  const customImage = `${CDN_URL}/team-avatar/${id}/${size}?${cache}`;\n  return hasAvatarImage ? customImage : DEFAULT_TEAM_AVATAR;\n};\n\nexport const getAvatarStyle = ({id, hasAvatarImage, backgroundColor, cache, size}) => {\n  const image = getAvatarUrl({id, hasAvatarImage, cache, size});\n  if (hasAvatarImage) {\n    return {\n      backgroundImage: `url('${image}')`,\n    };\n  }\n  return {\n    backgroundColor,\n    backgroundImage: `url('${image}')`,\n  };\n};\n\nexport const getCoverUrl = ({id, hasCoverImage, cache=cacheBuster, size='large'}) => {\n  const customImage = `${CDN_URL}/team-cover/${id}/${size}?${cache}`;\n  const defaultImage = \"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-cover-wide.svg?1503518400625\";\n  return hasCoverImage ? customImage : defaultImage;\n};\n\nexport const getProfileStyle = ({id, hasCoverImage, coverColor, cache, size}) => {\n  const image = getCoverUrl({id, hasCoverImage, cache, size});\n  return {\n    backgroundColor: coverColor,\n    backgroundImage: `url('${image}')`,\n  };\n};\n","/* globals CDN_URL */\nconst cacheBuster = Math.floor(Math.random() * 1000);\n\nexport const ANON_AVATAR_URL = \"https://cdn.glitch.com/f6949da2-781d-4fd5-81e6-1fdd56350165%2Fanon-user-on-project-avatar.svg?1488556279399\";\n\nexport function getDisplayName({login, name}) {\n  if (name) {\n    return name;\n  } else if (login) {\n    return `@${login}`;\n  }\n  return 'Anonymous User';\n}\n\nexport function getLink({id, login}) {\n  if (login) {\n    return `/@${login}`;\n  }\n  return `/user/${id}`;\n}\n\nexport function getAvatarUrl({login, avatarUrl}) {\n  if (login && avatarUrl) {\n    return avatarUrl;\n  }\n  return ANON_AVATAR_URL;\n}\n\nexport function getAvatarThumbnailUrl({login, avatarThumbnailUrl}) {\n  if (login && avatarThumbnailUrl) {\n    return avatarThumbnailUrl;\n  }\n  return ANON_AVATAR_URL;\n}\n\nexport function getAvatarStyle({avatarUrl, color}) {\n  return {\n    backgroundColor: color,\n    backgroundImage: `url('${avatarUrl || ANON_AVATAR_URL}')`,\n  };\n}\n\nexport function getProfileStyle({id, hasCoverImage, coverColor, cache=cacheBuster, size='large'}) {\n  const customImage = `${CDN_URL}/user-cover/${id}/${size}?${cache}`;\n  const defaultImage = \"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-cover-wide.svg?1503518400625\";\n  return {\n    backgroundColor: coverColor,\n    backgroundImage: `url('${hasCoverImage ? customImage : defaultImage}')`,\n  };\n}\n","import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'https://friendly-words.glitch.me/',\n});\n\nconst getData = async (name) => {\n  const {data} = await api.get(name);\n  return data;\n};\n\nexport const getPredicates = () => getData('predicates');\nexport const getObjects = () => getData('objects');\nexport const getCollections = () => getData('collections');\nexport const getCollectionPairs = () => getData('collection-pairs');\n\nconst getFirst = async (name) => {\n  const data = await getData(name);\n  return data[0];\n};\n\nexport const getPredicate = () => getFirst('predicates');\nexport const getWordPair = () => getFirst('word-pairs');\nexport const getTeamPair = () => getFirst('team-pairs');\nexport const getCollectionPair = () => getFirst('collection-pairs');\nexport const getCollection = () => getFirst('collections');","/// Polyfills that aren't done using babel go here\n// In general we want to manage them with babel\n\nimport 'details-element-polyfill';\n\nif (!String.prototype.trimStart) {\n  String.prototype.trimStart = String.prototype.trimLeft;\n}\nif (!String.prototype.trimEnd) {\n  String.prototype.trimEnd = String.prototype.trimRight;\n}","/* global analytics */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {isFunction, omit} from 'lodash';\nimport {captureException} from '../utils/sentry';\n\nconst Context = React.createContext({properties: {}, context: {}});\n\nconst resolveProperties = (properties={}, inheritedProperties) => {\n  if (isFunction(properties)) {\n    return properties(inheritedProperties);\n  }\n  return {...inheritedProperties, ...properties};\n};\n\n// stick this in the tree to add a property value to any tracking calls within it\nexport const AnalyticsContext = ({children, properties, context}) => (\n  <Context.Consumer>\n    {inherited => (\n      <Context.Provider value={{\n        properties: resolveProperties(properties, inherited.properties),\n        context: resolveProperties(context, inherited.context),\n      }}>\n        {children}\n      </Context.Provider>\n    )}\n  </Context.Consumer>\n);\nAnalyticsContext.propTypes = {\n  children: PropTypes.node.isRequired,\n  properties: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n  context: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n};\n\n// this gives you a generic track function that pulls in inherited properties\nexport const AnalyticsTracker = ({children}) => (\n  <Context.Consumer>\n    {inherited => children((name, properties, context) => {\n      try {\n        analytics.track(name, resolveProperties(properties, inherited.properties), resolveProperties(context, inherited.context));\n      } catch (error) {\n        captureException(error);\n      }\n    })}\n  </Context.Consumer>\n);\nAnalyticsTracker.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\n// this is the equivalent of doing <AnalyticsTracker>{track => <asdf onClick={() => track('asdf')}/></AnalyticsTracker>\n// this won't work for links that do a full page load, because the request will get cancelled by the nav\n// use the TrackedExternalLink for that, because it will stall the page for a moment and let the request finish\nexport const TrackClick = ({children, name, properties, context}) => (\n  <AnalyticsTracker>\n    {track => React.Children.map(children, child => {\n      function onClick(...args) {\n        track(name, properties, context);\n        if (child.props.onClick) {\n          return child.props.onClick(...args);\n        }\n      }\n      return React.cloneElement(child, {onClick});\n    })}\n  </AnalyticsTracker>\n);\nTrackClick.propTypes = {\n  children: PropTypes.node.isRequired,\n  name: PropTypes.string.isRequired,\n  properties: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n  context: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n};\n\n// this pulls in segment's trackLink, which stalls the page load until the analytics request is done\n// it forces a full page load at the end, so don't use it for links within the community site\nclass TrackedExternalLinkWithoutContext extends React.Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n  componentDidMount() {\n    try {\n      analytics.trackLink(this.ref.current, () => this.props.name, () => this.props.properties);\n    } catch (error) {\n      captureException(error);\n    }\n  }\n  render() {\n    const {children, to, ...props} = this.props;\n    return <a href={to} {...omit(props, ['name', 'properties'])} ref={this.ref}>{children}</a>;\n  }\n}\nexport const TrackedExternalLink = ({children, name, properties, to, ...props}) => (\n  <Context.Consumer>\n    {inherited => (\n      <TrackedExternalLinkWithoutContext to={to} name={name} properties={resolveProperties(properties, inherited.properties)} {...props}>\n        {children}\n      </TrackedExternalLinkWithoutContext>\n    )}\n  </Context.Consumer>\n);\nTrackedExternalLink.propTypes = {\n  children: PropTypes.node.isRequired,\n  name: PropTypes.string.isRequired,\n  properties: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.func,\n  ]),\n  to: PropTypes.string.isRequired,\n};","import React from 'react';\n\nimport categories from '../curated/categories';\n\nimport Link from './includes/link.jsx';\n  \nconst Categories = () => (\n  <section className=\"categories\" role=\"navigation\">\n    <h2>More Ideas</h2>\n    <ul>\n      { categories.map(({avatarUrl, color, id, name, url}) => (\n        <li key={id}>\n          <Link className=\"category-box-link\" to={`/${url}`}>\n            <div className=\"category-box centered\" style={{backgroundColor: color}}>\n              <img src={avatarUrl} alt={name}/>\n            </div>\n            <div className=\"category-box-label centered\" style={{backgroundColor: color}}>{name}</div>\n          </Link>\n        </li>\n      ))}\n    </ul>\n  </section>\n);\n\nexport default Categories;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {CurrentUserConsumer} from './current-user.jsx';\nimport ErrorHandlers from './error-handlers.jsx';\n\nclass CollectionEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      ...props.initialCollection\n    };\n  }\n  \n  userIsAuthor(){\n    if (!this.props.currentUser) return false;\n    const currentUserId = this.props.currentUser.id;\n    if (this.state.user) {\n      return this.state.user.id === currentUserId;\n    }\n    if (this.state.team) {\n      return this.state.team.users.some(user => user.id === currentUserId);\n    }\n    return false;\n  }\n\n  async updateFields(changes) {\n    const {data} = await this.props.api.patch(`collections/${this.state.id}`, changes);\n    this.setState(data);\n  }\n  \n  async addProjectToCollection(project, collection) {\n    if(collection.id == this.state.id){\n      // add project to collection page\n      this.setState(({projects}) => ({\n        projects: [...projects, project],\n      }));\n    }\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n  }\n  \n  async removeProjectFromCollection(project) {\n    await this.props.api.patch(`collections/${this.state.id}/remove/${project.id}`);\n    this.setState(({projects}) => ({\n      projects: projects.filter(p => p.id !== project.id),\n    }));\n  }\n  \n  async deleteCollection(){\n    await this.props.api.delete(`/collections/${this.state.id}`);\n  }\n\n  render() {\n    const {handleError, handleErrorForInput} = this.props;\n    const funcs = {\n      addProjectToCollection: (project, collection) => this.addProjectToCollection(project, collection).catch(handleError),\n      removeProjectFromCollection: project => this.removeProjectFromCollection(project).catch(handleError),\n      deleteCollection: () => this.deleteCollection().catch(handleError),\n      updateNameAndUrl: ({name, url}) => this.updateFields({name, url}).catch(handleErrorForInput),\n      updateDescription: description => this.updateFields({description}).catch(handleError),\n      updateColor: color => this.updateFields({coverColor: color}),\n    };\n    return this.props.children(this.state, funcs, this.userIsAuthor());\n  }\n}\nCollectionEditor.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  handleError: PropTypes.func.isRequired,\n  handleErrorForInput: PropTypes.func.isRequired,\n  initialCollection: PropTypes.object.isRequired,\n};\n\nconst CollectionEditorContainer = ({api, children, initialCollection}) => (\n  <ErrorHandlers>\n    {errorFuncs => (\n      <CurrentUserConsumer>\n        {(currentUser) => (\n          <CollectionEditor {...{api, currentUser, initialCollection}} {...errorFuncs}>\n            {children}\n          </CollectionEditor>\n        )}\n      </CurrentUserConsumer>\n    )}\n  </ErrorHandlers>\n);\nCollectionEditorContainer.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  initialCollection: PropTypes.object.isRequired,\n};\n\nexport default CollectionEditorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Pluralize from 'react-pluralize';\n\nimport {TruncatedMarkdown} from './includes/markdown.jsx';\nimport CollectionOptionsContainer from \"./pop-overs/collection-options-pop.jsx\";\nimport { CollectionLink } from './includes/link';\nimport Loader from './includes/loader';\nimport CollectionAvatar from './includes/collection-avatar.jsx';\n\nimport {getAvatarUrl} from '../models/project.js';\n\nimport {getContrastTextColor, hexToRgbA} from '../models/collection';\n\nconst ProjectsPreview = ({projects}) => {\n  \n  return (\n    <>\n      <ul className=\"projects-preview\">\n        { projects.slice(0,3).map(project => (\n          <li key={project.id} className={\"project-container \" + (project.private ? \"private\" : '')}>\n            <img className=\"avatar\" src={getAvatarUrl(project.id)} alt={`Project avatar for ${project.domain}`}/>\n            <div className=\"project-name\">{project.domain}</div>\n            <div className=\"project-badge private-project-badge\" aria-label=\"private\"></div>\n          </li>\n        )) }\n      </ul>\n      <div className=\"collection-link\">\n        View <Pluralize count={projects.length} singular=\"project\"/> →\n      </div>\n    </>\n  );\n};\n\nProjectsPreview.propTypes = {\n  projects: PropTypes.any.isRequired,\n};\n\nclass CollectionItem extends React.Component{\n  constructor(props){\n    super(props);\n  }\n  \n  render(){\n    const {collection, deleteCollection, isAuthorized} = this.props;\n    return (\n      <li>\n        {isAuthorized && (\n          <CollectionOptionsContainer collection={collection} deleteCollection={deleteCollection}></CollectionOptionsContainer>\n        )}\n\n        {(collection &&\n          <CollectionLink collection={collection} className=\"button-area\">\n            <div className={\"collection\" + (isAuthorized ? \" authorized\" : \"\")} id={\"collection-\" + collection.id}>\n              <div className=\"collection-container\">\n                <div className=\"collection-info\" style={{backgroundColor: collection.coverColor}}> \n                  <div className=\"avatar-container\">\n                    <div className=\"avatar\">\n                      <CollectionAvatar backgroundColor={hexToRgbA(collection.coverColor)} collectionId={collection.id}/>\n                    </div>\n                  </div>\n                  <div className=\"collection-name-description\">\n                    <div className=\"button\">\n                      <span className=\"project-badge private-project-badge\" aria-label=\"private\"></span>\n                      <div className=\"project-name\">{collection.name}</div>\n                    </div>\n                    <div className=\"description\" style={{color: getContrastTextColor(collection.coverColor)}}><TruncatedMarkdown length={96}>{collection.description}</TruncatedMarkdown></div>\n                  </div>\n\n                  <div className=\"overflow-mask\"></div>\n                </div>\n\n                {collection.projects ? (collection.projects.length > 0\n                  ? <ProjectsPreview projects={collection.projects} color={collection.coverColor} collection={collection}/>\n                  :\n                  <div className=\"projects-preview empty\">\n                    {(isAuthorized\n                      ? <p>This collection is empty – add some projects <span role=\"img\" aria-label=\"\">☝️</span></p>\n                      : <p>No projects to see in this collection just yet.</p>\n                    )}\n                  </div>\n                ) : <div className=\"collection-link\"><Loader/></div>}\n              </div>\n            </div>\n          </CollectionLink>             \n        )}\n      </li>\n    );\n  }\n}\n\nCollectionItem.propTypes = {\n  collection: PropTypes.object.isRequired,\n  isAuthorized: PropTypes.bool.isRequired,\n  deleteCollection: PropTypes.func,\n};\n\nexport default CollectionItem;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Redirect} from 'react-router-dom';\nimport {TrackClick} from './analytics';\nimport CollectionItem from \"./collection-item.jsx\";\nimport {defaultAvatar, getLink} from '../models/collection';\nimport {getCollections, getPredicate} from '../models/words';\nimport Loader from './includes/loader.jsx';\n\nimport randomColor from 'randomcolor';\n\nimport {kebabCase, orderBy} from 'lodash';\n\n\nclass CollectionsList extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      deletedCollectionIds: [],\n    };\n    this.deleteCollection = this.deleteCollection.bind(this);\n  }\n     \n  async deleteCollection(id) {\n    this.setState( \n      ({deletedCollectionIds}) => ({\n        deletedCollectionIds: [...deletedCollectionIds, id]\n      })\n    );\n    await this.props.api.delete(`/collections/${id}`);\n  }\n  \n  render() {\n    const {title, api, isAuthorized, maybeCurrentUser, maybeTeam} = this.props;\n    const deleteCollection = this.deleteCollection;\n    const collections = this.props.collections.filter(({id}) => !this.state.deletedCollectionIds.includes(id));\n    const hasCollections = !!collections.length;\n    const canMakeCollections = isAuthorized && !!maybeCurrentUser;\n    \n    if(!hasCollections && !canMakeCollections) {\n      return null;\n    }\n    return (\n      <article className=\"collections\">\n        <h2>{title}</h2>\n        {canMakeCollections &&\n          <>\n            <CreateCollectionButton {...{api, currentUser: maybeCurrentUser, maybeTeam}}/>\n            {!hasCollections && <CreateFirstCollection {...{api, currentUser: maybeCurrentUser}}/>}\n          </>\n        }\n        <CollectionsUL {...{collections, api, isAuthorized, deleteCollection}}/>\n      </article>\n    );\n  }\n}\n\nCollectionsList.propTypes = {\n  collections: PropTypes.array.isRequired,\n  maybeCurrentUser: PropTypes.object,\n  maybeTeam: PropTypes.object,\n  title: PropTypes.node.isRequired,\n  api: PropTypes.func.isRequired,\n  isAuthorized: PropTypes.bool.isRequired,\n};\n\nconst CreateFirstCollection = () => (\n  <div className=\"create-first-collection\">\n    <img src=\"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fpsst-pink.svg?1541086338934\" alt=\"\"/>\n    <p className=\"placeholder\">Create collections to organize your favorite projects.</p><br/>\n  </div>\n);\n\nexport class CreateCollectionButton extends React.Component{\n  constructor(props){\n    super(props);\n    this.state={\n      shouldRedirect: false,\n      error: false,\n      loading: false,\n      newCollectionUrl: \"\",\n    };\n    this.createCollection = this.createCollection.bind(this);\n  }\n  \n  async postCollection(collectionSynonym, predicate){\n    const name = [predicate, collectionSynonym].join('-');\n    const description = `A ${collectionSynonym} of projects that does ${predicate} things`;\n    const url = kebabCase(name);\n    \n    // defaults\n    const avatarUrl = defaultAvatar;\n    \n    // get a random color\n    const coverColor = randomColor({luminosity: 'light'});\n    \n    // set the team id if there is one\n    const teamId = this.props.maybeTeam ? this.props.maybeTeam.id : undefined;\n\n    const {data} = await this.props.api.post('collections', {\n      name,\n      description,\n      url,\n      avatarUrl,\n      coverColor,\n      teamId,\n    });\n    \n    if(data && data.url){\n      if (this.props.maybeTeam) {\n        data.team = this.props.maybeTeam;\n      } else {\n        data.user = this.props.currentUser;\n      }\n      const newCollectionUrl = getLink(data);\n      this.setState({newCollectionUrl, shouldRedirect: true});\n      return true;\n    }\n    return false;\n  }\n  \n  async generateNames() {\n    let collectionSynonyms = [\"mix\",\"bricolage\",\"playlist\",\"assortment\",\"potpourri\",\"melange\",\"album\",\"collection\",\"variety\",\"compilation\"];\n    let predicate = \"radical\";\n\n    try {\n      // get collection names\n      collectionSynonyms = await getCollections();\n      predicate = await getPredicate();\n    } catch(error) {\n      // If there's a failure, we'll stick with our defaults.\n    }\n    \n    return [collectionSynonyms, predicate];\n  }\n  \n  async createCollection(){\n    this.setState({loading: true});\n    \n    const [collectionSynonymns, predicate] = await this.generateNames();\n    let creationSuccess = false;\n    for(let synonym of collectionSynonymns){\n      try{\n        creationSuccess = await this.postCollection(synonym, predicate);\n        if(creationSuccess) {\n          break;\n        }\n      } catch(error){\n        // Try again.\n      }\n    }\n    if(!creationSuccess) {\n      this.setState({error: \"Unable to create collection :-(\"});\n    }\n  }\n  \n  render(){\n    if(this.state.shouldRedirect){\n      return <Redirect to={this.state.newCollectionUrl} push={true}/>;\n    }\n    if(this.state.loading){\n      return (\n        <div id=\"create-collection-container\">\n          <Loader />\n        </div>\n      );\n    }\n    return (\n      <div id=\"create-collection-container\">\n        <TrackClick name=\"Create Collection clicked\">\n          <button className=\"button\" id=\"create-collection\" onClick={() => this.createCollection()}>\n            Create Collection\n          </button>\n        </TrackClick>\n      </div>\n    );\n  }\n}\n\nCreateCollectionButton.propTypes = {\n  api: PropTypes.any.isRequired,\n  currentUser: PropTypes.object.isRequired,\n  maybeTeam: PropTypes.object,\n};  \n\nexport const CollectionsUL = ({collections, deleteCollection, api, isAuthorized}) => {\n  // order by updatedAt date\n  const orderedCollections = orderBy(collections, collection => collection.updatedAt).reverse();\n  return (\n    <ul className=\"collections-container\">\n      {/* FAVORITES COLLECTION CARD - note this currently references empty favorites category in categories.js\n        <CollectionItem key={null} collection={null} api={api} isAuthorized={isAuthorized}></CollectionItem>\n      */}\n      \n      { orderedCollections.map(collection => (\n        <CollectionItem key={collection.id} {...{collection, api, isAuthorized, deleteCollection}}></CollectionItem>\n      ))}\n    </ul>\n  );\n};\n\nCollectionsUL.propTypes = {\n  api: PropTypes.func.isRequired,\n  collections: PropTypes.array.isRequired,\n  isAuthorized: PropTypes.bool.isRequired,\n  deleteCollection: PropTypes.func,\n};\n\n\nexport default CollectionsList;","/* globals API_URL */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\n\nimport {configureScope, captureException, captureMessage} from '../utils/sentry';\nimport LocalStorage from './includes/local-storage.jsx';\n\nconst {Provider, Consumer} = React.createContext();\n\n// Default values for all of the user fields we need you to have\n// We always generate a 'real' anon user, but use this until we do\nconst defaultUser = {\n  id: 0,\n  login: null,\n  name: null,\n  description: '',\n  color: '#aaa',\n  avatarUrl: null,\n  avatarThumbnailUrl: null,\n  hasCoverImage: false,\n  coverColor: null,\n  emails: [],\n  features: [],\n  projects: [],\n  teams: [],\n  collections: [],\n};\n\nfunction identifyUser(user) {\n  if (user) {\n    console.log(\"👀 current user is\", user);\n    console.log(\"🌈 login\", user.login, user.id);\n  } else {\n    console.log(\"👻 logged out\");\n  }\n  try {\n    const analytics = window.analytics;\n    if (analytics && user && user.login) {\n      const emailObj = Array.isArray(user.emails) && user.emails.find((email) => email.primary);\n      const email = emailObj && emailObj.email;\n      analytics.identify(user.id, {\n        name: user.name,\n        login: user.login,\n        email,\n        created_at: user.createdAt,\n      }, {groupId: '0'});\n    }\n    if (user) {\n      configureScope((scope) => {\n        scope.setUser({\n          id: user.id,\n          login: user.login,\n        });\n      });\n    } else {\n      configureScope((scope) => {\n        scope.setUser({\n          id: null,\n          login: null,\n        });\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    captureException(error);\n  }\n}\n\n// Test if two user objects reference the same person\nfunction usersMatch(a, b) {\n  if (a && b && a.id === b.id && a.persistentToken === b.persistentToken) {\n    return true;\n  } else if (!a && !b) {\n    return true;\n  }\n  return false;\n}\n\n// This takes sharedUser and cachedUser\n// sharedUser is stored in localStorage['cachedUser']\n// cachedUser is stored in localStorage['community-cachedUser']\n// sharedUser syncs with the editor and is authoritative on id and persistentToken\n// cachedUser mirrors GET /users/{id} and is what we actually display\n\nclass CurrentUserManager extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fetched: false, // Set true on first complete load\n      working: false, // Used to prevent simultaneous loading\n    };\n  }\n  \n  api() {\n    if (this.props.sharedUser) {\n      return axios.create({\n        baseURL: API_URL,\n        headers: {\n          Authorization: this.props.sharedUser.persistentToken,\n        },\n      });\n    } \n    return axios.create({\n      baseURL: API_URL,\n    });\n  }\n  \n  async getSharedUser() {\n    try {\n      const {data: {user}} = await this.api().get(`boot?latestProjectOnly=true`);\n      return user;\n    } catch (error) {\n      if (error.response && error.response.status === 401) {\n        return undefined;\n      }\n      throw error;\n    }\n  }\n  \n  async getCachedUser() {\n    const {sharedUser} = this.props;\n    if (!sharedUser) return undefined;\n    if (!sharedUser.id || !sharedUser.persistentToken) return 'error';\n    try {\n      const {data} = await this.api().get(`users/${sharedUser.id}`);\n      if (!usersMatch(sharedUser, data)) {\n        return 'error';\n      }\n      return data;\n    } catch (error) {\n      if (error.response && (error.response.status === 401 || error.response.status === 404)) {\n        // 401 means our token is bad, 404 means the user doesn't exist\n        return 'error';\n      }\n      throw error;\n    }\n  }\n  \n  async load() {\n    if (this.state.working) return;\n    this.setState({working: true});\n    const {sharedUser, cachedUser} = this.props;\n    if (!usersMatch(sharedUser, cachedUser)) {\n      this.props.setCachedUser(undefined);\n    }\n    if (sharedUser) {\n      const newCachedUser = await this.getCachedUser();\n      if (newCachedUser === 'error') {\n        // Sounds like our shared user is bad\n        // Fix it and componentDidUpdate will reload\n        this.setState({fetched: false});\n        const newSharedUser = await this.getSharedUser();\n        this.props.setSharedUser(newSharedUser);\n        console.warn('Fixed shared cachedUser from', sharedUser, 'to', newSharedUser);\n        captureMessage('Invalid cachedUser', {extra: {\n          from: sharedUser || null,\n          to: newSharedUser || null,\n        }});\n      } else {\n        this.props.setCachedUser(newCachedUser);\n        this.setState({fetched: true});\n      }\n    } else {\n      const {data} = await this.api().post('users/anon');\n      this.props.setSharedUser(data);\n    }\n    this.setState({working: false});\n  }\n  \n  componentDidMount() {\n    identifyUser(this.props.cachedUser);\n    this.load();\n  }\n  \n  componentDidUpdate(prev) {\n    const {cachedUser, sharedUser} = this.props;\n    \n    if (!usersMatch(cachedUser, prev.cachedUser)) {\n      identifyUser(cachedUser);\n    }\n    \n    if (!usersMatch(cachedUser, sharedUser) || !usersMatch(sharedUser, prev.sharedUser)) {\n      this.load();\n    }\n    \n    // hooks for easier debugging\n    window.currentUser = cachedUser;\n    window.api = this.api();\n  }\n  \n  render() {\n    const {children, sharedUser, cachedUser, setSharedUser, setCachedUser} = this.props;\n    return children({\n      api: this.api(),\n      currentUser: {...defaultUser, ...sharedUser, ...cachedUser},\n      fetched: !!cachedUser && this.state.fetched,\n      reload: () => this.load(),\n      login: user => setSharedUser(user),\n      update: changes => setCachedUser({...cachedUser, ...changes}),\n      clear: () => setSharedUser(undefined),\n    });\n  }\n}\nCurrentUserManager.propTypes = {\n  sharedUser: PropTypes.shape({\n    id: PropTypes.number,\n    persistentToken: PropTypes.string,\n  }),\n  cachedUser: PropTypes.object,\n  setSharedUser: PropTypes.func.isRequired,\n  setCachedUser: PropTypes.func.isRequired,\n};\n\nexport const CurrentUserProvider = ({children}) => (\n  <LocalStorage name=\"community-cachedUser\" default={null}>\n    {(cachedUser, setCachedUser, loadedCachedUser) => (\n      <LocalStorage name=\"cachedUser\" default={null}>\n        {(sharedUser, setSharedUser, loadedSharedUser) => (loadedSharedUser && loadedCachedUser &&\n          <CurrentUserManager sharedUser={sharedUser} setSharedUser={setSharedUser} cachedUser={cachedUser} setCachedUser={setCachedUser}>\n            {({api, ...props}) => (\n              <Provider value={props}>\n                {children(api)}\n              </Provider>\n            )}\n          </CurrentUserManager>\n        )}\n      </LocalStorage>\n    )}\n  </LocalStorage>\n);\nCurrentUserProvider.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nexport const CurrentUserConsumer = (props) => (\n  <Consumer>\n    {({currentUser, fetched, ...funcs}) => props.children(currentUser, fetched, funcs, props)}\n  </Consumer>\n);\n\nCurrentUserConsumer.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nexport function normalizeUser(user, currentUser) {\n  return user.id === (currentUser && currentUser.id) ? currentUser : user;\n}\n\nexport function normalizeUsers(users, currentUser) {\n  return users.map(user => normalizeUser(user, currentUser));\n}\n\nexport function normalizeProject({users, ...project}, currentUser) {\n  return {users: users ? normalizeUsers(users, currentUser) : [], ...project};\n}\n\nexport function normalizeProjects(projects, currentUser) {\n  return projects.map(project => normalizeProject(project, currentUser));\n}","// deleted projects is a little strange\n// it loads the projects from the api, but expects them to be stored elsewhere\n// so it takes an initially empty list of projects and a function to fill it once they load\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getAvatarUrl} from '../models/project';\n\nimport {TrackClick} from './analytics';\nimport Loader from './includes/loader';\n\n/* globals Set */\n\nfunction clickUndelete(event, callback) {\n  const node = event.target.closest('li');\n  node.addEventListener('animationend', callback, {once: true});\n  node.classList.add('slide-up');\n}\n\nconst DeletedProject = ({id, domain, onClick}) => (\n  <TrackClick name=\"Undelete clicked\">\n    <button className=\"button-unstyled\" onClick={evt => clickUndelete(evt, onClick)}>\n      <div className=\"deleted-project\">\n        <img className=\"avatar\" src={getAvatarUrl(id)} alt=\"\"/>\n        <div className=\"deleted-project-name\">{domain}</div>\n        <div className=\"button button-small\">Undelete</div>\n      </div>\n    </button>\n  </TrackClick>\n);\nDeletedProject.propTypes = {\n  id: PropTypes.string.isRequired,\n  domain: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nconst DeletedProjectsList = ({deletedProjects, undelete}) => (\n  <ul className=\"deleted-projects-container\">\n    {deletedProjects.map(({id, domain}) => (\n      <li key={id} className=\"deleted-project-container\">\n        <DeletedProject\n          id={id} domain={domain}\n          onClick={() => undelete(id)}\n        />\n      </li>\n    ))}\n  </ul>\n);\nDeletedProjectsList.propTypes = {\n  deletedProjects: PropTypes.array.isRequired,\n  undelete: PropTypes.func.isRequired,\n};\n\nexport default class DeletedProjects extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      shown: false,\n      loaded: false,\n    };\n    this.clickShow = this.clickShow.bind(this);\n    this.clickHide = this.clickHide.bind(this);\n  }\n  \n  clickHide() {\n    this.setState({\n      shown: false,\n      loaded: false,\n    });\n  }\n  \n  async clickShow() {\n    this.setState({shown: true});\n    try {\n      const {data} = await this.props.api.get('user/deleted-projects');\n      this.props.setDeletedProjects(data);\n      this.setState({loaded: true});\n    } catch (e) {\n      this.setState({shown: false});\n    }\n  }\n  \n  renderContents() {\n    if (!this.state.shown) {\n      return <button className=\"button button-tertiary\" onClick={this.clickShow}>Show</button>;\n    } else if (!this.state.loaded) {\n      return <Loader/>;\n    } else if (!this.props.deletedProjects.length) {\n      return 'nothing found';\n    }\n    return (\n      <>\n        <DeletedProjectsList {...this.props}/>\n        <button className=\"button button-tertiary\" onClick={this.clickHide}>Hide Deleted Projects</button>\n      </>\n    );\n  }\n  \n  render() {\n    return (\n      <article className=\"deleted-projects\">\n        <h2>Deleted Projects <span className=\"emoji bomb emoji-in-title\"></span></h2>\n        {this.renderContents()}\n      </article>\n    );\n  }\n}\nDeletedProjects.propTypes = {\n  api: PropTypes.any.isRequired,\n  deletedProjects: PropTypes.array.isRequired,\n  setDeletedProjects: PropTypes.func.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport FeaturedProjectOptionsPop from \"./pop-overs/featured-project-options-pop.jsx\";\nimport {EditButton, RemixButton} from './includes/project-actions.jsx';\nimport Embed from './includes/embed.jsx';\nimport ReportButton from './pop-overs/report-abuse-pop.jsx';\nimport AddProjectToCollection from './includes/add-project-to-collection.jsx';\nimport {TrackClick} from './analytics';\n\nconst EntityPageFeaturedProject = ({api, isAuthorized, currentUser, unfeatureProject, addProjectToCollection, featuredProject}) => {\n  \n  const reportBtn = \n    <div className=\"buttons buttons-left\">\n      <ReportButton className=\"button-small\" reportedType=\"project\" reportedModel={featuredProject} />\n    </div>;\n  \n  const featuredTitle = (\n    <>\n      Featured Project\n      <span className=\"emoji clapper emoji-in-title\"></span>\n    </>\n  );\n  \n  return(\n    <>\n      <section id=\"featured-project-embed\">      \n        <h2>{featuredTitle}</h2>\n      \n        {isAuthorized && <FeaturedProjectOptionsPop api={api} unfeatureProject={unfeatureProject}/>}\n        <Embed domain={featuredProject.domain}/>\n        \n        {isAuthorized ?\n          <div className=\"buttons buttons-left\">\n            <EditButton className=\"button-small button-edit\" name={featuredProject.id} isMember={isAuthorized}/>\n          </div>\n          : reportBtn\n        }\n\n        <div className=\"buttons buttons-right\">\n\n          {currentUser.login && <AddProjectToCollection className=\"button-small\" api={api} currentUser={currentUser} project={featuredProject} fromProject={true} addProjectToCollection={addProjectToCollection}/>}\n          \n          <TrackClick name=\"Click Remix\" properties={{baseProjectId: featuredProject.id, baseDomain: featuredProject.domain}}>\n            <RemixButton className=\"button-small\"\n              name={featuredProject.domain} isMember={isAuthorized}\n            />\n          </TrackClick>\n        </div>\n      </section>\n    </>\n  );\n};\n\nEntityPageFeaturedProject.propTypes = {\n  api: PropTypes.func,\n  isAuthorized: PropTypes.bool.isRequired,\n  currentUser: PropTypes.object.isRequired,\n  unfeatureProject: PropTypes.func,\n  featuredProject: PropTypes.object,\n  addProjectToCollection: PropTypes.func,\n};\n\nexport default EntityPageFeaturedProject;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ProjectsList from './projects-list.jsx';\n\nconst EntityPageProjects = ({api, projects, currentUser, isAuthorized, addPin, removePin, projectOptions}) => {\n  const pinnedTitle = (\n    <>\n      Pinned Projects\n      <span className=\"emoji pushpin emoji-in-title\"></span>\n    </>\n  );\n  \n  const recentTitle = \"Recent Projects\";\n  \n  return (\n    <>\n     {projects.length > 0 && \n        <ProjectsList title={removePin ? pinnedTitle : recentTitle}\n          projects={projects}\n          api={api} \n          projectOptions={isAuthorized ? {addPin, removePin, ...projectOptions} \n            : (currentUser && currentUser.login ? {...projectOptions} : {})\n          }\n        />\n     }\n    </>\n  );\n};\nEntityPageProjects.propTypes = {\n  api: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  isAuthorized: PropTypes.bool.isRequired,\n  projects: PropTypes.array.isRequired,\n  addPin: PropTypes.func,\n  removePin: PropTypes.func,\n  projectOptions: PropTypes.object,\n};\n\nexport default EntityPageProjects;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Notifications from './notifications.jsx';\n\nfunction handleError(notify, error) {\n  console.error(error);\n  notify();\n  return Promise.reject(error);\n}\n\nfunction handleErrorForInput(notify, error) {\n  if (error && error.response && error.response.data) {\n    return Promise.reject(error.response.data.message);\n  }\n  console.error(error);\n  notify();\n  return Promise.reject();\n}\n\nconst ErrorHandler = ({children}) => (\n  <Notifications>\n    {({createErrorNotification}) => children({\n      handleError: error => handleError(createErrorNotification, error),\n      handleErrorForInput: error => handleErrorForInput(createErrorNotification, error),\n    })}\n  </Notifications>\n);\nErrorHandler.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nexport default ErrorHandler;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Link from './includes/link.jsx';\nimport Embed from './includes/embed.jsx';\n\nconst FeaturedEmbed = ({image, mask, title, appDomain, blogUrl, body, color}) => (\n  <div className=\"featured-embed\">\n    <div className=\"mask-container\">\n      <Link to={`culture${blogUrl}`}>\n        <img className={'mask ' + mask} src={image} alt=\"\"/>\n      </Link>\n    </div>\n      \n    <div className=\"content\" style={{backgroundColor: color}}>\n      <div className=\"description\">\n        <Link to={`culture${blogUrl}`}>\n          <h2>{title}</h2>\n        </Link>\n        <p dangerouslySetInnerHTML={{__html: body}}/>\n        <Link to={`culture${blogUrl}`} className=\"learn-more\">\n          <button className=\"button-small\">Learn More →</button>\n        </Link>\n      </div>\n      <Embed domain={appDomain}/>\n    </div>\n  </div>\n);\n\nFeaturedEmbed.propTypes = {  \n  image: PropTypes.string.isRequired,\n  mask: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  appDomain: PropTypes.string.isRequired,\n  blogUrl: PropTypes.string.isRequired,\n  body: PropTypes.string.isRequired,\n  color: PropTypes.string.isRequired,\n};\n\nexport default FeaturedEmbed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {sampleSize} from 'lodash';\n\nimport FeaturedItems from '../curated/featured';\nimport FeaturedEmbedObject from '../curated/featured-embed';\n\nimport Link from './includes/link.jsx';\n\nimport FeaturedEmbed from './featured-embed.jsx';\n\nclass ZineItems extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: window.ZINE_POSTS.slice(0, 4), \n      masks: sampleSize([1, 2, 3, 4, 5], 4),\n    };\n  }\n  render() {\n    if (!this.state.posts.length) {\n      return null;\n    }\n    return (\n      <section>\n        <ul className=\"zine-items\">\n          {this.state.posts.map(({id, title, url, feature_image, primary_tag}, n) => (\n            <li key={id} className=\"zine-item\">\n              <Link to={`/culture${url}`}>\n                {!!feature_image && <div className=\"mask-container\">\n                  <img className={`mask mask-${this.state.masks[n]}`} src={feature_image} alt=\"\"/>\n                </div>}\n                <div className=\"zine-item-meta\">\n                  <h1 className=\"zine-item-title\">{title}</h1>\n                  {!!primary_tag && <p className=\"zine-item-tag\">\n                    {primary_tag.name}\n                  </p>}\n                </div>\n              </Link>\n            </li>\n          ))}\n        </ul>\n      </section>\n    );\n  }\n}\n\nconst FeaturedPanel = ({img, link, title}) => (\n  <Link to={link} data-track=\"featured-project\" data-track-label={title}>\n    <div className=\"featured-container\">\n      <img className=\"featured\" src={img} alt=\"\"/>\n      <p className=\"project-name\">{title}</p>\n    </div>\n  </Link>\n);\nFeaturedPanel.propTypes = {\n  img: PropTypes.string.isRequired,\n  link: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nconst Featured = ({featured}) => (\n  <section className=\"featured\">\n    <div className=\"community-pick-embed-container\">\n      <FeaturedEmbed {...FeaturedEmbedObject}/>\n    </div>\n    \n    <section>\n      <ul className=\"featured-items\">\n        {featured.map(item => (\n          <li key={item.link}>\n            <FeaturedPanel {...item}/>\n          </li>\n        ))}\n      </ul>\n    </section>\n    \n    <ZineItems/>\n  </section>\n);\nFeatured.propTypes = {\n  featured: PropTypes.array.isRequired,\n};\n\n\nconst FeaturedContainer = ({isAuthorized}) => (\n  <Featured featured={FeaturedItems} isAuthorized={isAuthorized}/>\n);\n\nFeaturedContainer.propTypes = {\n  isAuthorized: PropTypes.bool,\n};\n\nexport default FeaturedContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Link from './includes/link.jsx';\n\nconst FooterLine = ({href, track, children}) => {\n  return <p><Link to={href} data-track={'footer → '+track}>{children}</Link></p>;\n};\n\nFooterLine.propTypes = {\n  href: PropTypes.string.isRequired,\n  track: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default function Footer() {\n  const srcForPlatforms = \"https://cdn.glitch.com/be1ad2d2-68ab-404a-82f4-6d8e98d28d93%2Ffor-platforms-icon.svg?1506442305188\";\n  return (\n    <footer role=\"contentinfo\">\n      <FooterLine href=\"/about\" track=\"about\">\n        About Glitch <span role=\"img\" aria-label=\"\">🔮</span>\n      </FooterLine>\n      <FooterLine href=\"https://medium.com/glitch\" track=\"blog\">\n        Blog <span role=\"img\" aria-label=\"\">📰</span>\n      </FooterLine>\n      <FooterLine href=\"/help/\" track=\"faq\">\n        Help Center <span role=\"img\" aria-label=\"\">☂️</span>\n      </FooterLine>\n      <FooterLine href=\"http://status.glitch.com/\" track=\"system status\">\n        System Status <span role=\"img\" aria-label=\"\">🚥</span>\n      </FooterLine>\n      <FooterLine href=\"/legal\" track=\"legal stuff\">\n        Legal Stuff <span role=\"img\" aria-label=\"\">👮‍</span>\n      </FooterLine>\n      <hr/>\n      <FooterLine href=\"/teams\" track=\"platforms\">\n        <img className=\"for-platforms-icon\" src={srcForPlatforms} alt=\"\"/>\n        <span className=\"for-platforms-text\">Glitch Teams</span>\n      </FooterLine>\n    </footer>\n  );\n}","/* global EDITOR_URL */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Redirect} from 'react-router-dom';\nimport {TrackedExternalLink} from './analytics';\nimport Link from './includes/link';\nimport Logo from './includes/logo';\n\nimport UserOptionsPop from './pop-overs/user-options-pop';\nimport SignInPop from './pop-overs/sign-in-pop';\nimport NewProjectPop from './pop-overs/new-project-pop';\nimport NewStuffContainer from './overlays/new-stuff';\nimport {CurrentUserConsumer} from './current-user';\n\n\nconst ResumeCoding = () => (\n  <TrackedExternalLink name=\"Resume Coding clicked\" className=\"button button-small button-cta\" to={EDITOR_URL}>\n    Resume Coding\n  </TrackedExternalLink>\n);\n\nclass SearchForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.defaultValue || '',\n      submitted: false,\n    };\n  }\n  onChange(event) {\n    this.setState({value: event.target.value});\n  }\n  onSubmit(event) {\n    event.preventDefault();\n    if (!this.state.value) return;\n    this.setState({submitted: true});\n  }\n  render() {\n    const {value, submitted} = this.state;\n    return (\n      <form action=\"/search\" method=\"get\" role=\"search\" onSubmit={this.onSubmit.bind(this)}>\n        <input className=\"search-input\" name=\"q\" placeholder=\"bots, apps, users\" value={value} onChange={this.onChange.bind(this)}/>\n        {submitted && <Redirect to={`/search?q=${value}`} push={true}/>}\n      </form>\n    );\n  }\n}\nSearchForm.propTypes = {\n  defaultValue: PropTypes.string,\n};\n\nconst Header = ({api, maybeUser, clearUser, searchQuery, showNewStuffOverlay}) => {\n  return (\n    <header role=\"banner\">\n      <div className=\"header-info\">\n        <Link to=\"/\">\n          <Logo/>\n        </Link>\n      </div>\n\n      <nav>\n        <SearchForm defaultValue={searchQuery}/>\n        <NewProjectPop api={api}/>\n        { !!maybeUser && !!maybeUser.projects.length && <ResumeCoding/> }\n        { !(maybeUser && maybeUser.login) && <SignInPop api={api}/> }\n        { !!maybeUser && <UserOptionsPop user={maybeUser} signOut={clearUser} showNewStuffOverlay={showNewStuffOverlay} api={api}/> }\n      </nav>\n    </header>\n  );\n};\n\nHeader.propTypes = {\n  maybeUser: PropTypes.object,\n  api: PropTypes.func.isRequired,\n};\n\nconst HeaderContainer = ({...props}) => (\n  <CurrentUserConsumer>\n    {(user, userFetched, {clear}) => (\n      <NewStuffContainer isSignedIn={!!user && !!user.login}>\n        {showNewStuffOverlay => (\n          <Header {...props} maybeUser={user} clearUser={clear} showNewStuffOverlay={showNewStuffOverlay}/>\n        )}\n      </NewStuffContainer>\n    )}\n  </CurrentUserConsumer>\n);\n\nexport default HeaderContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AddCollectionProjectPop from '../pop-overs/add-collection-project-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button';\n\nconst AddCollectionProject = ({currentUserIsOwner, ...props}) => {\n  if(!currentUserIsOwner) {\n    return null;\n  }\n  \n  return (\n    <PopoverWithButton buttonClass=\"button add-project opens-pop-over\" buttonText=\"Add Project\" passToggleToPop>\n      <AddCollectionProjectPop {...props} />\n    </PopoverWithButton>);\n};\n\nAddCollectionProject.propTypes = {\n  currentUserIsOwner: PropTypes.bool.isRequired,\n  collection: PropTypes.object.isRequired,\n  currentUser: PropTypes.object.isRequired,\n  addProjectToCollection: PropTypes.func.isRequired,\n  api: PropTypes.func.isRequired\n};\n\nexport default AddCollectionProject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AddProjectToCollectionPop from '../pop-overs/add-project-to-collection-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button';\n\nconst AddProjectToCollection = ({project, ...props}) => {\n  return (\n    <PopoverWithButton buttonClass=\"button button-small has-emoji add-project opens-pop-over\"\n      buttonText={<>Add to Collection {' '}<span className=\"emoji framed-picture\" role=\"presentation\"></span></>}\n      passToggleToPop\n    >\n      <AddProjectToCollectionPop {...props} project={project}/>\n    </PopoverWithButton>\n  );\n};\n\nAddProjectToCollection .propTypes = {\n  addProjectToCollection: PropTypes.func.isRequired,\n  api: PropTypes.func.isRequired,\n  project: PropTypes.object.isRequired,\n};\n\nexport default AddProjectToCollection;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AddTeamProjectPop from '../pop-overs/add-team-project-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button';\n\nconst AddTeamProject = ({currentUserIsOnTeam, ...props}) => {\n  if(!currentUserIsOnTeam) {\n    return null;\n  }\n  \n  return (\n    <section className=\"add-project-container\">\n      {/* Add disabled={props.projectLimitIsReached} once billing is ready */}\n      <PopoverWithButton\n        buttonClass={`button add-project has-emoji opens-pop-over ${props.extraButtonClass}`}\n        buttonText={<>Add Project <span className=\"emoji bento-box\" role=\"img\" aria-label=\"\" /></>}\n        passToggleToPop\n      >\n        <AddTeamProjectPop {...props} />\n      </PopoverWithButton>\n    </section>\n  );\n};\n\nAddTeamProject.propTypes = {\n  currentUserIsOnTeam: PropTypes.bool.isRequired,\n  addProject: PropTypes.func.isRequired,\n  teamProjects: PropTypes.array.isRequired,\n  extraButtonClass: PropTypes.string,\n  api: PropTypes.func.isRequired,\n};\n\nexport default AddTeamProject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {DEFAULT_TEAM_AVATAR, getAvatarUrl as getTeamAvatarUrl} from '../../models/team';\nimport {ANON_AVATAR_URL, getAvatarThumbnailUrl, getDisplayName} from '../../models/user';\n\n// UserAvatar\n\nexport const Avatar = ({name, src, color, srcFallback, type}) => (\n  <div data-tooltip={name} data-tooltip-left=\"true\">\n    <img width=\"32px\" height=\"32px\" src={src} alt={name}\n      style={color ? {backgroundColor: color} : null}\n      onError={srcFallback ? (event => event.target.src = srcFallback) : null}\n      className={type + \"-avatar\"}\n    />\n  </div>\n);\nAvatar.propTypes = {\n  name: PropTypes.string.isRequired,\n  src: PropTypes.string.isRequired,\n  srcFallback: PropTypes.string,\n  color: PropTypes.string,\n  type: PropTypes.string,\n};\n\nexport const TeamAvatar = ({team}) => (\n  <Avatar name={team.name} src={getTeamAvatarUrl({...team, size:'small'})} srcFallback={DEFAULT_TEAM_AVATAR} type=\"team\"/>\n);\nTeamAvatar.propTypes = {\n  team: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    hasAvatarImage: PropTypes.bool.isRequired,\n  }).isRequired,\n};\n\nexport const UserAvatar = ({user, suffix=''}) => (\n  <Avatar name={getDisplayName(user) + suffix} src={getAvatarThumbnailUrl(user)} color={user.color} srcFallback={ANON_AVATAR_URL} type=\"user\"/>\n);\nUserAvatar.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string,\n    name: PropTypes.string,\n    avatarThumbnailUrl: PropTypes.string,\n    color: PropTypes.string.isRequired,\n  }).isRequired,\n  suffix: PropTypes.string,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport SVGInline from 'react-svg-inline';\nimport {defaultAvatarSVG} from '../../models/collection';\n\nexport default class CollectionAvatar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n  }\n  \n  syncColor() {\n    const svgBackgroundEl = this.ref.current.querySelector('.background');\n    svgBackgroundEl.setAttribute('fill', this.props.backgroundColor);\n  }\n  \n  componentDidMount() {\n    this.syncColor();\n  }\n  \n  componentDidUpdate() {\n    this.syncColor();\n  }\n  \n  render() {\n    return <span ref={this.ref}><SVGInline svg={defaultAvatarSVG}/></span>;\n  }\n}\n\nCollectionAvatar.propTypes = {\n  backgroundColor: PropTypes.string.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Notifications from '../notifications.jsx';\n\nimport CollectionAvatar from './collection-avatar.jsx';\n\nconst AddProjectMessage = ({projectName, collectionName, url}) => (\n  <>\n    <p>Added <b><span className=\"project-name\">{projectName}</span></b> to collection <b><span className=\"collection-name\">{collectionName}</span></b></p>\n    <a href={url} rel=\"noopener noreferrer\" className=\"button button-small button-tertiary button-in-notification-container notify-collection-link\">Take me there</a>\n  </>);\n\nAddProjectMessage.propTypes = {\n  projectName: PropTypes.string,\n  collectionName: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n};\n\nconst addProject = (addProjectToCollection, project, collection, collectionPath, notification, togglePopover) => {\n\n  try{\n    // add project to collection via api\n    addProjectToCollection(project, collection);\n\n    // toggle popover\n    togglePopover();  \n\n    // show notification\n    const content = <AddProjectMessage projectName={project.domain} collectionName={collection.name} url={collectionPath}/>;\n    notification(content, \"notifySuccess\");\n  }catch(error){\n    const content = <p>Something went wrong. Try refreshing and adding the project again.</p>;\n    notification(content, \"notifyError\");\n  }\n};\n\nconst CollectionResultItem = ({onClick, project, collection, currentUserLogin, isActive, togglePopover}) => {\n  let resultClass = \"button-unstyled result result-collection\";\n  if(isActive) {\n    resultClass += \" active\";\n  }\n  const collectionPath = `/@${currentUserLogin}/${collection.url}`;\n\n  return (\n    \n    <Notifications>\n      {({createNotification}) => ( \n        <div>\n          <button className={resultClass} onClick={() => addProject(onClick, project, collection, collectionPath, createNotification, togglePopover)} data-project-id={project.id}>\n            <div className=\"avatar\" id={\"avatar-collection-\" + collection.id}>\n              <CollectionAvatar backgroundColor={collection.coverColor}/>\n            </div>\n            <div className=\"results-info\">\n              <div className=\"result-name\" title={collection.name}>{collection.name}</div>\n              { collection.description.length > 0 && <div className=\"result-description\">{collection.description}</div> }\n            </div>\n          </button>\n          <a href={collectionPath} className=\"view-result-link button button-small button-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n            View →\n          </a>\n        </div>\n      )}  \n    </Notifications>\n  );\n};\n\nCollectionResultItem.propTypes = {\n  onClick: PropTypes.func,\n  collection: PropTypes.object.isRequired,\n  currentUserLogin: PropTypes.string.isRequired,\n  isActive: PropTypes.bool,\n  project: PropTypes.object.isRequired,\n  togglePopover: PropTypes.func.isRequired,\n};\n\nexport default CollectionResultItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport DeleteTeamPop from '../pop-overs/delete-team-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button';\n\nconst DeleteTeam = ({...props}) => {\n  \n  return (\n    <section>\n      <PopoverWithButton buttonClass=\"button button-small button-tertiary has-emoji opens-pop-over danger-zone\"\n        buttonText={<>Delete {props.teamName}&nbsp;<span className=\"emoji bomb\" role=\"img\" aria-label=\"\" /> </>}\n        passToggleToPop\n      >\n        <DeleteTeamPop {...props} />\n      </PopoverWithButton>\n    </section>\n  );\n};\n\nDeleteTeam.propTypes = {\n  api: PropTypes.func.isRequired,\n  teamId: PropTypes.number.isRequired,\n  teamName: PropTypes.string.isRequired,\n  users: PropTypes.array.isRequired,\n  teamAdmins: PropTypes.array.isRequired,\n};\n\nexport default DeleteTeam;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextArea from 'react-textarea-autosize';\n\nimport Markdown from './markdown.jsx';\nimport {OptimisticValue} from './field-helpers.jsx';\n\nclass EditableDescriptionImpl extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      focused: false,\n    };\n    \n    this.onFocus = this.onFocus.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n  \n  onFocus(event) {\n    if (event.currentTarget === event.target) {\n      this.setState({focused: true});\n    }\n  }\n  \n  onBlur() {\n    this.setState({focused: false});\n  }\n  \n  render() {\n    const {description, placeholder} = this.props;\n    return (this.state.focused\n      ?\n      <TextArea\n        className=\"description content-editable\"\n        value={description}\n        onChange={evt => this.props.update(evt.target.value)}\n        onFocus={this.onFocus} onBlur={this.onBlur}\n        placeholder={placeholder}\n        spellCheck={false}\n        autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n      />\n      :\n      <p\n        className=\"description content-editable\"\n        placeholder={placeholder} aria-label={placeholder}\n        role=\"textbox\" // eslint-disable-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        tabIndex={0} onFocus={this.onFocus} onBlur={this.onBlur}\n      >\n        <Markdown>{description}</Markdown>\n      </p>\n    );\n  }\n}\nEditableDescriptionImpl.propTypes = {\n  description: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  update: PropTypes.func.isRequired,\n};\n\nconst EditableDescription = ({description, placeholder, update}) => (\n  <OptimisticValue value={description} update={update}>\n    {({value, update}) => (\n      <EditableDescriptionImpl description={value} update={update} placeholder={placeholder}/>\n    )}\n  </OptimisticValue>\n);\nEditableDescription.propTypes = {\n  description: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  update: PropTypes.func.isRequired,\n};\n\nexport const StaticDescription = ({description}) => (\n  description ? \n    <p className=\"description read-only\">\n      <Markdown>{description}</Markdown>\n    </p> \n    : null\n);\nStaticDescription.propTypes = {\n  description: PropTypes.string.isRequired,\n};\n\nexport const AuthDescription = ({authorized, description, placeholder, update}) => (\n  authorized ?\n    <EditableDescription \n      description={description} \n      update={update} \n      placeholder={placeholder} \n    /> \n    :\n    <StaticDescription description={description}/>\n);\nAuthDescription.propTypes = {\n  authorized: PropTypes.bool.isRequired,\n  description: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  update: PropTypes.func.isRequired,\n};\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {UserPref} from '../includes/user-prefs.jsx';\nconst {Provider, Consumer} = React.createContext();\n\n//  Dev Toggles!\n//\n//   Use dev toggles to parts of the site that are still in development.\n//   This site is open source, there's no utility here, this is just a way to help us\n//   ship things _extra_ early without impacting customer UX\n//\n\n\n// Define your dev toggles here.\n// We can only have three.\n// Users can enable them with the /secret page.\nconst toggleData = [\n  {name: \"Email Invites\", description: \"Enables invite-by-email behavior on the team page.\"},\n  {name: \"Everybody Dance!\", description: \"Placeholder for a new toggle.\"},\n  {name: \"Inflatable Crocodiles\", description: \"I don't think this does anything yet.\"},\n].splice(0,3); // <-- Yeah really, only 3.  If you need more, clean up one first.\n\n\n// Usage:\n// Import Devtoggles into your scope:\n\n// import DevToggles from '../includes/dev-toggles.jsx`\n\n// Use the DevToggles from inside of a DevTogglesProvider\n// (Which in turn must be inside of a UserPrefProvider,\n// both of which are provided by the Client.jsx)\n\n// Fetch the array enabledToggles and test for features with [].includes:\n/*\n  <DevToggles>\n    {(enabledToggles) => (\n      <div> I could sure go for some:\n        { enabledToggles.includes(\"fishsticks\") && <FishSticks/> }\n      </div>\n    )}\n  </DevToggles>\n*/\n\nexport const DevTogglesProvider = ({children}) => (\n  <UserPref name=\"devToggles\" default={[]}>\n    {(enabledToggles, setEnabledToggles) => (\n      <Provider value={{enabledToggles, toggleData, setEnabledToggles}}>\n        {children}\n      </Provider>\n    )}\n  </UserPref>\n);\nDevTogglesProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const DevToggles = ({children}) => (\n  <Consumer>\n    {({enabledToggles, toggleData, setEnabledToggles}) => children(\n      enabledToggles||[], toggleData, setEnabledToggles\n    )}\n  </Consumer>\n);\nDevToggles.propTypes = {\n  children: PropTypes.func.isRequired,\n};\n\nexport default DevToggles;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport EditCollectionColorPop from '../pop-overs/edit-collection-color-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button';\n\nconst EditCollectionColor = ({update, initialColor, ...props}) => {  \n  return (\n    <PopoverWithButton \n      containerClass=\"edit-collection-color-btn\"\n      buttonClass=\"button add-project opens-pop-over\"\n      buttonText=\"Color\"\n      passToggleToPop >\n      <EditCollectionColorPop {...props} updateColor={update} initialColor={initialColor}/>\n    </PopoverWithButton>\n  );\n};\n\nexport default EditCollectionColor;\n\nEditCollectionColor.propTypes = {\n  update: PropTypes.func.isRequired,\n  initialColor: PropTypes.string.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {kebabCase} from 'lodash';\n\nimport {OptimisticValue, TrimmedValue} from './field-helpers.jsx';\nimport {PureEditableWrappingField} from './editable-wrapping-field.jsx';\n\n// This recreates EditableField but OptimisticValue tracks both the name and url\n// That way the url preview updates in real time as you type into the name field\n\nexport const EditCollectionNameAndUrl = ({name, url, update, isAuthorized}) => {\n  const placeholder = 'Name your collection';\n  return (\n    <OptimisticValue value={{name, url}} update={update} resetOnError={false}>\n      {({value: nameAndUrl, update, error}) => (\n        <TrimmedValue value={nameAndUrl.name} update={name => update({name, url: kebabCase(name)})}>\n          {({value: name, update}) => (\n            <h1 className=\"collection-name\">\n              {(isAuthorized\n                ? <PureEditableWrappingField value={name} update={update} placeholder={placeholder} error={error}/>\n                : name\n              )}\n            </h1>\n          )}\n        </TrimmedValue>\n      )}\n    </OptimisticValue>\n  );\n};\nEditCollectionNameAndUrl.propTypes = {\n  name: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  isAuthorized: PropTypes.bool.isRequired,\n};\n\nexport default EditCollectionNameAndUrl;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {uniqueId} from 'lodash';\n\nimport {OptimisticValue, TrimmedValue, FieldErrorIcon, FieldErrorMessage} from './field-helpers.jsx';\n\n\nclass PureEditableFieldHolder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { id: uniqueId(\"editable-field-\") };\n    this.textInput = React.createRef();\n    this.onChange = this.onChange.bind(this);\n  }\n  \n  componentDidMount() {\n    if (this.props.autoFocus) {\n      this.textInput.current.select();\n    }\n  }\n  \n  onChange(evt) {\n    this.props.update(evt.target.value);\n  }\n  \n  render() {\n    const classes = [\"content-editable\", this.props.error ? \"error\" : \"\"].join(\" \");\n    const inputProps = {\n      id: this.state.id,\n      className: classes,\n      value: this.props.value,\n      onChange: this.onChange,\n      spellCheck: false,\n      autoComplete: \"off\",\n      placeholder: this.props.placeholder,\n      autoFocus: this.props.autoFocus,\n      onBlur: this.props.blur,\n      type: this.props.inputType,\n    };\n    \n    const maybeErrorIcon = !!this.props.error && <FieldErrorIcon/>;\n    \n    const maybeErrorMessage = !!this.props.error && <FieldErrorMessage error={this.props.error} hideIcon={true}/>;\n    \n    const maybePrefix = !!this.props.prefix && (\n      <span className={\"content-editable-affix \" + classes}>{this.props.prefix}</span>\n    );\n    \n    const maybeSuffix = !!this.props.suffix && (\n      <span className={\"content-editable-affix \" + classes}>{this.props.suffix}</span>\n    );\n    \n    return (\n      <label htmlFor={inputProps.id}>\n        <span className=\"editable-field-flex\">\n          {maybePrefix}\n          <span className=\"editable-field-input\">\n            {this.props.children(inputProps, this.textInput)}\n            {maybeErrorIcon}\n          </span>\n          {maybeSuffix}\n        </span>\n        {maybeErrorMessage}\n      </label>\n    );\n  }\n}\n\nPureEditableFieldHolder.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  children: PropTypes.func.isRequired, // function that takes inputProps and inputRef as parameters and returns a node\n  blur: PropTypes.func,\n  prefix: PropTypes.node,\n  suffix: PropTypes.node,\n  autoFocus: PropTypes.bool,\n  error: PropTypes.string,\n};\n\nexport const PureEditableTextArea = (props) => (\n  <PureEditableFieldHolder {...props}>\n    {(inputProps, inputRef) => (\n      <textarea {...inputProps} ref={inputRef} />  \n    )}\n  </PureEditableFieldHolder>\n);\n\nPureEditableTextArea.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  blur: PropTypes.func,\n  prefix: PropTypes.node,\n  suffix: PropTypes.node,\n  autoFocus: PropTypes.bool,\n  error: PropTypes.string,\n  inputType: PropTypes.string,\n};\n\nexport const PureEditableField = (props) => (\n  <PureEditableFieldHolder {...props}>\n    {(inputProps, inputRef) => (\n      <input {...inputProps} ref={inputRef} />  \n    )}\n  </PureEditableFieldHolder>\n);\n\nPureEditableField.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  blur: PropTypes.func,\n  prefix: PropTypes.node,\n  suffix: PropTypes.node,\n  autoFocus: PropTypes.bool,\n  error: PropTypes.string,\n  inputType: PropTypes.string,\n};\n\nexport const EditableField = ({value, update, ...props}) => (\n  <OptimisticValue value={value} update={update} resetOnError={false}>\n    {({value, update, error}) => (\n      <TrimmedValue value={value} update={update}>\n        {valueProps => (\n          <PureEditableField {...props} {...valueProps} error={error}/>\n        )}\n      </TrimmedValue>\n    )}\n  </OptimisticValue>\n);\nEditableField.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  blur: PropTypes.func,\n  prefix: PropTypes.node,\n  suffix: PropTypes.node,\n  autoFocus: PropTypes.bool,\n};\n\nexport default EditableField;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport TextArea from 'react-textarea-autosize';\nimport {uniqueId} from 'lodash';\n\nimport {OptimisticValue, TrimmedValue, FieldErrorMessage} from './field-helpers.jsx';\n\nexport class PureEditableWrappingField extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { id: uniqueId(\"editable-field-\") };\n    this.onChange = this.onChange.bind(this);\n  }\n  \n  onChange(evt) {\n    this.props.update(evt.target.value.replace(/\\r?\\n/g, ''));\n  }\n  \n  render() {\n    const classes = [\"content-editable\", this.props.error ? \"error\" : \"\"].join(\" \");\n    const inputProps = {\n      id: this.state.id,\n      className: classes,\n      value: this.props.value,\n      onChange: this.onChange,\n      spellCheck: false,\n      autoComplete: \"off\",\n      placeholder: this.props.placeholder,\n      autoFocus: this.props.autoFocus,\n    };\n    \n    return (\n      <label htmlFor={inputProps.id}>\n        <TextArea {...inputProps}/>\n        {!!this.props.error && <FieldErrorMessage error={this.props.error}/>}\n      </label>\n    );\n  }\n}\nPureEditableWrappingField.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  autoFocus: PropTypes.bool,\n  error: PropTypes.string,\n};\n\nexport const EditableWrappingField = ({value, update, ...props}) => (\n  <OptimisticValue value={value} update={update} resetOnError={false}>\n    {({value, update, error}) => (\n      <TrimmedValue value={value} update={update}>\n        {valueProps => (\n          <PureEditableWrappingField {...props} {...valueProps} error={error}/>\n        )}\n      </TrimmedValue>\n    )}\n  </OptimisticValue>\n);\nEditableWrappingField.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n  autoFocus: PropTypes.bool,\n};\n\nexport default EditableWrappingField;","/* global APP_URL */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst telescopeImageUrl = 'https://cdn.glitch.com/7138972f-76e1-43f4-8ede-84c3cdd4b40a%2Ftelescope_404.svg?1543258683849';\n\nexport class Embed extends React.Component {  \n  constructor(props) {\n    super(props);\n    this.state = {\n      browserSupported: this.browserSatisfiesRequirements()\n    };\n  }\n  \n  // Babel does not transpile URLSearchParams, so using this as a compatibility check for showing embeds now.\n  // TODO(sheridan) make this more robust in future\n  browserSatisfiesRequirements() {\n    try {\n      /* eslint-disable no-unused-vars */\n      new URLSearchParams();  \n      /* eslint-enable no-unused-vars */\n\n      return true;\n    } catch (error) {\n      console.log(\"Sorry, you don't have the necessary JavaScript features to run Glitch code editors. Try applying your latest system updates, or try again with a different web browser.\", error);\n      return false;\n    }\n  }\n  \n  render() {\n    return <div className=\"glitch-embed-wrap\">\n      { this.state.browserSupported ?\n        // Embed iframe for app\n        <iframe title=\"embed\"\n          src={`${APP_URL}/embed/#!/embed/${this.props.domain}?path=README.md&previewSize=100`}\n          alt={`${this.props.domain} on Glitch`}\n          allow=\"geolocation; microphone; camera; midi; encrypted-media\"\n          height=\"100%\" \n          width=\"100%\"\n          border=\"0\"\n        ></iframe> :\n        // Error message if JS not supported\n        // TODO(sheridan): Refactor this once we have a true error component\n        <div className=\"error-container\">\n          <img className=\"error-image\" src={telescopeImageUrl} alt=\"\" width=\"50%\" height=\"50%\" />\n          <div className=\"error-msg\">\n            <h2>The web browser you're using is missing some important Javascript features</h2>\n            <p>To use this app, please try applying your latest system updates, or try again with a different web browser.</p>\n          </div>\n        </div>\n      }\n    </div>;\n  }\n}\n\nEmbed.propTypes = {\n  domain: PropTypes.string.isRequired,\n  alt: PropTypes.string,\n};\n\nexport default Embed;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {captureException} from '../../utils/sentry';\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {error: null};\n  }\n  \n  componentDidCatch(error) {\n    console.error(error);\n    captureException(error);\n    this.setState({error});\n  }\n  \n  render() {\n    const {children, fallback} = this.props;\n    const {error} = this.state;\n    return error ? fallback : children;\n  }\n}\n\nErrorBoundary.propTypes = {\n  children: PropTypes.node.isRequired,\n  fallback: PropTypes.node,\n};\n\nErrorBoundary.defaultProps = {\n  fallback: 'Something went wrong, try refreshing?',\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class Expander extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      startedExpanding: false,\n      doneExpanding: false,\n      scrollHeight: Infinity,\n    };\n    this.ref = React.createRef();\n    this.updateHeight = this.updateHeight.bind(this);\n  }\n  \n  componentDidMount() {\n    this.updateHeight();\n    this.ref.current.addEventListener('load', this.updateHeight, {capture: true});\n    window.addEventListener('resize', this.updateHeight, {passive: true});\n  }\n  \n  componentWillUnmount() {\n    this.ref.current.removeEventListener('load', this.updateHeight, {capture: true});\n    window.removeEventListener('resize', this.updateHeight, {passive: true});\n  }\n  \n  componentDidUpdate() {\n    this.updateHeight();\n  }\n  \n  updateHeight() {\n    const scrollHeight = this.ref.current.scrollHeight;\n    if (scrollHeight !== this.state.scrollHeight) {\n      this.setState({scrollHeight});\n    }\n  }\n  \n  expand() {\n    this.updateHeight();\n    this.setState({startedExpanding: true});\n  }\n  \n  onExpandEnd(evt) {\n    if (evt.propertyName === 'max-height') {\n      this.setState({doneExpanding: true});\n    }\n  }\n  \n  render() {\n    const {startedExpanding, doneExpanding, scrollHeight} = this.state;\n    const aboveLimit = scrollHeight > this.props.height;\n    const limitHeight = aboveLimit ? this.props.height - this.props.minSlide : this.props.height;\n    const maxHeight = startedExpanding ? scrollHeight : limitHeight;\n    const style = !doneExpanding ? {maxHeight} : null;\n    return (\n      <div\n        ref={this.ref} className=\"expander\" style={style}\n        onTransitionEnd={startedExpanding ? this.onExpandEnd.bind(this) : null}\n      >\n        {this.props.children}\n        {!doneExpanding && aboveLimit && (\n          <div className=\"expander-mask\">\n            {!startedExpanding && (\n              <button\n                onClick={this.expand.bind(this)}\n                className=\"expander-button button-small button-tertiary\"\n              >\n                Show More\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nExpander.propTypes = {\n  children: PropTypes.node.isRequired,\n  height: PropTypes.number.isRequired,\n  minSlide: PropTypes.number.isRequired,\n};\n\nExpander.defaultProps = {\n  minSlide: 50,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {debounce} from 'lodash';\n\nexport class OptimisticValue extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: null, // value is only set when waiting for server response\n      error: null, // error is only set if there is an error ¯\\_(ツ)_/¯\n    };\n    \n    this.onChange = this.onChange.bind(this);\n    this.update = debounce(this.update.bind(this), 500);\n  }\n  \n  async update(value) {\n    try {\n      await this.props.update(value);\n      this.setState((prevState, props) => {\n        // if value didn't change during this update then switch back to props\n        if (prevState.value === props.value) {\n          return {value: null, error: null};\n        }\n        return {error: null};\n      });\n    } catch (error) {\n      this.setState((prevState, props) => {\n        // The update failed; we can ignore this if our state has already moved on\n        if (prevState.value !== value) {\n          return {};\n        }\n        \n        // Ah, we haven't moved on, and we know the last edit failed.\n        // Ok, display an error.\n        if (props.resetOnError) {\n          return {error, value: null};\n        }\n        return {error};\n      });\n    }\n  }\n  \n  onChange(value) {\n    this.update(value);\n    this.setState({value});\n  }\n  \n  render() {\n    return this.props.children({\n      value: this.state.value !== null ? this.state.value : this.props.value,\n      error: this.state.error,\n      update: this.onChange,\n    });\n  }\n}\nOptimisticValue.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  update: PropTypes.func.isRequired,\n  resetOnError: PropTypes.bool,\n};\nOptimisticValue.defaultProps = {\n  resetOnError: true,\n};\n\nexport class TrimmedValue extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {value: props.value};\n    this.update = this.update.bind(this);\n  }\n  update(value) {\n    this.props.update(value.trim());\n    this.setState({value});\n  }\n  render() {\n    return this.props.children({\n      value: this.state.value.trim() === this.props.value ? this.state.value : this.props.value,\n      update: this.update,\n    });\n  }\n}\nTrimmedValue.propTypes = {\n  value: PropTypes.string.isRequired,\n  update: PropTypes.func.isRequired,\n};\n\nexport const FieldErrorIcon = () => (\n  <span className=\"editable-field-error-icon\" role=\"img\" aria-label=\"Warning\">🚒</span>\n);\n\nexport const FieldErrorMessage = ({error, hideIcon}) => (\n  <span className=\"editable-field-error-message\">\n    {!hideIcon && <FieldErrorIcon/>}\n    {error}\n  </span>\n);\nFieldErrorMessage.propTypes = {\n  error: PropTypes.node.isRequired,\n  hideIcon: PropTypes.bool,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactKonami from 'react-konami';\n\n// Usage:\n// <Konami>\n//   Inner part will render once konami code is entered.\n// </Konami>\n\nexport default class Konami extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {active: false};\n  }\n  \n  render() {  \n    return (\n      <>\n        <ReactKonami easterEgg={()=>this.setState({active: true})}/>\n        { !!this.state.active && this.props.children }\n      </>\n    );\n  }\n}\n\nKonami.propTypes = {\n  children: PropTypes.node.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Link as RouterLink } from 'react-router-dom';\n\nimport { getLink as getCollectionLink } from '../../models/collection';\nimport { getLink as getProjectLink } from '../../models/project';\nimport { getLink as getTeamLink } from '../../models/team';\nimport { getLink as getUserLink } from '../../models/user';\n\n/* global EXTERNAL_ROUTES */\nconst external = Array.from(EXTERNAL_ROUTES);\n\nexport const Link = React.forwardRef(function Link({to, children, ...props}, ref) {\n  if (typeof to === 'string') {\n    const currentUrl = new URL(window.location.href);\n    const targetUrl = new URL(to, currentUrl);\n\n    if (targetUrl.origin !== currentUrl.origin ||\n      external.some(route => targetUrl.pathname.startsWith(route))\n    ) {\n      return <a href={to} {...props} ref={ref}>{children}</a>;\n    }\n    \n    to = {\n      pathname: targetUrl.pathname,\n      search: targetUrl.search,\n      hash: targetUrl.hash,\n    };\n  }\n  \n  return <RouterLink to={to} {...props} innerRef={ref}>{children}</RouterLink>;\n});\nLink.propTypes = {\n  to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport const CollectionLink = ({collection, children, ...props}) => (\n  <Link to={getCollectionLink(collection)} {...props}>{children}</Link>\n);\nCollectionLink.propTypes = {\n  collection: PropTypes.oneOfType([\n    PropTypes.shape({\n      team: PropTypes.PropTypes.shape({\n        url: PropTypes.string.isRequired,\n      }).isRequired,\n      url: PropTypes.string.isRequired,\n    }),\n    PropTypes.shape({\n      user: PropTypes.PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        login: PropTypes.string,\n      }).isRequired,\n      url: PropTypes.string.isRequired,\n    }),\n  ]).isRequired,\n};\n\nexport const ProjectLink = ({project, children, ...props}) => (\n  <Link to={getProjectLink(project)} {...props}>{children}</Link>\n);\nProjectLink.propTypes = {\n  project: PropTypes.shape({\n    domain: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport const TeamLink = ({team, children, ...props}) => (\n  <Link to={getTeamLink(team)} {...props}>{children}</Link>\n);\nTeamLink.propTypes = {\n  team: PropTypes.shape({\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport const UserLink = ({user, children, ...props}) => (\n  <Link to={getUserLink(user)} {...props}>{children}</Link>\n);\nUserLink.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string,\n  }).isRequired,\n};\n\nexport default Link;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport const Loader = () => (\n  <div className=\"loader\">\n    <div className=\"moon\"></div>\n    <div className=\"earth\"></div>\n    <div className=\"asteroid\"></div>    \n    <div className=\"asteroid-dust\"></div>    \n  </div>    \n);\nexport default Loader;\n\nexport class DataLoader extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      maybeData: null,\n      loaded: false,\n      maybeError: null,\n    };\n  }\n  \n  componentDidMount() {\n    this.props.get().then(\n      data => this.setState({\n        maybeData: data,\n        loaded: true,\n      }),\n      error => {\n        console.error(error);\n        this.setState({\n          maybeError: error,\n        });\n      }\n    );\n  }\n  \n  render() {\n    if (this.state.loaded) {\n      return this.props.children(this.state.maybeData);\n    } else if (this.state.maybeError) {\n      return this.props.renderError(this.state.maybeError);\n    } \n    return this.props.renderLoader();\n    \n  }\n}\nDataLoader.propTypes = {\n  children: PropTypes.func.isRequired,\n  get: PropTypes.func.isRequired,\n  renderError: PropTypes.func,\n  renderLoader: PropTypes.func,\n};\nDataLoader.defaultProps = {\n  renderError: () => 'Something went wrong, try refreshing?',\n  renderLoader: Loader,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class LocalStorage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {value: undefined, loaded: false};\n    this.handleStorage = this.handleStorage.bind(this);\n  }\n  \n  handleStorage() {\n    let value = undefined;\n    try {\n      const raw = window.localStorage.getItem(this.props.name);\n      if (raw !== null) {\n        value = JSON.parse(raw);\n      }\n    } catch (error) {\n      console.error('Failed to read from localStorage!', error);\n      value = undefined;\n    }\n    this.setState({value, loaded: true});\n  }\n  \n  componentDidMount() {\n    if (!this.props.ignoreChanges) {\n      window.addEventListener('storage', this.handleStorage, {passive: true});\n    }\n    this.handleStorage();\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('storage', this.handleStorage, {passive: true});\n  }\n  \n  set(value) {\n    try {\n      if (value !== undefined) {\n        window.localStorage.setItem(this.props.name, JSON.stringify(value));\n      } else {\n        window.localStorage.removeItem(this.props.name);\n      }\n    } catch (error) {\n      console.error('Failed to write to localStorage!', error);\n    }\n    this.setState({value});\n  }\n  \n  render() {\n    return this.props.children(\n      this.state.value !== undefined ? this.state.value : this.props.default,\n      this.set.bind(this),\n      this.state.loaded,\n    );\n  }\n}\nLocalStorage.propTypes = {\n  children: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  default: PropTypes.any,\n  ignoreChanges: PropTypes.bool,\n};","import React from 'react';\nimport dayjs from 'dayjs';\n\nexport default class Logo extends React.PureComponent {\n  \n  constructor(props) {\n    super(props);\n    this.state = {\n      hour: (new Date()).getHours(),\n    };\n  }\n  \n  componentDidMount() {\n    this.interval = window.setInterval(() => {\n      this.setState({\n        hour: (new Date()).getHours(),\n      });\n    }, dayjs.convert(5, 'minutes', 'ms'));\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.interval);\n  }\n\n  render() {\n    const {hour} = this.state;\n    \n    const LOGO_DAY = \"https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-day.svg\";\n    const LOGO_SUNSET = \"https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-sunset.svg\";\n    const LOGO_NIGHT = \"https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-night.svg\";\n\n    let logo = LOGO_DAY;\n    if ((hour >= 16) && (hour <= 18)) {\n      logo = LOGO_SUNSET;\n    } else if ((hour > 18) || (hour <= 8)) {\n      logo = LOGO_NIGHT;\n    }\n\n    return <img className=\"logo\" src={logo} alt=\"Glitch\" />;\n  }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport truncate from 'html-truncate';\nimport markdownIt from 'markdown-it';\nimport markdownEmoji from 'markdown-it-emoji';\nimport markdownSanitizer from 'markdown-it-sanitizer';\n\nconst md = markdownIt({\n  html: true,\n  breaks: true,\n  linkify: true,\n  typographer: true,\n})\n  .disable('smartquotes')\n  .use(markdownEmoji)\n  .use(markdownSanitizer);\n\nconst RawHTML = ({children}) => (\n  children ? <span className=\"markdown-content\" dangerouslySetInnerHTML={{__html: children}}></span> : null\n);\nRawHTML.propTypes = {\n  children: PropTypes.string.isRequired,\n};\n\nexport const Markdown = React.memo(function Markdown({children}) {\n  const rendered = md.render(children || '');\n  return <RawHTML>{rendered}</RawHTML>;\n});\nMarkdown.propTypes = {\n  children: PropTypes.string.isRequired,\n};\n\nexport const TruncatedMarkdown = React.memo(({children, length}) => {\n  const rendered = md.render(children || '');\n  const truncated = truncate(rendered, length, {ellipsis: '…'});\n  return <RawHTML>{truncated}</RawHTML>;\n});\nTruncatedMarkdown.propTypes = {\n  children: PropTypes.string.isRequired,\n  length: PropTypes.number.isRequired,\n};\n\nexport default Markdown;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport Link from './link.jsx';\nimport Notifications from '../notifications.jsx';\n\nconst NameConflictWarning = ({id}) => (\n  <>\n    <p>This team has your name. You should update your info to remain unique ❄</p>\n    <Link className=\"button button-small button-tertiary button-in-notification-container\" to={`/user/${id}`}>Your Profile</Link>\n  </>\n);\nNameConflictWarning.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nclass NameConflict extends React.Component {\n  componentDidMount() {\n    const content = NameConflictWarning({id: this.props.userId});\n    this.notification = this.props.createPersistentNotification(content);\n  }\n  \n  componentWillUnmount() {\n    this.notification.removeNotification();\n  }\n  \n  render() {\n    return null;\n  }\n}\nNameConflict.propTypes = {\n  createPersistentNotification: PropTypes.func.isRequired,\n  userId: PropTypes.number,\n};\n\nconst NameConflictContainer = () => (\n  <CurrentUserConsumer>\n    {({id}) => (\n      <Notifications>\n        {notifyFuncs => (\n          <NameConflict userId={id} {...notifyFuncs}/>\n        )}\n      </Notifications>\n    )}\n  </CurrentUserConsumer>\n);\n\nexport default NameConflictContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst compass = \"https://cdn.glitch.com/bc50f686-4c0a-4e20-852f-3999b29e8092%2Fcompass.svg?1545073264846\";\nconst needle = \"https://cdn.glitch.com/bc50f686-4c0a-4e20-852f-3999b29e8092%2Fneedle.svg?1545073265096\";\n\nconst NotFound = ({name}) => (\n  <section>\n    <p>We didn't find {name}</p>\n    <div className=\"error-image\">\n      <img className=\"compass\" src={compass} alt=\"\"/>\n      <img className=\"needle\" src={needle} alt=\"\"/>\n    </div>  \n    \n  </section>\n);\n\nNotFound.propTypes = {\n  name: PropTypes.string.isRequired\n};\n\n\nexport default NotFound;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {TrackClick} from '../analytics';\nimport TeamsList from '../teams-list';\n\n// Image Buttons\n\nexport const ImageButtons = ({name, uploadImage, clearImage}) => {\n  return (\n    <div className=\"upload-image-buttons\">\n      { !!uploadImage && (\n        <TrackClick name={`Upload ${name}`}>\n          <button className=\"button button-small button-tertiary\" onClick={uploadImage}>\n            Upload {name}\n          </button>\n        </TrackClick>\n      )}\n      { !!clearImage && (\n        <TrackClick name={`Clear ${name}`}>\n          <button className=\"button button-small button-tertiary\" onClick={clearImage}>\n            Clear {name} \n          </button>\n        </TrackClick>\n      )}\n    </div>\n  );\n};\nImageButtons.propTypes = {\n  name: PropTypes.string.isRequired,\n  uploadImage: PropTypes.func,\n  clearImage: PropTypes.func,\n};\n\n\n// Project Info Container\n\nexport const ProjectInfoContainer = ({\n  style,\n  children,\n  buttons,\n}) => (\n  <>\n    <div className=\"avatar-container\">\n      <div className=\"user-avatar\" style={style} />\n      {buttons}\n    </div>\n    <div className=\"profile-information\">\n      {children}\n    </div>\n  </>\n);\nProjectInfoContainer.propTypes = {\n  style: PropTypes.object.isRequired,\n  children: PropTypes.node.isRequired,\n  buttons: PropTypes.element,\n};\n\n\n// Info Container (generic)\n\nexport const InfoContainer = ({children}) => (\n  <div className=\"profile-info\">\n    {children}\n  </div>\n);\nInfoContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\n\n// Cover Container\n\nexport const CoverContainer = ({\n  buttons, children, className, ...props\n}) => (\n  <div className={`cover-container ${className}`} {...props}>\n    {children}\n    {buttons}\n  </div>\n);\nCoverContainer.propTypes = {\n  buttons: PropTypes.node,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n};\nCoverContainer.defaultProps = {\n  className: '',\n};\n\n\n// Profile Container\n\nexport const ProfileContainer = ({\n  avatarStyle, avatarButtons,\n  coverStyle, coverButtons,\n  children, teams\n}) => (\n  <CoverContainer style={coverStyle} buttons={coverButtons}>\n    <InfoContainer>\n      <div className=\"avatar-container\">\n        <div className=\"user-avatar\" style={avatarStyle} />\n        {avatarButtons}\n      </div>\n      <div className=\"profile-information\">\n        {children}\n      </div>\n    </InfoContainer>\n    {!!teams && !!teams.length && (\n      <div className=\"teams-information\"> \n        <TeamsList teams={teams}/>\n      </div>\n    )}\n  </CoverContainer>\n);\n \n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { getShowUrl, getEditorUrl, getRemixUrl } from '../../models/project';\nimport Link from './link.jsx';\n\nconst showIcon = \"https://cdn.glitch.com/6ce807b5-7214-49d7-aadd-f11803bc35fd%2Fshow-app.svg\";\n\nconst ButtonLink = ({href, children, className, ...props}) => (\n  <Link to={href} className={`button button-link ${className}`} {...props}>\n    {children}\n  </Link>\n);\nButtonLink.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n};\n\nexport const ShowButton = ({name, className, ...props}) => (\n  <ButtonLink href={getShowUrl(name)} className={`has-emoji ${className}`} {...props}>\n    <img src={showIcon} alt=\"\"/>\n    {' '}Show\n  </ButtonLink>\n);\nShowButton.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n};\n\nexport const EditButton = ({name, isMember, ...props}) => (\n  <ButtonLink href={getEditorUrl(name)} {...props}>\n    {isMember ? 'Edit Project' : 'View Source'}\n  </ButtonLink>\n);\nEditButton.propTypes = {\n  name: PropTypes.string.isRequired,\n  isMember: PropTypes.bool,\n  className: PropTypes.string,\n};\n\nexport const RemixButton = ({name, isMember, className, ...props}) => (\n  <ButtonLink href={getRemixUrl(name)} className={`has-emoji ${className}`} {...props}>\n    {isMember ? 'Remix This' : 'Remix your own'}{' '}\n    <span className=\"emoji microphone\" role=\"presentation\"></span>\n  </ButtonLink>\n);\nRemixButton.propTypes = {\n  name: PropTypes.string.isRequired,\n  isMember: PropTypes.bool,\n  className: PropTypes.string,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {ProjectLink} from './link';\nimport {getAvatarUrl} from  '../../models/project';\nimport {StaticUsersList} from '../users-list.jsx';\nimport {FALLBACK_AVATAR_URL} from '../../models/project.js';\n\nconst ProjectResultItem = ({onClick, isActive, isPrivate, cdnUrl, ...project}) => {\n  const activeClass = isActive ? \"active\" : \"\";\n  const privateClass = isPrivate ? \"private\" : \"\";\n  const resultClass = `button-unstyled result result-project ${activeClass} ${privateClass}`;\n  const srcFallback = FALLBACK_AVATAR_URL;\n  const {id, domain, description, users} = project;\n\n  return (\n    <div>\n      <button className={resultClass} onClick={onClick} data-project-id={id}>\n        <img className=\"avatar\" src={getAvatarUrl(id, cdnUrl)} alt={`Project avatar for ${domain}`} onError={event => event.target.src = srcFallback}/>\n        <div className=\"results-info\">\n          <div className=\"result-name\" title={domain}>{domain}</div>\n          { description.length > 0 && <div className=\"result-description\">{description}</div> }\n          { !!users && users.length > 0 && <StaticUsersList users={users} /> }\n        </div>\n      </button>\n      <ProjectLink project={project} className=\"view-result-link button button-small button-link\" target=\"_blank\" rel=\"noopener noreferrer\">\n        View →\n      </ProjectLink>\n    </div>\n  );\n};\n\nProjectResultItem.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  domain: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  users: PropTypes.array,\n  isActive: PropTypes.bool,\n  isPrivate: PropTypes.bool,\n};\n\nexport default ProjectResultItem;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {sampleSize, difference} from 'lodash';\n\nimport {getProfileStyle as getTeamProfileStyle} from '../../models/team';\nimport {getDisplayName, getProfileStyle as getUserProfileStyle} from '../../models/user';\n\nimport {DataLoader} from './loader.jsx';\nimport {CoverContainer} from './profile.jsx';\nimport {TeamLink, UserLink} from './link.jsx';\nimport {ProjectsUL} from '../projects-list.jsx';\n\nconst PROJECT_COUNT = 3;\n\nconst RelatedProjectsBody = ({projects, coverStyle}) => (\n  projects.length ? (\n    <CoverContainer style={coverStyle} className=\"projects\">\n      <ProjectsUL projects={projects}/>\n    </CoverContainer>\n  ) : null\n);\nRelatedProjectsBody.propTypes = {\n  projects: PropTypes.array.isRequired,\n};\n\nclass RelatedProjects extends React.Component {\n  constructor(props) {\n    super(props);\n    const teams = sampleSize(props.teams, 1);\n    const users = sampleSize(props.users, 2 - teams.length);\n    this.state = {teams, users};\n  }\n  \n  async getProjects(id, getPins, getAllProjects) {\n    const pins = await getPins(id);\n    const pinIds = pins.map(pin => pin.projectId);\n    let ids = sampleSize(difference(pinIds, [this.props.ignoreProjectId]), PROJECT_COUNT);\n\n    if (ids.length < PROJECT_COUNT) {\n      const {projects} = await getAllProjects(id);\n      const allIds = projects.map(({id}) => id);\n      const remainingIds = difference(allIds, [this.props.ignoreProjectId, ...ids]);\n      ids = [...ids, ...sampleSize(remainingIds, PROJECT_COUNT - ids.length)];\n    }\n\n    if (ids.length) {\n      const {data} = await this.props.api.get(`projects/byIds?ids=${ids.join(',')}`);\n      return data;\n    }\n    return [];\n  }\n  \n  render() {\n    const {api} = this.props;\n    const getTeam = (id) => api.get(`teams/${id}`).then(({data}) => data);\n    const getTeamPins = (id) => api.get(`teams/${id}/pinned-projects`).then(({data}) => data);\n    const getUser = (id) => api.get(`users/${id}`).then(({data}) => data);\n    const getUserPins = (id) => api.get(`users/${id}/pinned-projects`).then(({data}) => data);\n    const {teams, users} = this.state;\n    if (!teams.length && !users.length) {\n      return null;\n    }\n    return (\n      <ul className=\"related-projects\">\n        {teams.map(team => (\n          <li key={team.id}>\n            <h2><TeamLink team={team}>More by {team.name} →</TeamLink></h2>\n            <DataLoader get={() => this.getProjects(team.id, getTeamPins, getTeam)}>\n              {projects => <RelatedProjectsBody projects={projects} coverStyle={getTeamProfileStyle(team)}/>}\n            </DataLoader>\n          </li>\n        ))}\n        {users.map(user => (\n          <li key={user.id}>\n            <h2><UserLink user={user}>More by {getDisplayName(user)} →</UserLink></h2>\n            <DataLoader get={() => this.getProjects(user.id, getUserPins, getUser)}>\n              {projects => <RelatedProjectsBody projects={projects} coverStyle={getUserProfileStyle(user)}/>}\n            </DataLoader>\n          </li>\n        ))}\n      </ul>\n    );\n  }\n}\nRelatedProjects.propTypes = {\n  api: PropTypes.any.isRequired,\n  ignoreProjectId: PropTypes.string.isRequired,\n  teams: PropTypes.array.isRequired,\n  users: PropTypes.array.isRequired,\n};\n\nexport default RelatedProjects;","// transforms the individual data points (buckets) we get from the api into grouped 'bins' of data\n// each bin is then rendered as a point on the graph\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport _ from 'lodash';\nimport groupByTime from 'group-by-time';\nimport * as d3Array from 'd3-array';\n\nconst createHistogram = (bins) => {\n  let histogram = [];\n  bins = bins || [];\n  bins.forEach (bin => {\n    let totalAppViews = 0;\n    let totalRemixes = 0;\n    let timestamp = undefined;\n    // let codeViews = []\n    bin.forEach (data => {\n      if (!timestamp) {\n        timestamp = data['@timestamp'];\n      }\n      totalRemixes += data.analytics.remixes;\n      totalAppViews += data.analytics.visits;\n      // referrers.push(data.analytics.referrers)\n    });\n    histogram.push({\n      time: timestamp,\n      appViews: totalAppViews,\n      remixes: totalRemixes,\n    });\n  });\n  return histogram;\n};\n\nconst groupByRegularIntervals = d3Array.histogram().value(function(data) {\n  return data['@timestamp'];\n});\n\nconst createBins = (buckets, currentTimeFrame) => {\n  if (currentTimeFrame === \"Last 24 Hours\") {\n    return groupByRegularIntervals(buckets);\n  } \n  let bins = groupByTime(buckets, '@timestamp', 'day'); // supports 'day', 'week', 'month'\n  return Object.values(bins); \n  \n};\n\nconst chartColumns = (analytics, currentTimeFrame) => {\n  const buckets = analytics.buckets;\n  let bins = createBins(buckets, currentTimeFrame);\n  let histogram = createHistogram(bins);\n  let timestamps = ['x'];\n  let remixes = ['Remixes'];\n  let appViews = ['Total App Views'];\n  // let codeViews = ['Code Views']\n  histogram.shift();\n  histogram.forEach(bucket => {\n    timestamps.push(bucket.time);\n    appViews.push(bucket.appViews);\n    remixes.push(bucket.remixes);\n  });\n  return [timestamps, appViews, remixes];\n};\n\nconst dateFormat = (currentTimeFrame) => {\n  if (currentTimeFrame === \"Last 24 Hours\") {\n    return \"%H:%M %p\";\n  } \n  return \"%b-%d\";\n};\n\nconst renderChart = (c3, analytics, currentTimeFrame) => {\n  let columns = [];\n  if (!_.isEmpty(analytics)) {\n    columns = chartColumns(analytics, currentTimeFrame);\n  }\n  \n  // eslint-disable-next-line no-unused-vars\n  var chart = c3.generate({\n    size: {\n      height: 200,\n    },\n    data: {\n      x: 'x',\n      xFormat: dateFormat(currentTimeFrame),\n      columns: columns\n    },\n    axis: {\n      x: {\n        type: 'timeseries',\n        tick: {\n          format: dateFormat(currentTimeFrame),\n        }\n      },\n    },\n  });\n};\n\nclass TeamAnalyticsActivity extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.isGettingData === true && \n      this.props.isGettingData === false\n    ) {\n      renderChart(this.props.c3, this.props.analytics, this.props.currentTimeFrame);\n    }\n  }\n  \n  render() {\n    return null;\n  }\n}\n\nTeamAnalyticsActivity.propTypes = {\n  c3: PropTypes.object.isRequired, \n  analytics: PropTypes.object.isRequired, \n  currentTimeFrame: PropTypes.string.isRequired,\n  isGettingData: PropTypes.bool.isRequired,\n};\n\nexport default TeamAnalyticsActivity;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport dayjs from 'dayjs';\n\nimport {ProjectLink} from './link.jsx';\nimport Loader from './loader.jsx';\nimport {FALLBACK_AVATAR_URL, getAvatarUrl} from '../../models/project.js';\n\nconst RECENT_REMIXES_COUNT = 100;\n\nconst getProjectDetails = async ({id, api, currentProjectDomain}) => {\n  let path = `analytics/${id}/project/${currentProjectDomain}/overview`;\n  try {\n    return await api.get(path);\n  } catch (error) {\n    console.error('getProjectDetails', error);\n  }\n};\n\nconst addFallbackSrc = (event) => {\n  event.target.src = FALLBACK_AVATAR_URL;\n};\n\nconst ProjectAvatar = ({project, className=''}) => (\n  <img src={getAvatarUrl(project.id)} className={`avatar ${className}`}\n    alt={project.domain} onError={addFallbackSrc}\n  />\n);\nProjectAvatar.propTypes = {\n  project: PropTypes.shape({\n    domain: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n  }).isRequired,\n  className: PropTypes.string,\n};\n\nconst ProjectDetails = ({projectDetails}) => {\n  // This uses dayjs().fromNow() a bunch of times\n  // That requires the relativeTime plugin\n  // Which is added to dayjs elsewhere\n  return (\n    <article className=\"project-details\">\n      <ProjectLink project={projectDetails}>\n        <ProjectAvatar project={projectDetails}/>\n      </ProjectLink>\n      <table>\n        <tbody>\n          <tr>\n            <td className=\"label\">Created</td>\n            <td>{dayjs(projectDetails.createdAt).fromNow()}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Last viewed</td>\n            <td>{dayjs(projectDetails.lastAccess).fromNow()}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Last edited</td>\n            <td>{dayjs(projectDetails.lastEditedAt).fromNow()}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Last remixed</td>\n            <td>{projectDetails.lastRemixedAt ? dayjs(projectDetails.lastRemixedAt).fromNow() : \"never\"}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Total app views</td>\n            <td>{projectDetails.numAppVisits}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Total code views</td>\n            <td>{projectDetails.numEditorVisits}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Total direct remixes</td>\n            <td>{projectDetails.numDirectRemixes}</td>\n          </tr>\n          <tr>\n            <td className=\"label\">Total remixes</td>\n            <td>{projectDetails.numTotalRemixes}</td>\n          </tr>\n          { (projectDetails.baseProject.domain) &&\n            <tr>\n              <td className=\"label\">Originally remixed from</td>\n              <td>\n                <ProjectLink project={projectDetails.baseProject}>\n                  <ProjectAvatar project={projectDetails.baseProject} className=\"baseproject-avatar\"/>\n                  {projectDetails.baseProject.domain}\n                </ProjectLink>\n              </td>\n            </tr>\n          }\n        </tbody>\n      </table>\n    </article>\n  );\n};\n\nconst ProjectRemixItem = ({remix}) => {\n  return (\n    <ProjectLink project={remix}>\n      <span data-tooltip={remix.domain} data-tooltip-left=\"true\">\n        <ProjectAvatar project={remix}/>\n      </span>\n    </ProjectLink>\n  );\n};\n\nclass TeamAnalyticsProjectDetails extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isGettingData: true,\n      projectDetails: {},\n      projectRemixes: [],\n    };\n  }\n\n  updateProjectDetails() {\n    this.setState({\n      isGettingData: true\n    }); \n    getProjectDetails(this.props).then(({data}) => {\n      this.setState({\n        isGettingData: false,\n        projectDetails: data,\n        projectRemixes: data.remixes.slice(0, RECENT_REMIXES_COUNT),\n      });\n    });\n  }\n  \n  componentDidMount() {\n    this.updateProjectDetails();\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (this.props.currentProjectDomain !== prevProps.currentProjectDomain) {\n      this.updateProjectDetails();\n    }\n  }\n    \n  render() {\n    if(this.state.isGettingData) {\n      return <Loader/>;\n    }\n    \n    return (\n      <>\n        <ProjectDetails \n          projectDetails = {this.state.projectDetails}\n        />\n        <article className=\"project-remixes\">\n          <h4>Latest Remixes</h4>\n          { (this.state.projectRemixes.length === 0) &&\n            <p>No remixes yet (／_^)／ ●</p>\n          }\n          { this.state.projectRemixes.map(remix => (\n            <ProjectRemixItem\n              key = {remix.id}\n              remix = {remix}\n            />\n          ))}\n        </article>\n      </>\n    );\n  }\n}\n\nTeamAnalyticsProjectDetails.propTypes = {\n  currentProjectDomain: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n  api: PropTypes.any.isRequired,\n};\n\nexport default TeamAnalyticsProjectDetails;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MAX_REFERRERS = 4;\n\nconst countTotals = (data, countProperty) => {\n  let total = 0;\n  data.forEach(referrer => {\n    total += referrer[countProperty];\n  });\n  return total;\n};\n\nconst ReferrerPlaceholder = ({count}) => {\n  if (count === 0) {\n    return 'none';\n  }\n  return null;\n};\n\nconst ReferrerItem = ({count, total, description}) => {\n  const progress = Math.max(Math.round(count / total * 100), 3);\n  if (count <= 0) {\n    return null;\n  }\n  return (\n    <li>\n      {count.toLocaleString('en')} – {description}\n      <progress value={progress} max=\"100\" />\n    </li>\n  );\n};\n\nReferrerItem.propTypes = {\n  count: PropTypes.number.isRequired,\n  total: PropTypes.number.isRequired,\n  description: PropTypes.string.isRequired,\n};\n\nconst filterReferrers = (referrers) => {\n  let filteredReferrers = referrers.filter(referrer =>\n    !referrer.self\n  );\n  filteredReferrers = filteredReferrers.slice(0, MAX_REFERRERS);\n  return filteredReferrers;\n};\n\nclass TeamAnalyticsReferrers extends React.PureComponent {\n  \n  render() {\n    const {analytics, totalRemixes, totalAppViews} = this.props;\n\n    const appViewReferrers = filterReferrers(analytics.referrers);\n    const remixReferrers = filterReferrers(analytics.remixReferrers);\n    const totalDirectAppViews = totalAppViews - countTotals(appViewReferrers, 'requests');\n    const totalDirectRemixes = totalRemixes - countTotals(remixReferrers, 'remixes');\n    return (\n      <div className=\"referrers-content\">\n        <article className=\"referrers-column app-views\">\n          <h4>\n            Total App Views\n          </h4>\n          <ul>\n            <ReferrerPlaceholder\n              count = {totalAppViews}\n            />\n            <ReferrerItem\n              count = {totalDirectAppViews}\n              total = {totalAppViews}\n              description = \"direct views\"\n            />\n            { appViewReferrers.map((referrer, key) => (\n              <ReferrerItem\n                key={key}\n                count = {referrer.requests}\n                total = {totalAppViews}\n                description = {referrer.domain}\n              />\n            ))}\n          </ul>\n        </article>\n\n        <article className=\"referrers-column remixes\">\n          <h4>\n            Remixes\n          </h4>\n          <ul>\n            <ReferrerPlaceholder\n              count = {totalRemixes}\n            />\n            <ReferrerItem\n              count = {totalDirectRemixes}\n              total = {totalRemixes}\n              description = \"direct remixes\"\n            />\n            { remixReferrers.map((referrer, key) => (\n              <ReferrerItem\n                key={key}\n                count = {referrer.remixes}\n                total = {totalRemixes}\n                description = {referrer.domain}\n              />\n            ))}\n          </ul>\n        </article>\n      </div>\n    );\n  }\n}\n\nTeamAnalyticsReferrers.propTypes = {\n  analytics: PropTypes.object.isRequired,\n  totalRemixes: PropTypes.number.isRequired,\n  totalAppViews: PropTypes.number.isRequired,\n};\n\nexport default TeamAnalyticsReferrers;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Pluralize from 'react-pluralize';\n\nconst clickEvent = new CustomEvent('click', {bubbles: true, cancelable: true});\nconst blurEvent = new CustomEvent('mouseout', {bubbles: true, cancelable: true});\n\nclass TeamAnalyticsSummary extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  \n  toggleGraph(summaryType) {\n    let element = document.querySelector(`.c3-legend-item-${summaryType}`);\n    element.dispatchEvent(clickEvent);\n    element.dispatchEvent(blurEvent);\n  }\n  \n  render() {\n    return (\n      <>\n        <span className=\"summary-item\" onClick={() => {this.toggleGraph('Total-App-Views');}} onKeyPress={() => {this.toggleGraph('App-Views');}} role=\"button\" tabIndex={0}>\n          <span className=\"total app-views\">\n            {this.props.totalAppViews.toLocaleString('en')}\n          </span>{' '}\n          <Pluralize className=\"summary-label\" singular=\"Total App View\" plural=\"Total App Views\" count={this.props.totalAppViews} showCount={false} />\n        </span>\n        \n        ,{' '}\n\n        <span className=\"summary-item\" onClick={() => {this.toggleGraph('Remixes');}} onKeyPress={() => {this.toggleGraph('Remixes');}} role=\"button\" tabIndex={0}>\n          <span className=\"total remixes\">\n            {this.props.totalRemixes.toLocaleString('en')}\n          </span>{' '}\n          <Pluralize className=\"summary-label\" singular=\"Remix\" plural=\"Remixes\" count={this.props.totalRemixes} showCount={false} />\n        </span>\n      </>\n    );\n  }\n}\n\nTeamAnalyticsSummary.propTypes = {\n  totalAppViews: PropTypes.number.isRequired,\n  totalRemixes: PropTypes.number.isRequired,\n};\n\nexport default TeamAnalyticsSummary;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport dayjs from 'dayjs';\nimport _ from 'lodash';\nimport sampleAnalytics, {sampleAnalyticsTime} from '../../curated/sample-analytics';\n\nimport Loader from './loader.jsx';\nimport TeamAnalyticsTimePop from '../pop-overs/team-analytics-time-pop.jsx';\nimport TeamAnalyticsProjectPop from '../pop-overs/team-analytics-project-pop.jsx';\n\nimport TeamAnalyticsSummary from '../includes/team-analytics-summary.jsx';\nimport TeamAnalyticsActivity from '../includes/team-analytics-activity.jsx';\nimport TeamAnalyticsReferrers from '../includes/team-analytics-referrers.jsx';\nimport TeamAnalyticsProjectDetails from '../includes/team-analytics-project-details.jsx';\n\nconst dateFromTime = (newTime) => {\n  const timeMap = {\n    \"Last 4 Weeks\": dayjs().subtract(4, 'weeks').valueOf(),\n    \"Last 2 Weeks\": dayjs().subtract(2, 'weeks').valueOf(),\n    \"Last 24 Hours\": dayjs().subtract(24, 'hours').valueOf(),\n  };\n  return timeMap[newTime];\n};\n\nconst getAnalytics = async ({id, api, projects}, fromDate, currentProjectDomain) => {\n  if (!projects.length) {\n    const data = _.cloneDeep(sampleAnalytics);\n    // Update timestamps so they're relative to now\n    data.buckets.forEach(bucket => {\n      bucket['@timestamp'] += Date.now() - sampleAnalyticsTime;\n    });\n    return data;\n  }\n  let path = `analytics/${id}/team?from=${fromDate}`;\n  if (currentProjectDomain) {\n    path = `analytics/${id}/project/${currentProjectDomain}?from=${fromDate}`;\n  }\n  try {\n    const {data} = await api.get(path);\n    return data;\n  } catch (error) {\n    console.error('getAnalytics', error);\n  }\n};\n\nclass TeamAnalytics extends React.Component {\n  constructor(props) {\n    super(props);\n    const currentTimeFrame = 'Last 2 Weeks';\n    this.state = {\n      currentTimeFrame,\n      fromDate: dateFromTime(currentTimeFrame),\n      currentProjectDomain: '', // empty string means all projects\n      analytics: {},\n      c3: {},\n      isGettingData: true,\n      isGettingC3: true,\n      totalRemixes: 0,\n      totalAppViews: 0,\n    };\n  }\n\n  updateTotals() {\n    let totalAppViews = 0;\n    let totalRemixes = 0;\n    this.state.analytics.buckets.forEach(bucket => {\n      totalAppViews += bucket.analytics.visits;\n      totalRemixes += bucket.analytics.remixes;\n    });\n    this.setState({\n      totalAppViews: totalAppViews,\n      totalRemixes: totalRemixes,\n    });\n  }\n\n  updateAnalytics() {\n    this.setState({\n      isGettingData: true,\n    });\n    getAnalytics(this.props, this.state.fromDate, this.state.currentProjectDomain).then(data => {\n      this.setState({\n        isGettingData: false,\n        analytics: data,\n      }, () => {\n        this.updateTotals();\n      });\n    });\n  }\n\n  updateTimeFrame(newTime) {\n    this.setState({\n      currentTimeFrame: newTime,\n      fromDate: dateFromTime(newTime)\n    }, () => {\n      this.updateAnalytics();\n    });\n  }\n\n  updateProjectDomain(newDomain) {\n    this.setState({\n      currentProjectDomain: newDomain\n    }, () => {\n      this.updateAnalytics();\n    });\n  }\n    \n  componentDidMount() {\n    // eslint-disable-next-line\n    import(\n      /* webpackChunkName: \"c3-bundle\" */\n      \"c3\"\n    ).then(c3 => {\n      this.setState({\n        c3: c3,\n        isGettingC3: false,\n      });\n      if (this.props.currentUserIsOnTeam) {\n        this.updateAnalytics();\n      }\n    });\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.currentUserIsOnTeam === false && \n      this.props.currentUserIsOnTeam === true &&\n      this.state.isGettingC3 === false\n    ) {\n      this.updateAnalytics();\n    }\n    else if (\n      prevProps.projects.length !== this.props.projects.length &&\n      this.state.isGettingC3 === false\n    ) {\n      this.updateAnalytics();\n      this.setState({\n        currentProjectDomain: ''\n      });\n    }\n  }\n  \n  render() {\n    if (!this.props.currentUserIsOnTeam) {\n      return null;\n    }\n    return (\n      <section className=\"team-analytics\">\n        <h2>\n          Analytics\n          { (this.props.projects.length === 0) && !this.state.isGettingData && (\n            <aside className=\"inline-banners team-page\">\n              Add projects to see their stats\n            </aside>\n          )}\n        </h2>\n\n        \n        { !!this.props.projects.length && (\n          <section className=\"controls\">\n            <TeamAnalyticsProjectPop\n              updateProjectDomain = {this.updateProjectDomain.bind(this)}\n              currentProjectDomain = {this.state.currentProjectDomain}\n              projects = {this.props.projects}\n            />\n            <TeamAnalyticsTimePop \n              updateTimeFrame = {this.updateTimeFrame.bind(this)}\n              currentTimeFrame = {this.state.currentTimeFrame}\n            />\n          </section>\n        )}\n        \n        <section className=\"summary\">\n          {this.state.isGettingData ? <Loader /> :\n            <TeamAnalyticsSummary\n              totalAppViews = {this.state.totalAppViews}\n              totalRemixes = {this.state.totalRemixes}\n            />\n          }\n        </section>\n        \n        <section className=\"activity\">\n          <figure id=\"chart\" className=\"c3\"/>\n          { (this.state.isGettingData || this.state.isGettingC3) && \n            <Loader /> \n          }\n          { (!this.state.isGettingC3) &&\n            <TeamAnalyticsActivity \n              c3 = {this.state.c3}\n              analytics = {this.state.analytics}\n              isGettingData = {this.state.isGettingData}\n              currentTimeFrame = {this.state.currentTimeFrame}\n            />\n          }\n        </section>\n\n        <section className=\"referrers\">\n          <h3>Referrers</h3>\n          { (this.state.isGettingData) &&\n            <Loader />\n          ||\n            <TeamAnalyticsReferrers \n              analytics = {this.state.analytics}\n              totalRemixes = {this.state.totalRemixes}\n              totalAppViews = {this.state.totalAppViews}\n            />\n          }\n        </section>\n        \n        {this.state.currentProjectDomain && (\n          <section className=\"project-details\">\n            <h3>Project Details</h3>\n            <TeamAnalyticsProjectDetails\n              currentProjectDomain = {this.state.currentProjectDomain}\n              id = {this.props.id}\n              api = {this.props.api}\n            />\n          </section>\n        )}\n\n        <section className=\"explanation\">\n          <p>\n            Because Glitch doesn't inject code or cookies into your projects we don't collect the data required for unique app views. You can get uniques by adding Google Analytics to your project.\n          </p>\n        </section>\n        \n        { !this.props.projects.length && <div className=\"placeholder-mask\"></div> }\n      </section>\n    );\n  }\n}\n\nTeamAnalytics.propTypes = {\n  id: PropTypes.number,\n  api: PropTypes.any.isRequired,\n  projects: PropTypes.array.isRequired,\n  currentUserIsOnTeam: PropTypes.bool.isRequired,\n  addProject: PropTypes.func.isRequired,\n  myProjects: PropTypes.array.isRequired,\n};\n\nexport default TeamAnalytics;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {debounce} from 'lodash';\nimport Link from './link.jsx';\n\nexport const TeamMarketing = () => {\n  const forPlatformsIcon = 'https://cdn.glitch.com/be1ad2d2-68ab-404a-82f4-6d8e98d28d93%2Ffor-platforms-icon.svg?1506442305188';\n  return (\n    <section className=\"team-marketing\">\n      <p>\n        <img className=\"for-platforms-icon\" src={forPlatformsIcon} alt=\"fishing emoji\"></img>\n        Want your own team page, complete with detailed app analytics?\n      </p>\n      <Link to=\"/teams\" className=\"button button-link has-emoji\">\n        About Teams <span className=\"emoji fishing_pole\" role=\"img\" aria-label=\"emoji\" />\n      </Link>\n    </section>\n  );\n};\n\nexport const VerifiedBadge = () => {\n  const image = 'https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fverified.svg?1501783108220';\n  const tooltip = 'Verified to be supportive, helpful people';\n  return (\n    <span data-tooltip={tooltip}>\n      <img className=\"verified\" src={image} alt=\"✓\"/>\n    </span>\n  );\n};\n\nexport class WhitelistedDomainIcon extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {src: null};\n  }\n  \n  load() {\n    this.setState({src: 'https://favicon-fetcher.glitch.me/img/' + this.props.domain});\n  }\n  \n  componentDidMount() {\n    this.load();\n    this.load = debounce(this.load.bind(this), 250);\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (prevProps.domain !== this.props.domain) {\n      this.setState({src: null});\n      this.load();\n    }\n  }\n  \n  componentWillUnmount() {\n    this.load.cancel();\n  }\n  \n  render() {\n    const {domain} = this.props;\n    if (this.state.src) {\n      return (\n        <img\n          className=\"whitelisted-domain\"\n          alt={domain}\n          src={this.state.src}\n          onError={() => this.setState({src: null})}\n        />\n      );\n    }\n    return (\n      <div className=\"whitelisted-domain\" aria-label={domain}>\n        {domain[0].toUpperCase()}\n      </div>\n    );\n  }\n}\n\n//temp\nexport const AdminOnlyBadge = ({...props}) => {\n  return (\n    <>\n      { (props.currentUserIsTeamAdmin === false) && \n        <div className=\"status-badge\">\n          <span className=\"status admin\">Admin</span>\n        </div> \n      }\n    </>\n  );\n};\n\nAdminOnlyBadge.propTypes = {\n  currentUserIsTeamAdmin: PropTypes.bool.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getDisplayName} from '../../models/user';\nimport {TrackClick} from '../analytics';\nimport {WhitelistedDomainIcon} from './team-elements.jsx';\nimport {UserAvatar} from '../includes/avatar.jsx';\nimport AddTeamUserPop from '../pop-overs/add-team-user-pop.jsx';\nimport PopoverWithButton from '../pop-overs/popover-with-button.jsx';\nimport PopoverContainer from '../pop-overs/popover-container.jsx';\nimport TeamUserInfoPop from '../pop-overs/team-user-info-pop.jsx';\nimport UsersList from '../users-list.jsx';\n\n// Team Users list (in profile container)\n\nexport const TeamUsers = (props) => (\n  <ul className=\"users\">\n    {props.users.map(user => (\n      <li key={user.id}>\n        <PopoverWithButton \n          buttonClass=\"user button-unstyled\" \n          buttonText={<UserAvatar user={user} suffix={adminStatusDisplay(props.adminIds, user)}/>}\n          passToggleToPop \n        >\n          <TeamUserInfoPop\n            userIsTeamAdmin={props.adminIds.includes(user.id)}\n            userIsTheOnlyMember={props.users.length === 1}\n            user={user}\n            {...props}\n          />\n        </PopoverWithButton>\n      </li>\n    ))}\n  </ul>\n);\n\nconst adminStatusDisplay = (adminIds, user) => {\n  if (adminIds.includes(user.id)) {\n    return \" (admin)\";\n  }\n  return \"\";\n};\n\n\nTeamUsers.propTypes = {\n  users: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n  })).isRequired,\n  currentUserIsOnTeam: PropTypes.bool.isRequired,\n  removeUserFromTeam: PropTypes.func.isRequired,\n  updateUserPermissions: PropTypes.func.isRequired,\n  api: PropTypes.func.isRequired,\n  teamId: PropTypes.number.isRequired,\n  currentUserIsTeamAdmin: PropTypes.bool.isRequired,\n  adminIds: PropTypes.array.isRequired,\n  team: PropTypes.object.isRequired,\n};\n\n\n// Whitelisted domain icon\n\nexport const WhitelistedDomain = ({domain, setDomain}) => {\n  const tooltip = `Anyone with an @${domain} email can join`;\n  return (\n    <PopoverContainer>\n      {({visible, setVisible}) => (\n        <details onToggle={evt => setVisible(evt.target.open)} open={visible} className=\"popover-container whitelisted-domain-container\">\n          <summary data-tooltip={!visible ? tooltip : null}>\n            <WhitelistedDomainIcon domain={domain}/>\n          </summary>\n          <dialog className=\"pop-over\">\n            <section className=\"pop-over-info\">\n              <p className=\"info-description\">\n                {tooltip}\n              </p>\n            </section>\n            {!!setDomain && (\n              <section className=\"pop-over-actions danger-zone\">\n                <button className=\"button button-small button-tertiary button-on-secondary-background has-emoji\" onClick={() => setDomain(null)}>\n                  Remove {domain} <span className=\"emoji bomb\"></span>\n                </button>\n              </section>\n            )}\n          </dialog>\n        </details>\n      )}\n    </PopoverContainer>\n  );\n};\n\nWhitelistedDomain.propTypes = {\n  domain: PropTypes.string.isRequired,\n  setDomain: PropTypes.func,\n};\n\n\n// Add Team User\n\nexport class AddTeamUser extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invitee: '',\n      alreadyInvited: [],\n    };\n    this.removeNotifyInvited = this.removeNotifyInvited.bind(this);\n  }\n  \n  async setWhitelistedDomain(togglePopover, domain) {\n    togglePopover();\n    await this.props.setWhitelistedDomain(domain);\n  }\n  \n  async inviteUser(togglePopover, user) {\n    togglePopover();\n    this.setState((state) => ({\n      invitee: getDisplayName(user),\n      alreadyInvited: [...state.alreadyInvited, user],\n    }));\n    await this.props.inviteUser(user);\n  }\n  \n  async inviteEmail(togglePopover, email) {\n    togglePopover();\n    this.setState({\n      invitee: email,\n    });\n    await this.props.inviteEmail(email);\n  }\n\n  removeNotifyInvited() {\n    this.setState({\n      invitee: '',\n    });\n  }\n\n  render() {\n    const {inviteEmail, inviteUser, setWhitelistedDomain, ...props} = this.props;\n    return (\n      <PopoverContainer>\n        {({visible, togglePopover}) => (\n          <span className=\"add-user-container\">\n            {!!this.state.alreadyInvited.length && \n              <UsersList users={this.state.alreadyInvited}/>\n            }\n            <TrackClick name=\"Add to Team clicked\">\n              <button onClick={togglePopover} className=\"button button-small button-tertiary add-user\">Add</button>\n            </TrackClick>\n            {!!this.state.invitee &&\n              <div className=\"notification notifySuccess inline-notification\" onAnimationEnd={this.removeNotifyInvited}>\n                Invited {this.state.invitee}\n              </div>\n            }\n            {visible && \n              <AddTeamUserPop \n                {...props}\n                setWhitelistedDomain={setWhitelistedDomain ? domain => this.setWhitelistedDomain(togglePopover, domain) : null}\n                inviteUser={inviteUser ? user => this.inviteUser(togglePopover, user) : null}\n                inviteEmail={inviteEmail ? email => this.inviteEmail(togglePopover, email) : null}\n              />\n            }\n          </span>\n        )}\n      </PopoverContainer>\n    );\n  }\n}\nAddTeamUser.propTypes = {\n  inviteEmail: PropTypes.func,\n  inviteUser: PropTypes.func,\n  setWhitelistedDomain: PropTypes.func,\n};\n\n// Join Team\n\nexport const JoinTeam = ({onClick}) => (\n  <button className=\"button button-small button-cta join-team-button\" onClick={onClick}>\n    Join Team\n  </button>\n);","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ThanksText = ({count}) => {\n  if (count === 1) {\n    return \"Thanked once\";\n  } else if (count === 2) {\n    return \"Thanked twice\";\n  } \n  return `Thanked ${count} times`;\n};\nThanksText.propTypes = {\n  count: PropTypes.number.isRequired,\n};\n\nconst Thanks = ({count}) => (count > 0 ? (\n  <p className=\"thanks\">\n    <ThanksText count={count} />\n    &nbsp;\n    <span className=\"emoji sparkling_heart\" />\n  </p>\n) : null);\nThanks.propTypes = {\n  count: PropTypes.number.isRequired,\n};\n\nconst ThanksShort = ({count}) => (\n  <p className=\"thanks\">\n    <span className=\"emoji sparkling_heart\" />\n    &nbsp;\n    {count}\n  </p>\n);\nThanksShort.propTypes = {\n  count: PropTypes.number.isRequired,\n};\n\nexport {Thanks, ThanksShort};\nexport default Thanks;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {uploadAsset, uploadAssetSizes} from '../../utils/assets';\nimport Notifications from '../notifications.jsx';\n\nconst NotifyUploading = ({progress}) => (\n  <>\n    Uploading asset\n    <progress className=\"notify-progress\" value={progress}></progress>\n  </>\n);\nconst NotifyError = () => 'File upload failed. Try again in a few minutes?';\n\nasync function uploadWrapper(notifications, upload) {\n  let result = null;\n  let progress = 0;\n  const {\n    updateNotification,\n    removeNotification,\n  } = notifications.createPersistentNotification(<NotifyUploading progress={progress}/>, 'notifyUploading');\n  try {\n    result = await upload(\n      ({lengthComputable, loaded, total}) => {\n        if (lengthComputable) {\n          progress = loaded/total;\n        } else {\n          progress = (progress+1)/2;\n        }\n        updateNotification(<NotifyUploading progress={progress}/>);\n      }\n    );\n  } catch (e) {\n    notifications.createErrorNotification(<NotifyError/>);\n    throw e;\n  } finally {\n    removeNotification();\n    notifications.createNotification('Image uploaded!');\n  }\n  return result;\n}\n\nconst Uploader = ({children}) => (\n  <Notifications>\n    {notifications => (\n      children({\n        uploadAsset: (blob, policy, key) => {\n          return uploadWrapper(notifications, cb => uploadAsset(blob, policy, key, cb));\n        },\n        uploadAssetSizes: (blob, policy, sizes) => {\n          return uploadWrapper(notifications, cb => uploadAssetSizes(blob, policy, sizes, cb));\n        },\n      })\n    )}\n  </Notifications>\n);\nUploader.propTypes = {\n  children: PropTypes.func.isRequired,\n};\nexport default Uploader;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport LocalStorage from './local-storage.jsx';\n\nconst {Provider, Consumer} = React.createContext();\n\nexport const UserPrefsProvider = ({children}) => (\n  <LocalStorage name=\"community-userPrefs\" default={{}}>\n    {(prefs, set) => (\n      <Provider value={{prefs, set}}>\n        {children}\n      </Provider>\n    )}\n  </LocalStorage>\n);\nUserPrefsProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const UserPref = ({children, name, ...props}) => (\n  <Consumer>\n    {({prefs, set}) => children(\n      prefs[name] !== undefined ? prefs[name] : props.default,\n      value => set({...prefs, [name]: value})\n    )}\n  </Consumer>\n);\nUserPref.propTypes = {\n  children: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n  default: PropTypes.any.isRequired,\n};\n\nexport default UserPref;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport randomColor from 'randomcolor';\nimport {ANON_AVATAR_URL, getAvatarThumbnailUrl, getDisplayName} from '../../models/user';\nimport {ThanksShort} from './thanks.jsx';\nimport {WhitelistedDomainIcon} from './team-elements.jsx';\n\nconst UserResultItem = ({user, action}) => {\n  const name = getDisplayName(user);\n  const {login, thanksCount} = user;\n  \n  const handleClick = (event) => {\n    action(event);\n  };\n\n  return (\n    <button onClick={handleClick} className=\"button-unstyled result result-user\">\n      <img className=\"avatar\" src={getAvatarThumbnailUrl(user)} alt=\"\"/>\n      <div className=\"result-info\">\n        <div className=\"result-name\" title={name}>{name}</div>\n        {!!user.name && <div className=\"result-description\">@{login}</div>}\n        {thanksCount > 0 && <ThanksShort count={thanksCount} />}\n      </div>\n    </button>\n  );\n};\n\nUserResultItem.propTypes = {\n  user: PropTypes.shape({\n    avatarThumbnailUrl: PropTypes.string,\n    name: PropTypes.string,\n    login: PropTypes.string.isRequired,\n    thanksCount: PropTypes.number.isRequired,\n  }).isRequired,\n  action: PropTypes.func.isRequired,\n};\n\nexport default UserResultItem;\n\n\nexport class InviteByEmail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {color: randomColor({luminosity: 'light'})};\n  }\n  \n  render() {\n    const style = {backgroundColor: this.state.color};\n    return (\n      <button onClick={this.props.onClick} className=\"button-unstyled result\">\n        <img className=\"avatar\" src={ANON_AVATAR_URL} style={style} alt=\"\"/>\n        <div className=\"result-name\">Invite {this.props.email}</div>\n      </button>\n    );\n  }\n}\n\nInviteByEmail.propTypes = {\n  email: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport const WhitelistEmailDomain = ({domain, prevDomain, onClick}) => (\n  <button onClick={onClick} className=\"button-unstyled result\">\n    <WhitelistedDomainIcon domain={domain}/>\n    <div className=\"result-name\">Allow anyone with an @{domain} email to join</div>\n    {!!prevDomain && <div className=\"result-description\">This will replace @{prevDomain}</div>}\n  </button>\n);\n\nWhitelistEmailDomain.propTypes = {\n  domain: PropTypes.string.isRequired,\n  prevDomain: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {withRouter} from 'react-router-dom';\n\n// react tells me that nested <a> tags are bad and I shouldn't do that\n// so we will replace the outer tags with a special on click <div> tag\n// which will act like a link (or as close as I can get via nice code)\n\nconst WrappingLink = withRouter(({href, children, className, style, history}) => {\n  const handler = (evt) => {\n    // Real links and interactive elements take priority\n    if (evt.target.closest('a[href], button, input')) return;\n    // Make sure there wasn't a clicky div inside this clicky div\n    if (evt.target.closest('[data-href]') !== evt.currentTarget) return;\n\n    // Ok, this click is real. Do the thing\n    history.push(href);\n  };\n  return (\n    <div data-href onClick={handler} className={className} style={style} role=\"presentation\">\n      {children}\n    </div>\n  );\n});\n\nWrappingLink.propTypes = {\n  href: PropTypes.string.isRequired,\n  children: PropTypes.element.isRequired,\n  className: PropTypes.string,\n  style: PropTypes.object,\n};\n\nexport default WrappingLink;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Redirect} from 'react-router-dom';\nimport Helmet from 'react-helmet';\n\nimport Header from './header.jsx';\nimport Footer from './footer.jsx';\nimport ErrorBoundary from './includes/error-boundary.jsx';\nimport Konami from './includes/konami.jsx';\n\n\nconst Layout = ({children, api, searchQuery}) => (\n  <div className=\"content\">\n    <Helmet>\n      <title>Glitch</title>\n    </Helmet>\n    <Header api={api} searchQuery={searchQuery}/>\n    <ErrorBoundary>\n      {children}\n    </ErrorBoundary>\n    <Footer/>\n    <ErrorBoundary fallback={null}>\n      <Konami>\n        <Redirect to=\"/secret\" push={true}/>\n      </Konami>\n    </ErrorBoundary>\n  </div>\n);\nLayout.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.node.isRequired,\n  searchQuery: PropTypes.string,\n};\n\nexport default Layout;","import React from 'react';\n\nconst {Provider, Consumer} = React.createContext();\n\nconst Notification = ({children, className, remove}) => (\n  <aside className={`notification ${className}`} onAnimationEnd={remove}>\n    {children}\n  </aside>\n);\n\nexport class Notifications extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      notifications: [],\n    };\n  }\n  \n  create(content, className='') {\n    const notification = {\n      id: `${Date.now()}{Math.random()}`,\n      className,\n      content,\n    };\n    this.setState(({notifications}) => ({\n      notifications: [...notifications, notification],\n    }));\n    return notification.id;\n  }\n  \n  createError(content='Something went wrong. Try refreshing?') {\n    this.create(content, 'notifyError');\n  }\n  \n  createPersistent(content, className='') {\n    const id = this.create(content, `notifyPersistent ${className}`);\n    const updateNotification = (content) => {\n      this.setState(({notifications}) => ({\n        notifications: notifications.map(n => n.id === id ? {...n, content} : n),\n      }));\n    };\n    const removeNotification = () => {\n      this.remove(id);\n    };\n    return {\n      updateNotification,\n      removeNotification,\n    };\n  }\n  \n  remove(id) {\n    this.setState(({notifications}) => ({\n      notifications: notifications.filter(n => n.id !== id),\n    }));\n  }\n  \n  render() {\n    const funcs = {\n      createNotification: this.create.bind(this),\n      createPersistentNotification: this.createPersistent.bind(this),\n      createErrorNotification: this.createError.bind(this),\n    };\n    const {notifications} = this.state;\n    return (\n      <>\n        <Provider value={funcs}>\n          {this.props.children}\n        </Provider>\n        {!!notifications.length && (\n          <div className=\"notifications\">\n            {notifications.map(({id, className, content}) => (\n              <Notification key={id} className={className} remove={this.remove.bind(this, id)}>\n                {content}\n              </Notification>\n            ))}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nexport default Consumer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Link from '../includes/link.jsx';\nimport Markdown from '../includes/markdown.jsx';\nimport PopoverContainer from '../pop-overs/popover-container.jsx';\nimport UserPref from '../includes/user-prefs.jsx';\n\nimport newStuffLog from '../../curated/new-stuff-log';\nconst latestId = Math.max(...newStuffLog.map(({id}) => id));\n\nconst NewStuffOverlay = ({setShowNewStuff, showNewStuff, newStuff}) => (\n  <dialog className=\"pop-over overlay new-stuff-overlay overlay-narrow\" open>\n    <section className=\"pop-over-info\">\n      <figure className=\"new-stuff-avatar\"/>\n      <div className=\"overlay-title\">New Stuff</div>\n      <div>\n        <label className=\"button button-small\" htmlFor=\"showNewStuff\">\n          <input id=\"showNewStuff\" className=\"button-checkbox\" type=\"checkbox\"\n            checked={showNewStuff} onChange={evt => setShowNewStuff(evt.target.checked)}\n          />\n          Keep showing me these\n        </label>\n      </div>\n    </section>\n    <section className=\"pop-over-actions\">\n      {newStuff.map(({id, title, body, link}) => (\n        <article key={id}>\n          <div className=\"title\">{title}</div>\n          <div className=\"body\"><Markdown>{body}</Markdown></div>\n          {!!link && (\n            <p>\n              <Link className=\"link\" to={link}>\n                Read the blog post →\n              </Link>\n            </p>\n          )}\n        </article>\n      ))}\n    </section>\n  </dialog>\n);\nNewStuffOverlay.propTypes = {\n  setShowNewStuff: PropTypes.func.isRequired,\n  showNewStuff: PropTypes.bool.isRequired,\n  newStuff: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    title: PropTypes.string.isRequired,\n    body: PropTypes.string.isRequired,\n    link: PropTypes.string,\n  }).isRequired).isRequired,\n};\n\nclass NewStuff extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      log: newStuffLog,\n    };\n  }\n  \n  showNewStuff(setVisible) {\n    setVisible(true);\n    const unreadStuff = newStuffLog.filter(({id}) => id > this.props.newStuffReadId);\n    this.setState({log: unreadStuff.length ? unreadStuff : newStuffLog});\n    this.props.setNewStuffReadId(latestId);\n  }\n  \n  renderOuter({visible, setVisible}) {\n    const {children, isSignedIn, showNewStuff, newStuffReadId} = this.props;\n    const dogVisible = isSignedIn && showNewStuff && (newStuffReadId < latestId);\n    const show = () => {\n      if(window.analytics) {\n        window.analytics.track(\"Pupdate\");\n      }\n      this.showNewStuff(setVisible);\n    };\n    return (\n      <>\n        {children(show)}\n        {dogVisible && (\n          <div className=\"new-stuff-footer\">\n            <button className=\"button-unstyled new-stuff opens-pop-over\" onClick={show}>\n              <figure className=\"new-stuff-avatar\" data-tooltip=\"New\" data-tooltip-top=\"true\" data-tooltip-persistent=\"true\" alt=\"New Stuff\"/>\n            </button>\n          </div>\n        )}\n        {visible && <div className=\"overlay-background\" role=\"presentation\"></div>}\n      </>\n    );\n  }\n  \n  render() {\n    return (\n      <PopoverContainer outer={this.renderOuter.bind(this)}>\n        {({visible}) => (visible ? (\n          <NewStuffOverlay {...this.props} newStuff={this.state.log}/>\n        ) : null)}\n      </PopoverContainer>\n    );\n  }\n}\nNewStuff.propTypes = {\n  children: PropTypes.func.isRequired,\n  isSignedIn: PropTypes.bool.isRequired,\n  showNewStuff: PropTypes.bool.isRequired,\n  newStuffReadId: PropTypes.number.isRequired,\n  setNewStuffReadId: PropTypes.func.isRequired,\n};\n\nconst NewStuffContainer = ({children, isSignedIn}) => (\n  <UserPref name=\"showNewStuff\" default={true}>\n    {(showNewStuff, setShowNewStuff) => (\n      <UserPref name=\"newStuffReadId\" default={0}>\n        {(newStuffReadId, setNewStuffReadId) => (\n          <NewStuff {...{isSignedIn, showNewStuff, newStuffReadId, setShowNewStuff, setNewStuffReadId}}>\n            {children}\n          </NewStuff>\n        )}\n      </UserPref>\n    )}\n  </UserPref>\n);\nNewStuffContainer.propTypes = {\n  children: PropTypes.func.isRequired,\n  isSignedIn: PropTypes.bool.isRequired,\n};\n\nexport default NewStuffContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport PopoverContainer from '../pop-overs/popover-container.jsx';\n\nconst Video = () => (\n  <div className=\"wistia_responsive_padding\">\n    <div className=\"wistia_responsive_wrapper\">\n      <div className=\"wistia_embed wistia_async_i0m98yntdb\" videofoam=\"true\">\n      </div>\n    </div>\n  </div>\n);\n\nconst OverlayVideo = ({children}) => (\n  <PopoverContainer>\n    {({visible, setVisible}) => (\n      <details onToggle={evt => setVisible(evt.target.open)} open={visible} className=\"overlay-container\">\n        <summary>{children}</summary>\n        <dialog className=\"overlay video-overlay\">\n          <section className=\"pop-over-actions\">\n            <Video/>\n          </section>\n        </dialog>\n      </details>\n    )}\n  </PopoverContainer>\n);\nOverlayVideo.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default OverlayVideo;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport Layout from '../layout.jsx';\n\nimport {AnalyticsContext} from '../analytics';\nimport {DataLoader} from '../includes/loader.jsx';\nimport {ProjectsUL} from '../projects-list.jsx';\nimport ProjectsLoader from '../projects-loader.jsx';\nimport Categories from '../categories.jsx';\n\nimport CollectionEditor from '../collection-editor.jsx';\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\n\nconst CategoryPageWrap = ({\n  addProjectToCollection, \n  api, \n  category, \n  currentUser,\n  ...props\n}) => (\n  <>\n    <Helmet>\n      <title>{category.name}</title>\n    </Helmet>\n    <main className=\"collection-page\">\n      <article className=\"projects\" style={{backgroundColor: category.backgroundColor}}>\n        <header className=\"collection\">\n          <h1 className=\"collection-name\">\n            {category.name}\n          </h1>\n          <div className=\"collection-image-container\">\n            <img src={category.avatarUrl} alt=\"\"/>\n          </div>\n          \n          <p className=\"description\">\n            {category.description}\n          </p>\n\n          \n        </header>\n        \n        <ProjectsLoader api={api} projects={category.projects}>\n          {projects =>\n            <div className=\"collection-contents\">\n              <div className=\"collection-project-container-header\">\n                <h3>Projects ({category.projects.length})</h3>\n              </div>\n\n              {(currentUser.login ? \n                <ProjectsUL {...{projects, currentUser, api, addProjectToCollection}} category={true}\n                  projectOptions={{\n                    addProjectToCollection\n                  }} \n                  {...props}/>\n                :\n                <ProjectsUL {...{projects, currentUser, api, addProjectToCollection}} category={true}\n                  projectOptions={{}} {...props}/>\n              )}\n            </div>\n          }\n        </ProjectsLoader>\n        \n      </article>\n      \n    </main>\n    <Categories/>\n  </>\n);\n\nCategoryPageWrap.propTypes = {\n  category: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    backgroundColor: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    projects: PropTypes.array.isRequired\n  }).isRequired,\n  api: PropTypes.any.isRequired,\n  addProjectToCollection: PropTypes.func.isRequired,\n};\n\nasync function loadCategory(api, id) {\n  const {data} = await api.get(`categories/${id}`);\n  return data;\n}  \n\nconst CategoryPage = ({api, category, ...props}) => (\n  <Layout api={api}>\n    <AnalyticsContext properties={{origin: 'category'}}>\n      <DataLoader get={() => loadCategory(api, category.id)}>\n        {category => (\n          <CollectionEditor api={api} initialCollection={category} >\n            {(category, funcs) => (\n              <CurrentUserConsumer>\n                {(currentUser) => (\n                  <CategoryPageWrap category={category} api={api} userIsAuthor={false} currentUser={currentUser} {...funcs} {...props}/>\n                )}\n              </CurrentUserConsumer>\n            )}\n          </CollectionEditor>\n        )}\n      </DataLoader>\n    </AnalyticsContext>\n  </Layout>\n);\n\nCategoryPage.propTypes = {\n  api: PropTypes.any.isRequired,\n  category: PropTypes.object.isRequired,\n};\n\nexport default CategoryPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Redirect} from 'react-router-dom';\n\nimport Helmet from 'react-helmet';\nimport Layout from '../layout.jsx';\nimport {getContrastTextColor, getLink, getOwnerLink, hexToRgbA} from '../../models/collection';\n\nimport {AnalyticsContext} from '../analytics';\nimport {DataLoader} from '../includes/loader.jsx';\nimport {ProjectsUL} from '../projects-list.jsx';\nimport ProjectsLoader from '../projects-loader.jsx';\nimport NotFound from '../includes/not-found.jsx';\n\nimport {AuthDescription} from '../includes/description-field.jsx';\nimport CollectionEditor from '../collection-editor.jsx';\n\nimport EditCollectionColor from '../includes/edit-collection-color.jsx';\nimport EditCollectionNameAndUrl from '../includes/edit-collection-name-and-url.jsx';\nimport AddCollectionProject from '../includes/add-collection-project.jsx';\nimport ReportButton from '../pop-overs/report-abuse-pop.jsx';\n\nimport CollectionAvatar from '../includes/collection-avatar.jsx';\nimport {TeamTile} from '../teams-list';\nimport {UserTile} from '../users-list';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\nfunction syncPageToUrl(collection, url) {\n  history.replaceState(null, null, getLink({...collection, url}));\n}\n\nclass DeleteCollectionBtn extends React.Component {\n  constructor(props){\n    super(props);\n    this.state ={\n      done: false,\n    };\n  } \n  render(){\n    if(this.state.done){\n      return <Redirect to={getOwnerLink(this.props.collection)} />;\n    }\n    return (\n      <button className={`button delete-collection button-tertiary`} \n        onClick={() => \n        { \n          if(!window.confirm(`Are you sure you want to delete your collection?`)){\n            return;\n          }\n          this.props.deleteCollection();\n          this.setState({done: true});\n        }} >\n        Delete Collection\n      </button>\n    );\n    \n  }\n}\n\nDeleteCollectionBtn.propTypes = {\n  collection: PropTypes.shape({\n    team: PropTypes.object,\n    user: PropTypes.object,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n  deleteCollection: PropTypes.func.isRequired,\n};\n\nconst CollectionPageContents = ({\n  api, \n  collection, \n  currentUser,\n  deleteCollection,\n  isAuthorized,\n  updateNameAndUrl,\n  updateDescription, \n  addProjectToCollection, \n  removeProjectFromCollection,\n  updateColor,\n  ...props}) => (\n  \n  <>  \n    <Helmet>\n      <title>{collection.name}</title>\n    </Helmet>\n    <main className=\"collection-page\">\n      <article className=\"projects\" style={{backgroundColor: collection.coverColor}}>\n        <header className={\"collection \" + (getContrastTextColor(collection.coverColor) == \"white\" ? \"dark\" : \"\")}>\n          <div className=\"collection-image-container\">\n            <CollectionAvatar backgroundColor={hexToRgbA(collection.coverColor)}/>\n          </div>\n          \n          <EditCollectionNameAndUrl isAuthorized={isAuthorized}\n            name={collection.name} url={collection.url}\n            update={data => updateNameAndUrl(data).then(() => syncPageToUrl(collection, data.url))}\n          />\n          \n          {collection.team && <TeamTile team={collection.team}/>}\n          {collection.user && <UserTile {...collection.user}/>}\n          \n          <div className=\"collection-description\">\n            <AuthDescription\n              authorized={isAuthorized} description={collection.description}\n              update={updateDescription} placeholder=\"Tell us about your collection\"\n            />\n          </div>\n          \n          {isAuthorized && <EditCollectionColor\n            update={updateColor}\n            initialColor={collection.coverColor}\n          />}\n          \n        </header>\n        \n        {!!collection &&\n           <ProjectsLoader api={api} projects={collection.projects}>\n             {projects => \n               <>\n                 <div className=\"collection-contents\">\n                   <div className=\"collection-project-container-header\">\n                     <h3>Projects ({collection.projects.length})</h3>\n                \n                     {!!isAuthorized && (\n                       <AddCollectionProject\n                         addProjectToCollection={addProjectToCollection}\n                         collection={collection}\n                         api={api}\n                         currentUserIsOwner={isAuthorized}\n                         currentUser={currentUser}\n                       />\n                     )}\n                \n                   </div>\n          \n                   {(collection.projects.length > 0 ?\n                     (isAuthorized\n                       ? <ProjectsUL {...{projects, currentUser, api}}\n                         projectOptions={{\n                           removeProjectFromCollection,\n                           addProjectToCollection,\n                         }} \n                         {...props}/>\n\n                       : \n                       (currentUser && currentUser.login \n                         ? <ProjectsUL {...{projects, currentUser, api}} \n                           projectOptions={{\n                             addProjectToCollection\n                           }} \n                           {...props}/>\n                         :\n                         <ProjectsUL {...{projects, currentUser, api}} \n                           projectOptions={{}} \n                           {...props}/>\n                       )\n                     )\n                     :\n                     (isAuthorized\n                       ?\n                       <div className=\"empty-collection-hint\">\n                         <img src=\"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fpsst-pink.svg?1541086338934\" alt=\"\"/>\n                         <p>You can add any project, created by any user</p>\n                       </div>\n                       :  <div className=\"empty-collection-hint\">\n                         No projects to see in this collection just yet.\n                       </div>\n                     )\n                   )}\n                 </div>\n          \n               </>\n             }\n           </ProjectsLoader>\n        }\n      </article>\n      {!isAuthorized && <ReportButton reportedType=\"collection\" reportedModel={collection} />}\n    </main>\n   {isAuthorized && <DeleteCollectionBtn collection={collection} deleteCollection={deleteCollection}/>}\n  </>\n);\n\nCollectionPageContents.propTypes = {\n  addProjectToCollection: PropTypes.func,\n  api: PropTypes.any.isRequired,\n  collection: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    backgroundColor: PropTypes.string,\n    description: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    projects: PropTypes.array.isRequired\n  }).isRequired,\n  children: PropTypes.node,\n  currentUser: PropTypes.object,\n  deleteCollection: PropTypes.func.isRequired,\n  isAuthorized: PropTypes.any.isRequired,  \n  removeProjectFromCollection: PropTypes.func,\n  uploadAvatar: PropTypes.func,\n};\n\nconst getOrNull = async(api, route) => {\n  try {\n    const {data} = await api.get(route);\n    return data;\n  } catch (error) {\n    if (error && error.response && error.response.status === 404) {\n      return null;\n    }\n    throw error;\n  }\n};\n\nasync function getUserIdByLogin(api, userLogin){\n  const {data} = await api.get(`userid/byLogin/${userLogin}`);\n  if(data === \"NOT FOUND\"){\n    return null;\n  }\n  return data;\n}\n\nasync function loadCollection(api, ownerName, collectionName){\n  let collections = [];\n  \n  // get team by url\n  const team = await getOrNull(api, `teams/byUrl/${ownerName}`);\n  if (team) {\n    const {data} = await api.get(`collections?teamId=${team.id}`);\n    collections = data;\n  } else {\n    \n    // get userId by login name\n    const userId = await getUserIdByLogin(api, ownerName);\n    if (userId) {\n      const {data} = await api.get(`collections?userId=${userId}`);\n      collections = data;\n    }\n  }\n  \n  // pick out the correct collection, then load the full data\n  const collectionMatch = collections.find(c => c.url == collectionName);\n  const collection = collectionMatch && await getOrNull(api, `collections/${collectionMatch.id}`);\n  if (!collection) return null;\n  \n  // inject the full team so we get their projects and members\n  if (team) {\n    collection.team = team;\n  }\n  \n  return collection;\n}  \n\nconst CollectionPage = ({api, ownerName, name, ...props}) => (\n  <Layout api={api}>\n    <DataLoader get={() => loadCollection(api, ownerName, name)}>\n      {collection => collection ? (\n        <AnalyticsContext properties={{origin: 'collection'}} context={{groupId: collection.team ? collection.team.id.toString() : '0'}}>\n          <CurrentUserConsumer>\n            {(currentUser) => (\n              <CollectionEditor api={api} initialCollection={collection} >\n                {(collection, funcs, userIsAuthor) =>(\n                  <CollectionPageContents collection={collection} api={api} currentUser={currentUser} isAuthorized={userIsAuthor} {...funcs} {...props}/>\n                )}\n              </CollectionEditor>\n            )}\n          </CurrentUserConsumer>\n        </AnalyticsContext>\n      ) : <NotFound name={name}/>}\n    </DataLoader>\n  </Layout>\n);\n\nexport default CollectionPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Helmet} from 'react-helmet';\nimport Layout from '../layout';\n\nimport {getShowUrl} from '../../models/project';\nimport {CurrentUserConsumer} from '../current-user';\nimport NotFound from '../includes/not-found';\n\nconst telescopeImageUrl = 'https://cdn.glitch.com/7138972f-76e1-43f4-8ede-84c3cdd4b40a%2Ftelescope_404.svg?1543258683849';\n\nexport const NotFoundPage = ({api}) => (\n  <Layout api={api}>\n    <Helmet>\n      <title>👻 Page not found</title> {/* eslint-disable-line */}\n    </Helmet>\n    <main className=\"error-page-container\">\n      <img className=\"error-image\" src={telescopeImageUrl} alt=\"\" width=\"318px\" height=\"297px\" />\n      <div className=\"error-msg\">\n        <h1>Page Not Found</h1>\n        <p>Maybe a typo, or perhaps it's moved?</p>\n        <a className=\"button button-link\" href=\"/\">Back to Glitch</a>\n      </div>\n    </main>\n  </Layout>\n);\n\nNotFoundPage.propTypes = {\n  api: PropTypes.func.isRequired,\n};\n\nconst emailImageUrl = 'https://cdn.glitch.com/26ac422d-705d-42be-b9cb-1fbdfe7e5a63%2Ferror-mailer.svg?1543429767321';\n\nexport const EmailErrorPage = ({api, title, description}) => (\n  <Layout api={api}>\n    <Helmet>\n      <title>✉️ {title}</title> {/* eslint-disable-line */}\n    </Helmet>\n    <main className=\"error-page-container\">\n      <img className=\"error-image email-error-image\" src={emailImageUrl} alt=\"\" width=\"470px\"/>\n      <div className=\"error-msg\">\n        <h1>{title}</h1>\n        <p>{description}</p>\n        <a className=\"button button-link\" href=\"/\">Back to Glitch</a>\n      </div>\n    </main>\n  </Layout>\n);\n\nEmailErrorPage.propTypes = {\n  api: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n};\n\nconst oauthImageUrl = 'https://cdn.glitch.com/8ae9b195-ef39-406b-aee0-764888d15665%2Foauth-key.svg?1544466885907';\n\nexport const OauthErrorPage = ({api, title, description}) => (\n  <Layout api={api}>\n    <Helmet>\n      <title>🔑 {title}</title> {/* eslint-disable-line */}\n    </Helmet>\n    <main className=\"error-page-container\">\n      <img className=\"error-image\" src={oauthImageUrl} alt=\"\" width=\"370px\"/>\n      <div className=\"error-msg\">\n        <h1>{title}</h1>\n        <p>{description}</p>\n        <a className=\"button button-link\" href=\"/\">Back to Glitch</a>\n      </div>\n    </main>\n  </Layout>\n);\n\nOauthErrorPage.propTypes = {\n  api: PropTypes.func.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n};\n\nclass ProjectNotFoundPageReloader extends React.Component {\n  async check() {\n    const {data} = await this.props.api.get(`projects/${this.props.name}`);\n    if (data) {\n      window.location.replace(getShowUrl(this.props.name));\n    }\n  }\n  componentDidMount() {\n    this.check();\n  }\n  componentDidUpdate(prevProps) {\n    const token = this.props.currentUser && this.props.currentUser.persistentToken;\n    const prevToken = prevProps.currentUser && prevProps.currentUser.persistentToken;\n    if (this.props.name !== prevProps.name || token !== prevToken) {\n      this.check();\n    }\n  }\n  render() {\n    return null;\n  }\n}\nexport const ProjectNotFoundPage = ({api, name}) => (\n  <Layout api={api}>\n    <Helmet>\n      <title>👻 Project not found</title> {/* eslint-disable-line */}\n    </Helmet>\n    <NotFound name={name}/>\n    <p>Either there's no project here, or you don't have access to it.  Are you logged in as the right user?</p>\n    <CurrentUserConsumer>\n      {currentUser => <ProjectNotFoundPageReloader api={api} name={name} currentUser={currentUser}/>}\n    </CurrentUserConsumer>\n  </Layout>\n);\n\nProjectNotFoundPage.propTypes = {\n  api: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Layout from '../layout.jsx';\n\nimport {getEditorUrl} from '../../models/project';\nimport {AnalyticsContext} from '../analytics';\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport Link from '../includes/link.jsx';\n\nimport Categories from '../categories.jsx';\nimport Featured from '../featured.jsx';\nimport OverlayVideo from '../overlays/overlay-video.jsx';\nimport Questions from '../questions.jsx';\nimport RandomCategories from '../random-categories.jsx';\nimport RecentProjects from '../recent-projects.jsx';\nimport ReportButton from '../pop-overs/report-abuse-pop.jsx';\n\nfunction loadScript(src) {\n  const script = document.createElement('script');\n  script.src = src;\n  script.async = true;\n  document.head.appendChild(script);\n}\n\nconst Callout = ({classes, imgUrl, title, description}) => (\n  <div className={\"callout \" + classes}>\n    <img className=\"badge\" src={imgUrl} alt={title}></img>  \n    <div className=\"window\">\n      <div className=\"title\">{title}</div>\n      <div className=\"description\">{description}</div>\n    </div>\n  </div>\n);\nCallout.propTypes = {\n  classes: PropTypes.string,\n  imgUrl: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string,\n};\n  \nclass WhatIsGlitch extends React.Component {\n  componentDidMount() {\n    loadScript('//fast.wistia.com/embed/medias/i0m98yntdb.jsonp');\n    loadScript('//fast.wistia.com/assets/external/E-v1.js');\n  }\n  \n  render() {\n    const witchLarge = \"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fglitch-witch-large.svg?1543872118446\";\n    const witchSmall = \"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fglitch-witch-small.svg?1543872119039\";\n    \n    const discover = \"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fexplore-illustration.svg?1543508598659\";\n    const remix = \"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fremix-illustration.svg?1543508529783\";\n    const collaborate = \"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fcollaborate-illustration.svg?1543508686482\";\n    \n    const play = \"https://cdn.glitch.com/6ce807b5-7214-49d7-aadd-f11803bc35fd%2Fplay.svg\";\n    const whatsGlitchAlt = \"Glitch is the friendly community where you'll find the app of your dreams\";\n    \n    return (\n      <section className=\"what-is-glitch\">\n        <span>\n          <figure>\n            <h1>\n              <img className=\"witch large\" src={witchLarge} alt={whatsGlitchAlt}/>\n              <img className=\"witch small\" src={witchSmall} alt={whatsGlitchAlt}/>\n            </h1>\n            \n            <OverlayVideo>\n              <div className=\"button video\">\n                <img className=\"play-button\" src={play} alt=\"How it works\"/>\n                <span>How it works</span>\n              </div>\n            </OverlayVideo>\n          </figure>\n          \n          <div className=\"callouts\">\n            <Callout classes=\"discover\" imgUrl={discover} title=\"Explore Apps\" description=\"Discover over a million free apps built by people like you\"/>\n            <Callout classes=\"remix\" imgUrl={remix} title=\"Remix Anything\" description=\"Edit any project and have your own app running instantly\"/>\n            <Callout classes=\"collaborate\" imgUrl={collaborate} title=\"Build with Your Team\" description=\"Invite everyone to create together\"/>          </div>\n              \n        </span>\n      </section>\n    );\n  }\n}\n\nconst MadeInGlitch = () => (\n  <section className=\"made-in-glitch\">\n    <p>Of course, this site was made on Glitch too</p>\n    <Link to={getEditorUrl('community')} className=\"button button-link has-emoji\">\n      View Source <span className=\"emoji carp_streamer\"></span>\n    </Link>\n  </section>\n);\n\nconst IndexPage = ({api, user}) => (\n  <main>\n    {!user.login && <WhatIsGlitch/>}\n    \n    {!!user.projects.length && <RecentProjects api={api}/>}\n    {!!user.login && <Questions api={api}/>}\n    <Featured isAuthorized={!!user.login}/>\n    <RandomCategories api={api}/>\n    <Categories/>\n    <MadeInGlitch/>\n    <ReportButton reportedType=\"home\" />\n  </main>\n);\nIndexPage.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    login: PropTypes.string,\n  }),\n};\n\nconst IndexPageContainer = ({api}) => (\n  <Layout api={api}>\n    <AnalyticsContext properties={{origin: 'index'}}>\n      <CurrentUserConsumer>\n        {user => <IndexPage api={api} user={user}/>}\n      </CurrentUserConsumer>\n    </AnalyticsContext>\n  </Layout>\n);\n\nexport default IndexPageContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {captureMessage, captureException} from '../../utils/sentry';\n\nimport {Redirect} from 'react-router-dom';\nimport {getLink} from '../../models/team';\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport NotificationsConsumer from '../notifications.jsx';\n\nclass JoinTeamPageBase extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: null,\n    };\n  }\n  \n  async componentDidMount() {\n    try {\n      var {data: team} = await this.props.api.get(`/teams/byUrl/${this.props.teamUrl}`);\n    } catch (error) {\n      if (error && !(error.response && error.response.status === 404)) {\n        captureException(error);\n      }\n    }\n    if (!team) {\n      // Either the api is down or the team doesn't exist\n      // Regardless we can't really do anything with this\n      this.props.createErrorNotification('Invite failed, try asking your teammate to resend the invite');\n      this.setState({redirect: getLink({url: this.props.teamUrl})});\n      return;\n    }\n    try {\n      // Suppress the authorization header to prevent user merging\n      await this.props.api.post(`/teams/${team.id}/join/${this.props.joinToken}`, {}, { headers: { Authorization: '' } });\n      this.props.createNotification('Invitation accepted');\n    } catch (error) {\n      // The team is real but the token didn't work\n      // Maybe it's been used already or expired?\n      console.log('Team invite error', error && error.response && error.response.data);\n      captureMessage('Team invite error', {extra: {error}});\n      this.props.createErrorNotification('Invite failed, try asking your teammate to resend the invite');\n    }\n    await this.props.reloadCurrentUser();\n    this.setState({redirect: getLink(team)});\n  }\n  \n  render() {\n    if (this.state.redirect) {\n      return <Redirect to={this.state.redirect}/>;\n    }\n    return null;\n  }\n}\nJoinTeamPageBase.propTypes = {\n  api: PropTypes.any.isRequired,\n  teamUrl: PropTypes.string.isRequired,\n  joinToken: PropTypes.string.isRequired,\n  createErrorNotification: PropTypes.func.isRequired,\n  createNotification: PropTypes.func.isRequired,\n  reloadCurrentUser: PropTypes.func.isRequired,\n};\n\nexport const JoinTeamPage = (props) => (\n  <CurrentUserConsumer>\n    {(currentUser, fetched, {reload}) => (\n      <NotificationsConsumer>\n        {notify => <JoinTeamPageBase {...notify} {...props} reloadCurrentUser={reload}/>}\n      </NotificationsConsumer>\n    )}\n  </CurrentUserConsumer>\n);\n\nexport default JoinTeamPage;","/* globals APP_URL analytics */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {captureMessage} from '../../utils/sentry';\n\nimport {Redirect} from 'react-router-dom';\nimport LocalStorage from '../includes/local-storage';\nimport {CurrentUserConsumer} from '../current-user';\nimport {EmailErrorPage, OauthErrorPage} from './error';\n\n// The Editor may embed /login/* endpoints in an iframe in order to share code.\n// NotifyParent allows the editor to receive messages from this page.\n// We use this to pass on auth success/failure messages.\nfunction notifyParent(message={}) {\n  if(window.parent === window) {\n    return;\n  }\n\n  // Specifically target our same origin;\n  // we're only communicating between the editor and its corresponding ~community site,\n  // not across other environments.\n  const sameOrigin = window.origin;\n  \n  // Add 'LoginMessage' to all messages of this type so that the Editor\n  // can filter for them specifically.\n  message.type = \"LoginMessage\";\n  \n  window.parent.postMessage(message, sameOrigin);\n}\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      done: false,\n      redirect: { pathname: '/' },\n      error: false,\n      errorMessage: null,\n    };\n  }\n  \n  async componentDidMount() {\n    const {api, provider, url, destination} = this.props;\n    this.props.setDestination(undefined);\n    \n    try {\n      const {data} = await api.post(url);\n      if (data.id <= 0) {\n        throw new Error(`Bad user id (${data.id}) after ${provider} login`);\n      }\n      \n      console.log(\"LOGGED IN\", data);\n      this.props.setUser(data);\n      \n      if (destination && destination.expires > new Date().toISOString()) {\n        this.setState({redirect: destination.to});\n      }\n      \n      this.setState({done: true});\n      analytics.track(\"Signed In\", {provider});\n      notifyParent({success: true, details: {provider}});\n    } catch (error) {\n      this.setState({error: true});\n      \n      const errorData = error && error.response && error.response.data;\n      if (errorData && errorData.message) {\n        this.setState({errorMessage: errorData.message});\n      }\n      \n      const details = {provider, error: errorData};\n      console.error(\"Login error.\", details);\n      captureMessage(\"Login error\", {extra: details});\n      notifyParent({success: false, details});\n    }\n  }\n  \n  render() {\n    if (this.state.done) {\n      return <Redirect to={this.state.redirect}/>;\n    } else if (this.state.error) {\n      const genericDescription = \"Hard to say what happened, but we couldn't log you in. Try again?\";\n      if (this.props.provider === \"Email\") {\n        return <EmailErrorPage api={this.props.api} title={`${this.props.provider} Login Problem`} description={this.state.errorMessage || genericDescription}/>;\n      }\n      return <OauthErrorPage api={this.props.api} title={`${this.props.provider} Login Problem`} description={this.state.errorMessage || genericDescription}/>;\n    }\n    return <div className=\"content\"></div>;\n  }\n}\nLoginPage.propTypes = {\n  api: PropTypes.any.isRequired,\n  url: PropTypes.string.isRequired,\n  provider: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n  destination: PropTypes.shape({\n    expires: PropTypes.string.isRequired,\n    to: PropTypes.object.isRequired,\n  }),\n  hash: PropTypes.string,\n};\n\nconst LoginPageContainer = (props) => (\n  <LocalStorage name=\"destinationAfterAuth\" default={undefined}>\n    {(destination, setDestination, loaded) => (loaded &&\n      <CurrentUserConsumer>\n        {(currentUser, fetched, {login}) => <LoginPage setUser={login} destination={destination} setDestination={setDestination} {...props}/>}\n      </CurrentUserConsumer>\n    )}\n  </LocalStorage>\n);\n\nexport const FacebookLoginPage = ({code, ...props}) => {\n  const callbackUrl = `${APP_URL}/login/facebook`;\n  const url = `/auth/facebook/${code}?callbackURL=${encodeURIComponent(callbackUrl)}`;\n  return <LoginPageContainer {...props} provider=\"Facebook\" url={url}/>;\n};\n\nexport const GitHubLoginPage = ({code, ...props}) => {\n  const url = `/auth/github/${code}`;\n  return <LoginPageContainer {...props} provider=\"GitHub\" url={url}/>;\n};\n\nexport const EmailTokenLoginPage = ({token, ...props}) => {\n  const url = `/auth/email/${token}`;\n  return <LoginPageContainer {...props} provider=\"Email\" url={url}/>;\n};","/* global analytics */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport {getAvatarUrl} from '../../models/project';\n\nimport {AnalyticsContext} from '../analytics';\nimport {DataLoader} from '../includes/loader.jsx';\nimport NotFound from '../includes/not-found.jsx';\nimport {Markdown} from '../includes/markdown.jsx';\nimport ProjectEditor from '../project-editor.jsx';\nimport Expander from '../includes/expander.jsx';\nimport EditableField from '../includes/editable-field.jsx';\nimport Embed from '../includes/embed.jsx';\nimport {AuthDescription} from '../includes/description-field.jsx';\nimport {InfoContainer, ProjectInfoContainer} from '../includes/profile.jsx';\nimport {ShowButton, EditButton, RemixButton} from '../includes/project-actions.jsx';\nimport ReportButton from '../pop-overs/report-abuse-pop.jsx';\nimport AddProjectToCollection from '../includes/add-project-to-collection.jsx';\nimport TeamsList from '../teams-list.jsx';\nimport UsersList from '../users-list.jsx';\nimport RelatedProjects from '../includes/related-projects.jsx';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\nimport Layout from '../layout.jsx';\n\nfunction trackRemix(id, domain) {\n  analytics.track(\"Click Remix\", {\n    origin: \"project page\",\n    baseProjectId: id,\n    baseDomain: domain,\n  });\n}\n\nfunction syncPageToDomain(domain) {\n  history.replaceState(null, null, `/~${domain}`);\n}\n\nconst PrivateTooltip = \"Only members can view code\";\nconst PublicTooltip = \"Visible to everyone\";\n\nconst PrivateBadge = () => (\n  <span className=\"project-badge private-project-badge\" aria-label={PrivateTooltip} data-tooltip={PrivateTooltip}></span>\n);\n\nconst PrivateToggle = ({isPrivate, setPrivate}) => {\n  const tooltip = isPrivate ? PrivateTooltip : PublicTooltip;\n  const classBase = \"button-tertiary button-on-secondary-background project-badge\";\n  const className = isPrivate ? 'private-project-badge' : 'public-project-badge';\n  return (\n    <span data-tooltip={tooltip}>\n      <button aria-label={tooltip}\n        onClick={() => setPrivate(!isPrivate)}\n        className={`${classBase} ${className}`}\n      />\n    </span>\n  );\n};\nPrivateToggle.propTypes = {\n  isPrivate: PropTypes.bool.isRequired,\n  setPrivate: PropTypes.func.isRequired,\n};\n\n\n\nconst ReadmeError = (error) => (\n  (error && error.response && error.response.status === 404)\n    ? <>This project would be even better with a <code>README.md</code></>\n    : <>We couldn't load the readme. Try refreshing?</>\n);\nconst ReadmeLoader = ({api, domain}) => (\n  <DataLoader get={() => api.get(`projects/${domain}/readme`)} renderError={ReadmeError}>\n    {({data}) => <Expander height={250}><Markdown>{data}</Markdown></Expander>}\n  </DataLoader>\n);\nReadmeLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n  domain: PropTypes.string.isRequired,\n};\n\nconst ProjectPage = ({\n  project,\n  addProjectToCollection,\n  api,\n  currentUser,\n  isAuthorized,\n  updateDomain,\n  updateDescription,\n  updatePrivate,\n}) => {\n  const {domain, users, teams} = project; \n  return <main className=\"project-page\">\n    <section id=\"info\">\n      <InfoContainer>\n        <ProjectInfoContainer style={{backgroundImage: `url('${getAvatarUrl(project.id)}')`}}>\n          <h1>\n            {(isAuthorized ? (\n              <EditableField value={domain} placeholder=\"Name your project\"\n                update={domain => updateDomain(domain).then(() => syncPageToDomain(domain))}\n                suffix={<PrivateToggle isPrivate={project.private} isMember={isAuthorized} setPrivate={updatePrivate}/>}\n              />\n            ) : <>{domain} {project.private && <PrivateBadge/>}</>)}\n          </h1>\n          <div className=\"users-information\">\n            <UsersList users={users} />\n            {!!teams.length && <TeamsList teams={teams}/>}\n          </div>\n          <AuthDescription\n            authorized={isAuthorized} description={project.description}\n            update={updateDescription} placeholder=\"Tell us about your app\"\n          />\n          <p className=\"buttons\">\n            <ShowButton name={domain}/>\n            <EditButton name={domain} isMember={isAuthorized}/>\n          </p>\n        </ProjectInfoContainer>\n      </InfoContainer>\n    </section>\n    <section id=\"embed\">\n      <Embed domain={domain}/>\n      <div className=\"buttons space-between\">\n        <ReportButton reportedType=\"project\" reportedModel={project} />\n        <div>\n          {currentUser.login && <AddProjectToCollection className=\"button-small margin\" api={api} currentUser={currentUser} project={project} fromProject={true} addProjectToCollection={addProjectToCollection}/>}\n          <RemixButton className=\"button-small margin\"\n            name={domain} isMember={isAuthorized}\n            onClick={() => trackRemix(project.id, domain)}\n          />\n        </div>\n      </div>\n    </section>\n    <section id=\"readme\">\n      <ReadmeLoader api={api} domain={domain}/>\n    </section>\n    <section id=\"related\">\n      <RelatedProjects ignoreProjectId={project.id} {...{api, teams, users}}/>\n    </section>\n  </main>;\n};\nProjectPage.propTypes = {\n  api: PropTypes.any.isRequired,\n  currentUser: PropTypes.object.isRequired,\n  isAuthorized: PropTypes.bool.isRequired,\n  project: PropTypes.object.isRequired,\n};\n\nasync function getProject(api, domain) {\n  const {data} = await api.get(`projects/${domain}`);\n  console.log(\"project\", data);\n  return data;\n}\n\nconst ProjectPageLoader = ({domain, api, currentUser, ...props}) => (\n  <DataLoader get={() => getProject(api, domain)} renderError={() => <NotFound name={domain}/>}>\n    {project => project ? (\n      <ProjectEditor api={api} initialProject={project}>\n        {(project, funcs, userIsMember) => (\n          <>\n            <Helmet>\n              <title>{project.domain}</title>\n            </Helmet>\n            <ProjectPage api={api} project={project} {...funcs} isAuthorized={userIsMember} currentUser={currentUser} {...props}/>\n          </>\n        )}\n      </ProjectEditor>\n    ) : <NotFound name={domain}/>}\n  </DataLoader>\n);\nProjectPageLoader.propTypes = {\n  api: PropTypes.func.isRequired,\n  domain: PropTypes.string.isRequired,\n  currentUser: PropTypes.object.isRequired,\n};\n\nconst ProjectPageContainer = ({api, name}) => (\n  <Layout api={api}>\n    <AnalyticsContext properties={{origin: 'project'}}>\n      <CurrentUserConsumer>\n        {currentUser => <ProjectPageLoader api={api} domain={name} currentUser={currentUser}/>}\n      </CurrentUserConsumer>\n    </AnalyticsContext>\n  </Layout>\n);\n\nexport default ProjectPageContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport Layout from '../layout.jsx';\n\nimport Questions from '../questions.jsx';\nimport Categories from '../categories.jsx';\n\nconst QuestionsPage = ({api}) => (\n  <Layout api={api}>\n    <Helmet>\n      <title>Questions</title>\n    </Helmet>\n    <main className=\"questions-page\">\n      <Questions api={api} max={12}/>\n      <Categories/>\n    </main>\n  </Layout>\n);\nQuestionsPage.propTypes = {\n  api: PropTypes.any.isRequired,\n};\n\nexport default QuestionsPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Route, Switch, withRouter} from 'react-router-dom';\n\nimport categories from '../../curated/categories';\nimport rootTeams from '../../curated/teams';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\nimport IndexPage from './index.jsx';\nimport {FacebookLoginPage, GitHubLoginPage, EmailTokenLoginPage} from './login.jsx';\nimport JoinTeamPage from './join-team.jsx';\nimport QuestionsPage from './questions.jsx';\nimport ProjectPage from './project.jsx';\nimport {TeamPage, UserPage, TeamOrUserPage} from './team-or-user.jsx';\nimport SearchPage from './search.jsx';\nimport CategoryPage from './category.jsx';\nimport CollectionPage from './collection.jsx';\nimport {NotFoundPage, ProjectNotFoundPage} from './error.jsx';\nimport SecretPage from './secret.jsx';\n\n/* global EXTERNAL_ROUTES */\n\nconst parse = (search, name) => {\n  const params = new URLSearchParams(search);\n  return params.get(name);\n};\n\nclass ExternalPageReloader extends React.Component {\n  componentDidMount() {\n    window.location.reload();\n  }\n  render() {\n    return null;\n  }\n}\n\nclass PageChangeHandlerBase extends React.Component {\n  track() {\n    try {\n      const analytics = window.analytics;\n      if (analytics) {\n        analytics.page({}, {groupId: '0'});\n      }\n    } catch (ex) {\n      console.error(\"Error tracking page transition.\", ex);\n    }\n  }\n  componentDidUpdate(prev) {\n    if (this.props.location.key !== prev.location.key) {\n      window.scrollTo(0, 0);\n      this.props.reloadCurrentUser();\n      this.track();\n    }\n  }\n  componentDidMount() {\n    this.track();\n  }\n  render() {\n    return null;\n  }\n}\nconst PageChangeHandler = withRouter(({location}) => (\n  <CurrentUserConsumer>\n    {(user, fetched, {reload}) => <PageChangeHandlerBase location={location} reloadCurrentUser={reload}/>}\n  </CurrentUserConsumer>\n));\n\nconst Router = ({api}) => (\n  <>\n    <PageChangeHandler/>\n    <Switch>\n      <Route path=\"/\" exact render={({location}) => <IndexPage key={location.key} api={api}/>}/>\n      <Route path=\"/index.html\" exact strict render={({location}) => <IndexPage key={location.key} api={api}/>}/>\n\n      <Route path=\"/login/facebook\" exact render={({location}) => <FacebookLoginPage key={location.key} api={api} code={parse(location.search, 'code')} hash={parse(location.search, 'hash')}/>}/>\n      <Route path=\"/login/github\" exact render={({location}) => <GitHubLoginPage key={location.key} api={api} code={parse(location.search, 'code')} hash={parse(location.search, 'hash')}/>}/>\n      <Route path=\"/login/email\" exact render={({location}) => <EmailTokenLoginPage key={location.key} api={api} token={parse(location.search, 'token')} hash={parse(location.search, 'hash')}/>}/>\n      \n      <Route path=\"/join/@:teamUrl/:joinToken\" exact render={({match}) => <JoinTeamPage key={location.key} api={api} {...match.params}/>}/>\n\n      <Route path=\"/questions\" exact render={({location}) => <QuestionsPage key={location.key} api={api}/>}/>\n\n      <Route path=\"/~:name\" exact render={({location, match}) => <ProjectPage key={location.key} api={api} name={match.params.name}/>}/>\n      <Route path=\"/~:name/404\" exact render={({location, match}) => <ProjectNotFoundPage key={location.key} api={api} name={match.params.name}/>}/>\n\n      <Route path=\"/@:name\" exact render={({location, match}) => <TeamOrUserPage key={location.key} api={api} name={match.params.name}/>}/>\n\n      <Route path=\"/@:owner/:name\" exact render={({location, match}) => <CollectionPage key={location.key} api={api} ownerName={match.params.owner} name={match.params.name}/>}/>\n\n      <Route path=\"/user/:id(\\d+)\" exact render={({location, match}) => <UserPage key={location.key} api={api} id={parseInt(match.params.id, 10)} name={`user ${match.params.id}`}/>}/>\n\n      {Object.keys(rootTeams).map(name => (\n        <Route key={name} path={`/${name}`} exact render={({location}) => <TeamPage key={location.key} api={api} id={rootTeams[name]} name={name}/>}/>\n      ))}\n\n      <Route path=\"/search\" exact render={({location}) => <SearchPage key={location.key} api={api} query={parse(location.search, 'q')}/>}/>\n\n      {categories.map(category => (\n        <Route key={category.url} path={`/${category.url}`} exact render={({location}) => <CategoryPage key={location.key} api={api} category={category}/>}/>\n      ))}\n\n      <Route path=\"/secret\" exact render={({location}) => <SecretPage key={location.key}/>}></Route>\n\n      {EXTERNAL_ROUTES.map(route => (\n        <Route key={route} path={route} render={({location}) => <ExternalPageReloader key={location.key}/>}/>\n      ))}\n\n      <Route render={({location}) => <NotFoundPage api={api} key={location.key}/>}/>\n    </Switch>\n  </>\n);\nRouter.propTypes = {\n  api: PropTypes.any.isRequired,\n};\n\nexport default Router;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport Layout from '../layout.jsx';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\nimport ErrorHandlers from '../error-handlers.jsx';\nimport Categories from '../categories.jsx';\nimport Loader from '../includes/loader.jsx';\nimport NotFound from '../includes/not-found.jsx';\nimport ProjectsList from '../projects-list.jsx';\nimport TeamItem from '../team-item.jsx';\nimport UserItem from '../user-item.jsx';\n\nconst TeamResults = ({teams}) => (\n  <article>\n    <h2>Teams</h2>\n    <ul className=\"teams-container\">\n      {teams ? (\n        teams.map(team => (\n          <li key={team.id}>\n            <TeamItem team={team}/>\n          </li>\n        ))\n      ) : <Loader/>}\n    </ul>\n  </article>\n);\n\nconst UserResults = ({users}) => (\n  <article>\n    <h2>Users</h2>\n    <ul className=\"users-container\">\n      {users ? (\n        users.map(user => (\n          <li key={user.id}>\n            <UserItem user={user}/>\n          </li>\n        ))\n      ) : <Loader/>}\n    </ul>\n  </article>\n);\n\nconst ProjectResults = ({addProjectToCollection, api, projects, currentUser}) => (\n  projects ? (\n    currentUser.login ? \n      <ProjectsList title=\"Projects\" projects={projects}\n        api={api}  \n        projectOptions={{addProjectToCollection}}/>\n      : \n      <ProjectsList title=\"Projects\" projects={projects}/>\n  ) : (\n    <article>\n      <h2>Projects</h2>\n      <Loader/>\n    </article>\n  )\n);\n\n\nconst MAX_RESULTS = 20;\nconst showResults = (results) => !results || !!results.length;\n\nclass SearchResults extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      teams: null,\n      users: null,\n      projects: null,\n    };\n    this.addProjectToCollection = this.addProjectToCollection.bind(this);\n  }\n  \n  async searchTeams() {\n    const {api, query} = this.props;\n    const {data} = await api.get(`teams/search?q=${query}`);\n    this.setState({\n      teams: data.slice(0, MAX_RESULTS),\n    });\n  }\n  \n  async searchUsers() {\n    const {api, query} = this.props;\n    const {data} = await api.get(`users/search?q=${query}`);\n    this.setState({\n      users: data.slice(0, MAX_RESULTS),\n    });\n  }\n  \n  async searchProjects() {\n    const {api, query} = this.props;\n    const {data} = await api.get(`projects/search?q=${query}`);\n    this.setState({\n      projects: data.filter(project => !project.notSafeForKids).slice(0, MAX_RESULTS),\n    });\n  }\n  \n  async addProjectToCollection(project, collection) {\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n  }\n  \n  componentDidMount() {\n    const {handleError} = this.props;\n    this.searchTeams().catch(handleError);\n    this.searchUsers().catch(handleError);\n    this.searchProjects().catch(handleError);\n  }\n  \n  render() {\n    const {teams, users, projects} = this.state;\n    const noResults = [teams, users, projects].every(results => !showResults(results));\n    return (\n      <main className=\"search-results\">\n        {showResults(teams) && <TeamResults teams={teams}/>}\n        {showResults(users) && <UserResults users={users}/>}\n        {showResults(projects) && <ProjectResults projects={projects} currentUser={this.props.currentUser} api={this.props.api} addProjectToCollection={this.addProjectToCollection}/>}\n        {noResults && <NotFound name=\"any results\"/>}\n      </main>\n    );\n  }\n}\nSearchResults.propTypes = {\n  api: PropTypes.any.isRequired,\n  query: PropTypes.string.isRequired,\n  currentUser: PropTypes.object.isRequired,\n};\n\nconst SearchPage = ({api, query}) => (\n  <Layout api={api} searchQuery={query}>\n    <Helmet>\n      {!!query && <title>Search for {query}</title>}\n    </Helmet>\n    {query ? (\n      <ErrorHandlers>\n        {errorFuncs => (\n          <CurrentUserConsumer>\n            {(currentUser) => (\n              <SearchResults {...errorFuncs} api={api} query={query} currentUser={currentUser}/>\n            )}\n          </CurrentUserConsumer>\n        )}\n      </ErrorHandlers>\n    ) : <NotFound name=\"anything\"/>}\n    <Categories/>\n  </Layout>\n);\nSearchPage.propTypes = {\n  api: PropTypes.any.isRequired,\n  query: PropTypes.string,\n};\n\nexport default SearchPage;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport {DevToggles} from '../includes/dev-toggles.jsx';\n\nclass SecretEffectsOnMount extends React.Component {\n  componentDidMount() {    \n    //try to play the secret sound:\n    const audio = new Audio('https://cdn.glitch.com/a5a035b7-e3db-4b07-910a-b5c3ca9d8e86%2Fsecret.mp3?1535396729988');\n    const maybePromise = audio.play();\n\n    // Chrome returns a promise which we must handle:\n    maybePromise && maybePromise.then( () => {\n      // DO-Do Do-do do-dO dO-DO\n    }).catch(() => {\n      // This empty catch block prevents an exception from bubbling up.\n      // play() will fail if the user hasn't interacted with the dom yet.\n      // s'fine, let it.\n    });\n  }\n  render() {\n    return null;\n  }\n}\n\nconst SecretPageContainer = () => { \n  return (\n    <DevToggles>\n      {(enabledToggles, toggleData, setEnabledToggles) => (\n        <Secret {...{enabledToggles, toggleData, setEnabledToggles}}/>\n      )}\n    </DevToggles>\n  );\n};\n\nconst Secret = ({enabledToggles, toggleData, setEnabledToggles}) => { \n  const toggleTheToggle = (name) => {\n    let newToggles = null;\n    if(isEnabled(name)) {\n      newToggles = enabledToggles.filter(\n        (enabledToggleName) => enabledToggleName !== name\n      );\n    } else {\n      newToggles = enabledToggles.concat([name]);\n    }\n    setEnabledToggles(newToggles);\n  };\n  \n  const isEnabled = (toggleName) => {\n    return enabledToggles && enabledToggles.includes(toggleName);\n  };\n  \n  return (\n    <section className=\"secretPage\">\n      <div className=\"filler\"></div>\n      <Helmet>\n        <title>Glitch - It's a secret to everybody.</title>\n      </Helmet>\n      <SecretEffectsOnMount/>\n      <ul>\n        {toggleData.map(({name, description}) => (\n          <li key={name}>\n            <button title={description} onClick={() => toggleTheToggle(name)} className={isEnabled(name) ? \"lit\" : \"dark\"}>{name}</button>\n          </li>\n        ))}\n      </ul>\n    </section>\n  );\n};\n\nSecret.propTypes = {\n  toggleData: PropTypes.array.isRequired,\n  enabledToggles: PropTypes.array.isRequired,\n  setEnabledToggles: PropTypes.func.isRequired,\n};\n\nexport default SecretPageContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {DataLoader} from '../includes/loader.jsx';\nimport NotFound from '../includes/not-found.jsx';\n\nimport Layout from '../layout.jsx';\nimport TeamPage from './team.jsx';\nimport UserPage from './user.jsx';\n\nconst getOrNull = async(api, route) => {\n  try {\n    const {data} = await api.get(route);\n    return data;\n  } catch (error) {\n    if (error && error.response && error.response.status === 404) {\n      return null;\n    }\n    throw error;\n  }\n};\n\nconst getUserById = async (api, id) => {\n  const user = await getOrNull(api, `/users/${id}`);\n  return user;\n};\n\nconst getUser = async (api, name) => {\n  const id = await getOrNull(api, `/userId/byLogin/${name}`);\n  if (id === \"NOT FOUND\") {\n    return null;\n  }\n  return await getUserById(api, id);\n};\n\nconst parseTeam = (team) => {\n  const ADMIN_ACCESS_LEVEL = 30;\n  const adminIds = team.users.filter(user => {\n    return user.teamsUser.accessLevel === ADMIN_ACCESS_LEVEL;\n  });\n  team.adminIds = adminIds.map(user => user.id);\n  return team;\n};\n\nconst getTeamById = async (api, id) => {\n  const team = await getOrNull(api, `/teams/${id}`);\n  return team && parseTeam(team);\n};\n\nconst getTeam = async (api, name) => {\n  const team = await getOrNull(api, `/teams/byUrl/${name}`);\n  return team && parseTeam(team);\n};\n\nconst TeamPageLoader = ({api, id, name, ...props}) => (\n  <DataLoader get={() => getTeamById(api, id)}>\n    {team => team ? (\n      <TeamPage api={api} team={team} {...props}/>\n    ) : (\n      <NotFound name={name}/>\n    )}\n  </DataLoader>\n);\nTeamPageLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nconst UserPageLoader = ({api, id, name, ...props}) => (\n  <DataLoader get={() => getUserById(api, id)}>\n    {user => user ? (\n      <UserPage api={api} user={user} {...props}/>\n    ) : (\n      <NotFound name={name}/>\n    )}\n  </DataLoader>\n);\nUserPageLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nconst TeamOrUserPageLoader = ({api, name, ...props}) => (\n  <DataLoader get={() => getTeam(api, name)}>\n    {team => team ? (\n      <TeamPage api={api} team={team} {...props}/>\n    ) : (\n      <DataLoader get={() => getUser(api, name)}>\n        {user => user ? (\n          <UserPage api={api} user={user} {...props}/>\n        ) : (\n          <NotFound name={name}/>\n        )}\n      </DataLoader>\n    )}\n  </DataLoader>\n);\nTeamOrUserPageLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nconst Presenter = (api, Loader, args) => (\n  <Layout api={api}>\n    <Loader api={api} {...args}/>\n  </Layout>\n);\n\nconst TeamPagePresenter = ({api, id, name}) => Presenter(api, TeamPageLoader, {id, name});\nconst UserPagePresenter = ({api, id, name}) => Presenter(api, UserPageLoader, {id, name});\nconst TeamOrUserPagePresenter = ({api, name}) => Presenter(api, TeamOrUserPageLoader, {name});\nexport {TeamPagePresenter as TeamPage, UserPagePresenter as UserPage, TeamOrUserPagePresenter as TeamOrUserPage};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport {AnalyticsContext} from '../analytics';\nimport {CurrentUserConsumer} from '../current-user';\nimport {DataLoader} from '../includes/loader';\nimport TeamEditor from '../team-editor.jsx';\nimport {getLink, getAvatarStyle, getProfileStyle} from '../../models/team';\nimport {AuthDescription} from '../includes/description-field.jsx';\nimport {ProfileContainer, ImageButtons} from '../includes/profile.jsx';\nimport ErrorBoundary from '../includes/error-boundary';\n\n//import SampleTeamCollections from '../../curated/sample-team-collections.jsx';\nimport CollectionsList from '../collections-list';\n\nimport EditableField from '../includes/editable-field.jsx';\nimport Thanks from '../includes/thanks.jsx';\nimport NameConflictWarning from '../includes/name-conflict.jsx';\nimport AddTeamProject from '../includes/add-team-project.jsx';\nimport DeleteTeam from '../includes/delete-team.jsx';\nimport {AddTeamUser, TeamUsers, WhitelistedDomain, JoinTeam} from '../includes/team-users.jsx';\nimport EntityPageFeaturedProject from '../entity-page-featured-project.jsx';\nimport EntityPageProjects from '../entity-page-projects.jsx';\nimport ProjectsLoader from '../projects-loader.jsx';\nimport TeamAnalytics from '../includes/team-analytics.jsx';\nimport {TeamMarketing, VerifiedBadge} from '../includes/team-elements.jsx';\nimport ReportButton from '../pop-overs/report-abuse-pop.jsx';\n\nfunction syncPageToUrl(team) {\n  history.replaceState(null, null, getLink(team));\n}\n\nconst TeamNameUrlFields = ({team, updateName, updateUrl}) => (\n  <>\n    <h1>\n      <EditableField\n        value={team.name}\n        update={updateName}\n        placeholder=\"What's its name?\"\n        suffix={team.isVerified ? <VerifiedBadge/> : null}\n      />\n    </h1>\n    <p className=\"team-url\">\n      <EditableField\n        value={team.url}\n        update={url => updateUrl(url).then(() => syncPageToUrl({...team, url}))}\n        placeholder=\"Short url?\"\n        prefix=\"@\"\n      />\n    </p>\n  </>\n);\n\nconst TeamPageCollections = ({collections, team, api, currentUser, currentUserIsOnTeam}) => (\n  <CollectionsList\n    title=\"Collections\"\n    collections={collections.map(collection => ({...collection, team: team}))}\n    api={api} maybeCurrentUser={currentUser} maybeTeam={team}\n    isAuthorized={currentUserIsOnTeam}\n  />\n);\n\n// Team Page\n\nclass TeamPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.teamAdmins = this.teamAdmins.bind(this);\n    this.addProjectToCollection = this.addProjectToCollection.bind(this);\n  }\n  \n  async addProjectToCollection(project, collection) {\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n  }\n  \n  getProjectOptions() {\n    const projectOptions = {\n      addProjectToCollection: this.addProjectToCollection,\n      deleteProject: this.props.deleteProject,\n      leaveTeamProject: this.props.leaveTeamProject,\n    };\n    if (this.props.currentUserIsOnTeam) {\n      projectOptions[\"removeProjectFromTeam\"] = this.props.removeProject;\n      projectOptions[\"joinTeamProject\"] = this.props.joinTeamProject;\n      projectOptions[\"featureProject\"] = this.props.featureProject;\n    }\n\n    return projectOptions;\n  }\n\n  teamAdmins() {\n    return this.props.team.users.filter(user => {\n      return this.props.team.adminIds.includes(user.id);\n    });\n  }\n  \n  userCanJoinTeam() {\n    const {currentUser, team} = this.props;\n    if (!this.props.currentUserIsOnTeam && team.whitelistedDomain && currentUser && currentUser.emails) {\n      return currentUser.emails.some(({email, verified}) => verified && email.endsWith(`@${team.whitelistedDomain}`));\n    }\n    return false;\n  }\n\n  render() {\n    \n    const pinnedSet = new Set(this.props.team.teamPins.map(({projectId}) => projectId));\n    const pinnedProjects = this.props.team.projects.filter( ({id}) => pinnedSet.has(id)).filter ( ({id}) => id != this.props.team.featuredProjectId); \n    const recentProjects = this.props.team.projects.filter(({id}) => !pinnedSet.has(id)).filter( ({id}) => id != this.props.team.featuredProjectId);\n    const featuredProject = this.props.team.projects.find(({id}) => id === this.props.team.featuredProjectId);\n    \n    return (\n      <main className=\"profile-page team-page\">\n        <section>\n          <a href=\"/teams/\" target=\"_blank\" className=\"beta\">\n            <img src=\"https://cdn.glitch.com/0c3ba0da-dac8-4904-bb5e-e1c7acc378a2%2Fbeta-flag.svg?1541448893958\" alt=\"\"></img>\n            <div>\n              <h4>Teams are in beta</h4>\n              <p>Learn More</p>\n            </div>\n          </a>\n          <ProfileContainer\n            avatarStyle={getAvatarStyle({...this.props.team, cache: this.props.team._cacheAvatar})}\n            coverStyle={getProfileStyle({...this.props.team, cache: this.props.team._cacheCover})}\n            avatarButtons={this.props.currentUserIsTeamAdmin ? \n              <ImageButtons name=\"Avatar\" uploadImage={this.props.uploadAvatar} /> \n              : null\n            }\n            coverButtons={this.props.currentUserIsTeamAdmin ? \n              <ImageButtons name=\"Cover\"\n                uploadImage={this.props.uploadCover}\n                clearImage={this.props.team.hasCoverImage ? \n                  this.props.clearCover : null\n                }\n              /> : null\n            }>\n            {this.props.currentUserIsTeamAdmin ? (\n              <TeamNameUrlFields team={this.props.team} updateName={this.props.updateName} updateUrl={this.props.updateUrl}/>\n            ) : (\n              <>\n                <h1>{this.props.team.name} {this.props.team.isVerified && <VerifiedBadge/>}</h1>\n                <p className=\"team-url\">@{this.props.team.url}</p>\n              </>\n            )}\n            <div className=\"users-information\">\n              <TeamUsers \n                {...this.props}\n                users={this.props.team.users}\n                teamId={this.props.team.id}\n                adminIds={this.props.team.adminIds}\n              />\n              { !!this.props.team.whitelistedDomain &&\n                <WhitelistedDomain domain={this.props.team.whitelistedDomain}\n                  setDomain={this.props.currentUserIsTeamAdmin ? this.props.updateWhitelistedDomain : null}\n                />\n              }\n              { this.props.currentUserIsOnTeam &&\n                <AddTeamUser\n                  inviteEmail={this.props.inviteEmail}\n                  inviteUser={this.props.inviteUser}\n                  setWhitelistedDomain={this.props.currentUserIsTeamAdmin ? this.props.updateWhitelistedDomain : null}\n                  members={this.props.team.users.map(({id}) => id)}\n                  whitelistedDomain={this.props.team.whitelistedDomain}\n                  api={this.props.api}\n                />\n              }\n              { this.userCanJoinTeam() && <JoinTeam onClick={this.props.joinTeam}/> }\n            </div>\n            <Thanks count={this.props.team.users.reduce((total, {thanksCount}) => total + thanksCount, 0)} />\n            <AuthDescription\n              authorized={this.props.currentUserIsTeamAdmin}\n              description={this.props.team.description}\n              update={this.props.updateDescription}\n              placeholder=\"Tell us about your team\"\n            />\n          </ProfileContainer> \n        </section>\n\n        <ErrorBoundary>\n          <AddTeamProject\n            {...this.props}\n            teamProjects={this.props.team.projects}\n            api={this.props.api}\n          />\n        </ErrorBoundary>\n        \n        {featuredProject && \n          <>\n            <EntityPageFeaturedProject\n              featuredProject={featuredProject}\n              api={this.props.api}\n              isAuthorized={this.props.currentUserIsOnTeam}\n              unfeatureProject={this.props.unfeatureProject}\n              addProjectToCollection={this.props.addProjectToCollection}\n              currentUser={this.props.currentUser}\n            />\n          </>\n        }\n        \n        {/* Pinned Projects */}\n        <EntityPageProjects\n          projects={pinnedProjects}\n          isAuthorized={this.props.currentUserIsOnTeam}\n          removePin={this.props.removePin}\n          projectOptions={this.getProjectOptions()}\n          api={this.props.api}\n        />\n        \n        {/* Recent Projects */}\n        <EntityPageProjects\n          projects={recentProjects}\n          isAuthorized={this.props.currentUserIsOnTeam}\n          addPin={this.props.addPin}\n          projectOptions={this.getProjectOptions()}\n          api={this.props.api}\n        />\n        \n        { (this.props.team.projects.length === 0 && this.props.currentUserIsOnTeam) &&\n          <aside className=\"inline-banners add-project-to-empty-team-banner\">\n            <div className=\"description-container\">\n              <img className=\"project-pals\" src=\"https://cdn.glitch.com/02ae6077-549b-429d-85bc-682e0e3ced5c%2Fcollaborate.svg?1540583258925\" alt=\"\" />\n              <div className=\"description\">Add projects to share them with your team</div>\n            </div>\n          </aside>\n        }\n        \n        {/* TEAM COLLECTIONS */}\n        <ErrorBoundary>\n          <DataLoader\n            get={() => this.props.api.get(`collections?teamId=${this.props.team.id}`)}\n            renderLoader={() => <TeamPageCollections {...this.props} collections={this.props.team.collections}/>}\n          >\n            {({data}) => <TeamPageCollections {...this.props} collections={data}/>}\n          </DataLoader>\n        </ErrorBoundary>\n        \n        { this.props.currentUserIsOnTeam && <ErrorBoundary>\n          <TeamAnalytics\n            api={this.props.api}\n            id={this.props.team.id}\n            currentUserIsOnTeam={this.props.currentUserIsOnTeam}\n            projects={this.props.team.projects}\n            addProject={this.props.addProject}\n            myProjects={this.props.currentUser ? this.props.currentUser.projects : []}\n          />\n        </ErrorBoundary>}\n\n        {this.props.currentUserIsTeamAdmin && (\n          <DeleteTeam api={() => this.props.api}\n            teamId={this.props.team.id}\n            teamName={this.props.team.name}\n            teamAdmins={this.teamAdmins()}\n            users={this.props.team.users}\n          />\n        )}      \n\n        { !this.props.currentUserIsOnTeam &&\n          <>\n            <ReportButton reportedType=\"team\" reportedModel={this.props.team} />\n            <TeamMarketing />\n          </>\n        }\n      </main>\n    );\n  }\n}\n\nTeamPage.propTypes = {\n  team: PropTypes.shape({\n    _cacheAvatar: PropTypes.number.isRequired,\n    _cacheCover: PropTypes.number.isRequired,\n    adminIds: PropTypes.array.isRequired,\n    backgroundColor: PropTypes.string.isRequired,\n    coverColor: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    hasAvatarImage: PropTypes.bool.isRequired,\n    hasCoverImage: PropTypes.bool.isRequired,\n    id: PropTypes.number.isRequired,\n    isVerified: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n    projects: PropTypes.array.isRequired,\n    teamPins: PropTypes.array.isRequired,\n    users: PropTypes.array.isRequired,\n    whitelistedDomain: PropTypes.string,\n    featuredProjectId: PropTypes.string,\n  }),\n  addPin: PropTypes.func.isRequired,\n  addProject: PropTypes.func.isRequired,\n  deleteProject:PropTypes.func.isRequired,\n  updateWhitelistedDomain: PropTypes.func.isRequired,\n  inviteEmail: PropTypes.func.isRequired,\n  inviteUser: PropTypes.func.isRequired,\n  api: PropTypes.func.isRequired,\n  clearCover: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  currentUserIsOnTeam: PropTypes.bool.isRequired,\n  currentUserIsTeamAdmin: PropTypes.bool.isRequired,\n  removeUserFromTeam: PropTypes.func.isRequired,\n  removePin: PropTypes.func.isRequired,\n  removeProject: PropTypes.func.isRequired,\n  updateName: PropTypes.func.isRequired,\n  updateUrl: PropTypes.func.isRequired,\n  updateDescription: PropTypes.func.isRequired,\n  uploadAvatar: PropTypes.func.isRequired,\n  uploadCover: PropTypes.func.isRequired,\n  featureProject: PropTypes.func.isRequired,\n  unfeatureProject: PropTypes.func.isRequired,\n};\n\nconst teamConflictsWithUser = (team, currentUser) => {\n  if (currentUser && currentUser.login) {\n    return currentUser.login.toLowerCase() === team.url;\n  }\n  return false;\n};\n\nconst TeamNameConflict = ({team}) => (\n  <CurrentUserConsumer>\n    {currentUser => (\n      teamConflictsWithUser(team, currentUser) && <NameConflictWarning/>\n    )}\n  </CurrentUserConsumer>\n);\n\nconst TeamPageEditor = ({api, initialTeam, children}) => (\n  <TeamEditor api={api} initialTeam={initialTeam}>\n    {(team, funcs, ...args) => (\n      <ProjectsLoader api={api} projects={team.projects}>\n        {(projects, reloadProjects) => {\n          // Inject page specific changes to the editor\n          // Mainly url updating and calls to reloadProjects\n          \n          const removeUserFromTeam = async (user, projectIds) => {\n            await funcs.removeUserFromTeam(user, projectIds);\n            reloadProjects(...projectIds);\n          };\n          \n          const joinTeamProject = async (projectId) => {\n            await funcs.joinTeamProject(projectId);\n            reloadProjects(projectId);\n          };\n          \n          const leaveTeamProject = async (projectId) => {\n            await funcs.leaveTeamProject(projectId);\n            reloadProjects(projectId);\n          };\n          \n          return children({...team, projects}, {\n            ...funcs,\n            removeUserFromTeam,\n            joinTeamProject,\n            leaveTeamProject,\n          }, ...args);\n        }}\n      </ProjectsLoader>\n    )}\n  </TeamEditor>\n);\nconst TeamPageContainer = ({api, team, ...props}) => (\n  <AnalyticsContext properties={{origin: 'team'}} context={{groupId: team.id.toString()}}>\n    <TeamPageEditor api={api} initialTeam={team}>\n      {(team, funcs, currentUserIsOnTeam, currentUserIsTeamAdmin) => (\n        <>\n          <Helmet>\n            <title>{team.name}</title>\n          </Helmet>\n          <CurrentUserConsumer>\n            {currentUser => (\n              <TeamPage api={api} team={team} {...funcs} currentUser={currentUser}\n                currentUserIsOnTeam={currentUserIsOnTeam} currentUserIsTeamAdmin={currentUserIsTeamAdmin}\n                {...props}\n              />\n            )}\n          </CurrentUserConsumer>\n          <TeamNameConflict team={team}/>\n        </>\n      )}\n    </TeamPageEditor>\n  </AnalyticsContext>\n);\nexport default TeamPageContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Helmet from 'react-helmet';\nimport {getAvatarStyle, getLink, getProfileStyle} from '../../models/user';\n\nimport {AnalyticsContext} from '../analytics';\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport {AuthDescription} from '../includes/description-field.jsx';\nimport EditableField from '../includes/editable-field.jsx';\nimport UserEditor from '../user-editor.jsx';\nimport Thanks from '../includes/thanks.jsx';\n\nimport DeletedProjects from '../deleted-projects.jsx';\nimport EntityPageFeaturedProject from '../entity-page-featured-project.jsx';\nimport EntityPageProjects from '../entity-page-projects.jsx';\nimport CollectionsList from '../collections-list.jsx';\nimport {ProfileContainer, ImageButtons} from '../includes/profile.jsx';\nimport ProjectsLoader from '../projects-loader.jsx';\nimport ReportButton from '../pop-overs/report-abuse-pop.jsx';\n\nfunction syncPageToLogin(login) {\n  history.replaceState(null, null, getLink({login}));\n}\n\nconst NameAndLogin = ({name, login, isAuthorized, updateName, updateLogin}) => {\n  if(!login) {\n    return <h1 className=\"login\">Anonymous</h1>;\n  }\n\n  if(!isAuthorized) {\n    if(!name) {\n      return <h1 className=\"login\">@{login}</h1>;\n    }\n    return (\n      <>\n        <h1 className=\"username\">{name}</h1>\n        <h2 className=\"login\">@{login}</h2>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <h1 className=\"username\"><EditableField value={name||\"\"} update={updateName} placeholder=\"What's your name?\"/></h1>\n      <h2 className=\"login\"><EditableField value={login} update={updateLogin} prefix=\"@\" placeholder='Nickname?'/></h2>\n    </>\n  );\n};\nNameAndLogin.propTypes = {\n  name: PropTypes.string,\n  login: PropTypes.string,\n  isAuthorized: PropTypes.bool.isRequired,\n  updateName: PropTypes.func,\n  updateLogin: PropTypes.func,\n};\n\nconst UserPage = ({\n  user: { //has science gone too far?\n    _deletedProjects,\n    _cacheCover,\n    featuredProjectId,\n    ...user\n  },\n  api, isAuthorized,\n  maybeCurrentUser,\n  updateDescription,\n  updateName, updateLogin,\n  uploadCover, clearCover,\n  uploadAvatar,\n  addPin, removePin,\n  leaveProject,\n  deleteProject, undeleteProject,\n  featureProject, unfeatureProject,\n  setDeletedProjects,\n  addProjectToCollection,\n}) =>\n{ \n  const pinnedSet = new Set(user.pins.map(({projectId}) => projectId));\n  const pinnedProjects = user.projects.filter( ({id}) => pinnedSet.has(id)).filter ( ({id}) => id != featuredProjectId); \n  const recentProjects = user.projects.filter(({id}) => !pinnedSet.has(id)).filter( ({id}) => id != featuredProjectId);\n  const featuredProject = user.projects.find(({id}) => id === featuredProjectId);\n  \n  \n  return(\n    <main className=\"profile-page user-page\">   \n      <section>\n        <ProfileContainer\n          avatarStyle={getAvatarStyle(user)}\n          coverStyle={getProfileStyle({...user, cache: _cacheCover})}\n          coverButtons={isAuthorized && !!user.login && <ImageButtons name=\"Cover\" uploadImage={uploadCover} clearImage={user.hasCoverImage ? clearCover : null}/>}\n          avatarButtons={isAuthorized && !!user.login && <ImageButtons name=\"Avatar\" uploadImage={uploadAvatar}/>}\n          teams={user.teams} \n        >\n          <NameAndLogin\n            name={user.name} login={user.login} {...{isAuthorized, updateName}}\n            updateLogin={login => updateLogin(login).then(() => syncPageToLogin(login))}\n          />\n          {!!user.thanksCount && <Thanks count={user.thanksCount}/>}\n          <AuthDescription authorized={isAuthorized && !!user.login} description={user.description} update={updateDescription} placeholder=\"Tell us about yourself\"/>\n        </ProfileContainer>\n      </section>\n      \n      {featuredProject && \n        <EntityPageFeaturedProject\n          featuredProject={featuredProject}\n          api={api}\n          isAuthorized={isAuthorized}\n          unfeatureProject={unfeatureProject}\n          addProjectToCollection={addProjectToCollection}\n          currentUser={maybeCurrentUser}\n        />\n      }\n\n      {/* Pinned Projects */}\n      <EntityPageProjects\n        projects={pinnedProjects} \n        isAuthorized={isAuthorized}\n        api={api} \n        removePin={removePin}\n        projectOptions={{\n          featureProject,\n          leaveProject, \n          deleteProject,\n          addProjectToCollection,\n        }}\n        addProjectToCollection={addProjectToCollection}\n        currentUser={maybeCurrentUser}\n      />\n\n      {!!user.login && (\n        <CollectionsList title=\"Collections\" \n          collections={user.collections.map(collection => ({...collection, user}))} \n          api={api} isAuthorized={isAuthorized}\n          maybeCurrentUser={maybeCurrentUser}\n        />\n      )}\n\n      {/* Recent Projects */}\n      <EntityPageProjects\n        projects={recentProjects} \n        isAuthorized={isAuthorized}\n        api={api} \n        addPin={addPin} \n        projectOptions={{\n          featureProject,\n          leaveProject, \n          deleteProject,\n          addProjectToCollection\n        }}\n      />\n      {isAuthorized && <DeletedProjects api={api} setDeletedProjects={setDeletedProjects} deletedProjects={_deletedProjects} undelete={undeleteProject}/>}\n      {!isAuthorized && <ReportButton reportedType=\"user\" reportedModel={user} />}\n    </main>\n  );\n};\nUserPage.propTypes = {\n  clearCover: PropTypes.func.isRequired,\n  maybeCurrentUser: PropTypes.object,\n  isAuthorized: PropTypes.bool.isRequired,\n  leaveProject: PropTypes.func.isRequired,\n  uploadAvatar: PropTypes.func.isRequired,\n  uploadCover: PropTypes.func.isRequired,\n  user: PropTypes.shape({\n    name: PropTypes.string,\n    login: PropTypes.string,\n    id: PropTypes.number.isRequired,\n    thanksCount: PropTypes.number.isRequired,\n    hasCoverImage: PropTypes.bool.isRequired,\n    avatarUrl: PropTypes.string,\n    color: PropTypes.string.isRequired,\n    coverColor: PropTypes.string,\n    featuredProjectId: PropTypes.string,\n    _cacheCover: PropTypes.number.isRequired,\n    _deletedProjects: PropTypes.array.isRequired,\n  }).isRequired,\n  addProjectToCollection: PropTypes.func.isRequired,\n  featureProject: PropTypes.func.isRequired,\n  unfeatureProject: PropTypes.func.isRequired,\n};\n\nconst UserPageContainer = ({api, user}) => (\n  <AnalyticsContext properties={{origin: 'user'}}>\n    <UserEditor api={api} initialUser={user}>\n      {(user, funcs, isAuthorized) => (\n        <>\n          <Helmet>\n            <title>{user.name || (user.login ? `@${user.login}` : `User ${user.id}`)}</title>\n          </Helmet>\n\n          <CurrentUserConsumer>\n            {(maybeCurrentUser) => (\n              <ProjectsLoader api={api} projects={user.projects}>\n                {projects => <UserPage {...{api, isAuthorized, maybeCurrentUser}} user={{...user, projects}} {...funcs} />}\n              </ProjectsLoader>\n            )}\n          </CurrentUserConsumer>\n        </>\n      )}\n    </UserEditor>\n  </AnalyticsContext>\n);\n\nexport default UserPageContainer;","// add-collection-project-pop.jsx -> Add a project to a collection via the collection page\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {debounce} from 'lodash';\n\nimport {TrackClick} from '../analytics';\nimport Loader from '../includes/loader.jsx';\nimport ProjectResultItem from '../includes/project-result-item.jsx';\nimport ProjectsLoader from '../projects-loader.jsx';\n\nimport Notifications from '../notifications.jsx';  \n\nconst ProjectResultsUL = ({projects, collection, onClick}) => (\n  <ul className=\"results\">\n    {projects.map(project => (\n      <Notifications key={project.id}>\n        {({createNotification}) => (\n          <li>\n            <TrackClick name=\"Project Added to Collection\" properties={{origin: 'Add Project collection'}}>\n              <ProjectResultItem\n                domain={project.domain}\n                description={project.description}\n                users={project.users}\n                id={project.id}\n                isActive={false}\n                collection={collection}\n                onClick={() => onClick(project, collection, createNotification)}\n                isPrivate={project.private}\n              />\n            </TrackClick>\n          </li>\n        )}\n      </Notifications>\n    ))}\n  </ul>\n);\nProjectResultsUL.propTypes = {\n  projects: PropTypes.array.isRequired,\n  collection: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nconst ProjectSearchResults = ({projects, collection, onClick, projectName, excludedProjectsCount}) => {\n  if(projects.length > 0) {\n    const collectionProjectIds = collection.projects.map((project) => project.id);\n    projects = projects.filter( (project) => !collectionProjectIds.includes(project.id));\n    \n    return (\n      <ProjectResultsUL {...{projects, collection, onClick}}/>\n    );\n  }\n  \n  if(projectName) {\n    return (\n      <p className=\"results-empty\">\n        {projectName} is already in this collection\n        <span role=\"img\" aria-label=\"\">💫</span>\n      </p>\n    );\n  }\n\n  return (\n    <p className=\"results-empty\">\n      nothing found <span role=\"img\" aria-label=\"\">💫</span><br/>\n      {excludedProjectsCount > 0 && (\n        <span>(Excluded {excludedProjectsCount} search {(excludedProjectsCount > 1 ? \"results\" : \"result\")} already found in collection)</span>\n      )}\n    </p>\n  );\n};\n\nProjectSearchResults.propTypes = {\n  collection: PropTypes.object.isRequired,\n  projectName: PropTypes.string,\n  excludedProjectsCount: PropTypes.number,\n};\n\nfunction isUrl(s) {\n  try {\n    new URL(s);\n    return true;\n  } catch (_) {\n    return false;  \n  }\n}\n\nclass AddCollectionProjectPop extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      query: '', //The actual search text\n      maybeRequest: null, //The active request promise\n      maybeResults: null, //Null means still waiting vs empty,\n      projectName: '', // the project name if the search result is a Url\n      excludedProjectsCount: 0, // number of projects omitted from search\n    };\n    \n    this.handleChange = this.handleChange.bind(this);\n    this.clearSearch = this.clearSearch.bind(this);\n    this.startSearch = debounce(this.startSearch.bind(this), 300);\n    this.onClick = this.onClick.bind(this);\n  }\n  \n  handleChange(evt) {\n    const query = evt.currentTarget.value.trim();\n    this.setState({ query });\n    if (query) {\n      this.startSearch();\n    } else {\n      this.clearSearch();\n    }\n  }\n  \n  clearSearch() {\n    this.setState({\n      maybeRequest: null,\n      maybeResults: null,\n      projectName: '',\n      excludedProjectsCount: 0,\n    });\n  } \n  \n  async startSearch() {\n    if (!this.state.query) {\n      return this.clearSearch();\n    }\n    \n    // reset the results\n    this.setState({maybeResults: null});\n    \n    let searchByUrl = false;\n    let query = this.state.query;\n    const collectionProjectIds = this.props.collection.projects.map((project) => project.id);\n    \n    if(isUrl(query)){\n      searchByUrl = true;\n      // check if the query is a URL or a name of a project\n      // Project URL pattern: https://add-to-alexa.glitch.me/, https://glitch.com/~add-to-alexa\n      let queryUrl = new URL(query);\n      if(queryUrl.href.includes(\"me\") && !queryUrl.href.includes(\"~\")){\n        // https://add-to-alexa.glitch.me/\n        query = queryUrl.hostname.substring(0, queryUrl.hostname.indexOf('.'));\n      } else{\n        // https://glitch.com/~add-to-alexa\n        query = queryUrl.pathname.substring(queryUrl.pathname.indexOf(\"~\")+1);\n      }\n    }\n    \n    let request = null;\n    if(!searchByUrl){\n      request = this.props.api.get(`projects/search?q=${query}`);\n      this.setState({ maybeRequest: request });\n    }else{\n      request = this.props.api.get(`projects/${query}`);\n      this.setState({ maybeRequest: request });\n    }\n    let {data} = await request;\n    \n    if(searchByUrl){\n      data = [data];\n    }\n    \n    const results = data; \n    \n    let originalNumResults = results.length;\n    \n    let nonCollectionResults = [];\n    if(searchByUrl){  \n      // get the single result that matches the URL exactly - check with https://community.glitch.me/\n      nonCollectionResults = results.filter(result => result.domain == query);\n      \n      // check if the project is already in the collection\n      if(nonCollectionResults.length > 0 && collectionProjectIds.includes(nonCollectionResults[0].id)){\n        nonCollectionResults = [];\n        this.setState({projectName: query});\n      }  \n    } else {\n      // user is searching by project name  - filter out any projects currently in the collection\n      nonCollectionResults = results.filter( result => !collectionProjectIds.includes(result.id));\n      \n      if(nonCollectionResults.length !== originalNumResults){\n        if(originalNumResults === 1){\n          // the single search result is already in the collection\n          this.setState({projectName: query});\n        } else {\n          // multiple projects have been excluded from the search results\n          this.setState({excludedProjectsCount: originalNumResults});\n        }\n      }\n    }\n\n    this.setState(({ maybeRequest }) => {\n      return (request === maybeRequest) ? {\n        maybeRequest: null,\n        maybeResults: nonCollectionResults,\n        recentProjects: null,\n      } : {};\n    });\n\n  }\n  \n  onClick(project, collection, createNotification) {\n    this.props.togglePopover();\n    \n    // add project to page if successful\n    this.props.addProjectToCollection(project, collection);\n    \n    // show notification\n    createNotification(<p>Added <b><span className=\"project-name\">{project.domain}</span></b></p>, \"notifySuccess\");\n  }\n  \n  render() {\n    // load user's recent projects\n    const ownProjects = this.props.collection.team ? this.props.collection.team.projects : this.props.currentUser.projects;\n    const results = this.state.query ? this.state.maybeResults : ownProjects.slice(0,20);\n    \n    const showResults = !!(this.state.query || (results && results.length));\n    const isLoading = !!(this.state.maybeRequest || !results);\n    \n    return (\n      <dialog className=\"pop-over add-collection-project-pop wide-pop\">\n        <section className=\"pop-over-info\">\n          <input\n            autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n            value={this.state.query} onChange={this.handleChange}\n            className=\"pop-over-input search-input pop-over-search\"\n            placeholder=\"Search by project name or URL\"\n          />\n        </section>\n        {showResults && <section className=\"pop-over-actions last-section results-list\">\n          {isLoading && <Loader />}\n        \n          {!!results && \n            <ProjectsLoader api={this.props.api} projects={results}>\n              {projects => <ProjectSearchResults\n                projects={projects}\n                onClick={this.onClick}\n                collection={this.props.collection}\n                projectName={this.state.projectName}\n                excludedProjectsCount={this.state.excludedProjectsCount}\n              />}\n            </ProjectsLoader>\n          }          \n        </section>}\n      </dialog>\n    );\n  }\n}\n\nAddCollectionProjectPop.propTypes = {\n  api: PropTypes.func.isRequired,\n  collection: PropTypes.object.isRequired,\n  addProjectToCollection: PropTypes.func.isRequired,\n  togglePopover: PropTypes.func, // required but added dynamically\n  currentUser: PropTypes.object.isRequired,\n};\n\nexport default AddCollectionProjectPop;","// add-project-to-collection-pop.jsx -> Add a project to a collection via a project item's menu\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {Redirect} from 'react-router-dom';\nimport randomColor from 'randomcolor';\nimport {captureException} from '../../utils/sentry';\n\nimport {TrackClick} from '../analytics';\nimport {getLink, defaultAvatar} from '../../models/collection';\nimport {getAvatarUrl} from '../../models/project';\nimport {getCollectionPair} from '../../models/words';\n\nimport Loader from '../includes/loader.jsx';\n\nimport CollectionResultItem from '../includes/collection-result-item.jsx';\n\nimport {NestedPopoverTitle} from './popover-nested.jsx';\nimport {PureEditableField} from '../includes/editable-field.jsx';\n\nimport _ from 'lodash';\n\nclass AddProjectToCollectionPop extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      working: false,\n      error: null, //null or string\n      query: '', //The actual search text\n      collectionPair: 'wondrous-collection',\n      maybeCollections: null, //null means still loading\n    };\n    \n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  \n  async loadCollections() {\n    const collections = await this.props.api.get(`collections/?userId=${this.props.currentUser.id}`);\n    this.setState({maybeCollections: _.orderBy(collections.data, collection => collection.updatedAt).reverse()});\n  }\n  \n  async componentDidMount() {\n    this.loadCollections();\n    try {\n      const collectionPair = await getCollectionPair();\n      this.setState(prev => ({query: prev.query || collectionPair, collectionPair}));\n    } catch (error) {\n      // it's ok rocky. you go when you feel like it\n    }\n  }\n  \n  handleChange(newValue) {\n    this.setState({ query: newValue, error: null });\n  }\n\n  async handleSubmit(event){\n    event.preventDefault();\n    this.setState({working: true});\n    // get text from input field\n    const newCollectionName = this.state.query;\n    \n    // create a new collection\n    try{\n      const name = newCollectionName;\n      const url = _.kebabCase(newCollectionName);\n      const collectionPair = this.state.collectionPair.split('-');\n      const description = `A ${collectionPair[1]} of projects that does ${collectionPair[0]} things`;\n      const avatarUrl = defaultAvatar;\n      const coverColor = randomColor({luminosity: 'light'});\n      \n      const {data} = await this.props.api.post('collections', {\n        name,\n        description,\n        url,\n        avatarUrl,\n        coverColor,\n      });\n\n      const newCollection = {user: this.props.currentUser, ...data};\n\n      // add the selected project to the collection\n      await this.props.api.patch(`collections/${newCollection.id}/add/${this.props.project.id}`);         \n      \n      // redirect to that collection\n      const newCollectionUrl = getLink(newCollection);\n      this.setState({newCollectionUrl});\n    }catch(error){\n      if (error && error.response && error.response.data && error.response.data.message) {\n        this.setState({error: error.response.data.message});\n      } else {\n        captureException(error);\n      }\n    }\n  }\n    \n  render() {\n    const placeholder = 'New Collection Name';\n    const {error, maybeCollections, query} = this.state;\n    let queryError = this.state.error;\n    if (!!maybeCollections && !!query && maybeCollections.some(c => c.url === _.kebabCase(query))) {\n      queryError = 'You already have a collection with this url';\n    }\n    if(this.state.newCollectionUrl){\n      return <Redirect to={this.state.newCollectionUrl}/>;\n    }\n    return (\n      <dialog className=\"pop-over add-project-to-collection-pop wide-pop\">\n        {( !this.props.fromProject ?\n          <NestedPopoverTitle>\n            <img src={getAvatarUrl(this.props.project.id)} alt={`Project avatar for ${this.props.project.domain}`}/> Add {this.props.project.domain} to collection\n          </NestedPopoverTitle>\n          : null\n        )}\n        \n        {maybeCollections ? (\n          maybeCollections.length ? (\n            <section className=\"pop-over-actions results-list\">\n              <ul className=\"results\">\n                {maybeCollections.map(collection =>   \n                  // filter out collections that already contain the selected project\n                  (collection.projects.every(project => project.id !== this.props.project.id) && \n                    <li key={collection.id}>\n                      <TrackClick name=\"Project Added to Collection\" context={{groupId: collection.team ? collection.team.id : 0}}>\n                        <CollectionResultItem \n                          onClick={this.props.addProjectToCollection}\n                          currentUserLogin={this.props.currentUser.login}\n                          project={this.props.project}\n                          collection={collection}                         \n                          togglePopover={this.props.togglePopover} \n                        />\n                      </TrackClick>\n                    </li>\n                  )\n                )\n                }\n              </ul>\n            </section>\n          ) : (<section className=\"pop-over-info\">\n            <p className=\"info-description\">\n              Organize your favorite projects in one place\n            </p>\n          </section>)\n        ) : <Loader/>}\n        \n        <section className=\"pop-over-info\">\n          <div className=\"pop-title collection-title\">Add to a new collection</div>\n          <form onSubmit={this.handleSubmit}>\n            <PureEditableField\n              id=\"collection-name\"\n              className=\"pop-over-input create-input\"\n              value={query} \n              update={this.handleChange}\n              placeholder={placeholder}\n              error={error || queryError}\n            />\n            {!this.state.working ? (\n              <TrackClick name=\"Create Collection clicked\" properties={inherited => ({...inherited, origin: `${inherited.origin} project`})}>\n                <button type=\"submit\" className=\"create-collection button-small\" disabled={!!queryError}>\n                  Create\n                </button>\n              </TrackClick>\n            ) : <Loader/>}       \n          </form>         \n        </section>\n      </dialog>\n    );\n  }\n}\n\nAddProjectToCollectionPop.propTypes = {\n  addProjectToCollection: PropTypes.func,\n  api: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  togglePopover: PropTypes.func, // required but added dynamically\n  project: PropTypes.object.isRequired,\n  fromProject: PropTypes.bool,\n};\n\nexport default AddProjectToCollectionPop;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport ProjectResultItem from '../includes/project-result-item.jsx';\nimport Notifications from '../notifications.jsx';  \n\nexport class AddTeamProjectPop extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      templateProjects: [],\n      filteredProjects: [],\n      source: 'my-projects', // my-projects, templates\n      filterPlaceholder: 'Filter my projects',\n      loadingTemplates: false,\n      notifyTemplateIsRemixing: false,\n    };\n    this.onClick = this.onClick.bind(this);\n    this.updateFilter = this.updateFilter.bind(this);\n    this.filterInputIsBlank = this.filterInputIsBlank.bind(this);\n    this.filterInput = React.createRef();\n  }\n\n  normalizeTemplateProjects(data) {\n    let projects = data.map(project => {\n      project.users = [];\n      return project;\n    });\n    return projects;\n  }\n\n  updateFilter(query) {\n    let projects = [];\n    if (this.state.source === 'templates') {\n      projects = this.state.templateProjects;\n    } else {\n      projects = this.props.myProjects;\n    }\n    let filteredProjects = this.filterProjects(query, projects, this.props.teamProjects);\n    this.setState({\n      filteredProjects: filteredProjects\n    });\n  }\n\n  filterProjects(query, projects, teamProjects) {\n    query = query.toLowerCase().trim();\n    let MAX_PROJECTS = 20;\n    let teamProjectIds = teamProjects.map(({id}) => id);\n    let availableProjects = projects.filter(\n      ({id}) => !teamProjectIds.includes(id)\n    );\n    let filteredProjects = [];\n    if(!query) {\n      return availableProjects.splice(0,MAX_PROJECTS);\n    }\n    for(let project of availableProjects) {\n      if(filteredProjects.length > MAX_PROJECTS){\n        break;\n      }\n      let titleMatch = project.domain.toLowerCase().includes(query);\n      let descMatch = project.description.toLowerCase().includes(query);\n      if(titleMatch || descMatch) {\n        filteredProjects.push(project);\n      }\n    }\n    return filteredProjects;\n  }\n\n  activeIfSourceIsTemplates() {\n    if (this.state.source === 'templates') {\n      return 'active';\n    }\n  }\n\n  activeIfSourceIsMyProjects() {\n    if (this.state.source === 'my-projects') {\n      return 'active';\n    }\n  }\n\n  async remixTemplate(projectId) {\n    let remixTemplatePath = `projects/${projectId}/remix`;\n    return await this.props.api.post(remixTemplatePath);\n  }\n\n  async inviteUserToRemix(data) {\n    let inviteUserPath = `projects/${data.inviteToken}/join`;\n    return await this.props.api.post(inviteUserPath);\n  }\n\n  onClick(event, project, createNotification) {\n    event.preventDefault();\n    this.props.togglePopover();\n    this.props.addProject(project);\n    \n    console.log('create notification');\n    \n    createNotification(<p>Added <b><span className=\"project-name\">{project.domain}</span></b></p>, \"notifySuccess\");    \n  }\n\n  sourceIsTemplates() {\n    this.setState({\n      source: 'templates',\n      filterPlaceholder: 'Filter templates',\n    });\n  }\n\n  sourceIsMyProjects() {\n    this.setState({\n      source: 'my-projects',\n      filterPlaceholder: 'Filter projects',\n    });\n  }\n\n  getTemplateProjects() {\n    this.setState({\n      loadingTemplates: true,\n    });\n    const templateIds = [\n      '9cd48134-1624-48f5-beaf-6c1b68bd9217', // 'timelink'\n      '712cc905-bfcb-454e-a47a-c729ab63c455', // 'poller'\n      '929980a8-32fc-4ae7-a66f-dddb3ae4912c', // 'hello-webpage'\n    ];\n    let projectsPath = `projects/byIds?ids=${templateIds.join(',')}`;\n    this.props.api.get(projectsPath)\n      .then(({data}) => {\n        let projects = this.normalizeTemplateProjects(data);\n        this.setState({\n          templateProjects: projects,\n          loadingTemplates: false,\n        });\n        this.updateFilter('');\n      });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.source !== this.state.source) {\n      this.updateFilter(\"\");\n      this.filterInput.current.focus();\n    }\n  }\n\n  componentDidMount() {\n    this.getTemplateProjects();\n    this.filterInput.current.focus();\n    this.updateFilter(\"\");\n  }\n  \n  filterInputIsBlank() {\n    if (this.filterInput.current.value.length === 0) {\n      return true;\n    }\n  } \n\n  render() {\n    const filteredProjects = this.state.filteredProjects;\n\n    return (\n      <dialog className=\"pop-over add-team-project-pop wide-pop\">\n        <section className=\"pop-over-info\">\n          <input\n            ref={this.filterInput}\n            onChange={(event) => {this.updateFilter(event.target.value);}}\n            id=\"team-project-search\" className=\"pop-over-input search-input pop-over-search\"\n            placeholder= {this.state.filterPlaceholder}\n            autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n          />\n        </section>\n\n        <section className=\"pop-over-actions results-list\" data-source='templates'>\n          <ul className=\"results\">\n            { filteredProjects.map((project) => (\n              <Notifications key={project.id}>\n                {({createNotification}) => (\n                  <li key={project.id}>\n                    <ProjectResultItem\n                      onClick={event => this.onClick(event, project, createNotification)}\n                      {...project}\n                      title={project.domain}\n                      isPrivate={project.private}\n                    />\n                  </li>\n                )}\n              </Notifications>\n            ))}\n          </ul>\n          { (this.state.filteredProjects.length === 0 && this.filterInputIsBlank) &&\n             <p className=\"action-description no-projects-description\">Create or Join projects to add them to the team</p>\n          }\n        </section>\n      </dialog>\n    );\n  }\n}\n\nAddTeamProjectPop.propTypes = {\n  myProjects: PropTypes.array.isRequired,\n  teamProjects: PropTypes.array.isRequired,\n  addProject: PropTypes.func.isRequired,\n  togglePopover: PropTypes.func.isRequired,\n  api: PropTypes.any.isRequired\n};\n\nconst AddTeamProjectPopContainer = (props) => (\n  <CurrentUserConsumer>\n    {currentUser => <AddTeamProjectPop myProjects={currentUser.projects} {...props}/>}\n  </CurrentUserConsumer>\n);\n\nexport default AddTeamProjectPopContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport {debounce} from 'lodash';\nimport {parseOneAddress} from 'email-addresses';\nimport {captureException} from '../../utils/sentry';\n\nimport DevToggles from '../includes/dev-toggles';\nimport Loader from '../includes/loader';\nimport UserResultItem, {InviteByEmail, WhitelistEmailDomain} from '../includes/user-result-item';\n\nconst getDomain = (query) => {\n  const email = parseOneAddress(query.replace('@', 'test@'));\n  if (email && email.domain.includes('.')) {\n    return email.domain.toLowerCase();\n  }\n  return null;\n};\n\nconst rankSearchResult = (result, query) => { \n  //example result:\n  /*\n  login: \"judeallred\"\n  name: \"Jude Allred\"\n  */\n  const lowerQuery = query.toLowerCase();\n  let points = 0;\n\n  const login = result.login || \"\";\n  const lowerLogin = login.toLowerCase();\n  const name = result.name || \"\";\n  const lowerName = name.toLowerCase();\n\n\n  //Big point items -- exact matches:\n  if(lowerLogin === lowerQuery) {\n    points += 9000; // exact match on login name :over nine thousand!:\n  }\n\n  if(lowerName === lowerQuery) {\n    points += 50; // Exact match on name, case insensitive.\n\n    if(name === query) {\n      points += 10; // Bonus case-sensitive match\n    }\n  }\n\n  // Points for matching either of login or name.\n  // Bonus if startsWith.\n  [lowerLogin, lowerName].forEach((lowerField) => {\n    if(lowerField.includes(lowerQuery)) {\n      points += 10;\n\n      if(lowerField.startsWith(lowerQuery)) {\n        points += 5;\n      }\n    }\n  });\n\n  return points;\n};\n\nclass AddTeamUserPop extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      query: '', //The actual search text\n      maybeRequest: null, //The active request promise\n      maybeResults: null, //Null means still waiting vs empty\n      validDomains: {}, //Null means loading that domain\n    };\n    \n    this.handleChange = this.handleChange.bind(this);\n    this.clearSearch = this.clearSearch.bind(this);\n    this.debouncedSearch = debounce(this.debouncedSearch.bind(this), 300);\n  }\n  \n  handleChange(evt) {\n    const query = evt.currentTarget.value.trimStart();\n    this.setState({ query });\n    if (query) {\n      this.debouncedSearch();\n    } else {\n      this.clearSearch();\n    }\n  }\n  \n  clearSearch() {\n    this.setState({\n      maybeRequest: null,\n      maybeResults: null,\n    });\n  }\n  \n  debouncedSearch() {\n    const query = this.state.query.trim();\n    if (!query) {\n      this.clearSearch();\n      return;\n    }\n    this.startSearch(query);\n    this.validateDomain(query);\n  }\n  \n  async startSearch(query) {\n    const request = this.props.api.get(`users/search?q=${query}`);\n    this.setState({ maybeRequest: request });\n    \n    const {data} = await request;\n    const nonMemberResults = data.filter(user => !this.props.members.includes(user.id));\n    const rankedResults = nonMemberResults.sort((a, b) => rankSearchResult(b, query) - rankSearchResult(a, query));\n    \n    this.setState(({ maybeRequest }) => {\n      return (request === maybeRequest) ? {\n        maybeRequest: null,\n        maybeResults: rankedResults,\n      } : {};\n    });\n  }\n  \n  async validateDomain(query) {\n    const domain = getDomain(query);\n    if (!domain || this.state.validDomains[domain] !== undefined) {\n      return;\n    }\n    \n    this.setState(prevState => ({\n      validDomains: {...prevState.validDomains, [domain]: null}\n    }));\n    \n    let valid = !['gmail.com', 'yahoo.com'].includes(domain); // Used if we can't reach freemail\n    \n    try {\n      const {data} = await axios.get(`https://freemail.glitch.me/${domain}`);\n      valid = !data.free;\n    } catch (error) {\n      captureException(error);\n    }\n    \n    this.setState(prevState => ({\n      validDomains: {...prevState.validDomains, [domain]: valid}\n    }));\n  }\n    \n  render() {\n    const {inviteEmail, inviteUser, setWhitelistedDomain} = this.props;\n    const {maybeRequest, maybeResults, query} = this.state;\n    const isLoading = !!maybeRequest || !maybeResults;\n    const results = [];\n    \n    const email = parseOneAddress(query);\n    if (email && this.props.enabledToggles.includes(\"Email Invites\")) {\n      results.push({\n        key: 'invite-by-email',\n        item: <InviteByEmail email={email.address} onClick={() => inviteEmail(email.address)}/>,\n      });\n    }\n    \n    if (setWhitelistedDomain) {\n      const domain = getDomain(query);\n      const prevDomain = this.props.whitelistedDomain;\n      if (domain && prevDomain !== domain && this.state.validDomains[domain]) {\n        results.push({\n          key: 'whitelist-email-domain',\n          item: <WhitelistEmailDomain domain={domain} prevDomain={prevDomain} onClick={() => setWhitelistedDomain(domain)}/>,\n        });\n      }\n    }\n    \n    // now add the actual search results\n    if (maybeResults) {\n      results.push(...maybeResults.map(user => ({\n        key: user.id,\n        item: <UserResultItem user={user} action={() => inviteUser(user)} />\n      })));\n    }\n    \n    return (\n      <dialog className=\"pop-over add-team-user-pop\">\n        <section className=\"pop-over-info\">\n          <input id=\"team-user-search\"\n            autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n            value={query} onChange={this.handleChange}\n            className=\"pop-over-input search-input pop-over-search\"\n            placeholder=\"Search for a user\"\n          />\n        </section>\n        {!!query && <Results isLoading={isLoading} results={results}/> }\n        {!query && setWhitelistedDomain && (\n          <aside className=\"pop-over-info\">\n            You can also whitelist with @example.com\n          </aside>\n        )}\n      </dialog>\n    );\n  }\n}\nAddTeamUserPop.propTypes = {\n  api: PropTypes.func.isRequired,\n  inviteEmail: PropTypes.func.isRequired,\n  inviteUser: PropTypes.func.isRequired,\n  members: PropTypes.arrayOf(PropTypes.number.isRequired).isRequired,\n  setWhitelistedDomain: PropTypes.func,\n  whitelistedDomain: PropTypes.string,\n  enabledToggles: PropTypes.array.isRequired,\n};\n\nconst Results = ({results, isLoading}) => {\n  if(isLoading) {\n    return (\n      <section className=\"pop-over-actions last-section\">\n        <Loader />\n      </section>\n    );\n  }\n\n  if(results.length === 0) {\n    return (\n      <section className=\"pop-over-actions last-section\">\n        Nothing found <span role=\"img\" aria-label=\"\">💫</span>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"pop-over-actions last-section results-list\">\n      <ul className=\"results\">\n        {results.map(({key, item}) => <li key={key}>{item}</li>)}\n      </ul>\n    </section>\n  );\n};\n\nResults.propTypes = {\n  results: PropTypes.array.isRequired,\n  isLoading: PropTypes.bool.isRequired,\n};\n\nconst AddTeamUserPopWithDevToggles = (props) => (\n  <DevToggles>\n    {(enabledToggles) => (\n      <AddTeamUserPop {...props} enabledToggles={enabledToggles}/>\n    )}\n  </DevToggles>\n);\n\nexport default AddTeamUserPopWithDevToggles;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopoverWithButton from './popover-with-button';\nimport PopoverButton from './popover-button';\nimport {CurrentUserConsumer} from '../current-user.jsx';\n\n// Collection Options Pop\nconst CollectionOptionsPop = (props) => {\n  \n  function animate(event, className, func) {\n    const collectionContainer = event.target.closest('li');\n    collectionContainer.addEventListener('animationend', func, {once: true});\n    collectionContainer.classList.add(className);\n  }\n\n  function animateThenDeleteCollection(event) {\n    if(!window.confirm(`Are you sure you want to delete your collection?`)){\n      return;\n    }\n    animate(event, 'slide-down', () => props.deleteCollection(props.collection.id));    \n  }  \n  \n  return(\n    <dialog className=\"pop-over collection-options-pop\">\n      <section className=\"pop-over-actions danger-zone last-section\">\n        {props.deleteCollection && <PopoverButton onClick={animateThenDeleteCollection} text=\"Delete Collection \" emoji=\"bomb\"/>}\n      </section>\n    </dialog>\n  );\n};\n\nCollectionOptionsPop.propTypes = {\n  deleteCollection: PropTypes.func,\n};\n  \n// Collection Options Container\nexport default function CollectionOptions({deleteCollection, collection}) {\n  if(!deleteCollection) {\n    return null;\n  }\n\n  return (\n    <PopoverWithButton\n      buttonText={<div className=\"down-arrow\" aria-label='options' />}\n      containerClass='collection-options-pop-btn'\n      buttonClass=\"collection-options button-borderless opens-pop-over\" >\n      <CurrentUserConsumer>\n        {user => <CollectionOptionsPop collection={collection} \n          deleteCollection={deleteCollection} \n          currentUser={user}/>}\n      </CurrentUserConsumer>\n    </PopoverWithButton>);\n}\n\nCollectionOptions.propTypes = {\n  collection: PropTypes.object.isRequired,\n  deleteCollection: PropTypes.func\n};\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport _ from 'lodash';\nimport {withRouter} from 'react-router-dom';\nimport {TrackClick} from '../analytics';\nimport {CurrentUserConsumer} from '../current-user.jsx';\nimport {getPredicates, getTeamPair} from '../../models/words';\nimport {getLink} from '../../models/team';\nimport Loader from '../includes/loader.jsx';\nimport {NestedPopoverTitle} from '../pop-overs/popover-nested.jsx';\nimport {PureEditableField} from '../includes/editable-field.jsx';\nimport {SignInPop} from './sign-in-pop.jsx';\n\n// Create Team 🌿\n\nclass CreateTeamPopBase extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      teamName: '',\n      isLoading: false,\n      error: ''\n    };\n    this.debouncedValidate = _.debounce(this.validate.bind(this), 200);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  \n  async componentDidMount() {\n    try {\n      const teamName = await getTeamPair();\n      this.setState(prevState => (!prevState.teamName ? {teamName} : {}));\n    } catch (error) {\n      // If something goes wrong just leave the field empty\n    }\n    this.validate();\n  }\n  \n  async validate() {\n    const name = this.state.teamName;\n    if (name) {\n      const url = _.kebabCase(name);\n      let error = null;\n      \n      try {\n        const {data} = await this.props.api.get(`userId/byLogin/${url}`);\n        if (data !== 'NOT FOUND') {\n          error = 'Name in use, try another';\n        }\n      } catch (error) {\n        if (!(error.response && error.response.status === 404)) {\n          throw error;\n        }\n      }\n      \n      try {\n        const {data} = await this.props.api.get(`teams/byUrl/${url}`);\n        if (data) {\n          error = 'Team already exists, try another';\n        }\n      } catch (error) {\n        if (!(error.response && error.response.status === 404)) {\n          throw error;\n        }\n      }\n      \n      if (error) {\n        this.setState(({teamName}) => (name === teamName) ? {error} : {});\n      }\n    }\n  }\n  \n  async handleChange(newValue) {\n    this.setState({\n      teamName: newValue,\n      error: '',\n    });\n    this.debouncedValidate();\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    this.setState({ isLoading: true });\n    try {\n      let description = 'A team that makes things';\n      try {\n        const predicates = await getPredicates();\n        description = `A ${predicates[0]} team that makes ${predicates[1]} things`;\n      } catch (error) {\n        // Just use the plain description\n      }\n      const {data} = await this.props.api.post('teams', {\n        name: this.state.teamName,\n        url: _.kebabCase(this.state.teamName),\n        hasAvatarImage: false,\n        coverColor: '',\n        location: '',\n        description,\n        backgroundColor: '',\n        hasCoverImage: false,\n        isVerified: false,\n      });\n      this.props.history.push(getLink(data));\n    } catch (error) {\n      const message = error && error.response && error.response.data && error.response.data.message;\n      this.setState({\n        isLoading: false,\n        error: message || 'Something went wrong',\n      });\n    }\n  }\n  \n  render() {\n    const placeholder = 'Your Team Name';\n    return (\n      <dialog className=\"pop-over create-team-pop\">\n        <NestedPopoverTitle>\n          Create Team <span className=\"emoji herb\" />\n        </NestedPopoverTitle>\n\n        <section className=\"pop-over-info\">\n          <p className=\"info-description\">\n            Showcase your projects in one place, manage collaborators, and view analytics\n          </p>\n        </section>\n        \n        <section className=\"pop-over-actions\">  \n          <form onSubmit={this.handleSubmit}>\n            <PureEditableField\n              value={this.state.teamName}\n              update={this.handleChange}\n              placeholder={placeholder}\n              error={this.state.error}\n            />\n            <p className=\"action-description team-url-preview\">\n              /@{_.kebabCase(this.state.teamName || placeholder)}\n            </p>\n          \n            {this.state.isLoading ? <Loader /> : (\n              <TrackClick name=\"Create Team submitted\">\n                <button type=\"submit\" className=\"button-small has-emoji\">\n                  Create Team <span className=\"emoji thumbs_up\" />\n                </button>\n              </TrackClick>\n            )}\n          </form>\n\n        </section>\n        <section className=\"pop-over-info\">\n          <p className=\"info-description\">\n            You can change this later\n          </p>\n        </section>\n      </dialog>\n    );\n  }\n}\n\nCreateTeamPopBase.propTypes = {\n  api: PropTypes.func.isRequired,\n};\n\nconst CreateTeamPop = withRouter(CreateTeamPopBase);\n\nconst CreateTeamPopOrSignIn = ({api}) => (\n  <CurrentUserConsumer>\n    {user => (user && user.login ? (\n      <CreateTeamPop api={api}/>\n    ) : (\n      <SignInPop api={api} hash=\"create-team\"\n        header={<NestedPopoverTitle>Sign In</NestedPopoverTitle>}\n        prompt={<p className=\"action-description\">You'll need to sign in to create a team</p>}\n      />\n    ))}\n  </CurrentUserConsumer>\n);\n\nexport default CreateTeamPopOrSignIn;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withRouter} from 'react-router-dom';\n//import UsersList from '../users-list.jsx';\nimport Loader from '../includes/loader.jsx';\nimport NotificationsConsumer from '../notifications.jsx';\n\nclass DeleteTeamPopBase extends React.Component {\n  constructor(props) {\n    super(props);    \n    this.state = {\n      teamIsDeleting: false,\n    };\n    this.deleteTeam = this.deleteTeam.bind(this);\n  }\n    \n  async deleteTeam() {\n    if (this.state.teamIsDeleting) {\n      return null;\n    }\n    this.setState({\n      teamIsDeleting: true\n    });\n    try {\n      await this.props.api().delete(`teams/${this.props.teamId}`);\n      this.props.history.push('/');\n    } catch (error) {\n      console.error(\"deleteTeam\", error, error.response);\n      this.props.createErrorNotification('Something went wrong, try refreshing?');\n      this.setState({\n        teamIsDeleting: false\n      });\n    }\n  }\n    \n  render() {\n    let illustration = \"https://cdn.glitch.com/c53fd895-ee00-4295-b111-7e024967a033%2Fdelete-team.svg?1531267699621\";\n    return (\n      <dialog className=\"pop-over delete-team-pop\" open>\n        <section className=\"pop-over-info\">\n          <div className=\"pop-title\">\n            Delete {this.props.teamName}\n          </div>\n        </section>\n        <section className=\"pop-over-actions\">\n          <img className=\"illustration\" src={illustration} aria-label=\"illustration\" alt=\"\" />\n          <div className=\"action-description\">\n            Deleting {this.props.teamName} will remove this team page. No projects will be deleted, but only current project members will be able to edit them.\n          </div>\n        </section>\n        <section className=\"pop-over-actions danger-zone\">\n          <button className=\"button button-small has-emoji opens-pop-over\" onClick={this.deleteTeam}>\n            <span>Delete {this.props.teamName} </span> \n            <span className=\"emoji bomb\" role=\"img\" aria-label=\"bomb emoji\"></span>\n            { this.state.teamIsDeleting && <Loader /> }\n          </button>\n        </section>\n        \n        {/* temp hidden until the email part of this is ready\n        <section className=\"pop-over-info\">\n          <UsersList users={this.props.teamAdmins}/>\n          <p className=\"info-description\">This will also email all team admins, giving them an option to undelete it later</p>\n        </section>\n         */}\n\n      </dialog>\n    );\n  }\n}\n\nexport const DeleteTeamPop = withRouter(props => (\n  <NotificationsConsumer>\n    {notifyFuncs => <DeleteTeamPopBase {...notifyFuncs} {...props}/>}\n  </NotificationsConsumer>\n));\n\nDeleteTeamPop.propTypes = {\n  api: PropTypes.func.isRequired,\n  teamId: PropTypes.number.isRequired,\n  teamName: PropTypes.string.isRequired,\n  users: PropTypes.array.isRequired,\n  teamAdmins: PropTypes.array.isRequired,\n  togglePopover: PropTypes.func, // required but added dynamically\n};\n\nexport default DeleteTeamPop;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport randomColor from 'randomcolor';\n\nimport {throttle} from 'lodash';\n\nconst validHex = (hex) =>{\n  var re = /[0-9A-Fa-f]{6}/g;\n  if(re.test(hex)){\n    return true;\n  }\n  return false;\n};\n\nclass EditCollectionColorPop extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      query: this.props.initialColor,\n      color: this.props.initialColor,\n      maybeRequest: null,\n      maybeResults: null\n    };\n    \n    this.onClick = this.onClick.bind(this);\n    this.handleChange = this.handleChange.bind(this); // for when user enters in custom hex\n    this.keyPress = this.keyPress.bind(this); // handles enter key for custom hex\n    this.getRandomColor = this.getRandomColor.bind(this); // gets random color\n    this.changeColor = throttle(this.changeColor.bind(this), 250); // get update from system color picker\n    this.update = this.props.updateColor;\n  }\n    \n  handleChange(e) {\n    let query = e.currentTarget.value.trim();\n    const errorMsg = document.getElementsByClassName(\"editable-field-error-message\")[0];\n    errorMsg.style.display = \"none\";\n    this.setState({ query });\n    if (query && query.length <=7) {\n      if(validHex(query)){\n        if(query[0] !== \"#\"){\n          query = \"#\" + query;\n        }\n        this.setState({color: query});\n        this.update(query);\n      }else{\n        errorMsg.style.display = \"inherit\";\n      }\n    }else{\n      // user has cleared the input field\n      errorMsg.style.display = \"inherit\";\n    }\n  }\n  \n  keyPress(e){\n    if(e.which == 13 || e.keyCode == 13){\n      // enter key pressed - dismiss pop-over\n      this.props.togglePopover();\n    }else{\n      document.getElementsByClassName(\"editable-field-error-message\")[0].style.display = \"none\";\n    }\n  }\n    \n  onClick() {\n    this.props.togglePopover();\n  }\n  \n  getRandomColor(){\n    let newCoverColor = randomColor({luminosity: 'light'});\n    this.setState({ color: newCoverColor});\n    this.setState({ query: newCoverColor});\n    this.update(newCoverColor);\n  }\n  \n  changeColor(color){\n    // upate the UI manually to prevent lag\n    document.getElementById(\"color-picker\").value = color;\n    document.getElementById(\"color-picker\").style.backgroundColor = color;\n    this.setState({ color: color });\n    this.setState({ query: color});    \n    this.update(color);\n  }\n  \n  render() {    \n    return (\n      <dialog className=\"pop-over edit-collection-color-pop\">\n        <section className=\"pop-over-info\">          \n                  \n          <input className=\"color-picker\" type=\"color\" value={this.state.color} onChange={(e) => this.changeColor(e.target.value)} style={{backgroundColor: this.state.color}} id=\"color-picker\"></input>\n          \n          <div className=\"custom-color-input\">\n            <input id=\"color-picker-hex\"\n              value={this.state.query} \n              onChange={this.handleChange} \n              onKeyPress={this.keyPress}\n              className={\"pop-over-input pop-over-search\"}\n              placeholder=\"Custom color hex\"\n            />\n\n            <div className=\"editable-field-error-message\">\n              Invalid Hex\n            </div>\n          </div>\n          \n        </section>\n          \n        <section className=\"pop-over-info\">  \n          <button className=\"random-color-btn button-tertiary\" onClick={this.getRandomColor}>Random <span className=\"emoji bouquet\"></span></button>\n        </section>\n        \n      </dialog>\n    );\n  }\n}\n\nEditCollectionColorPop.propTypes = {\n  updateColor: PropTypes.func.isRequired,\n  initialColor: PropTypes.string.isRequired,\n};\n\nexport default EditCollectionColorPop;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopoverContainer from './popover-container.jsx';\nimport PopoverButton from './popover-button';\n\n// Project Options Container\n// create as stateful react component\nexport default function FeaturedProjectOptionsPop({unfeatureProject}) {\n  \n  function animateThenUnfeature(togglePopover){\n    const featuredContainer = document.getElementById('featured-project-embed');\n    featuredContainer.classList.add('slide-down');\n    togglePopover();\n    unfeatureProject();\n  }\n   \n  return (\n    <PopoverContainer>\n      {({togglePopover, visible}) => (\n        <div>\n          <button className=\"project-options button-borderless opens-pop-over\" onClick={togglePopover}> \n            <div className=\"down-arrow\" />\n          </button>\n          { visible && (\n            <dialog className=\"pop-over project-options-pop\">\n              <section className=\"pop-over-actions\">\n                <PopoverButton onClick={() => animateThenUnfeature(togglePopover)} text=\"Un-feature\" emoji=\"arrow-down\"/>\n              </section>\n            </dialog>\n          )}\n        </div>\n      )}\n    </PopoverContainer>     \n  );\n}\n\nFeaturedProjectOptionsPop.propTypes = {\n  api: PropTypes.func.isRequired,\n  project: PropTypes.object,\n  unfeatureProject: PropTypes.func.isRequired,\n};\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {TrackedExternalLink} from '../analytics';\nimport Loader from '../includes/loader.jsx';\nimport ProjectResultItem from '../includes/project-result-item.jsx';\nimport PopoverWithButton from './popover-with-button';\n\nimport {getRemixUrl} from '../../models/project';\n\nconst NewProjectPop = ({projects}) => (\n  <div className=\"pop-over new-project-pop\">\n    <section className=\"pop-over-actions results-list\">\n      <div className=\"results\">\n        {projects.length ? projects.map((project) => (\n          <TrackedExternalLink key={project.id} to={getRemixUrl(project.domain)}\n            name=\"New Project Clicked\" properties={{\n              baseDomain: project.domain,\n              origin: \"community new project pop\",\n            }}\n          >\n            <ProjectResultItem {...project} cdnUrl=\"https://cdn.glitch.com\" users={[]} onClick={() => {}}/>\n          </TrackedExternalLink>\n        )) : <Loader/>}\n      </div>\n    </section>\n    <section className=\"pop-over-actions last-section pop-over-info\">\n      <button className=\"button-small button-tertiary button-on-secondary-background\" onClick={importGitRepo}>\n        <span>Clone from Git Repo</span>\n      </button>\n    </section>\n  </div>\n);\nNewProjectPop.propTypes = {\n  projects: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    domain: PropTypes.string.isRequired,\n  })).isRequired,\n};\n\nconst importGitRepo = () => {\n  const repoUrl = window.prompt(\"Paste the full URL of your repository\", \"https://github.com/orgname/reponame.git\");\n  if (!repoUrl) {\n    return;\n  }\n  window.location.href = `/edit/#!/import/git?url=${repoUrl}`;\n};\n\nclass NewProjectPopButton extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {projects: []};\n  }\n  \n  async load() {\n    const projectIds = [\n      'a0fcd798-9ddf-42e5-8205-17158d4bf5bb', // 'hello-express'\n      'cb519589-591c-474f-8986-a513f22dbf88', // 'hello-sqlite'\n      '929980a8-32fc-4ae7-a66f-dddb3ae4912c', // 'hello-webpage'\n    ];\n    // always request against the production API, with no token\n    const {data} = await this.props.api.get(\n      `https://api.glitch.com/projects/byIds?ids=${projectIds.join(',')}`,\n      {\n        headers: {\n          Authorization: ''\n        },\n      },\n    );\n    this.setState({projects: data});\n  }\n  \n  componentDidMount() {\n    this.load();\n  }\n  \n  render() {\n    return (<PopoverWithButton \n      buttonClass=\"button-small\"\n      dataTrack=\"open new-project pop\"\n      buttonText=\"New Project\">\n      <NewProjectPop projects={this.state.projects}/>\n    </PopoverWithButton>);\n  }\n}\nNewProjectPopButton.propTypes = {\n  api: PropTypes.any.isRequired,\n};\n\nexport default NewProjectPopButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PopoverButton = ({onClick, text, emoji}) => (\n  <button className=\"button-small has-emoji button-tertiary\" onClick={onClick}>\n    <span>{text} </span>\n    <span className={`emoji ${emoji}`}></span>\n  </button>\n);\n\nPopoverButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  text: PropTypes.node.isRequired,\n  emoji: PropTypes.string.isRequired,\n};\n\nexport default PopoverButton;\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport onClickOutside from 'react-onclickoutside';\nimport {isFragment} from 'react-is';\n\n/*\nA popover is a light, hollow roll made from an egg batter similar to\nthat of Yorkshire pudding, typically baked in muffin tins or dedicated\npopover pans, which have straight-walled sides rather than angled.\n\n...also it's a [Bootstrap UI pattern](https://www.w3schools.com/bootstrap/bootstrap_popover.asp)\n*/\nconst Wrapper = ({children}) => (children);\n\nWrapper.propTypes = {\n  children: PropTypes.element,\n};\n\nexport default class PopoverContainer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { visible: props.startOpen };\n\n    this.set = this.set.bind(this);\n    this.toggle = this.toggle.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n\n    // We need to set up and instantiate an onClickOutside wrapper\n    // It's important to instantiate it once and pass though its children,\n    // otherwise the diff algorithm won't be able to figure out our hijinks.\n    // https://github.com/Pomax/react-onclickoutside\n\n    // We do extra work with disableOnClickOutside and handleClickOutside\n    // to prevent event bindings from being created until the popover is opened.\n    const handleClickOutside = this.handleClickOutside.bind(this);\n    const clickOutsideConfig = {\n      handleClickOutside: () => handleClickOutside,\n      excludeScrollbar: true,\n    };\n    this.MonitoredComponent = onClickOutside(Wrapper, clickOutsideConfig);\n  }\n\n  handleClickOutside(event) {\n    // On keyup events, only hide the popup if it was the Escape key\n    if(event.type === \"keyup\" && ![\"Escape\", \"Esc\"].includes(event.key)) {\n      return;\n    }\n\n    this.setState({visible: false});\n  }\n\n  set(visible) {\n    this.setState({visible});\n  }\n\n  toggle() {\n    this.setState((prevState) => {\n      return {visible: !prevState.visible};\n    });\n  }\n\n  // show() {\n  //   this.setState(() => {\n  //     return {visible: true};\n  //   });\n  // }\n\n\n  render() {\n    const props = {\n      visible: this.state.visible,\n      togglePopover: this.toggle,\n      setVisible: this.set,\n    };\n    const inner = this.props.children(props);\n    if(isFragment(inner)) {\n      console.error(\"PopoverContainer does not support Fragment as the top level item. Please use a different element.\");\n    }\n    const outer = this.props.outer ? this.props.outer(props) : null;\n    return (\n      <>\n        {outer}\n        <this.MonitoredComponent disableOnClickOutside={!this.state.visible} eventTypes={[\"mousedown\", \"touchstart\", \"keyup\"]}>\n          {inner}\n        </this.MonitoredComponent>\n      </>\n    );\n  }\n}\n\nPopoverContainer.propTypes = {\n  children: PropTypes.func.isRequired,\n  outer: PropTypes.func,\n  startOpen: PropTypes.bool,\n};\nPopoverContainer.defaultProps = {\n  startOpen: false,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst {Provider, Consumer} = React.createContext();\n\nexport class NestedPopover extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      alternateContentVisible: props.startAlternateVisible,\n    };\n    this.toggle = this.toggle.bind(this);\n  }\n  \n  toggle() {\n    this.setState(prevState => ({alternateContentVisible: !prevState.alternateContentVisible}));\n  }\n  \n  render() {\n    // Only use the provider on the sub menu\n    // Nested consumers want the back button, not the open menu\n    if (this.state.alternateContentVisible) {\n      return (\n        <Provider value={this.toggle}>\n          {this.props.alternateContent(this.toggle)}\n        </Provider>\n      );\n    }\n    return this.props.children(this.toggle);\n  }\n}\nNestedPopover.propTypes = {\n  children: PropTypes.func.isRequired,\n  alternateContent: PropTypes.func.isRequired,\n  startAlternateVisible: PropTypes.bool,\n};\nNestedPopover.defaultProps = {\n  startAlternateVisible: false,\n};\n\n\nexport const NestedPopoverTitle = ({children}) => (\n  <Consumer>\n    {toggle => (\n      <button className=\"button-unstyled pop-over-section pop-over-info clickable-label\" onClick={toggle} aria-label=\"go back\">\n        <div className=\"back icon\"><div className=\"left-arrow icon\" /></div>\n        &nbsp;\n        <div className=\"pop-title\">{children}</div>\n      </button>\n    )}\n  </Consumer>\n);\nNestedPopoverTitle.propTypes = {\n  children: PropTypes.node.isRequired,\n};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopoverContainer from './popover-container.jsx';\n\nconst PopoverWithButton = props => {\n  return (\n    <PopoverContainer>\n      {({ visible, togglePopover }) => {\n        let childrenToShow = props.children;\n        if (props.passToggleToPop) {\n          childrenToShow = React.Children.map(props.children, child => React.cloneElement(child, { togglePopover: togglePopover }));\n        }\n        return (\n          <div className={\"button-wrap \" + props.containerClass}>\n            <button\n              className={props.buttonClass}\n              data-track={props.dataTrack}\n              onClick={togglePopover}\n            >\n              {props.buttonText}\n            </button>\n            {visible && childrenToShow}\n          </div>\n        );\n      }}\n    </PopoverContainer>\n  );\n};\n\nPopoverWithButton.propTypes = {\n  buttonClass: PropTypes.string,\n  containerClass: PropTypes.string,\n  dataTrack: PropTypes.string,\n  buttonText: PropTypes.node.isRequired,\n  children: PropTypes.node.isRequired, // should be the stuff to show in a popover\n  passToggleToPop: PropTypes.bool\n};\n\nPopoverWithButton.defaultProps = {\n  buttonClass: \"\",\n  containerClass: \"\",\n  dataTrack: \"\",\n  passToggleToPop: false\n};\n\nexport default PopoverWithButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {TrackClick} from '../analytics';\nimport PopoverWithButton from './popover-with-button';\nimport {NestedPopover} from './popover-nested';\nimport {CurrentUserConsumer} from '../current-user';\n\nimport AddProjectToCollectionPop from '../pop-overs/add-project-to-collection-pop';\n\nconst PopoverButton = ({onClick, text, emoji}) => (\n  <button className=\"button-small has-emoji button-tertiary\" onClick={onClick}>\n    <span>{text} </span>\n    <span className={`emoji ${emoji}`}></span>\n  </button>\n);\n\n// Project Options Content\nconst ProjectOptionsContent = ({addToCollectionPopover, ...props}) => {\n  function animate(event, className, func) {\n    const projectContainer = event.target.closest('li');\n    projectContainer.addEventListener('animationend', func, {once: true});\n    projectContainer.classList.add(className);\n    props.togglePopover();\n  }\n  \n  function leaveProject(event) {\n    const prompt = `Once you leave this project, you'll lose access to it unless someone else invites you back. \\n\\n Are sure you want to leave ${props.project.domain}?`;\n    if (window.confirm(prompt)) {\n      props.leaveProject(props.project.id, event);\n    }\n  }\n    \n  function leaveTeamProject() {\n    props.leaveTeamProject(props.project.id, props.currentUser.id);\n  }\n  \n  function joinTeamProject() {\n    props.joinTeamProject(props.project.id, props.currentUser);\n  }\n    \n  function animateThenAddPin(event) {\n    animate(event, 'slide-up', () => props.addPin(props.project.id));\n  }\n  \n  function animateThenRemovePin(event) {\n    animate(event, 'slide-down', () => props.removePin(props.project.id));\n  }\n  \n  function animateThenDeleteProject(event) {\n    animate(event, 'slide-down', () => props.deleteProject(props.project.id));\n  }\n  \n  function featureProject(event){\n    animate(event, 'slide-up', () => props.featureProject(props.project.id));\n  }\n  \n  return(\n    <dialog className=\"pop-over project-options-pop\">\n\n      {!!props.addPin &&\n        <section className=\"pop-over-actions\">\n          {!props.project.private && <PopoverButton onClick={featureProject} text=\"Feature\" emoji=\"clapper\"/>}\n          <TrackClick name=\"Project Pinned\">\n            <PopoverButton onClick={animateThenAddPin} text=\"Pin \" emoji=\"pushpin\"/>\n          </TrackClick>\n        </section>\n      }\n      {!!props.removePin &&\n        <section className=\"pop-over-actions\">\n          {!props.project.private && <PopoverButton onClick={featureProject} text=\"Feature\" emoji=\"clapper\"/>}\n          <TrackClick name=\"Project Un-Pinned\">\n            <PopoverButton onClick={animateThenRemovePin} text=\"Un-Pin \" emoji=\"pushpin\"/>\n          </TrackClick>\n        </section>\n      }\n      \n      {!!props.addProjectToCollection &&\n        <section className=\"pop-over-actions\">\n          <PopoverButton onClick={addToCollectionPopover} {...props} text=\"Add to My Collection \" emoji=\"framed-picture\"/>\n        </section>\n      }\n\n      {props.joinTeamProject && !props.currentUserIsOnProject &&\n        <section className=\"pop-over-actions collaborator-actions\">\n          <PopoverButton onClick={joinTeamProject} text=\"Join Project \" emoji=\"rainbow\"/>\n        </section>\n      }\n      \n      {props.leaveTeamProject && props.currentUserIsOnProject &&\n        <section className=\"pop-over-actions collaborator-actions\">\n          <TrackClick name=\"Leave Project clicked\">\n            <PopoverButton onClick={leaveTeamProject} text=\"Leave Project \" emoji=\"wave\"/>\n          </TrackClick>\n        </section>\n      }\n      \n      {(props.leaveProject && props.project.users.length > 1 && props.currentUserIsOnProject) &&\n        <section className=\"pop-over-actions collaborator-actions\">\n          <TrackClick name=\"Leave Project clicked\">\n            <PopoverButton onClick={leaveProject} text=\"Leave Project \" emoji=\"wave\"/>\n          </TrackClick>\n        </section>\n      }\n\n      {((props.currentUserIsOnProject || !!props.removeProjectFromTeam) && !props.removeProjectFromCollection) && \n        <section className=\"pop-over-actions danger-zone last-section\">\n          {!!props.removeProjectFromTeam && <PopoverButton onClick={() => props.removeProjectFromTeam(props.project.id)} text=\"Remove from Team \" emoji=\"thumbs_down\"/>}\n\n          {props.currentUserIsOnProject && !props.removeProjectFromCollection && (\n            <TrackClick name=\"Delete Project clicked\">\n              <PopoverButton onClick={animateThenDeleteProject} text=\"Delete Project \" emoji=\"bomb\"/>\n            </TrackClick>\n          )}\n        </section>\n      }\n      {props.removeProjectFromCollection &&\n      <section className=\"pop-over-actions danger-zone last-section\">\n        {props.removeProjectFromCollection && <PopoverButton onClick={() => props.removeProjectFromCollection(props.project)} text=\"Remove from Collection\" emoji=\"thumbs_down\"/>}\n      </section>\n      }\n      \n    </dialog>\n  ); \n};\n\n\n// Project Options Pop\nconst ProjectOptionsPop = ({...props}) => {\n  return(\n    <NestedPopover alternateContent={() => <AddProjectToCollectionPop {...props} api={props.api} togglePopover={props.togglePopover}/>}>\n      { addToCollectionPopover => (\n        <ProjectOptionsContent {...props} addToCollectionPopover={addToCollectionPopover}/>\n      )}\n    </NestedPopover>\n  );\n};\n\nProjectOptionsPop.propTypes = {\n  api: PropTypes.any,\n  currentUser: PropTypes.object,\n  project: PropTypes.shape({\n    users: PropTypes.array.isRequired,\n  }),\n  togglePopover: PropTypes.func.isRequired,\n  addPin: PropTypes.func,\n  removePin: PropTypes.func,\n  deleteProject: PropTypes.func,\n  leaveProject: PropTypes.func,\n  removeProjectFromTeam: PropTypes.func,\n  joinTeamProject: PropTypes.func,\n  leaveTeamProject: PropTypes.func,\n  featureProject: PropTypes.func,\n  currentUserIsOnProject: PropTypes.bool.isRequired,\n};\nProjectOptionsPop.defaultProps = {\n  currentUserIsOnProject: false\n};\n\n// Project Options Container\n// create as stateful react component\nexport default function ProjectOptions({projectOptions={}, project, api, currentCollectionId}, {...props}) {\n  if(Object.keys(projectOptions).length === 0) {\n    return null;\n  }\n\n  function currentUserIsOnProject(user) {\n    let projectUsers = project.users.map(projectUser => {\n      return projectUser.id;\n    });\n    if (projectUsers.includes(user.id)) {\n      return true;\n    }\n  }\n\n  return (\n    <PopoverWithButton\n      buttonClass=\"project-options button-borderless opens-pop-over button-small\"\n      buttonText={<div className=\"down-arrow\" aria-label=\"options\" />}\n      containerClass=\"project-options-pop-btn\"\n      passToggleToPop\n    >\n      <CurrentUserConsumer>\n        {(user, fetched, funcs, consumerProps) => {\n          return (\n            <ProjectOptionsPop\n              {...consumerProps}\n              {...props}\n              {...projectOptions}\n              project={project}\n              currentCollectionId={currentCollectionId}\n              api={api}\n              currentUser={user}\n              currentUserIsOnProject={currentUserIsOnProject(user)}\n            />\n          );\n        }}\n      </CurrentUserConsumer>\n    </PopoverWithButton>\n  );\n}\n\nProjectOptions.propTypes = {\n  api: PropTypes.func,\n  currentCollectionId: PropTypes.number,\n  project: PropTypes.object.isRequired\n};","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport PopoverWithButton from \"./popover-with-button\";\nimport {\n  PureEditableField,\n  PureEditableTextArea\n} from \"../includes/editable-field.jsx\";\nimport { parseOneAddress } from \"email-addresses\";\nimport _ from \"lodash\";\nimport axios from \"axios\";\nimport { captureException } from \"../../utils/sentry\";\nimport {\n  getAbuseReportTitle,\n  getAbuseReportBody\n} from \"../../utils/abuse-reporting.js\";\nimport Loader from \"../includes/loader.jsx\";\n\nimport { CurrentUserConsumer } from \"../current-user.jsx\";\n\nclass ReportAbusePop extends React.Component {\n  constructor(props) {\n    super(props);\n\n    if (this.props.reportedType == \"user\") {\n      this.defaultReason = `This user profile doesn't seem appropriate for Glitch because...`;\n    } else if (this.props.reportedType == \"home\") {\n      this.defaultReason = `[Something here] doesn't seem appropriate for Glitch because...`;\n    } else {\n      this.defaultReason = `This ${\n        props.reportedType\n      } doesn't seem appropriate for Glitch because...`;\n    }\n\n    this.state = {\n      reason: this.defaultReason,\n      email: \"\",\n      emailError: \"\",\n      reasonError: \"\",\n      submitted: false,\n      loading: false\n    };\n    this.submitReport = this.submitReport.bind(this);\n    this.reasonOnChange = this.reasonOnChange.bind(this);\n    this.formatRaw = this.formatRaw.bind(this);\n    this.getUserInfoSection = this.getUserInfoSection.bind(this);\n    this.emailOnChange = this.emailOnChange.bind(this);\n    this.validateNotEmpty = this.validateNotEmpty.bind(this);\n    this.validateReason = this.validateReason.bind(this);\n    this.validateEmail = this.validateEmail.bind(this);\n    this.renderForm = this.renderForm.bind(this);\n    this.renderSuccess = this.renderSuccess.bind(this);\n    this.renderFailure = this.renderFailure.bind(this);\n    this.pickFormBody = this.pickFormBody.bind(this);\n\n    this.debouncedValidateEmail = _.debounce(() => this.validateEmail(), 200);\n    this.debouncedValidateReason = _.debounce(() => this.validateReason(), 200);\n  }\n\n  formatRaw() {\n    return getAbuseReportBody(\n      this.props.currentUser,\n      this.state.email,\n      this.props.reportedType,\n      this.props.reportedModel,\n      this.state.reason\n    );\n  }\n\n  async submitReport() {\n    try {\n      const emailErrors = this.validateEmail();\n      const reasonErrors = this.validateReason();\n      if (emailErrors.emailError != \"\" || reasonErrors.reasonError != \"\") {\n        return;\n      }\n      this.setState({ loading: true });\n\n      await axios.post(\"https://support-poster.glitch.me/post\", {\n        raw: this.formatRaw(),\n        title: getAbuseReportTitle(\n          this.props.reportedModel,\n          this.props.reportedType\n        )\n      });\n      this.setState({ submitted: true, submitSuccess: true, loading: false });\n    } catch (error) {\n      captureException(error);\n      this.setState({ submitted: true, submitSuccess: false, loading: false });\n    }\n  }\n\n  validateNotEmpty(stateField, errorField, fieldDescription) {\n    let errorObj;\n    if (this.state[stateField] === \"\") {\n      errorObj = { [errorField]: `${fieldDescription} is required` };\n    } else {\n      errorObj = { [errorField]: \"\" };\n    }\n    this.setState(errorObj);\n    return errorObj;\n  }\n\n  validateReason() {\n    let errorObj = this.validateNotEmpty(\n      \"reason\",\n      \"reasonError\",\n      \"A description of the issue\"\n    );\n    if (\n      errorObj.reasonError == \"\" &&\n      this.state.reason === this.defaultReason\n    ) {\n      errorObj = { reasonError: \"Reason is required\" };\n      this.setState(errorObj);\n    }\n    return errorObj;\n  }\n\n  validateEmail() {\n    if (this.props.currentUser.login) {\n      return { emailError: \"\" };\n    }\n\n    let errors = this.validateNotEmpty(\"email\", \"emailError\", \"Email\");\n    if (errors.emailError != \"\") {\n      return errors;\n    }\n\n    const email = parseOneAddress(this.state.email);\n    if (!email) {\n      errors = { emailError: \"Please enter a valid email\" };\n    } else {\n      errors = { emailError: \"\" };\n    }\n    this.setState(errors);\n    return errors;\n  }\n\n  reasonOnChange(value) {\n    this.setState({\n      reason: value\n    });\n    this.debouncedValidateReason();\n  }\n\n  emailOnChange(value) {\n    this.setState({\n      email: value\n    });\n    this.debouncedValidateEmail();\n  }\n\n  getUserInfoSection() {\n    if (this.props.currentUser.login) {\n      return (\n        <section className=\"pop-over-info\">\n          <p className=\"info-description right\">\n            from <strong>{this.props.currentUser.login}</strong>\n          </p>\n        </section>\n      );\n    }\n    return (\n      <section className=\"pop-over-info\">\n        <PureEditableField\n          value={this.state.email}\n          update={this.emailOnChange}\n          blur={() => this.debouncedValidateEmail()}\n          placeholder=\"your@email.com\"\n          error={this.state.emailError}\n          inputType=\"email\"\n        />\n      </section>\n    );\n  }\n\n  renderForm() {\n    return (\n      <>\n        <section className=\"pop-over-info\">\n          <h1 className=\"pop-title\">Report Abuse</h1>\n        </section>\n        <section className=\"pop-over-actions\">\n          <PureEditableTextArea\n            value={this.state.reason}\n            update={this.reasonOnChange}\n            blur={() => this.debouncedValidateReason()}\n            autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n            placeholder=\"\"\n            error={this.state.reasonError}\n          />\n        </section>\n        {this.getUserInfoSection()}\n        <section className=\"pop-over-actions\">\n          {this.state.loading ? (\n            <Loader />\n          ) : (\n            <button className=\"button button-small\" onClick={this.submitReport}>\n              Submit Report\n            </button>\n          )}\n        </section>\n      </>\n    );\n  }\n\n  renderSuccess() {\n    return (\n      <>\n        <section className=\"pop-over-info\">\n          <h1 className=\"pop-title\">Report Abuse</h1>\n        </section>\n        <section className=\"pop-over-actions\">\n          <div className=\"notification notifySuccess\">Report Sent</div>\n          <p className=\"pop-description tight-line\">\n            Thanks for helping to keep Glitch a safe, friendly community{\" \"}\n            <span className=\"emoji park\" role=\"img\" aria-label=\"\" />\n          </p>\n        </section>\n      </>\n    );\n  }\n\n  renderFailure() {\n    return (\n      <>\n        <section className=\"pop-over-info\">\n          <h1 className=\"pop-title\">\n            Failed to Send{\" \"}\n            <span className=\"emoji sick\" role=\"img\" aria-label=\"\" />\n          </h1>\n        </section>\n        <section className=\"pop-over-info\">\n          <p className=\"info-description\">\n            But you can still send us your message by emailing the details below\n            to <b>support@glitch.com</b>\n          </p>\n        </section>\n        <section className=\"pop-over-actions\">\n          <textarea\n            className=\"content-editable tall-text traditional\"\n            value={_.trimStart(this.formatRaw())}\n            readOnly\n          />\n        </section>\n      </>\n    );\n  }\n\n  pickFormBody() {\n    if (this.state.submitted) {\n      if (!this.state.submitSuccess) {\n        return this.renderFailure();\n      }\n      return this.renderSuccess();\n    }\n    return this.renderForm();\n  }\n\n  render() {\n    return (\n      <dialog className=\"pop-over wide-pop top-right report-abuse-pop\">\n        {this.pickFormBody()}\n      </dialog>\n    );\n  }\n}\n\nReportAbusePop.propTypes = {\n  reportedType: PropTypes.string.isRequired, // 'project', 'collection', 'user', 'team'\n  reportedModel: PropTypes.object.isRequired, // the actual model\n  currentUser: PropTypes.object\n};\n\nconst ReportAbusePopContainer = props => (\n  <CurrentUserConsumer>\n    {currentUser => <ReportAbusePop currentUser={currentUser} {...props} />}\n  </CurrentUserConsumer>\n);\n\nconst ReportAbusePopButton = props => (\n  <PopoverWithButton\n    buttonClass=\"button-small button-tertiary margin\"\n    buttonText=\"Report Abuse\"\n  >\n    <ReportAbusePopContainer\n      reportedType={props.reportedType}\n      reportedModel={props.reportedModel}\n    />\n  </PopoverWithButton>\n);\n\nReportAbusePopButton.propTypes = {\n  reportedType: PropTypes.string.isRequired, // 'project', 'collection', 'user', 'team'\n  reportedModel: PropTypes.object // the actual model, or null if no model (like for the home page)\n};\n\nexport default ReportAbusePopButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {withRouter} from 'react-router-dom';\nimport dayjs from 'dayjs';\n\nimport Link from '../includes/link';\nimport LocalStorage from '../includes/local-storage';\nimport PopoverWithButton from './popover-with-button';\nimport {captureException} from '../../utils/sentry';\nimport {CurrentUserConsumer} from '../current-user';\nimport {NestedPopover, NestedPopoverTitle} from './popover-nested.jsx';\n\n/* global GITHUB_CLIENT_ID, FACEBOOK_CLIENT_ID, APP_URL */\n\nfunction githubAuthLink() {\n  const params = new URLSearchParams();\n  params.append('client_id', GITHUB_CLIENT_ID);\n  params.append('scope', 'user:email');\n  params.append('redirect_uri', `${APP_URL}/login/github`);\n  return `https://github.com/login/oauth/authorize?${params}`;\n}\n\nfunction facebookAuthLink() {\n  const params = new URLSearchParams();\n  params.append('client_id', FACEBOOK_CLIENT_ID);\n  params.append('scope', 'email');\n  params.append('redirect_uri', `${APP_URL}/login/facebook`);\n  return `https://www.facebook.com/v2.9/dialog/oauth?${params}`;\n}\n\nconst SignInPopButton = (props) => (\n  <Link className=\"button button-small button-link has-emoji\" to={props.href} onClick={props.onClick}>\n    Sign in with {props.company} <span className={`emoji ${props.emoji}`}></span>\n  </Link>\n);\n\nclass EmailHandler extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      done: false,\n      error: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    \n  }\n  \n  onChange(e) {\n    this.setState({email: e.target.value});\n\n  }\n  \n  async onSubmit(e) {\n    e.preventDefault();\n    this.setState({done: true});\n    try {\n      await this.props.api.post('/email/sendLoginEmail', {emailAddress:this.state.email});\n      this.setState({error: false});\n    } catch (error) {\n      captureException(error);\n      this.setState({error: true});\n    }\n  }\n   \n  render() {\n    const isEnabled = this.state.email.length > 0;\n    return (\n      <NestedPopover alternateContent={() => <SignInWithConsumer {...this.props}/>} startAlternateVisible={false}>\n        {showCodeLogin =>\n          <dialog className=\"pop-over sign-in-pop\">\n            <NestedPopoverTitle>\n              Email Sign In <span className=\"emoji email\" />\n            </NestedPopoverTitle>\n            <section className=\"pop-over-actions first-section\">\n              {!this.state.done &&\n                <form onSubmit={this.onSubmit} style={{marginBottom: 0}}>\n                  <input value={this.state.email} onChange={this.onChange} className=\"pop-over-input\" type=\"email\" placeholder=\"new@user.com\"></input>\n                  <button style={{marginTop: 10}} className=\"button-small button-link\" disabled={!isEnabled}>Send Link</button>\n                </form>\n              }\n              {(this.state.done && !this.state.error) &&\n                <>\n                  <div className=\"notification notifyPersistent notifySuccess\">Almost Done</div>\n                  <div>Finish signing in from the email sent to {this.state.email}.</div>\n                </>\n              }\n              {(this.state.done && this.state.error) &&\n                <>\n                  <div className=\"notification notifyPersistent notifyError\">Error</div>\n                  <div>Something went wrong, email not sent.</div>\n                </>\n              }\n            </section>\n            {(this.state.done && !this.state.error) &&\n              <SignInCodeSection onClick={() => { showCodeLogin(this.props.api); }}/>\n            }\n          </dialog>\n        }\n      </NestedPopover>\n    );\n  }\n}\n\nclass SignInCodeHandler extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      code: '',\n      done: false,\n      error: false\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n    \n  }\n  \n  onChange(e) {\n    this.setState({code: e.target.value});\n\n  }\n  \n  async onSubmit(e) {\n    e.preventDefault();\n    this.setState({done: true});\n    try {\n      const {data} = await this.props.api.post('/auth/email/' + this.state.code);\n      this.props.setUser(data);\n      this.setState({error: false});\n    } catch (error) {\n      captureException(error);\n      this.setState({error: true});\n    }\n  }\n   \n  render() {\n    const isEnabled = this.state.code.length > 0;\n    return (\n      <dialog className=\"pop-over sign-in-pop\">\n        <NestedPopoverTitle>\n          Use a sign in code\n        </NestedPopoverTitle>\n        <section className=\"pop-over-actions first-section\">\n          {!this.state.done &&\n            <form onSubmit={this.onSubmit} style={{marginBottom: 0}}>\n              Paste your temporary sign in code below\n              <input value={this.state.code} onChange={this.onChange} className=\"pop-over-input\" type=\"text\" placeholder=\"cute-unique-cosmos\"></input>\n              <button style={{marginTop: 10}} className=\"button-small button-link\" disabled={!isEnabled}>Sign In</button>\n            </form>\n          }\n          {(this.state.done && !this.state.error) &&\n            <>\n              <div className=\"notification notifyPersistent notifySuccess\">Success!</div>\n            </>\n          }\n          {(this.state.done && this.state.error) &&\n            <>\n              <div className=\"notification notifyPersistent notifyError\">Error</div>\n              <div>Code not found or already used. Try signing in with email.</div>\n            </>\n          }       \n        </section>\n      </dialog>\n    );\n  }\n}\n\nconst SignInWithConsumer = (props) => (\n  <CurrentUserConsumer>{(currentUser, fetched, {login}) => <SignInCodeHandler setUser={login} {...props}/>}</CurrentUserConsumer>\n);\n\nconst EmailSignInButton = ({onClick}) => (\n  <button className=\"button button-small button-link has-emoji\" onClick={() => {onClick();}}>\n    Sign in with Email <span className=\"emoji email\"></span>\n  </button>\n);\nEmailSignInButton.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\n\nconst SignInCodeSection = ({onClick}) => (\n  <section className=\"pop-over-actions last-section pop-over-info\">\n    <button className=\"button-small button-tertiary button-on-secondary-background\"  onClick={onClick}>\n      <span>Use a sign in code</span>\n    </button>\n  </section>\n);\nSignInCodeSection.propTypes = {\n  onClick: PropTypes.func.isRequired\n};\n\nconst SignInPopWithoutRouter = (props) => (\n  <LocalStorage name=\"destinationAfterAuth\">\n    {(destination, setDestination) => {\n      const onClick = () => setDestination({\n        expires: dayjs().add(10, 'minutes').toISOString(),\n        to: {\n          pathname: location.pathname,\n          search: location.search,\n          hash: hash,\n        },\n      });\n      const {header, prompt, api, location, hash} = props;\n      return (\n        <NestedPopover alternateContent={() => <EmailHandler {...props}/>} startAlternateVisible={false}>\n          {showEmailLogin =>\n            <NestedPopover alternateContent={() => <SignInWithConsumer {...props}/>} startAlternateVisible={false}>\n              {showCodeLogin =>\n                <div className=\"pop-over sign-in-pop\">\n                  {header}\n                  <section className=\"pop-over-actions first-section\">\n                    {prompt}\n                    <SignInPopButton href={facebookAuthLink()} company=\"Facebook\" emoji=\"facebook\" onClick={onClick}/>\n                    <SignInPopButton href={githubAuthLink()} company=\"GitHub\" emoji=\"octocat\" onClick={onClick}/>\n                    <EmailSignInButton onClick={() => { onClick(); showEmailLogin(api); }}/>\n                  </section>\n                  <SignInCodeSection onClick={() => { onClick(); showCodeLogin(api); }}/>\n                </div>\n              }\n            </NestedPopover>\n          }\n        </NestedPopover>\n      );\n    }}\n  </LocalStorage>\n);\n\nexport const SignInPop = withRouter(SignInPopWithoutRouter);\nSignInPop.propTypes = {\n  api: PropTypes.func.isRequired,\n  header: PropTypes.node,\n  prompt: PropTypes.node,\n  hash: PropTypes.string,\n};\n\nexport default function SignInPopContainer(props) {\n  return <PopoverWithButton buttonClass='button button-small' buttonText='Sign in' passToggleToPop>\n    <SignInPop {...props}/>\n  </PopoverWithButton>;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ProjectResultItem from '../includes/project-result-item.jsx';\nimport PopoverWithButton from './popover-with-button';\n\nconst AllProjectsItem = ({currentProjectDomain, action}) => {\n  const BENTO_BOX = 'https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fbento-box.png?1502469566743';\n  let resultsClass = \"button-unstyled result\";\n  if (!currentProjectDomain) {\n    resultsClass += \" active\";\n  }\n  return (\n    <button className={resultsClass} onClick={action}>\n      <img className=\"avatar\" src={BENTO_BOX} alt='Bento emoji'/>\n      <div className=\"result-name\" title=\"All Projects\">All Projects</div>\n    </button>\n  );\n};\n\nAllProjectsItem.propTypes = {\n  currentProjectDomain: PropTypes.string.isRequired,\n  action: PropTypes.func.isRequired,\n};\n\n\nconst isActive = (currentProjectDomain, project) => {\n  if (currentProjectDomain === project.domain) {\n    return true;\n  }\n};\n\nconst PopOver = ({projects, togglePopover, setFilter, filter, updateProjectDomain, currentProjectDomain}) => {\n  const onClick = (domain) => {\n    togglePopover();\n    updateProjectDomain(domain);\n    setFilter(\"\");\n  };\n  \n  const filteredProjects = projects.filter(({domain}) => {\n    return domain.toLowerCase().includes(filter.toLowerCase());\n  });\n  \n  return (\n    <dialog className=\"pop-over analytics-projects-pop wide-pop\">\n      <section className=\"pop-over-info\">\n        <input\n          autoFocus // eslint-disable-line jsx-a11y/no-autofocus\n          onChange={(event) => {setFilter(event.target.value);}} \n          id=\"analytics-project-filter\" \n          className=\"pop-over-input search-input pop-over-search\" \n          placeholder=\"Filter projects\"\n          value={filter}\n        />\n      </section>\n      <section className=\"pop-over-actions results-list\">\n        <ul className=\"results\">\n          <li className=\"button-unstyled\">\n            <AllProjectsItem \n              currentProjectDomain = {currentProjectDomain}\n              action = {() => onClick('')}\n            />\n          </li>\n          { filteredProjects.map((project) => (\n            <li key={project.id} className=\"button-unstyled\">\n              <ProjectResultItem \n                {...project} \n                onClick = {() => onClick(project.domain)} \n                isActive = {isActive(currentProjectDomain, project)}\n              />\n            </li>\n          ))}\n        </ul>\n      </section>\n    </dialog>\n  ); \n};\n\nPopOver.propTypes = {\n  projects: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    domain: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n  })).isRequired,\n  togglePopover: PropTypes.func, // required but added dynamically\n  setFilter: PropTypes.func.isRequired,\n  filter: PropTypes.string.isRequired,\n  updateProjectDomain: PropTypes.func.isRequired,\n  currentProjectDomain: PropTypes.string.isRequired,\n};\n\n\nclass TeamAnalyticsProjectPop extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {filter: \"\"};\n    this.setFilter = this.setFilter.bind(this);\n  }\n  \n  setFilter(query) {\n    this.setState({filter: query});\n  }\n  \n  render() {\n    const {updateProjectDomain, currentProjectDomain, projects} = this.props;\n    return (\n      <PopoverWithButton buttonClass=\"button-small button-tertiary\" buttonText={`Filter: ${currentProjectDomain || 'All Projects'}`} passToggleToPop>\n        <PopOver\n          projects={projects}\n          updateProjectDomain={updateProjectDomain}\n          currentProjectDomain={currentProjectDomain}\n          setFilter={this.setFilter}\n          filter={this.state.filter}\n        />\n      </PopoverWithButton>\n    );\n  }\n}\n\nTeamAnalyticsProjectPop.propTypes = {\n  updateProjectDomain: PropTypes.func.isRequired,\n  currentProjectDomain: PropTypes.string.isRequired,\n};\n\nexport default TeamAnalyticsProjectPop;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PopoverWithButton from './popover-with-button';\n\nconst TimeFrameItem = ({selectTimeFrame, isActive, timeFrame}) => {\n  let resultClass = \"result button-unstyled\";\n  if(isActive) {\n    resultClass += \" active\";\n  }\n  return (\n    <button className={resultClass} onClick={selectTimeFrame}>\n      <div className=\"result-container\">\n        <div className=\"result-name\">{timeFrame}</div>\n      </div>\n    </button>\n  );\n};\n\nTimeFrameItem.propTypes = {\n  selectTimeFrame: PropTypes.func.isRequired,\n  isActive: PropTypes.bool.isRequired,\n  timeFrame: PropTypes.string.isRequired,  \n};\n\nconst timeFrames = [\n  \"Last 4 Weeks\",\n  \"Last 2 Weeks\",\n  \"Last 24 Hours\",\n];\n\nconst TeamAnalyticsTimePop = props => {\n  const selectTimeFrame = (timeFrame) => {\n    return () => {\n      props.updateTimeFrame(timeFrame);\n      props.togglePopover();\n    };\n  };\n\n  return (\n    <dialog className=\"pop-over analytics-time-pop\">\n      <section className=\"pop-over-actions last-section results-list\">\n        <div className=\"results\">\n          {timeFrames.map(timeFrame => (\n            <TimeFrameItem\n              key={timeFrame}\n              selectTimeFrame={selectTimeFrame(timeFrame)}\n              isActive={props.currentTimeFrame === timeFrame}\n              timeFrame={timeFrame}\n            />\n          ))}\n        </div>\n      </section>\n    </dialog>\n  );\n};\n\nTeamAnalyticsTimePop.propTypes = {\n  updateTimeFrame: PropTypes.func.isRequired,\n  currentTimeFrame: PropTypes.string.isRequired,\n};\n\nconst TeamAnalyticsTimePopButton = ({ updateTimeFrame, currentTimeFrame }) => {\n  return (\n    <PopoverWithButton\n      buttonClass=\"button-small button-tertiary button-select\"\n      buttonText={<span>{currentTimeFrame}</span>}\n      passToggleToPop\n    >\n      <TeamAnalyticsTimePop updateTimeFrame={updateTimeFrame} currentTimeFrame={currentTimeFrame} />\n    </PopoverWithButton>\n  );\n};\n\nTeamAnalyticsTimePopButton.propTypes = {\n  updateTimeFrame: PropTypes.func.isRequired,\n  currentTimeFrame: PropTypes.string.isRequired\n};\n\nexport default TeamAnalyticsTimePopButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getAvatarThumbnailUrl} from '../../models/user';\n\nimport {TrackClick} from '../analytics';\nimport {NestedPopover} from './popover-nested.jsx';\nimport {UserLink} from '../includes/link.jsx';\nimport Thanks from '../includes/thanks.jsx';\n\nimport TeamUserRemovePop from './team-user-remove-pop.jsx';\n\nconst MEMBER_ACCESS_LEVEL = 20;\nconst ADMIN_ACCESS_LEVEL = 30;\n\n// Remove from Team 👋\n\nconst RemoveFromTeam = (props) => (\n  <section className=\"pop-over-actions danger-zone\">\n    <TrackClick name=\"Remove from Team clicked\">\n      <button className=\"button-small has-emoji button-tertiary button-on-secondary-background\" {...props}>\n        Remove from Team <span className=\"emoji wave\" role=\"img\" aria-label=\"\"/>\n      </button>\n    </TrackClick>\n  </section>\n);\n\n\n// Admin Actions Section ⏫⏬\n\nconst AdminActions = ({user, userIsTeamAdmin, updateUserPermissions}) => {\n  return (\n    <section className=\"pop-over-actions admin-actions\">\n      <p className=\"action-description\">\n        Admins can update team info, billing, and remove users\n      </p>\n      {userIsTeamAdmin ? (\n        <TrackClick name=\"Remove Admin Status clicked\">\n          <button className=\"button-small button-tertiary has-emoji\" onClick={() => updateUserPermissions(user.id, MEMBER_ACCESS_LEVEL)}>\n            Remove Admin Status <span className=\"emoji fast-down\" />\n          </button>\n        </TrackClick>\n      ) : (\n        <TrackClick name=\"Make an Admin clicked\">\n          <button className=\"button-small button-tertiary has-emoji\" onClick={() => updateUserPermissions(user.id, ADMIN_ACCESS_LEVEL)}>\n            Make an Admin <span className=\"emoji fast-up\" />\n          </button>\n        </TrackClick>\n      )}\n    </section>\n  );\n};\n\nAdminActions.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n  }).isRequired,\n  userIsTeamAdmin: PropTypes.bool.isRequired,\n  updateUserPermissions: PropTypes.func.isRequired,\n};\n\n\n// Thanks 💖\n\nconst ThanksCount = ({count}) => (\n  <section className=\"pop-over-info\">\n    <Thanks count={count} />\n  </section>\n);\n\n\n// Team User Info 😍\n\nconst TeamUserInfo = ({currentUser, showRemove, ...props}) => {\n  const userAvatarStyle = {backgroundColor: props.user.color};\n  const canRemoveUser = props.currentUserIsTeamAdmin || (currentUser && currentUser.id === props.user.id);\n  return (\n    <dialog className=\"pop-over team-user-info-pop\">\n      <section className=\"pop-over-info user-info\">\n        <UserLink user={props.user}>\n          <img className=\"avatar\" src={getAvatarThumbnailUrl(props.user)} alt={props.user.login} style={userAvatarStyle}/>\n        </UserLink>\n        <div className=\"info-container\">\n          <p className=\"name\" title={props.user.name}>{props.user.name || \"Anonymous\"}</p>\n          { props.user.login &&\n            <p className=\"user-login\" title={props.user.login}>@{props.user.login}</p>\n          }\n          { props.userIsTeamAdmin && \n            <div className=\"status-badge\">\n              <span className=\"status admin\" data-tooltip=\"Can edit team info and billing\">\n                Team Admin\n              </span>\n            </div>\n          }\n        </div>\n      </section>\n      { props.user.thanksCount > 0 && <ThanksCount count={props.user.thanksCount} /> }\n      { props.currentUserIsTeamAdmin &&\n        <AdminActions \n          user={props.user}\n          userIsTeamAdmin={props.userIsTeamAdmin}\n          updateUserPermissions={props.updateUserPermissions}\n        />\n      }\n      { canRemoveUser && !props.userIsTheOnlyMember && <RemoveFromTeam onClick={showRemove}/> }\n    </dialog>\n  );\n};\n\n\n// Team User Remove 💣\n\n\n// Team User Info or Remove\n// uses removeTeamUserVisible state to toggle between showing user info and remove views\n\nconst TeamUserInfoAndRemovePop = (props) => (\n  <NestedPopover alternateContent={() => <TeamUserRemovePop {...props}/>}>\n    {showRemove => (\n      <TeamUserInfo {...props} showRemove={showRemove}/>\n    )}\n  </NestedPopover>\n);\n\nTeamUserInfoAndRemovePop.propTypes = {\n  user: PropTypes.shape({\n    name: PropTypes.string,\n    login: PropTypes.string,\n    thanksCount: PropTypes.number.isRequired,\n    color: PropTypes.string,\n  }).isRequired,\n  currentUserIsOnTeam: PropTypes.bool.isRequired,\n  currentUserIsTeamAdmin: PropTypes.bool.isRequired,\n  removeUserFromTeam: PropTypes.func.isRequired,\n  userIsTeamAdmin: PropTypes.bool.isRequired,\n  userIsTheOnlyMember: PropTypes.bool.isRequired,\n  api: PropTypes.func.isRequired,\n  teamId: PropTypes.number.isRequired,\n  updateUserPermissions: PropTypes.func.isRequired,\n  team: PropTypes.shape({\n    projects: PropTypes.array.isRequired,\n  }),\n};\n\nTeamUserInfoAndRemovePop.defaultProps = {\n  currentUserIsOnTeam: false,\n};\n\nexport default TeamUserInfoAndRemovePop;","/* global Set */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {TrackClick} from '../analytics';\nimport Loader from '../includes/loader.jsx';\nimport NotificationsConsumer from '../notifications.jsx';\nimport {NestedPopoverTitle} from './popover-nested.jsx';\nimport {getAvatarThumbnailUrl, getDisplayName} from '../../models/user';\nimport {getAvatarUrl as getProjectAvatarUrl} from  '../../models/project';\n\nclass TeamUserRemovePopBase extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      gettingUser: true,\n      userTeamProjects: [],\n      selectedProjects: new Set(),\n    };\n    this.selectAllProjects = this.selectAllProjects.bind(this);\n    this.unselectAllProjects = this.unselectAllProjects.bind(this);\n    this.handleCheckboxChange = this.handleCheckboxChange.bind(this);\n    this.removeUser = this.removeUser.bind(this);\n  }\n  \n  removeUser() {\n    this.props.togglePopover();\n    this.props.createNotification(`${getDisplayName(this.props.user)} removed from Team`);\n    this.props.removeUserFromTeam(this.props.user.id, Array.from(this.state.selectedProjects));\n  }\n  \n  selectAllProjects() {\n    this.setState(({userTeamProjects}) => ({\n      selectedProjects: new Set(userTeamProjects.map(p => p.id))\n    }));\n  }\n  \n  unselectAllProjects() {\n    this.setState({\n      selectedProjects: new Set()\n    });\n  }\n  \n  handleCheckboxChange(evt) {\n    const {checked, value} = evt.target;\n    this.setState(({selectedProjects}) => {\n      selectedProjects = new Set(selectedProjects);\n      if (checked) {\n        selectedProjects.add(value);\n      } else {\n        selectedProjects.delete(value);\n      }\n      return {selectedProjects};\n    });\n  }\n  \n  async getUserWithProjects() {\n    const {data} = await this.props.api.get(`users/${this.props.user.id}`);\n    this.setState({\n      userTeamProjects: data.projects.filter(userProj => {\n        return this.props.team.projects.some(teamProj => teamProj.id === userProj.id);\n      }),\n      gettingUser: false\n    });\n  }\n  \n  componentDidMount() {\n    this.getUserWithProjects();    \n  }\n  \n  render() {\n    const allProjectsSelected = this.state.userTeamProjects.every(p => this.state.selectedProjects.has(p.id));\n    const userAvatarStyle = {backgroundColor: this.props.user.color};\n    \n    let projects = null;\n    if (this.state.gettingUser) {\n      projects = <Loader/>;\n    } else if (this.state.userTeamProjects.length > 0) {\n      projects = (\n        <>\n          <p className=\"action-description\">\n            Also remove them from these projects\n          </p>\n          <div className=\"projects-list\">\n            { this.state.userTeamProjects.map(project => (\n              <label key={project.id} htmlFor={`remove-user-project-${project.id}`}>\n                <input className=\"checkbox-project\" type=\"checkbox\" id={`remove-user-project-${project.id}`}\n                  checked={this.state.selectedProjects.has(project.id)} value={project.id}\n                  onChange={this.handleCheckboxChange}\n                />\n                <img className=\"avatar\" src={getProjectAvatarUrl(project.id)} alt=\"\"/>\n                {project.domain}\n              </label>\n            ))}\n          </div>\n          {this.state.userTeamProjects.length > 1 && (\n            <button className=\"button-small\"\n              onClick={allProjectsSelected ? this.unselectAllProjects : this.selectAllProjects}\n            >\n              {allProjectsSelected ? 'Unselect All' : 'Select All'}\n            </button>\n          )}\n        </>\n      );\n    }\n    \n    return (\n      <dialog className=\"pop-over team-user-info-pop team-user-remove-pop\">\n        <NestedPopoverTitle>\n          Remove {getDisplayName(this.props.user)}\n        </NestedPopoverTitle>\n        \n        <section className=\"pop-over-actions\" id=\"user-team-projects\">\n          {projects || (\n            <p className=\"action-description\">\n              {getDisplayName(this.props.user)} is not a member of any projects\n            </p>\n          )}\n        </section>\n        \n        <section className=\"pop-over-actions danger-zone\">\n          <TrackClick name=\"Remove from Team submitted\">\n            <button className=\"button-small has-emoji\" onClick={this.removeUser}>\n              Remove <img className=\"emoji avatar\" src={getAvatarThumbnailUrl(this.props.user)} alt={this.props.user.login} style={userAvatarStyle}/>\n            </button>\n          </TrackClick>\n        </section>\n      </dialog>\n    );\n  }\n}\nTeamUserRemovePopBase.propTypes = {\n  api: PropTypes.func.isRequired,\n  user: PropTypes.shape({\n    name: PropTypes.string,\n    login: PropTypes.string,\n    thanksCount: PropTypes.number.isRequired,\n    isOnTeam: PropTypes.bool,\n    color: PropTypes.string,\n  }).isRequired,\n  team: PropTypes.shape({\n    projects: PropTypes.array.isRequired\n  }),\n  removeUserFromTeam: PropTypes.func.isRequired,\n  createNotification: PropTypes.func.isRequired,\n};\n\nexport const TeamUserRemovePop = (props) => (\n  <NotificationsConsumer>\n    {notifyFuncs => <TeamUserRemovePopBase {...notifyFuncs} {...props}/>}\n  </NotificationsConsumer>\n);\n\nexport default TeamUserRemovePop;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getAvatarUrl as getTeamAvatarUrl} from '../../models/team';\nimport {getAvatarThumbnailUrl as getUserAvatarUrl} from '../../models/user';\nimport {TrackClick} from '../analytics';\nimport {Link, TeamLink, UserLink} from '../includes/link.jsx';\nimport PopoverContainer from './popover-container.jsx';\nimport {NestedPopover} from './popover-nested.jsx';\nimport CreateTeamPop from './create-team-pop.jsx';\n\nimport {orderBy} from 'lodash';\n\n// Create Team button\n\nconst CreateTeamButton = ({showCreateTeam, userIsAnon}) => {\n  if (userIsAnon) {\n    return (\n      <>\n        <p className=\"description action-description\">\n          <button onClick={showCreateTeam} className=\"button-unstyled link\">Sign in</button> to create teams\n        </p>\n        <button className=\"button button-small has-emoji\" disabled>\n          Create Team <span className=\"emoji herb\" />\n        </button>\n      </>\n    );\n  }\n  return (\n    <TrackClick name=\"Create Team clicked\">\n      <button onClick={showCreateTeam} className=\"button button-small has-emoji\">\n        Create Team <span className=\"emoji herb\" />\n      </button>\n    </TrackClick>\n  );\n};\n\nCreateTeamButton.propTypes = {\n  showCreateTeam: PropTypes.func.isRequired,\n  userIsAnon: PropTypes.bool.isRequired,\n};\n\n\n// Team List\n\nconst TeamList = ({teams, showCreateTeam, userIsAnon}) => {\n  const orderedTeams = orderBy(teams, team => team.name.toLowerCase());\n  \n  return (\n    <section className=\"pop-over-actions\">\n      { orderedTeams.map(team => (\n        <div className=\"button-wrap\" key={team.id}>\n          <TeamLink key={team.id} team={team} className=\"button button-small has-emoji button-tertiary\">\n            {team.name}&nbsp;\n            <img className=\"emoji avatar\" src={getTeamAvatarUrl({...team, size:'small'})} alt=\"\" width=\"16px\" height=\"16px\"/>\n          </TeamLink>\n        </div>\n      ))}\n      <CreateTeamButton showCreateTeam={showCreateTeam} userIsAnon={userIsAnon} />\n    </section>\n  );\n};\n\nTeamList.propTypes = {\n  teams: PropTypes.arrayOf(PropTypes.shape({\n    hasAvatarImage: PropTypes.bool.isRequired,\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired,\n  })),\n  showCreateTeam: PropTypes.func.isRequired,\n  userIsAnon: PropTypes.bool.isRequired,\n};\n\n\n// User Options 🧕\n\nconst UserOptionsPop = ({\n  togglePopover,\n  showCreateTeam,\n  user,\n  signOut,\n  showNewStuffOverlay,\n}) => {\n  const clickNewStuff = (event) => {\n    togglePopover();\n    showNewStuffOverlay();\n    event.stopPropagation();\n  };\n  \n  const clickSignout = () => {\n    if(!user.login) {\n      if(!window.confirm(`You won't be able to sign back in under this same anonymous account.\nAre you sure you want to sign out?`)) {\n        return;\n      }\n    }\n    togglePopover();\n    /* global analytics */\n    analytics.track(\"Logout\");\n    analytics.reset();\n    signOut();\n  };\n  \n  const userName = user.name || \"Anonymous\";\n  const userAvatarStyle = {backgroundColor: user.color};\n\n  return (\n    <dialog className=\"pop-over user-options-pop\">\n      <UserLink user={user} className=\"user-info\">\n        <section className=\"pop-over-actions user-info\">\n          <img className=\"avatar\" src={getUserAvatarUrl(user)} alt=\"Your avatar\" style={userAvatarStyle}/>\n          <div className=\"info-container\">\n            <p className=\"name\" title={userName}>{userName}</p>\n            { user.login &&\n              <p className=\"user-login\" title={user.login}>@{user.login}</p>\n            }\n          </div>\n        </section>\n      </UserLink>\n      <TeamList \n        teams={user.teams} \n        showCreateTeam={showCreateTeam} \n        userIsAnon={!user.login} \n      />\n      <section className=\"pop-over-info\">\n        <button onClick={clickNewStuff} className=\"button-small has-emoji button-tertiary button-on-secondary-background\">\n          New Stuff <span className=\"emoji dog-face\"></span>\n        </button>\n        <Link to=\"https://support.glitch.com\" className=\"button button-small has-emoji button-tertiary button-on-secondary-background\">\n          Support <span className=\"emoji ambulance\"></span>\n        </Link>\n        <button onClick={clickSignout} className=\"button-small has-emoji button-tertiary button-on-secondary-background\">\n          Sign Out <span className=\"emoji balloon\"></span>\n        </button>\n      </section>\n    </dialog>\n  );\n};\n\nUserOptionsPop.propTypes = {\n  togglePopover: PropTypes.func.isRequired,\n  showCreateTeam: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  signOut: PropTypes.func.isRequired,\n  showNewStuffOverlay: PropTypes.func.isRequired,\n};\n\nclass CheckForCreateTeamHash extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {active: window.location.hash === '#create-team'};\n  }\n  componentDidMount() {\n    this.setState({active: false});\n  }\n  render() {\n    return this.props.children(this.state.active);\n  }\n}\n\n\n// Header button and init pop\n\nexport default function UserOptionsAndCreateTeamPopContainer(props) {\n  const avatarUrl = getUserAvatarUrl(props.user);\n  const avatarStyle = {backgroundColor: props.user.color};\n  return (\n    <CheckForCreateTeamHash>\n      {createTeamOpen => (\n        <PopoverContainer startOpen={createTeamOpen}>\n          {({togglePopover, visible}) => (\n            <div className=\"button user-options-pop-button\" data-tooltip=\"User options\" data-tooltip-right=\"true\">\n              <button className=\"user\" onClick={togglePopover} disabled={!props.user.id}>\n                <img className=\"user-avatar\" src={avatarUrl} style={avatarStyle} width=\"30px\" height=\"30px\" alt=\"User options\"/>\n                <span className=\"down-arrow icon\"/>\n              </button>\n              {visible && (\n                <NestedPopover alternateContent={() => <CreateTeamPop {...props}/>} startAlternateVisible={createTeamOpen}>\n                  {showCreateTeam => <UserOptionsPop {...props} {...{togglePopover, showCreateTeam}}/>}\n                </NestedPopover>\n              )}\n            </div>\n          )}\n        </PopoverContainer>\n      )}\n    </CheckForCreateTeamHash>\n  );\n}\n\nUserOptionsAndCreateTeamPopContainer.propTypes = {\n  user: PropTypes.shape({\n    avatarThumbnailUrl: PropTypes.string,\n    color: PropTypes.string.isRequired,\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string,\n    teams: PropTypes.array.isRequired,\n  }).isRequired,\n  api: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {CurrentUserConsumer} from './current-user.jsx';\nimport ErrorHandlers from './error-handlers.jsx';\n\nclass ProjectEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...props.initialProject\n    };\n  }\n  \n  userIsMember() {\n    if (!this.props.currentUser) return false;\n    const currentUserId = this.props.currentUser.id;\n    return this.state.users.some(({id}) => currentUserId === id);\n  }\n  \n  async updateFields(changes) {\n    await this.props.api.patch(`projects/${this.state.id}`, changes);\n    this.setState(changes);\n  }\n  \n  async addProjectToCollection(project, collection) {\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n  }\n  \n  render() {\n    const {handleError, handleErrorForInput} = this.props;\n    const funcs = {\n      addProjectToCollection: (project,collection) => this.addProjectToCollection(project, collection).catch(handleError),\n      updateDomain: domain => this.updateFields({domain}).catch(handleErrorForInput),\n      updateDescription: description => this.updateFields({description}).catch(handleError),\n      updatePrivate: isPrivate => this.updateFields({private: isPrivate}).catch(handleError),\n    };\n    return this.props.children(this.state, funcs, this.userIsMember());\n  }\n}\n\nProjectEditor.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  handleError: PropTypes.func.isRequired,\n  handleErrorForInput: PropTypes.func.isRequired,\n  initialProject: PropTypes.object.isRequired,\n};\n\nconst ProjectEditorContainer = ({api, children, initialProject}) => (\n  <ErrorHandlers>\n    {wrapErrors => (\n      <CurrentUserConsumer>\n        {currentUser => (\n          <ProjectEditor api={api} currentUser={currentUser} initialProject={initialProject} {...wrapErrors}>\n            {children}\n          </ProjectEditor>\n        )}\n      </CurrentUserConsumer>\n    )}\n  </ErrorHandlers>\n);\nProjectEditorContainer.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  initialProject: PropTypes.object.isRequired,\n};\n\nexport default ProjectEditorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getAvatarUrl} from '../models/project.js';\n\nimport {ProjectLink} from './includes/link.jsx';\nimport {TruncatedMarkdown} from './includes/markdown.jsx';\nimport ProjectOptionsPop from \"./pop-overs/project-options-pop.jsx\";\nimport UsersList from \"./users-list.jsx\";\n\nimport {getContrastTextColor} from '../models/collection.js'; \n\nexport const ProjectItem = ({api, project, collectionColor, homepageCollection, ...props}) => {\n  return (\n    <li>\n      <UsersList glitchTeam={project.showAsGlitchTeam} users={project.users} extraClass=\"single-line\" teams={project.teams}/>      \n      <ProjectOptionsPop {...{project, api}} {...props}/>\n      <ProjectLink project={project} className=\"button-area\">\n        <div className={['project', project.private ? 'private-project' : ''].join(' ')} \n          style={project.private ? {} : {backgroundColor: collectionColor, borderBottomColor:collectionColor}}\n          data-track=\"project\" data-track-label={project.domain}>\n          <div className=\"project-container\">\n            <img className=\"avatar\" src={getAvatarUrl(project.id)} alt={`${project.domain} avatar`}/>\n            <div className=\"button\">\n              <span className=\"project-badge private-project-badge\" aria-label=\"private\"></span>\n              <div className=\"project-name\">{project.domain}</div>\n            </div>\n            {( homepageCollection \n              ?\n              <div className=\"description\">\n                <TruncatedMarkdown length={80}>{project.description}</TruncatedMarkdown>\n              </div>\n              :\n              <div className=\"description\" \n                style={project.private ? {} : {color: (props.category ? \"black\" : (collectionColor ? getContrastTextColor(collectionColor) : \"black\" ) )}}>\n                <TruncatedMarkdown length={80}>{project.description}</TruncatedMarkdown></div>\n            )}\n            <div className=\"overflow-mask\" style={project.private ? {} : {backgroundColor: collectionColor}}></div>\n          </div>\n        </div>\n      </ProjectLink>\n    </li>\n  );\n};\n\nProjectItem.propTypes = {\n  api: PropTypes.func,\n  category: PropTypes.bool,\n  currentUser: PropTypes.object,\n  project: PropTypes.shape({\n    description: PropTypes.string.isRequired,\n    domain: PropTypes.string.isRequired,\n    id: PropTypes.string.isRequired,\n    private: PropTypes.bool.isRequired,\n    showAsGlitchTeam: PropTypes.bool.isRequired,\n    users: PropTypes.array.isRequired,\n    teams: PropTypes.array,\n  }).isRequired,\n  collectionColor: PropTypes.string,\n  homepageCollection: PropTypes.bool,\n  projectOptions: PropTypes.object,\n};\n\n\nexport default ProjectItem;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ProjectItem from './project-item.jsx';\nimport Link from './includes/link';\n\nexport const ProjectsList = ({title, placeholder, extraClasses, ...props}) => (\n  <article className={\"projects \" + extraClasses}>\n    <h2>{title}</h2>\n\n    {!!(placeholder && !props.projects.length) && (\n      <div className=\"placeholder\">{placeholder}</div>\n    )}\n\n    <ExpandyProjects {...props}></ExpandyProjects>\n  </article>\n);\n\nProjectsList.propTypes = {\n  api: PropTypes.any,\n  projects: PropTypes.array.isRequired,\n  title: PropTypes.node.isRequired,\n  placeholder: PropTypes.node,\n  extraClasses: PropTypes.string,\n};\n\nclass ExpandyProjects extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = { expanded: false };\n    this.handleClick = this.handleClick.bind(this);\n  }\n  \n  handleClick() {\n    this.setState({expanded: true});\n  }\n  \n  render() {\n    const maxProjects = this.props.maxCollapsedProjects;\n    const totalProjects = this.props.projects.length;\n    const hiddenProjects = totalProjects - maxProjects;\n    \n    let {projects, ...props} = this.props;\n    \n    let shouldShowButton = false;\n    if(!this.state.expanded) {\n      shouldShowButton = hiddenProjects > 0;\n      projects = projects.slice(0, maxProjects);\n    }\n    \n    return (\n      <>\n        <ProjectsUL projects={projects} {...props}/>\n        { shouldShowButton && <button className=\"button-tertiary\" onClick={this.handleClick}>Show {hiddenProjects} More</button>}\n      </>\n    );\n  }\n}\n\nExpandyProjects.propTypes = {\n  projects: PropTypes.array.isRequired,\n  maxCollapsedProjects: PropTypes.number,\n};\n\nExpandyProjects.defaultProps = {\n  maxCollapsedProjects: 12,\n};\n\n\nexport const ProjectsUL = ({projectCount, collectionUrl, ...props}) => {\n  return (\n    <ul className=\"projects-container\">\n      { props.projects.map(project => (\n        <ProjectItem key={project.id} {...{project}} {...props}></ProjectItem>\n      ))}\n\n      {props.homepageCollection &&\n        <Link to={collectionUrl} className=\"collection-view-all\">View all {projectCount} projects →</Link>\n      }\n    </ul>\n  );\n};\n\nProjectsUL.propTypes = {\n  projects: PropTypes.array.isRequired,\n  homepageCollection: PropTypes.bool,\n  collectionUrl: PropTypes.string,\n  projectCount: PropTypes.number,\n};\n\n\nexport default ProjectsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {chunk} from 'lodash';\n\nimport {CurrentUserConsumer, normalizeProjects} from './current-user.jsx';\n\nfunction listToObject(list, val) {\n  return list.reduce((data, key) => ({...data, [key]: val}), {});\n}\n\nfunction keyByVal(list, key) {\n  return list.reduce((data, val) => ({...data, [val[key]]: val}), {});\n}\n\nclass ProjectsLoader extends React.Component {\n  constructor(props) {\n    super(props);\n    // state is { [project id]: project|null|undefined }\n    // undefined means we haven't seen that project yet\n    // null means the project is still getting loaded\n    this.state = {};\n  }\n  \n  async loadProjects(...ids) {\n    if (!ids.length) return;\n    const {data} = await this.props.api.get(`projects/byIds?ids=${ids.join(',')}`);\n    this.setState(keyByVal(data, 'id'));\n  }\n  \n  ensureProjects(projects) {\n    const ids = projects.map(({id}) => id);\n    \n    const discardedProjects = Object.keys(this.state).filter(id => this.state[id] && !ids.includes(id));\n    if (discardedProjects.length) {\n      this.setState(listToObject(discardedProjects, undefined));\n    }\n    \n    const unloadedProjects = ids.filter(id => this.state[id] === undefined);\n    if (unloadedProjects.length) {\n      this.setState(listToObject(unloadedProjects, null));\n      chunk(unloadedProjects, 100).forEach(chunk => this.loadProjects(...chunk));\n    }\n  }\n  \n  componentDidMount() {\n    this.ensureProjects(this.props.projects);\n  }\n  \n  componentDidUpdate() {\n    this.ensureProjects(this.props.projects);\n  }\n  \n  render() {\n    const {children, projects} = this.props;\n    const loadedProjects = projects.map(project => this.state[project.id] || project);\n    return (\n      <CurrentUserConsumer>\n        {currentUser => (\n          children(normalizeProjects(loadedProjects, currentUser), this.loadProjects.bind(this))\n        )}\n      </CurrentUserConsumer>\n    );\n  }\n}\nProjectsLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  projects: PropTypes.array.isRequired,\n};\n\nexport default ProjectsLoader;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getEditorUrl} from '../models/project';\nimport Link from './includes/link.jsx';\n\nconst iconHelp = 'https://cdn.glitch.com/f7224274-1330-4022-a8f2-8ae09dbd68a8%2Fask-for-help.svg?1494954687906';\n\nfunction truncateQuestion(question) {\n  const max = 140;\n  if (question.length > max) {\n    return question.substring(0, max - 1) + '…';\n  } \n  return question;\n}\n\nfunction truncateTag(tag) {\n  const max = 15;\n  return tag.substring(0, max);\n}\n\nconst QuestionItem = ({colorOuter, colorInner, domain, question, tags, userAvatar, userColor, userLogin, path, line, character}) => (\n  <>\n    <img className=\"help-icon\" src={iconHelp} alt=\"\"/>\n    <Link to={getEditorUrl(domain, path, line, character)} data-track=\"question\" data-track-label={domain}>\n      <div className=\"project\" style={{backgroundColor: colorOuter}}>\n        <div className=\"project-container\" style={{backgroundColor: colorInner}}>\n          <img className=\"avatar\" src={userAvatar} style={{backgroundColor: userColor}} alt=\"\"/>\n          <div className=\"button\">Help {userLogin}</div>\n          <div className=\"description question\" title={question}>{truncateQuestion(question)}</div>\n          <div className=\"description tags\">\n            {tags.map(tag => <div key={tag} className=\"tag\" title={tag}>{truncateTag(tag)}</div>)}\n          </div>\n        </div>\n      </div>\n    </Link>\n  </>\n);\nQuestionItem.propTypes = {\n  colorOuter: PropTypes.string.isRequired,\n  colorInner: PropTypes.string.isRequired,\n  domain: PropTypes.string.isRequired,\n  question: PropTypes.string.isRequired,\n  tags: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n  userAvatar: PropTypes.string.isRequired,\n  userColor: PropTypes.string.isRequired,\n  userLogin: PropTypes.string.isRequired,\n  path: PropTypes.string,\n  line: PropTypes.number,\n  character: PropTypes.number,\n};\n\nexport default QuestionItem;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport randomColor from 'randomcolor';\nimport {sample} from 'lodash';\n\nimport ErrorBoundary from './includes/error-boundary.jsx';\nimport Link from './includes/link.jsx';\nimport QuestionItem from './question-item.jsx';\nimport {captureException} from '../utils/sentry';\n\nconst kaomojis = [\n  '八(＾□＾*)',\n  '(ノ^_^)ノ',\n  'ヽ(*ﾟｰﾟ*)ﾉ',\n  '♪(┌・。・)┌',\n  'ヽ(๏∀๏ )ﾉ',\n  'ヽ(^。^)丿',\n];\n\nconst QuestionTimer = ({animating, callback}) => (\n  <div className=\"loader-pie\" title=\"Looking for more questions...\">\n    <div className=\"left-side\"><div className={`slice ${animating ? 'animated' : ''}`} onAnimationEnd={callback}></div></div>\n    <div className=\"right-side\"><div className={`slice ${animating ? 'animated' : ''}`}></div></div>\n  </div>\n);\nQuestionTimer.propTypes = {\n  animating: PropTypes.bool.isRequired,\n  callback: PropTypes.func.isRequired,\n};\n\nclass Questions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      kaomoji: '',\n      loading: true,\n      questions: [],\n    };\n  }\n  \n  async load() {\n    this.setState({loading: true});\n    try {\n      const {data} = await this.props.api.get('projects/questions');\n      const questions = data.map(q => JSON.parse(q.details)).filter(q => !!q).slice(0, this.props.max).map(question => {\n        const [colorInner, colorOuter] = randomColor({luminosity: 'light', count: 2});\n        return {colorInner, colorOuter, ...question};\n      });\n      this.setState({\n        kaomoji: sample(kaomojis),\n        questions,\n      });\n    } catch (error) {\n      console.error(error);\n      captureException(error);\n    }\n    this.setState({loading: false});\n  }\n  \n  componentDidMount() {\n    this.load();\n  }\n  \n  render() {\n    const {kaomoji, loading, questions} = this.state;\n    return (\n      <section className=\"questions\">\n        <h2>\n          <Link to=\"/questions\">Help Others, Get Thanks →</Link>{' '}\n          <QuestionTimer animating={!loading} callback={() => this.load()}/>\n        </h2>\n        <article className=\"projects\">\n          {questions.length ? (\n            <ErrorBoundary>\n              <ul className=\"projects-container\">\n                {questions.map(question => (\n                  <li key={question.questionId}>\n                    <QuestionItem {...question}/>\n                  </li>\n                ))}\n              </ul>\n            </ErrorBoundary>\n          ) : (\n            <>\n              {kaomoji} Looks like nobody is asking for help right now.{' '}\n              <Link className=\"general-link\" to=\"/help/how-can-i-get-help-with-code-in-my-project/\">Learn about helping</Link>\n            </>\n          )}\n        </article>\n      </section>\n    );\n  }\n}\nQuestions.propTypes = {\n  api: PropTypes.any.isRequired,\n  max: PropTypes.number,\n};\nQuestions.defaultProps = {\n  max: 3,\n};\n\nexport default Questions;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {sampleSize} from 'lodash';\n\nimport Link from './includes/link.jsx';\nimport {ProjectsUL} from './projects-list.jsx';\n\nconst Category = ({category, projectCount}) => {\n  const ulProps = {\n    projects: category.projects||[],\n    categoryColor: category.color,\n    homepageCollection: true,\n    collectionUrl: category.url,\n  };\n  return (\n    <article className=\"projects\" style={{backgroundColor: category.backgroundColor}}>\n      <header className=\"category\">\n        <Link className=\"category-name\" to={category.url}>\n          <h2>{category.name}</h2>\n        </Link>\n        <span className=\"category-image-container\">\n          <Link className=\"category-image\" to={category.url}>\n            <img height=\"80px\" width=\"120px\" src={category.avatarUrl} alt={category.name} />\n          </Link>\n        </span>\n        <p className=\"category-description\">{category.description}</p>\n      </header>\n      <ProjectsUL {...ulProps} projectCount={projectCount} collectionColor={category.color}/>\n    </article>\n  );\n};\n\nCategory.propTypes = {\n  category: PropTypes.shape({\n    avatarUrl: PropTypes.string.isRequired,\n    backgroundColor: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nclass CategoryLoader extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categories: [],\n      categoriesProjectCount: {},\n    };\n  }\n  \n  async componentDidMount() {\n    // The API gives us a json blob with all of the categories, but only\n    // the 'projects' field on 3 of them.  If the field is present,\n    // then it's an array of projects.\n    const {data} = await this.props.api.get('categories/random?numCategories=3');\n    const categoriesWithProjects = data.filter(category => !!category.projects);\n    const categories = sampleSize(categoriesWithProjects, 3);\n    this.setState({categories});\n    // Now load each category to see how many projects it has\n    categories.forEach(async ({id}) => {\n      const {data} = await this.props.api.get(`categories/${id}`);\n      this.setState(prevState => ({\n        categoriesProjectCount: {...prevState.categoriesProjectCount, [id]: data.projects.length},\n      }));\n    });\n  }\n  \n  render() {\n    return this.state.categories.map(category => (\n      <Category key={category.id} category={category} projectCount={this.state.categoriesProjectCount[category.id]}/>\n    ));\n  }\n}\n\nCategoryLoader.propTypes = {\n  api: PropTypes.any.isRequired,\n};\n\nexport default CategoryLoader;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {getAvatarStyle, getProfileStyle} from '../models/user';\nimport {CurrentUserConsumer} from './current-user.jsx';\nimport {UserLink} from './includes/link.jsx';\n\nimport {CoverContainer} from './includes/profile.jsx';\nimport Loader from './includes/loader.jsx';\nimport ProjectsLoader from './projects-loader.jsx';\nimport {ProjectsUL} from './projects-list.jsx';\nimport SignInPop from './pop-overs/sign-in-pop.jsx';\n\nconst RecentProjectsContainer = ({children, user, api}) => (\n  <section className=\"profile recent-projects\">\n    <h2><UserLink user={user}>Your Projects →</UserLink></h2>\n    <CoverContainer style={getProfileStyle(user)}>\n      <div className=\"profile-avatar\">\n        <div className=\"user-avatar-container\">\n          <UserLink user={user}>\n            <div className={`user-avatar ${!user.login ? 'anon-user-avatar' : ''}`} style={getAvatarStyle(user)} alt=\"\"></div>\n          </UserLink>\n          {!user.login && <div className=\"anon-user-sign-up\"><SignInPop api={api}/></div>}\n        </div>\n      </div>\n      <article className=\"projects\">\n        {children}\n      </article>\n    </CoverContainer>\n  </section>\n);\nRecentProjectsContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n  user: PropTypes.shape({\n    avatarUrl: PropTypes.string,\n    color: PropTypes.string.isRequired,\n    coverColor: PropTypes.string,\n    hasCoverImage: PropTypes.bool.isRequired,\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string,\n  }).isRequired,\n};\n\nconst RecentProjects = ({api}) => (\n  <CurrentUserConsumer>\n    {(user, fetched) => (\n      <RecentProjectsContainer user={user} api={api}>\n        {fetched ? (\n          <ProjectsLoader api={api} projects={user.projects.slice(0,3)}>\n            {projects => <ProjectsUL projects={projects}/>}\n          </ProjectsLoader>\n        ) : <Loader/>}\n      </RecentProjectsContainer>\n    )}\n  </CurrentUserConsumer>\n);\nRecentProjects.propTypes = {\n  api: PropTypes.any.isRequired,\n};\n\nexport default RecentProjects;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport * as assets from '../utils/assets';\n\nimport {CurrentUserConsumer} from './current-user.jsx';\nimport ErrorHandlers from './error-handlers.jsx';\nimport Uploader from './includes/uploader.jsx';\nimport Notifications from './notifications.jsx';\n\nconst MEMBER_ACCESS_LEVEL = 20;\nconst ADMIN_ACCESS_LEVEL = 30;\n\nclass TeamEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...props.initialTeam,\n      _cacheAvatar: Date.now(),\n      _cacheCover: Date.now(),\n    };\n  }\n\n  currentUserIsOnTeam() {\n    if (!this.props.currentUser) return false;\n    const currentUserId = this.props.currentUser.id;\n    return this.state.users.some(({id}) => currentUserId === id);\n  }\n\n  async updateFields(changes) {\n    const {data} = await this.props.api.patch(`teams/${this.state.id}`, changes);\n    this.setState(data);\n    if (this.props.currentUser) {\n      const teamIndex = this.props.currentUser.teams.findIndex(({id}) => id === this.state.id);\n      if (teamIndex >= 0) {\n        const teams = [...this.props.currentUser.teams];\n        teams[teamIndex] = this.state;\n        this.props.updateCurrentUser({teams});\n      }\n    }\n  }\n\n  async uploadAvatar(blob) {\n    const {data: policy} = await assets.getTeamAvatarImagePolicy(this.props.api, this.state.id);\n    await this.props.uploadAssetSizes(blob, policy, assets.AVATAR_SIZES);\n\n    const image = await assets.blobToImage(blob);\n    const color = assets.getDominantColor(image);\n    await this.updateFields({\n      hasAvatarImage: true,\n      backgroundColor: color,\n    });\n    this.setState({_cacheAvatar: Date.now()});\n  }\n\n  async uploadCover(blob) {\n    const {data: policy} = await assets.getTeamCoverImagePolicy(this.props.api, this.state.id);\n    await this.props.uploadAssetSizes(blob, policy, assets.COVER_SIZES);\n\n    const image = await assets.blobToImage(blob);\n    const color = assets.getDominantColor(image);\n    await this.updateFields({\n      hasCoverImage: true,\n      coverColor: color,\n    });\n    this.setState({_cacheCover: Date.now()});\n  }\n  \n  async joinTeam() {\n    await this.props.api.post(`teams/${this.state.id}/join`);\n    this.setState(({users}) => ({\n      users: [...users, this.props.currentUser],\n    }));\n    if (this.props.currentUser) {\n      const teams = this.props.currentUser.teams;\n      this.props.updateCurrentUser({teams: [...teams, this.state]});\n    }\n  }\n  \n  async inviteEmail(emailAddress) {\n    console.log('💣 inviteEmail', emailAddress);\n    await this.props.api.post(`teams/${this.state.id}/sendJoinTeamEmail`, {emailAddress});\n  }\n\n  async inviteUser(user) {\n    console.log('💣 inviteUser', user);\n    await this.props.api.post(`teams/${this.state.id}/sendJoinTeamEmail`, {userId: user.id});\n  }\n\n  async removeUserFromTeam(id, projectIds) {\n    // Kick them out of every project at once, and wait until it's all done\n    await Promise.all(projectIds.map(projectId => {\n      return this.props.api.delete(`projects/${projectId}/authorization`, {data: {targetUserId: id}});\n    }));\n    // Now remove them from the team. Remove them last so if something goes wrong you can do this over again\n    await this.props.api.delete(`teams/${this.state.id}/users/${id}`);\n    this.removeUserAdmin(id);\n    this.setState(({users}) => ({\n      users: users.filter(u => u.id !== id),\n    }));\n    if (this.props.currentUser && this.props.currentUser.id === id) {\n      const teams = this.props.currentUser.teams.filter(({id}) => id !== this.state.id);\n      this.props.updateCurrentUser({teams});\n    }\n  }\n\n  removeUserAdmin(id) {\n    let index = this.state.adminIds.indexOf(id);\n    if (index !== -1) {\n      this.setState((prevState) => ({\n        counter: prevState.adminIds.splice(index, 1)\n      }));\n    }\n  }\n  \n  async updateUserPermissions(id, accessLevel) {\n    if (accessLevel === MEMBER_ACCESS_LEVEL && this.state.adminIds.length <= 1) {\n      this.props.createErrorNotification('A team must have at least one admin');\n      return false;\n    }\n    await this.props.api.patch(`teams/${this.state.id}/users/${id}`, {access_level: accessLevel});\n    if (accessLevel === ADMIN_ACCESS_LEVEL) {\n      this.setState((prevState) => ({\n        counter: prevState.adminIds.push(id)\n      }));\n    } else {\n      this.removeUserAdmin(id);\n    }\n  }\n\n  async addProject(project) {\n    await this.props.api.post(`teams/${this.state.id}/projects/${project.id}`);\n    this.setState(({projects}) => ({\n      projects: [project, ...projects],\n    }));\n  }\n\n  async removeProject(id) {\n    await this.props.api.delete(`teams/${this.state.id}/projects/${id}`);\n    this.setState(({projects}) => ({\n      projects: projects.filter(p => p.id !== id),\n    }));\n  }\n\n  async deleteProject(id) {\n    await this.props.api.delete(`/projects/${id}`);\n    this.setState(({projects}) => ({\n      projects: projects.filter(p => p.id !== id),\n    }));\n  }\n\n  async addPin(id) {\n    await this.props.api.post(`teams/${this.state.id}/pinned-projects/${id}`);\n    this.setState(({teamPins}) => ({\n      teamPins: [...teamPins, {projectId: id}],\n    }));\n  }\n\n  async removePin(id) {\n    await this.props.api.delete(`teams/${this.state.id}/pinned-projects/${id}`);\n    this.setState(({teamPins}) => ({\n      teamPins: teamPins.filter(p => p.projectId !== id),\n    }));\n  }\n  \n  async joinTeamProject(projectId) {\n    await this.props.api.post(`/teams/${this.state.id}/projects/${projectId}/join`);    \n  }\n  \n  async leaveTeamProject(projectId) {\n    await this.props.api.delete(`/projects/${projectId}/authorization`, {\n      data: {\n        targetUserId: this.props.currentUser.id,\n      },\n    });\n  }\n  \n  async addProjectToCollection(project, collection) {\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n  }\n  \n  async featureProject(id){\n    await this.updateFields({featured_project_id: id});\n  }\n  \n  async unfeatureProject(){\n    await this.updateFields({featured_project_id: null});\n  }\n\n  currentUserIsTeamAdmin() {\n    if (!this.props.currentUser) return false;\n    const currentUserId = this.props.currentUser.id;\n    if (this.state.adminIds.includes(currentUserId)) {\n      return true;\n    }\n    return false;\n  }\n\n  render() {\n    const {handleError, handleErrorForInput} = this.props;\n    const funcs = {\n      updateName: name => this.updateFields({name}).catch(handleErrorForInput),\n      updateUrl: url => this.updateFields({url}).catch(handleErrorForInput),\n      updateDescription: description => this.updateFields({description}).catch(handleError),\n      joinTeam: () => this.joinTeam().catch(handleError),\n      inviteEmail: email => this.inviteEmail(email).catch(handleError),\n      inviteUser: id => this.inviteUser(id).catch(handleError),\n      removeUserFromTeam: (id, projectIds) => this.removeUserFromTeam(id, projectIds).catch(handleError),\n      uploadAvatar: () => assets.requestFile(blob => this.uploadAvatar(blob).catch(handleError)),\n      uploadCover: () => assets.requestFile(blob => this.uploadCover(blob).catch(handleError)),\n      clearCover: () => this.updateFields({hasCoverImage: false}).catch(handleError),\n      addProject: project => this.addProject(project).catch(handleError),\n      removeProject: id => this.removeProject(id).catch(handleError),\n      deleteProject: id => this.deleteProject(id).catch(handleError),\n      addPin: id => this.addPin(id).catch(handleError),\n      removePin: id => this.removePin(id).catch(handleError),\n      updateWhitelistedDomain: whitelistedDomain => this.updateFields({whitelistedDomain}).catch(handleError),\n      updateUserPermissions: (id, accessLevel) => this.updateUserPermissions(id, accessLevel).catch(handleError),\n      joinTeamProject: projectId => this.joinTeamProject(projectId).catch(handleError),\n      leaveTeamProject: projectId => this.leaveTeamProject(projectId).catch(handleError),\n      addProjectToCollection: (project,collection) => this.addProjectToCollection(project, collection).catch(handleError),\n      featureProject: (id) => this.featureProject(id).catch(handleError),\n      unfeatureProject: id => this.unfeatureProject(id).catch(handleError)\n    };\n    return this.props.children(this.state, funcs, this.currentUserIsOnTeam(), this.currentUserIsTeamAdmin());\n  }\n}\nTeamEditor.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  updateCurrentUser: PropTypes.func.isRequired,\n  handleError: PropTypes.func.isRequired,\n  initialTeam: PropTypes.object.isRequired,\n  uploadAssetSizes: PropTypes.func.isRequired,\n};\n\nconst TeamEditorContainer = ({api, children, initialTeam}) => (\n  <ErrorHandlers>\n    {errorFuncs => (\n      <Uploader>\n        {uploadFuncs => (\n          <Notifications>\n            {notificationFuncs => (\n              <CurrentUserConsumer>\n                {(currentUser, fetched, {update}) => (\n                  <TeamEditor {...{api, currentUser, initialTeam}} updateCurrentUser={update} {...uploadFuncs} {...errorFuncs} {...notificationFuncs}>\n                    {children}\n                  </TeamEditor>\n                )}\n              </CurrentUserConsumer>\n            )}\n          </Notifications>\n        )}\n      </Uploader>\n    )}\n  </ErrorHandlers>\n);\nTeamEditorContainer.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  initialTeam: PropTypes.object.isRequired,\n};\n\nexport default TeamEditorContainer;","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {getAvatarUrl, getLink, getProfileStyle} from '../models/team';\n\nimport {TeamLink} from './includes/link.jsx';\nimport {TruncatedMarkdown} from './includes/markdown.jsx';\nimport Thanks from './includes/thanks.jsx';\nimport UsersList from './users-list.jsx';\nimport WrappingLink from './includes/wrapping-link.jsx';\nimport {VerifiedBadge} from './includes/team-elements.jsx';\n\nexport default function TeamItem({team}) {\n  const style = getProfileStyle({...team, size: 'medium'});\n  const thanksCount = team.users.reduce((total, {thanksCount}) => total + thanksCount, 0);\n  return (\n    <WrappingLink href={getLink(team)} className=\"item button-area\" style={style}>\n      <div className=\"content\">\n        <img className=\"avatar\" src={getAvatarUrl(team)} alt=\"\" />\n        <div className=\"information\">\n          <TeamLink team={team} className=\"button\">{team.name}</TeamLink>\n          {!!team.isVerified && <VerifiedBadge/>}\n          <UsersList users={team.users} />\n          {thanksCount > 0 && <Thanks count={thanksCount} />}\n          {!!team.description && <p className=\"description\"><TruncatedMarkdown length={96}>{team.description}</TruncatedMarkdown></p>}\n        </div>\n      </div>\n    </WrappingLink>\n  );\n}\n\nTeamItem.propTypes = {\n  team: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    coverColor: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n    hasAvatarImage: PropTypes.bool.isRequired,\n    hasCoverImage: PropTypes.bool.isRequired,\n    isVerified: PropTypes.bool.isRequired,\n    name: PropTypes.string.isRequired,\n    users: PropTypes.array.isRequired,\n    url: PropTypes.string.isRequired,\n  }),\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {TeamLink} from './includes/link.jsx';\nimport {TeamAvatar} from './includes/avatar.jsx';\n\nexport const TeamTile = ({team}) => (\n  <TeamLink team={team} className=\"user\">\n    <TeamAvatar team={team}/>\n  </TeamLink>\n);\n\nTeamTile.propTypes = {\n  team: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    url: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport const TeamsList = ({teams}) => (\n  <ul className=\"users teams-information\">\n    {teams.map(team => (\n      <li key={team.id}>\n        <TeamTile team={team}/>\n      </li>\n    ))}\n  </ul>\n);\n\nTeamsList.propTypes = {\n  teams: PropTypes.array.isRequired,\n};\n\nexport default TeamsList;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport * as assets from '../utils/assets';\n\nimport {CurrentUserConsumer} from './current-user.jsx';\nimport ErrorHandlers from './error-handlers.jsx';\nimport Uploader from './includes/uploader.jsx';\n\nclass UserEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ...props.initialUser,\n      _deletedProjects: [],\n      _cacheCover: Date.now(),\n    };\n  }\n\n  isCurrentUser() {\n    return !!this.props.currentUser && (this.state.id === this.props.currentUser.id);\n  }\n\n  async updateFields(changes) {\n    const {data} = await this.props.api.patch(`users/${this.state.id}`, changes);\n    this.setState(data);\n    if (this.isCurrentUser()) {\n      this.props.updateCurrentUser(data);\n    }\n  }\n\n  async uploadAvatar(blob) {\n    const {data: policy} = await assets.getUserCoverImagePolicy(this.props.api, this.state.id);\n    const url = await this.props.uploadAsset(blob, policy, 'temporary-user-avatar');\n\n    const image = await assets.blobToImage(blob);\n    const color = assets.getDominantColor(image);\n    await this.updateFields({\n      avatarUrl: url,\n      color: color,\n    });\n  }\n\n  async uploadCover(blob) {\n    const {data: policy} = await assets.getUserCoverImagePolicy(this.props.api, this.state.id);\n    await this.props.uploadAssetSizes(blob, policy, assets.COVER_SIZES);\n\n    const image = await assets.blobToImage(blob);\n    const color = assets.getDominantColor(image);\n    await this.updateFields({\n      hasCoverImage: true,\n      coverColor: color,\n    });\n    this.setState({_cacheCover: Date.now()});\n  }\n\n  async addPin(id) {\n    await this.props.api.post(`users/${this.state.id}/pinned-projects/${id}`);\n    this.setState(({pins}) => ({\n      pins: [...pins, {projectId: id}],\n    }));\n  }\n\n  async removePin(id) {\n    await this.props.api.delete(`users/${this.state.id}/pinned-projects/${id}`);\n    this.setState(({pins}) => ({\n      pins: pins.filter(p => p.projectId !== id),\n    }));\n  }\n\n  async leaveProject(id) {\n    await this.props.api.delete(`/projects/${id}/authorization`, {\n      data: {\n        targetUserId: this.state.id,\n      },\n    });\n    this.setState(({projects}) => ({\n      projects: projects.filter(p => p.id !== id),\n    }));\n  }\n\n  async deleteProject(id) {\n    await this.props.api.delete(`/projects/${id}`);\n    const {data} = await this.props.api.get(`projects/${id}?showDeleted=true`);\n    this.setState(({projects, _deletedProjects}) => ({\n      projects: projects.filter(p => p.id !== id),\n      _deletedProjects: [data, ..._deletedProjects]\n    }));\n  }\n\n  async undeleteProject(id) {\n    await this.props.api.post(`/projects/${id}/undelete`);\n    const {data} = await this.props.api.get(`projects/${id}`);\n    if (data.domain.endsWith('-deleted')) {\n      try {\n        const newDomain = data.domain.replace(/-deleted$/, '');\n        await this.props.api.patch(`/projects/${id}`, {\n          domain: newDomain,\n        });\n        data.domain = newDomain;\n      } catch (e) {\n        console.warn('failed to rename project on undelete', e);\n      }\n    }\n    this.setState(({projects, _deletedProjects}) => ({\n      projects: [...projects, data],\n      _deletedProjects: _deletedProjects.filter(p => p.id !== id)\n    }));\n  }\n    \n  async addProjectToCollection(project, collection) {\n    await this.props.api.patch(`collections/${collection.id}/add/${project.id}`);\n    this.loadCollections();\n  }\n  \n  async loadCollections() {\n    const {data} = await this.props.api.get(`collections?userId=${this.state.id}`);\n    this.setState({collections: data});\n  }\n  \n  async featureProject(id){\n    await this.updateFields({featured_project_id: id});\n  }\n  \n  async unfeatureProject(){\n    await this.updateFields({featured_project_id: null});\n  }\n  \n  componentDidMount() {\n    this.loadCollections();\n  }\n\n  render() {\n    const {handleError, handleErrorForInput} = this.props;\n    const funcs = {\n      updateName: name => this.updateFields({name}).catch(handleErrorForInput),\n      updateLogin: login => this.updateFields({login}).catch(handleErrorForInput),\n      updateDescription: description => this.updateFields({description}).catch(handleError),\n      uploadAvatar: () => assets.requestFile(blob => this.uploadAvatar(blob).catch(handleError)),\n      uploadCover: () => assets.requestFile(blob => this.uploadCover(blob).catch(handleError)),\n      clearCover: () => this.updateFields({hasCoverImage: false}).catch(handleError),\n      addPin: id => this.addPin(id).catch(handleError),\n      removePin: id => this.removePin(id).catch(handleError),\n      leaveProject: id => this.leaveProject(id).catch(handleError),\n      deleteProject: id => this.deleteProject(id).catch(handleError),\n      undeleteProject: id => this.undeleteProject(id).catch(handleError),\n      setDeletedProjects: _deletedProjects => this.setState({_deletedProjects}),\n      addProjectToCollection: (project,collection) => this.addProjectToCollection(project, collection).catch(handleError),\n      featureProject: (id) => this.featureProject(id).catch(handleError),\n      unfeatureProject: id => this.unfeatureProject(id).catch(handleError)\n    };\n    return this.props.children(this.state, funcs, this.isCurrentUser());\n  }\n}\nUserEditor.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  currentUser: PropTypes.object,\n  updateCurrentUser: PropTypes.func.isRequired,\n  handleError: PropTypes.func.isRequired,\n  handleErrorForInput: PropTypes.func.isRequired,\n  initialUser: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n  }).isRequired,\n  uploadAsset: PropTypes.func.isRequired,\n  uploadAssetSizes: PropTypes.func.isRequired,\n};\n\nconst UserEditorContainer = ({api, children, initialUser}) => (\n  <ErrorHandlers>\n    {errorFuncs => (\n      <Uploader>\n        {uploadFuncs => (\n          <CurrentUserConsumer>\n            {(currentUser, fetched, {update}) => (\n              <UserEditor {...{api, currentUser, initialUser}} updateCurrentUser={update} {...uploadFuncs} {...errorFuncs}>\n                {children}\n              </UserEditor>\n            )}\n          </CurrentUserConsumer>\n        )}\n      </Uploader>\n    )}\n  </ErrorHandlers>\n);\nUserEditorContainer.propTypes = {\n  api: PropTypes.any.isRequired,\n  children: PropTypes.func.isRequired,\n  initialUser: PropTypes.object.isRequired,\n};\n\nexport default UserEditorContainer;","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {UserLink} from './includes/link.jsx';\nimport {TruncatedMarkdown} from './includes/markdown.jsx';\nimport Thanks from './includes/thanks.jsx';\n\nimport {ANON_AVATAR_URL, getAvatarUrl, getProfileStyle} from '../models/user.js';\n\nfunction addDefaultSrc(event) {\n  event.target.src = ANON_AVATAR_URL;\n}\n\nexport default function UserItem({user}) {\n  const style = getProfileStyle({...user, size: 'medium'});\n  return (\n    <UserLink user={user} className=\"button-area\">\n      <div className=\"item\" style={style}>\n        <div className=\"content\">\n          <img onError={addDefaultSrc} className=\"avatar\" src={getAvatarUrl(user)} alt=\"\"></img>\n          <div className=\"information\">\n            {!!user.name && <h3 className=\"name\">{user.name}</h3>}\n            <div className=\"button\">@{user.login}</div>\n            {user.thanksCount > 0 && <Thanks count={user.thanksCount} />}\n            {!!user.description && <p className=\"description\"><TruncatedMarkdown length={96}>{user.description}</TruncatedMarkdown></p>}\n          </div>\n        </div>\n      </div>\n    </UserLink>\n  );\n}\n\nUserItem.propTypes = {\n  user: PropTypes.shape({\n    avatarUrl: PropTypes.string,\n    coverColor: PropTypes.string,\n    description: PropTypes.string,\n    hasCoverImage: PropTypes.bool.isRequired,\n    id: PropTypes.number.isRequired,\n    login: PropTypes.string.isRequired,\n    name: PropTypes.string,\n    thanksCount: PropTypes.number.isRequired,\n  }),\n};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {UserLink, TeamLink} from './includes/link.jsx';\nimport {Avatar, UserAvatar, TeamAvatar} from './includes/avatar.jsx';\n\n\n// StaticUsersList\n\nexport const StaticUsersList = ({users, extraClass=\"\"}) => (\n  <ul className={`users ${extraClass}`}>\n    {users.map(user => (\n      <li key={user.id}>\n        <span className=\"user\">\n          <UserAvatar user={user}/>\n        </span>\n      </li>\n    ))}\n  </ul>\n);\nStaticUsersList.propTypes = {\n  users: PropTypes.array.isRequired,\n  extraClass: PropTypes.string,\n};\n\n\n// UserTile\n\nexport const UserTile = (user) => (\n  <UserLink user={user} className=\"user\">\n    <UserAvatar user={user} />\n  </UserLink>\n);\nUserTile.propTypes = {\n  id: PropTypes.number.isRequired,\n  login: PropTypes.string,\n  name: PropTypes.string,\n  avatarThumbnailUrl: PropTypes.string,\n  color: PropTypes.string.isRequired,\n};\n\n\n// PopulatedUsersList\n\nconst PopulatedUsersList = ({users, extraClass=\"\", teams=[] }) => {\n  if(users.length) {\n    return (\n      <ul className={`users ${extraClass}`}>\n        {users.map(user => (\n          <li key={user.id}>\n            <UserLink user={user} className=\"user\">\n              <UserAvatar user={user} />\n            </UserLink>\n          </li>\n        ))}\n      </ul>\n    );\n  }\n  return (\n    <ul className={`users ${extraClass}`}>\n      {teams.map(team => (\n        <li key={team.id}>\n          <TeamLink team={team} className=\"team\">\n            <TeamAvatar team={team} />\n          </TeamLink>\n        </li>\n      ))}\n    </ul>\n  );\n};\nPopulatedUsersList.propTypes = {\n  users: PropTypes.array.isRequired,\n  extraClass: PropTypes.string,\n  teams: PropTypes.array,\n};\n\nconst GlitchTeamUsersList = ({extraClass=''}) => {\n  const GLITCH_TEAM_AVATAR = \"https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Fglitch-team-avatar.svg?1489266029267\";\n  return (\n    <ul className={`users ${extraClass}`}>\n      <li>\n        <span className=\"user made-by-glitch\">\n          <Avatar name=\"Glitch Team\" src={GLITCH_TEAM_AVATAR} color=\"#74ecfc\"/>\n        </span>\n      </li>\n    </ul>\n  );\n};\n\nconst UsersList = ({glitchTeam=false, users, extraClass, teams}) => {\n  if(glitchTeam) {\n    return <GlitchTeamUsersList extraClass={extraClass}/>;\n  }\n  return <PopulatedUsersList users={users} extraClass={extraClass} teams={teams}/>;\n};\n\nUsersList.propTypes = {\n  glitchTeam: PropTypes.bool,\n};\n\nexport default UsersList;\n","import { getUrlForModel, getDisplayNameForModel } from \"./models.js\";\nimport { getLink, getDisplayName } from \"../models/user.js\";\n\n/* global APP_URL */\n\nexport const getAbuseReportTitle = (model, modelType) => {\n  if (modelType == \"home\") {\n    return `Abuse Report for Glitch Homepage`;\n  }\n  return `Abuse Report for ${modelType} ${getDisplayNameForModel(model, modelType)}`;\n};\n\n/*\n* mega-method to compose the body of an abuse report\n*/\n\nexport const getAbuseReportBody = (\n  currentUser,\n  submitterEmail,\n  reportedType,\n  reportedModel,\n  message\n) => {\n  let thingIdentifiers;\n  if (reportedType == \"home\") {\n    thingIdentifiers = `- [Glitch Home Page](${APP_URL})`;\n  } else {\n    const glitchLink = APP_URL + getUrlForModel(reportedModel, reportedType);\n    const capitalizedReportedType = capitalize(reportedType);\n    thingIdentifiers = `\n- ${capitalizedReportedType} Name: [${getDisplayNameForModel(reportedModel, reportedType)}](${glitchLink})\n\n- ${capitalizedReportedType} Id: ${reportedModel.id}`;\n  }\n\n  return `${thingIdentifiers}\n\n- Submitted by: [${getDisplayName(currentUser)}](${APP_URL}${getLink(currentUser)})\n\n- Contact: ${pickEmailForReport(currentUser, submitterEmail)}\n\n- Message: ${message}`;\n};\n\nconst capitalize = str => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nconst pickEmailForReport = (currentUser, submitterEmail) => {\n  if (submitterEmail) {\n    return submitterEmail;\n  }\n  const emailObj =\n    Array.isArray(currentUser.emails) &&\n    currentUser.emails.find(email => email.primary);\n  return emailObj.email;\n};\n","// 💭 based on frontend/utils/assets in the editor\n\nimport S3Uploader from './s3-uploader';\n\nimport quantize from 'quantize';\n\nexport const COVER_SIZES = {\n  large: 1000,\n  medium: 700,\n  small: 450,\n};\nexport const AVATAR_SIZES = {\n  large: 300,\n  medium: 150,\n  small: 60,\n};\n\nexport const blobToImage = file =>\n  new Promise(function(resolve, reject) {\n    const image = new Image;\n    image.onload = () => resolve(image);\n    image.onerror = reject;\n    return image.src = URL.createObjectURL(file);\n  })\n;\n\n// Reduces the width/height and draws a new image until it reaches\n// the final size. It loops by waiting for the onload to fire on the updated\n// image and exits as soon as the new width/height are less than or equal to the\n// final size.\nconst drawCanvasThumbnail = function(image, type, max) {\n  let {width, height} = image;\n  const quality = 0.92;\n  let sourceCanvas = document.createElement('canvas');\n  sourceCanvas.width = width;\n  sourceCanvas.height = height;\n  const sourceContext = sourceCanvas.getContext('2d');\n  sourceContext.drawImage(image, 0, 0, width, height);\n  while ((width > max) && (height > max)) {\n    width *= 0.75;\n    height *= 0.75;\n    const targetCanvas = document.createElement('canvas');\n    const targetContext = targetCanvas.getContext('2d');\n    targetCanvas.width = width;\n    targetCanvas.height = height;\n    targetContext.drawImage(sourceCanvas, 0, 0, width, height);\n    sourceCanvas = targetCanvas;\n  }\n\n  return new Promise(\n    function(resolve) {\n      return sourceCanvas.toBlob(function(blob) {\n        blob.width = width;\n        blob.height = height;\n        return resolve(blob);\n      }, type, quality);\n    }\n  );\n};\n\n// Takes an HTML5 File and returns a promise for an HTML5 Blob that is fulfilled\n// with a thumbnail for the image. If the image is small enough the original\n// blob is returned. Width and height metadata are added to the blob.\nexport function resizeImage(file, max) {\n  return blobToImage(file)\n    .then(function(image) {\n      file.width = image.width;\n      file.height = image.height;\n      if ((image.width < max) && (image.height < max)) {\n        return file;\n      } \n      return drawCanvasThumbnail(image, file.type, max);\n    });\n}\n\nexport function getDominantColor(image) {\n  const {width, height} = image;\n  const PIXELS_FROM_EDGE = 11;\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const context = canvas.getContext('2d');\n  context.drawImage(image, 0, 0, width, height);\n  let transparentPixels = false;\n  let colors = [];\n  const outlyingColors = [];\n  const outlyingColorsList = JSON.stringify([\n    [255,255,255],\n    [0,0,0],\n  ]);\n  /*\n  Iterate through edge pixels and get the average color, then conditionally\n  handle edge colors and transparent images\n  */\n  for (let x = 0; x < PIXELS_FROM_EDGE; x++) {\n    for (let y = 0; y < PIXELS_FROM_EDGE; y++) {\n      const pixelData = context.getImageData(x, y, 1, 1).data;\n      const color = [\n        pixelData[0], // r\n        pixelData[1], // g\n        pixelData[2], // b\n      ];\n      const colorRegExObject = new RegExp(`(${color})`, 'g');\n      if (pixelData[3] < 255) { // alpha pixels\n        transparentPixels = true;\n        break;\n      }\n      if (outlyingColorsList.match(colorRegExObject)) {\n        outlyingColors.push(color);\n      } else {\n        colors.push(color);\n      }\n    }\n  }\n  if (outlyingColors.length > colors.length) {\n    colors = outlyingColors;\n  }\n  if (transparentPixels) {\n    return null;\n  } \n  const colorMap = quantize(colors, 5);\n  const [r, g, b] = Array.from(colorMap.palette()[0]);\n  return `rgb(${r},${g},${b})`;\n}\n\n\nexport function requestFile(callback) {\n  const input = document.createElement(\"input\");\n  input.type = 'file';\n  input.accept = \"image/*\";\n  input.onchange = function(event) {\n    const file = event.target.files[0];\n    console.log('☔️☔️☔️ input onchange', file);\n    callback(file);\n  };\n  input.click();\n  console.log('input created: ', input);\n}\n\nexport function getUserCoverImagePolicy(api, id) {\n  return api.get(`users/${id}/cover/policy`);\n}\n\nexport function getTeamAvatarImagePolicy(api, id) {\n  return api.get(`teams/${id}/avatar/policy`);\n}\n\nexport function getTeamCoverImagePolicy(api, id) {\n  return api.get(`teams/${id}/cover/policy`);\n}\n\nexport function uploadAsset(blob, policy, key) {\n  return S3Uploader(policy).upload({ key, blob });\n}\n\nexport function uploadAssetSizes(blob, policy, sizes, progressHandler) {\n  const upload = uploadAsset(blob, policy, 'original');\n  upload.progress(progressHandler);\n  \n  const scaledUploads = Object.keys(sizes).map(tag => {\n    return resizeImage(blob, sizes[tag]).then(resized => uploadAsset(resized, policy, tag));\n  });\n\n  return Promise.all([upload, ...scaledUploads]);\n}\n","import { getLink as getCollectionLink } from \"../models/collection\";\nimport { getLink as getProjectLink } from \"../models/project\";\nimport { getLink as getTeamLink } from \"../models/team\";\nimport { getLink as getUserLink } from \"../models/user\";\n\nexport const getUrlForModel = (model, modelType) => {\n  switch (modelType) {\n    case \"project\":\n      return getProjectLink(model);\n    case \"collection\":\n      return getCollectionLink(model);\n    case \"team\":\n      return getTeamLink(model);\n    case \"user\":\n      return getUserLink(model);\n  }\n};\n\nexport const getDisplayNameForModel = (model, modelType) => {\n  let thingName;\n  switch (modelType) {\n    case \"project\":\n      thingName = model.domain;\n      break;\n    case \"user\":\n      thingName = model.login;\n      break;\n    case \"collection\":\n    case \"team\":\n      thingName = model.name;\n      break;\n  }\n  return thingName;\n};\n","export default ProgressPromise;\n\n// Extend promises with `finally`\n// From: https://github.com/domenic/promises-unwrapping/issues/18\nif (Promise.prototype.finally == null) { Promise.prototype.finally = function(callback) {\n  // We don’t invoke the callback in here,\n  // because we want then() to handle its exceptions\n  return this.then(\n    // Callback fulfills: pass on predecessor settlement\n    // Callback rejects: pass on rejection (=omit 2nd arg.)\n    value =>\n      Promise.resolve(callback())\n        .then(() => value)\n    ,\n    reason =>\n      Promise.resolve(callback())\n        .then(function() { throw reason; })\n  );\n}; }\n\nif (Promise.prototype._notify == null) { Promise.prototype._notify = function(event) {\n  return this._progressHandlers.forEach(function(handler) {\n    try {\n      return handler(event);\n    } catch (error) {\n      // empty\n    }\n  });\n}; }\n\nif (Promise.prototype.progress == null) { Promise.prototype.progress = function(handler) {\n  if (this._progressHandlers == null) { this._progressHandlers = []; }\n  this._progressHandlers.push(handler);\n\n  return this;\n}; }\n\nfunction ProgressPromise(fn) {\n  var p = new Promise(function(resolve, reject) {\n    const notify = () =>\n      p._progressHandlers != null ? p._progressHandlers.forEach(function(handler) {\n        try {\n          return handler(event);\n        } catch (error) {\n          //empty\n        }\n      }) : undefined\n    ;\n\n    return fn(resolve, reject, notify);\n  });\n\n  p.then = function(onFulfilled, onRejected) {\n    const result = Promise.prototype.then.call(p, onFulfilled, onRejected);\n    // Pass progress through\n    p.progress(result._notify.bind(result));\n\n    return result;\n  };\n\n  return p;\n}\n","import ProgressPromise from './progress-promise';\n\n/* eslint-disable */\n\n/*\nS3 Uploader\n===========\n\nUpload data directly to S3 from the client.\n\nUsage\n-----\n\n>     uploader = S3.uploader(JSON.parse(localStorage.S3Policy))\n>     uploader.upload\n>       key: \"myfile.text\"\n>       blob: new Blob [\"radical\"]\n>       cacheControl: 60 # default 0\n\n\nThe uploader automatically prefixes the key with the namespace specified in the\npolicy.\n\nA promise is returned that is fulfilled with the url of the uploaded resource.\n\n>     .then (url) -> # \"https://s3.amazonaws.com/trinket/18894/myfile.txt\"\n\nThe promise is rejected with an error if the upload fails.\n\nA progress event is fired with the percentage of the upload that has completed.\n\nThe policy is a JSON object with the following keys:\n\n- `accessKey`\n- `policy`\n- `signature`\n\nSince these are all needed to create and sign the policy we keep them all\ntogether.\n\nGiving this object to the uploader method creates an uploader capable of\nasynchronously uploading files to the bucket specified in the policy.\n\nNotes\n-----\n\nThe policy must specify a `Cache-Control` header because we always try to set it.\n\nLicense\n-------\n\nThe MIT License (MIT)\n\nCopyright (c) 2014\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\nexport default function(credentials) {\n  const {policy, signature, accessKeyId} = credentials;\n  const {acl, bucket, namespace} = extractPolicyData(policy);\n\n  const bucketUrl = `https://s3.amazonaws.com/${bucket}`;\n\n  const urlFor = function(key) {\n    const namespacedKey = `${namespace}${key}`;\n\n    return `${bucketUrl}/${namespacedKey}`;\n  };\n\n  return {\n    urlFor,\n\n    upload({key, blob, cacheControl}) {\n      console.log('upload called', key); // 2, based on user id\n      console.log('using namespace', namespace); // user-cover/2, not sure what it's based on\n      const namespacedKey = `${namespace}${key}`;\n      const url = urlFor(key);\n\n      return sendForm(bucketUrl, objectToForm({\n        key: namespacedKey,\n        \"Content-Type\": blob.type || 'binary/octet-stream',\n        \"Cache-Control\": `max-age=${cacheControl || 31536000}`,\n        AWSAccessKeyId: accessKeyId,\n        \"x-amz-security-token\": credentials.sessionToken,\n        acl,\n        policy,\n        signature,\n        file: blob,\n      })).then(() => `${bucketUrl}/${encodeURIComponent(namespacedKey)}`);\n    },\n  };\n};\n\nconst getKey = function(conditions, key) {\n  const results = conditions.filter(condition => typeof condition === \"object\").map(object => object[key])\n    .filter(value => value);\n\n  return results[0];\n};\n\nconst getNamespaceFromPolicyConditions = conditions =>\n  (conditions.filter(function(condition) {\n    if (Array.isArray(condition)) {\n      const [a, b, c] = Array.from(condition);\n      return (b === \"$key\") && ((a === \"starts-with\") || (a === \"eq\"));\n    }\n  }))[0][2]\n;\n\nvar extractPolicyData = function(policy) {\n  const policyObject = JSON.parse(atob(policy));\n\n  const { conditions } = policyObject;\n\n  return {\n    acl: getKey(conditions, \"acl\"),\n    bucket: getKey(conditions, \"bucket\"),\n    namespace: getNamespaceFromPolicyConditions(conditions),\n  };\n};\n\nconst isSuccess = request => request.status.toString()[0] === \"2\";\n\nvar sendForm = (url, formData) =>\n  new ProgressPromise(function(resolve, reject, notify) {\n    const request = new XMLHttpRequest();\n\n    request.open(\"POST\", url, true);\n\n    if (request.upload != null) {\n      request.upload.onprogress = notify;\n    }\n\n    request.onreadystatechange = function(e) {\n      if (request.readyState === 4) {\n        if (isSuccess(request)) {\n\n          return resolve(request);\n        } \n        return reject(request);\n        \n      }\n    };\n\n    return request.send(formData);\n  })\n;\n\nvar objectToForm = function(data) {\n  let formData;\n  return formData = Object.keys(data).reduce(function(formData, key) {\n    const value = data[key];\n\n    if (value) {\n      formData.append(key, value);\n    }\n\n    return formData;\n  }\n    , new FormData);\n};\n","/* globals ENVIRONMENT, PROJECT_DOMAIN */\n\n//\n// This utility wraps the Sentry library so that we can guarantee\n// Sentry is initialized before its called.\n//\n// Only this file shoud import from '@sentry/browser',\n// all other users of Sentry should import this file instead.\n//\n\nimport * as Sentry from '@sentry/browser';\nexport * from '@sentry/browser';\n\ntry {\n  Sentry.init({\n    dsn: 'https://4f1a68242b6944738df12eecc34d377c@sentry.io/1246508',\n    environment: ENVIRONMENT,\n    beforeSend(event) {\n      const tokens = ['facebookToken', 'githubToken', 'persistentToken'];\n      let json = JSON.stringify(event);\n      tokens.forEach(token => {\n        const regexp = new RegExp(`\"${token}\":\"[^\"]+\"`, 'g');\n        json = json.replace(regexp, `\"${token}\":\"****\"`);\n      });\n      return JSON.parse(json);\n    },\n  });\n  \n  Sentry.configureScope((scope) => {\n    scope.setTag(\"PROJECT_DOMAIN\", PROJECT_DOMAIN);\n  });\n  \n  // Expose for use on the developer console:\n  window.Sentry = Sentry;\n} catch (error) {\n  console.warn(\"Error initializing Sentry\", error);\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxNA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAKA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AARA;AACA;AAiBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9BA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;;AAAA;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AACA;AACA;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDA;AAEA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;AAEA;AACA;AAGA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAAA;AADA;AAFA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;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAKA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAHA;AAFA;AAMA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAFA;AAMA;AACA;AAAA;AACA;AADA;AAGA;;;;;;;;;;;;;;;AAIA;AACA;;;AADA;AACA;AACA;;;;;AACA;;;;;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;AACA;AAAA;;;;;AAAA;AACA;;AAAA;;;;;AAAA;AACA;;;;AACA;AACA;;;AADA;AACA;AAAA;;;;;AACA;AACA;;AACA;AACA;;;;;AACA;;;;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMA;;;;;;;;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;;;;;;AACA;AACA;;AADA;AACA;AAAA;;;;;AACA;AACA;AACA;AAAA;AAAA;;AACA;AACA;;AADA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;;;;;AAKA;AACA;AAAA;AAAA;AACA;;;;;;;AAEA;AACA;;;AADA;AACA;AACA;;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AA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AA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AACA;AAAA;AAEA;AAAA;AAGA;AA9BA;AACA;AADA;AAAA;AAgCA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AADA;AAFA;AAFA;AAWA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjEA;AAEA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAFA;AAKA;AAGA;AACA;AACA;AAXA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;AAAA;AAAA;AAwBA;AAAA;AAAA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAOA;AA9CA;AACA;AADA;AAAA;AAiDA;AACA;AACA;AAFA;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AAGA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;;;;AAhBA;AACA;AADA;AAmBA;AACA;AACA;AAFA;AAKA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AARA;AASA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;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;AAvBA;AAAA;AAAA;AA0BA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAjCA;AACA;AADA;AAAA;AAmCA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAAA;AAAA;AACA;AAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAHA;AAIA;AACA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AAKA;;;;AAnDA;AACA;AADA;AAqDA;AACA;AACA;AACA;AACA;AAJA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AACA;AACA;AACA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;AACA;AACA;;;AAEA;AAAA;AAGA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AApCA;AACA;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AACA;AASA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AAEA;AACA;AADA;AAIA;AAAA;AACA;AACA;AACA;AACA;AACA;AADA;AAIA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AA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AAAA;AACA;AAMA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;AAQA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;AAUA;;;;AAzDA;AACA;AA0DA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AADA;AAFA;AADA;AATA;AAkBA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AAEA;AACA;;;AACA;AACA;AAIA;AACA;AACA;;;AAEA;AACA;AACA;;;;AAhBA;AACA;AAkBA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7HA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AADA;AADA;AACA;AAIA;AACA;AACA;AACA;AAFA;AAIA;AALA;AACA;AAOA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAKA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAUA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AADA;AAGA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;AADA;AAGA;AAAA;AAKA;AAEA;AACA;AAFA;AADA;AASA;;;;AAzDA;AACA;AA2DA;AACA;AACA;AACA;AAHA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5KA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAMA;AADA;AAIA;AACA;AACA;AAHA;AAKA;AAEA;AACA;AACA;AACA;AAJA;AADA;AAWA;AAAA;AAMA;AADA;AAIA;AACA;AACA;AAHA;AAKA;AAEA;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A;AALA;AAYA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAaA;AACA;AACA;AAtBA;AACA;AAwBA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAOA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAPA;AAHA;AACA;AAqBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3MA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AARA;AAHA;AAFA;AAFA;AACA;AAuBA;AACA;AACA;AACA;AAHA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AAdA;AAeA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;;;;;;;;;;;AAGA;;;;;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;AAAA;AACA;;;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AADA;AAEA;AAAA;AACA;AACA;AAJA;AAOA;AAAA;AAIA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;AAYA;;;;AAjKA;AACA;AAmKA;AACA;AACA;AACA;AACA;AAAA;AACA;AALA;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClQA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AAGA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AANA;AAQA;AACA;AAZA;AAaA;AACA;;;;;;;;;;;;;AAEA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;;AAEA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAMA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAEA;;;;;;;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;;;AADA;AAQA;AAAA;AAAA;AACA;;AAEA;AACA;;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAGA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AALA;AAAA;AAmBA;AAAA;AACA;AAAA;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AASA;;;;AAlJA;AACA;AAoJA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AANA;AASA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnLA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AAbA;AAcA;AACA;AAhBA;AAAA;AAAA;AAkBA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAAA;AAAA;AA0BA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AApCA;AAAA;AAAA;AAuCA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAXA;AAAA;AAAA;AACA;AADA;AAWA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AACA;AA5DA;AAAA;AAAA;AA+DA;AACA;AACA;AACA;AAlEA;AAAA;AAAA;AAqEA;AACA;AACA;AACA;AAxEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2EA;AA3EA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgFA;AAhFA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAqFA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AA5FA;AAAA;AAAA;AA+FA;AACA;AACA;AAFA;AAIA;AAnGA;AAAA;AAAA;AAsGA;AACA;AACA;AAFA;AAIA;AA1GA;AAAA;AAAA;AA4GA;AACA;AAAA;AACA;AADA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AA/HA;AAAA;AAAA;AAkIA;AACA;AACA;AACA;AACA;AAtIA;AAAA;AAAA;AAyIA;AACA;AACA;AACA;AA5IA;AAAA;AAAA;AA+IA;AACA;AACA;AACA;AAlJA;AAAA;AAAA;AAoJA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AANA;AASA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AADA;AAGA;AACA;AAJA;AAFA;AAFA;AAgBA;AAAA;AAKA;AA1LA;AACA;AADA;AAAA;AA6LA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AAAA;AAEA;AAAA;AAAA;AAAA;AAFA;AACA;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClNA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;AAIA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AALA;AAOA;AACA;AACA;AAZA;AAaA;AACA;;;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAFA;AAIA;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;;AAEA;;;;;;;;;AACA;AACA;AAAA;AAAA;;AAEA;AACA;;;AADA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;AACA;AACA;AAAA;;;;;;;;AAIA;AAAA;AACA;AADA;AAAA;AAIA;AACA;;;AAEA;AACA;;;AADA;AACA;;;;;;;AAEA;AACA;;AAEA;AAAA;AACA;AADA;AAAA;AACA;;;;;;;;;;;;;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAEA;AAAA;AACA;AACA;AAJA;AAOA;AAAA;AAAA;AAEA;AAAA;AAMA;;;;AAtIA;AACA;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;AASA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAEA;AACA;AAAA;AADA;AAFA;AACA;AAOA;;;;;;;;;;;;ACvPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AADA;AACA;AAIA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;AAKA;AAAA;AACA;AACA;AAFA;AAAA;AAKA;AAEA;AACA;AACA;AAFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AATA;AAUA;AACA;;;;;;;;;;;;;;AAGA;AACA;;AADA;AACA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;AAIA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAAA;;;;;AACA;AACA;;;AAGA;AACA;;;AADA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AACA;;;;;;;;;;AAMA;AACA;;;AADA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;AACA;;;;;;;;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAGA;;;;;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;AACA;AACA;AAAA;AAAA;;AAEA;;;AAEA;AACA;;AADA;AACA;;;;;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AACA;;;AADA;AAWA;;;;;;;AAEA;AACA;AACA;AACA;AAFA;AACA;;;;;;;;;;;;;;;;;AAMA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAGA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAOA;AAAA;AACA;AAAA;AAMA;;;;AA5IA;AACA;AA8IA;AACA;AADA;AAIA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAHA;AAFA;AACA;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAGA;AALA;AAMA;AACA;;;;;;;;;;;AAEA;;;;;AACA;AACA;;AACA;AACA;AADA;;;AAIA;AACA;;AAAA;;;;;;;AAEA;AACA;AACA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAcA;;;;AA5DA;AACA;AA8DA;AAAA;AAEA;AAAA;AAFA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrFA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAfA;AAgBA;AACA;;;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAOA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAlGA;AACA;AAoGA;AACA;AACA;AAFA;AAKA;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AAgBA;AAEA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpCA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AADA;AAMA;AAAA;AAAA;AAAA;AAPA;AAYA;AAAA;AACA;AAAA;AAAA;AAjBA;AACA;AAsBA;AACA;AACA;AACA;AAFA;AADA;AACA;AAMA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AAEA;AAAA;AAAA;AAHA;AAIA;AACA;;;;;;;;;;;;;AAEA;AAEA;AACA;AACA;;AAEA;AAGA;AACA;AADA;AADA;AACA;;;AAHA;AAQA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAHA;AAIA;AAAA;AAEA;;;;AApCA;AACA;AAqCA;AACA;AADA;AAIA;;;;;;;;;;;;AC1FA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAHA;AACA;AAMA;AACA;AACA;AACA;AAHA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AAEA;;;;;;;;AAOA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AADA;AACA;AAGA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAFA;AAIA;AApBA;AAqBA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAGA;AAAA;AAAA;AAKA;;;;AArEA;AACA;AADA;AAwEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAGA;AALA;AAMA;AACA;AARA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAAA;AAcA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAAA;AACA;AAxBA;AACA;AADA;AAAA;AA0BA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AAKA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAJA;AAFA;AAWA;AACA;AADA;;;;;;;;;;;;ACpDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AAHA;AAUA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAHA;AACA;AACA;AAMA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA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A;AAFA;AAOA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;;;;AAEA;;;;;;;;;;AACA;AACA;;;AADA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;AACA;AACA;;;AADA;;AACA;AACA;;;AACA;AACA;;AADA;AACA;;AACA;AACA;AACA;AAFA;AACA;;AAGA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;AACA;AACA;;;AADA;;AACA;AACA;;;AACA;AACA;;AADA;AACA;;AACA;AACA;AACA;AAFA;AACA;;AAGA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;AACA;;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;AACA;;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;AACA;AACA;;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;;;;;;AAEA;;;;;AACA;;;;;AACA;AACA;AACA;;;AACA;AAAA;AAAA;AACA;;AAAA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;AACA;AACA;;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;AAIA;;;;;;AACA;AACA;;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AACA;;;;;;;;;;;;;;;;;;;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AAgBA;AACA;AACA;AACA;AAHA;AAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/LA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AADA;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAHA;AAFA;AAWA;AACA;AACA;AAFA;AACA;AAOA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAHA;AASA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAHA;AASA;AACA;AAAA;AACA;AACA;AACA;AAHA;AACA;AAKA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AADA;AAIA;;;;;;;;;;;;;;;;;;;;ACpGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;;;;AAIA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAMA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AANA;AAUA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;;;;AAIA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AA9CA;AAAA;AAAA;AAAA;AAAA;AACA;AA8CA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;;;;;;;;;;;;ACpKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AARA;AAUA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAVA;AACA;AAWA;AACA;;;;;;;;;;;;;;;;;;;;;;ACjCA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAEA;AAAA;AAFA;AAIA;AAEA;AAAA;AAFA;AAIA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AAPA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7DA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAUA;AAAA;AACA;AApBA;AAsBA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;AACA;AADA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAtBA;AACA;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;AClLA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAcA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;A","sourceRoot":""}