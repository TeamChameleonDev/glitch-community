!function(e){function t(t){for(var n,i,c=t[0],s=t[1],u=t[2],p=0,f=[];p<c.length;p++)i=c[p],a[i]&&f.push(a[i][0]),a[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,c=1;c<r.length;c++){var s=r[c];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={1:0},o=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise(function(t,n){r=a[e]=[t,n]});t.push(r[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+""+({0:"c3-bundle"}[e]||e)+".js?"+{0:"8872c5e090417effee5b"}[e]}(e),o=function(t){c.onerror=c.onload=null,clearTimeout(s);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+n+": "+o+")");i.type=n,i.request=o,r[1](i)}a[e]=void 0}};var s=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([462,4,2,3]),r()}({200:function(e,t){e.exports=function(e,t,r){r.convert=function(e,t,n){var a=r();return a.add(e,t).diff(a,n)}}},462:function(e,t,r){"use strict";r.r(t);r(46);var n=r(7);r(226);String.prototype.trimStart||(String.prototype.trimStart=String.prototype.trimLeft),String.prototype.trimEnd||(String.prototype.trimEnd=String.prototype.trimRight);var a=r(12),o=r.n(a),i=r(199),c=r.n(i),s=r(200),u=r.n(s),l=r(0),p=r.n(l),f=r(67),m=r(465),d=r(1),h=r.n(d);function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=y(this,b(t).call(this,e))).state={error:null},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,p.a.Component),r=t,(a=[{key:"componentDidCatch",value:function(e){console.error(e),Object(n.captureException)(e),this.setState({error:e})}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.fallback;return this.state.error?r:t}}])&&v(r.prototype,a),o&&v(r,o),t}();E.propTypes={children:h.a.node.isRequired,fallback:h.a.node},E.defaultProps={fallback:"Something went wrong, try refreshing?"};r(3),r(2);var j=r(201),w=r.n(j),O=r(123),P=r.n(O);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=p.a.createContext({properties:{},context:{}}),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return P()(e)?e(t):function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){q(e,t,r[t])})}return e}({},t,e)},U=function(e){var t=e.children,r=e.properties,n=e.context;return p.a.createElement(S.Consumer,null,function(e){return p.a.createElement(S.Provider,{value:{properties:_(r,e.properties),context:_(n,e.context)}},t)})};U.propTypes={children:h.a.node.isRequired,properties:h.a.oneOfType([h.a.object,h.a.func]),context:h.a.oneOfType([h.a.object,h.a.func])};var I=function(e){var t=e.children;return p.a.createElement(S.Consumer,null,function(e){return t(function(t,r,a){try{analytics.track(t,_(r,e.properties),_(a,e.context))}catch(o){Object(n.captureException)(o)}})})};I.propTypes={children:h.a.func.isRequired};var A=function(e){var t=e.children,r=e.name,n=e.properties,a=e.context;return p.a.createElement(I,null,function(e){return p.a.Children.map(t,function(t){return p.a.cloneElement(t,{onClick:function(){var o;if(e(r,n,a),t.props.onClick)return(o=t.props).onClick.apply(o,arguments)}})})})};A.propTypes={children:h.a.node.isRequired,name:h.a.string.isRequired,properties:h.a.oneOfType([h.a.object,h.a.func]),context:h.a.oneOfType([h.a.object,h.a.func])};var F=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=T(this,N(t).call(this,e))).ref=p.a.createRef(),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,p.a.Component),r=t,(a=[{key:"componentDidMount",value:function(){var e=this;try{analytics.trackLink(this.ref.current,function(){return e.props.name},function(){return e.props.properties})}catch(t){Object(n.captureException)(t)}}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.to,n=R(e,["children","to"]);return p.a.createElement("a",k({href:r},w()(n,["name","properties"]),{ref:this.ref}),t)}}])&&C(r.prototype,a),o&&C(r,o),t}(),D=function(e){var t=e.children,r=e.name,n=e.properties,a=e.to,o=R(e,["children","name","properties","to"]);return p.a.createElement(S.Consumer,null,function(e){return p.a.createElement(F,k({to:a,name:r,properties:_(n,e.properties)},o),t)})};D.propTypes={children:h.a.node.isRequired,name:h.a.string.isRequired,properties:h.a.oneOfType([h.a.object,h.a.func]),to:h.a.string.isRequired};r(4),r(5),r(80);var $=r(34),L=r.n($);function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var H=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=z(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?G(n):a).state={value:void 0,loaded:!1},r.handleStorage=r.handleStorage.bind(G(G(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,p.a.Component),r=t,(n=[{key:"handleStorage",value:function(){var e=void 0;try{var t=window.localStorage.getItem(this.props.name);null!==t&&(e=JSON.parse(t))}catch(r){console.error("Failed to read from localStorage!",r),e=void 0}this.setState({value:e,loaded:!0})}},{key:"componentDidMount",value:function(){this.props.ignoreChanges||window.addEventListener("storage",this.handleStorage,{passive:!0}),this.handleStorage()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.handleStorage,{passive:!0})}},{key:"set",value:function(e){try{void 0!==e?window.localStorage.setItem(this.props.name,JSON.stringify(e)):window.localStorage.removeItem(this.props.name)}catch(t){console.error("Failed to write to localStorage!",t)}this.setState({value:e})}},{key:"render",value:function(){return this.props.children(void 0!==this.state.value?this.state.value:this.props.default,this.set.bind(this),this.state.loaded)}}])&&M(r.prototype,n),a&&M(r,a),t}();function B(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){J(e,t,r[t])})}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Z(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Y(o,n,a,i,c,"next",e)}function c(e){Y(o,n,a,i,c,"throw",e)}i(void 0)})}}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}H.propTypes={children:h.a.func.isRequired,name:h.a.string.isRequired,default:h.a.any,ignoreChanges:h.a.bool};var te=p.a.createContext(),re=te.Provider,ne=te.Consumer,ae={id:0,login:null,name:null,description:"",color:"#aaa",avatarUrl:null,avatarThumbnailUrl:null,hasCoverImage:!1,coverColor:null,emails:[],features:[],projects:[],teams:[],collections:[]};function oe(e){e?(console.log("👀 current user is",e),console.log("🌈 login",e.login,e.id)):console.log("👻 logged out");try{var t=window.analytics;if(t&&e&&e.login){var r=Array.isArray(e.emails)&&e.emails.find(function(e){return e.primary}),a=r&&r.email;t.identify(e.id,{name:e.name,login:e.login,email:a,created_at:e.createdAt},{groupId:"0"})}e?Object(n.configureScope)(function(t){t.setUser({id:e.id,login:e.login})}):Object(n.configureScope)(function(e){e.setUser({id:null,login:null})})}catch(o){console.error(o),Object(n.captureException)(o)}}function ie(e,t){return!(!e||!t||e.id!==t.id||e.persistentToken!==t.persistentToken)||!e&&!t}var ce=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Q(this,X(t).call(this,e))).state={fetched:!1,working:!1},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,p.a.Component),r=t,(a=[{key:"api",value:function(){return this.props.sharedUser?L.a.create({baseURL:API_URL,headers:{Authorization:this.props.sharedUser.persistentToken}}):L.a.create({baseURL:API_URL})}},{key:"getSharedUser",value:function(){var e=Z(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api().get("boot?latestProjectOnly=true");case 3:return t=e.sent,r=t.data.user,e.abrupt("return",r);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.response||401!==e.t0.response.status){e.next=12;break}return e.abrupt("return",void 0);case 12:throw e.t0;case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"getCachedUser",value:function(){var e=Z(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.sharedUser){e.next=3;break}return e.abrupt("return",void 0);case 3:if(t.id&&t.persistentToken){e.next=5;break}return e.abrupt("return","error");case 5:return e.prev=5,e.next=8,this.api().get(`users/${t.id}`);case 8:if(r=e.sent,n=r.data,ie(t,n)){e.next=12;break}return e.abrupt("return","error");case 12:return e.abrupt("return",n);case 15:if(e.prev=15,e.t0=e.catch(5),!e.t0.response||401!==e.t0.response.status&&404!==e.t0.response.status){e.next=19;break}return e.abrupt("return","error");case 19:throw e.t0;case 20:case"end":return e.stop()}},e,this,[[5,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Z(regeneratorRuntime.mark(function e(){var t,r,a,o,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.working){e.next=2;break}return e.abrupt("return");case 2:if(this.setState({working:!0}),t=this.props,r=t.sharedUser,a=t.cachedUser,ie(r,a)||this.props.setCachedUser(void 0),!r){e.next=23;break}return e.next=8,this.getCachedUser();case 8:if("error"!==(o=e.sent)){e.next=19;break}return this.setState({fetched:!1}),e.next=13,this.getSharedUser();case 13:i=e.sent,this.props.setSharedUser(i),console.warn("Fixed shared cachedUser from",r,"to",i),Object(n.captureMessage)("Invalid cachedUser",{extra:{from:r||null,to:i||null}}),e.next=21;break;case 19:this.props.setCachedUser(o),this.setState({fetched:!0});case 21:e.next=28;break;case 23:return e.next=25,this.api().post("users/anon");case 25:c=e.sent,s=c.data,this.props.setSharedUser(s);case 28:this.setState({working:!1});case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){oe(this.props.cachedUser),this.load()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.cachedUser,n=t.sharedUser;ie(r,e.cachedUser)||oe(r),ie(r,n)&&ie(n,e.sharedUser)||this.load(),window.currentUser=r,window.api=this.api()}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.sharedUser,a=t.cachedUser,o=t.setSharedUser,i=t.setCachedUser;return r({api:this.api(),currentUser:W({},ae,n,a),fetched:!!a&&this.state.fetched,reload:function(){return e.load()},login:function(e){return o(e)},update:function(e){return i(W({},a,e))},clear:function(){return o(void 0)}})}}])&&K(r.prototype,a),o&&K(r,o),t}();ce.propTypes={sharedUser:h.a.shape({id:h.a.number,persistentToken:h.a.string}),cachedUser:h.a.object,setSharedUser:h.a.func.isRequired,setCachedUser:h.a.func.isRequired};var se=function(e){var t=e.children;return p.a.createElement(H,{name:"community-cachedUser",default:null},function(e,r,n){return p.a.createElement(H,{name:"cachedUser",default:null},function(a,o,i){return i&&n&&p.a.createElement(ce,{sharedUser:a,setSharedUser:o,cachedUser:e,setCachedUser:r},function(e){var r=e.api,n=B(e,["api"]);return p.a.createElement(re,{value:n},t(r))})})})};se.propTypes={children:h.a.func.isRequired};var ue=function(e){return p.a.createElement(ne,null,function(t){var r=t.currentUser,n=t.fetched,a=B(t,["currentUser","fetched"]);return e.children(r,n,a,e)})};function le(e,t){return e.map(function(e){return function(e,t){return e.id===(t&&t.id)?t:e}(e,t)})}function pe(e,t){return e.map(function(e){return function(e,t){var r=e.users,n=B(e,["users"]);return W({users:r?le(r,t):[]},n)}(e,t)})}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function me(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}ue.propTypes={children:h.a.func.isRequired};var de=p.a.createContext(),he=de.Provider,ve=de.Consumer,ye=function(e){var t=e.children;return p.a.createElement(H,{name:"community-userPrefs",default:{}},function(e,r){return p.a.createElement(he,{value:{prefs:e,set:r}},t)})};ye.propTypes={children:h.a.node.isRequired};var be=function(e){var t=e.children,r=e.name,n=me(e,["children","name"]);return p.a.createElement(ve,null,function(e){var a=e.prefs,o=e.set;return t(void 0!==a[r]?a[r]:n.default,function(e){return o(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){fe(e,t,r[t])})}return e}({},a,fe({},r,e)))})})};be.propTypes={children:h.a.func.isRequired,name:h.a.string.isRequired,default:h.a.any.isRequired};var ge=be,Ee=p.a.createContext(),je=Ee.Provider,we=Ee.Consumer,Oe=[{name:"Email Invites",description:"Enables invite-by-email behavior on the team page."},{name:"Everybody Dance!",description:"Placeholder for a new toggle."},{name:"Inflatable Crocodiles",description:"I don't think this does anything yet."}].splice(0,3),Pe=function(e){var t=e.children;return p.a.createElement(be,{name:"devToggles",default:[]},function(e,r){return p.a.createElement(je,{value:{enabledToggles:e,toggleData:Oe,setEnabledToggles:r}},t)})};Pe.propTypes={children:h.a.node.isRequired};var ke=function(e){var t=e.children;return p.a.createElement(we,null,function(e){var r=e.enabledToggles,n=e.toggleData,a=e.setEnabledToggles;return t(r||[],n,a)})};ke.propTypes={children:h.a.func.isRequired};var Re=ke;r(15),r(20),r(16),r(17);function Ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=p.a.createContext(),Ue=_e.Provider,Ie=_e.Consumer,Ae=function(e){var t=e.children,r=e.className,n=e.remove;return p.a.createElement("aside",{className:`notification ${r}`,onAnimationEnd:n},t)},Fe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xe(this,qe(t).call(this,e))).state={notifications:[]},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,p.a.Component),r=t,(n=[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={id:`${Date.now()}{Math.random()}`,className:t,content:e};return this.setState(function(e){var t=e.notifications;return{notifications:[].concat(Te(t),[r])}}),r.id}},{key:"createError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something went wrong. Try refreshing?";this.create(e,"notifyError")}},{key:"createPersistent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.create(e,`notifyPersistent ${r}`);return{updateNotification:function(e){t.setState(function(t){return{notifications:t.notifications.map(function(t){return t.id===n?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ce(e,t,r[t])})}return e}({},t,{content:e}):t})}})},removeNotification:function(){t.remove(n)}}}},{key:"remove",value:function(e){this.setState(function(t){return{notifications:t.notifications.filter(function(t){return t.id!==e})}})}},{key:"render",value:function(){var e=this,t={createNotification:this.create.bind(this),createPersistentNotification:this.createPersistent.bind(this),createErrorNotification:this.createError.bind(this)},r=this.state.notifications;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ue,{value:t},this.props.children),!!r.length&&p.a.createElement("div",{className:"notifications"},r.map(function(t){var r=t.id,n=t.className,a=t.content;return p.a.createElement(Ae,{key:r,className:n,remove:e.remove.bind(e,r)},a)})))}}])&&Ne(r.prototype,n),a&&Ne(r,a),t}(),De=Ie,$e=(r(164),r(114),r(467)),Le=r(468),Me=r(463),ze=r(87),Ve=r(128),Ge=r(466),He=r(8),Be=r.n(He),We=r(464),Je=(r(165),Math.floor(1e3*Math.random())),Ye="https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-team-avatar.svg?1503510366819",Ze=function(e){return`/@${e.url}`},Ke=function(e){var t=e.id,r=e.hasAvatarImage,n=e.cache,a=void 0===n?Je:n,o=e.size,i=`${CDN_URL}/team-avatar/${t}/${void 0===o?"large":o}?${a}`;return r?i:Ye},Qe=function(e){var t=e.id,r=e.hasCoverImage;return{backgroundColor:e.coverColor,backgroundImage:`url('${function(e){var t=e.id,r=e.hasCoverImage,n=e.cache,a=void 0===n?Je:n,o=e.size,i=`${CDN_URL}/team-cover/${t}/${void 0===o?"large":o}?${a}`;return r?i:"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-cover-wide.svg?1503518400625"}({id:t,hasCoverImage:r,cache:e.cache,size:e.size})}')`}},Xe=Math.floor(1e3*Math.random()),et="https://cdn.glitch.com/f6949da2-781d-4fd5-81e6-1fdd56350165%2Fanon-user-on-project-avatar.svg?1488556279399";function tt(e){var t=e.login,r=e.name;return r||(t?`@${t}`:"Anonymous User")}function rt(e){var t=e.id,r=e.login;return r?`/@${r}`:`/user/${t}`}function nt(e){var t=e.login,r=e.avatarThumbnailUrl;return t&&r?r:et}function at(e){var t=e.avatarUrl;return{backgroundColor:e.color,backgroundImage:`url('${t||et}')`}}function ot(e){var t=e.id,r=e.hasCoverImage,n=e.coverColor,a=e.cache,o=void 0===a?Xe:a,i=e.size,c=`${CDN_URL}/user-cover/${t}/${void 0===i?"large":i}?${o}`;return{backgroundColor:n,backgroundImage:`url('${r?c:"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fdefault-cover-wide.svg?1503518400625"}')`}}var it="https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fcollection-avatar.svg?1540389405633",ct=function(e){return e?(e=e.substring(1),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"black":"white"):"black"},st=function(e){if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)){var t=e.substring(1).split("");return 3==t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),"rgba("+[(t="0x"+t.join(""))>>16&255,t>>8&255,255&t].join(",")+",0.5)"}return!1};function ut(e){if(e.team)return Ze(e.team);if(e.user)return rt(e.user);throw new Error("This collection has no team or user field!")}function lt(e){return`${ut(e)}/${e.url}`}var pt="https://cdn.glitch.com/c53fd895-ee00-4295-b111-7e024967a033%2Ffallback-project-avatar.svg?1528812220123";function ft(e){return`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:CDN_URL}/project-avatar/${e}.png`}function mt(e){return`/~${e.domain}`}function dt(e){return`//${e}.${arguments.length>1&&void 0!==arguments[1]?arguments[1]:PROJECTS_DOMAIN}`}function ht(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:EDITOR_URL;return!t||isNaN(r)||isNaN(n)?`${a}#!/${e}`:`${a}#!/${e}?path=${t}:${r}:${n}`}function vt(e){return`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:EDITOR_URL}#!/remix/${e}`}function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var gt=Array.from(EXTERNAL_ROUTES),Et=p.a.forwardRef(function(e,t){var r=e.to,n=e.children,a=bt(e,["to","children"]);if("string"==typeof r){var o=new URL(window.location.href),i=new URL(r,o);if(i.origin!==o.origin||gt.some(function(e){return i.pathname.startsWith(e)}))return p.a.createElement("a",yt({href:r},a,{ref:t}),n);r={pathname:i.pathname,search:i.search,hash:i.hash}}return p.a.createElement(We.a,yt({to:r},a,{innerRef:t}),n)});Et.propTypes={to:h.a.oneOfType([h.a.string,h.a.object]).isRequired,children:h.a.node.isRequired};var jt=function(e){var t=e.collection,r=e.children,n=bt(e,["collection","children"]);return p.a.createElement(Et,yt({to:lt(t)},n),r)};jt.propTypes={collection:h.a.oneOfType([h.a.shape({team:h.a.PropTypes.shape({url:h.a.string.isRequired}).isRequired,url:h.a.string.isRequired}),h.a.shape({user:h.a.PropTypes.shape({id:h.a.number.isRequired,login:h.a.string}).isRequired,url:h.a.string.isRequired})]).isRequired};var wt=function(e){var t=e.project,r=e.children,n=bt(e,["project","children"]);return p.a.createElement(Et,yt({to:mt(t)},n),r)};wt.propTypes={project:h.a.shape({domain:h.a.string.isRequired}).isRequired};var Ot=function(e){var t=e.team,r=e.children,n=bt(e,["team","children"]);return p.a.createElement(Et,yt({to:Ze(t)},n),r)};Ot.propTypes={team:h.a.shape({url:h.a.string.isRequired}).isRequired};var Pt=function(e){var t=e.user,r=e.children,n=bt(e,["user","children"]);return p.a.createElement(Et,yt({to:rt(t)},n),r)};Pt.propTypes={user:h.a.shape({id:h.a.number.isRequired,login:h.a.string}).isRequired};var kt=Et;function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ct(this,Tt(t).call(this,e))).state={hour:(new Date).getHours()},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,p.a.PureComponent),r=t,(n=[{key:"componentDidMount",value:function(){var e=this;this.interval=window.setInterval(function(){e.setState({hour:(new Date).getHours()})},o.a.convert(5,"minutes","ms"))}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.hour,t="https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-day.svg";return e>=16&&e<=18?t="https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-sunset.svg":(e>18||e<=8)&&(t="https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Flogo-night.svg"),p.a.createElement("img",{className:"logo",src:t,alt:"Glitch"})}}])&&Rt(r.prototype,n),a&&Rt(r,a),t}(),qt=r(54),St=r.n(qt),_t=(r(26),r(203)),Ut=r(204);function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $t=function(e){return e.children};$t.propTypes={children:h.a.element};var Lt=function(e){function t(e){var r,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=At(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Dt(n):a).state={visible:e.startOpen},r.set=r.set.bind(Dt(Dt(r))),r.toggle=r.toggle.bind(Dt(Dt(r))),r.handleClickOutside=r.handleClickOutside.bind(Dt(Dt(r)));var o=r.handleClickOutside.bind(Dt(Dt(r))),i={handleClickOutside:function(){return o},excludeScrollbar:!0};return r.MonitoredComponent=Object(_t.a)($t,i),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,p.a.Component),r=t,(n=[{key:"handleClickOutside",value:function(e){("keyup"!==e.type||["Escape","Esc"].includes(e.key))&&this.setState({visible:!1})}},{key:"set",value:function(e){this.setState({visible:e})}},{key:"toggle",value:function(){this.setState(function(e){return{visible:!e.visible}})}},{key:"render",value:function(){var e={visible:this.state.visible,togglePopover:this.toggle,setVisible:this.set},t=this.props.children(e);Object(Ut.isFragment)(t)&&console.error("PopoverContainer does not support Fragment as the top level item. Please use a different element.");var r=this.props.outer?this.props.outer(e):null;return p.a.createElement(p.a.Fragment,null,r,p.a.createElement(this.MonitoredComponent,{disableOnClickOutside:!this.state.visible,eventTypes:["mousedown","touchstart","keyup"]},t))}}])&&It(r.prototype,n),a&&It(r,a),t}();function Mt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Lt.propTypes={children:h.a.func.isRequired,outer:h.a.func,startOpen:h.a.bool},Lt.defaultProps={startOpen:!1};var Ht=p.a.createContext(),Bt=Ht.Provider,Wt=Ht.Consumer,Jt=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=zt(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Gt(n):a).state={alternateContentVisible:e.startAlternateVisible},r.toggle=r.toggle.bind(Gt(Gt(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,p.a.Component),r=t,(n=[{key:"toggle",value:function(){this.setState(function(e){return{alternateContentVisible:!e.alternateContentVisible}})}},{key:"render",value:function(){return this.state.alternateContentVisible?p.a.createElement(Bt,{value:this.toggle},this.props.alternateContent(this.toggle)):this.props.children(this.toggle)}}])&&Mt(r.prototype,n),a&&Mt(r,a),t}();Jt.propTypes={children:h.a.func.isRequired,alternateContent:h.a.func.isRequired,startAlternateVisible:h.a.bool},Jt.defaultProps={startAlternateVisible:!1};var Yt=function(e){var t=e.children;return p.a.createElement(Wt,null,function(e){return p.a.createElement("button",{className:"button-unstyled pop-over-section pop-over-info clickable-label",onClick:e,"aria-label":"go back"},p.a.createElement("div",{className:"back icon"},p.a.createElement("div",{className:"left-arrow icon"}))," ",p.a.createElement("div",{className:"pop-title"},t))})};Yt.propTypes={children:h.a.node.isRequired};var Zt=r(30),Kt=r.n(Zt),Qt=r(21),Xt=r.n(Qt);function er(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function tr(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){er(o,n,a,i,c,"next",e)}function c(e){er(o,n,a,i,c,"throw",e)}i(void 0)})}}var rr=L.a.create({baseURL:"https://friendly-words.glitch.me/"}),nr=function(){var e=tr(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr.get(t);case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ar=function(){var e=tr(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t);case 2:return r=e.sent,e.abrupt("return",r[0]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ir(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ur=function(){return p.a.createElement("div",{className:"loader"},p.a.createElement("div",{className:"moon"}),p.a.createElement("div",{className:"earth"}),p.a.createElement("div",{className:"asteroid"}),p.a.createElement("div",{className:"asteroid-dust"}))},lr=ur,pr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ir(this,cr(t).call(this,e))).state={maybeData:null,loaded:!1,maybeError:null},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.get().then(function(t){return e.setState({maybeData:t,loaded:!0})},function(t){console.error(t),e.setState({maybeError:t})})}},{key:"render",value:function(){return this.state.loaded?this.props.children(this.state.maybeData):this.state.maybeError?this.props.renderError(this.state.maybeError):this.props.renderLoader()}}])&&or(r.prototype,n),a&&or(r,a),t}();pr.propTypes={children:h.a.func.isRequired,get:h.a.func.isRequired,renderError:h.a.func,renderLoader:h.a.func},pr.defaultProps={renderError:function(){return"Something went wrong, try refreshing?"},renderLoader:ur};var fr=r(86),mr=r.n(fr);function dr(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yr(e,t,r){return t&&vr(e.prototype,t),r&&vr(e,r),e}function br(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?wr(e):t}function gr(e){return(gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Or=function(e){function t(e){var r;return hr(this,t),(r=br(this,gr(t).call(this,e))).state={value:null,error:null},r.onChange=r.onChange.bind(wr(wr(r))),r.update=Xt()(r.update.bind(wr(wr(r))),500),r}return Er(t,p.a.Component),yr(t,[{key:"update",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.update(t);case 3:this.setState(function(e,t){return e.value===t.value?{value:null,error:null}:{error:null}}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.setState(function(r,n){return r.value!==t?{}:n.resetOnError?{error:e.t0,value:null}:{error:e.t0}});case 9:case"end":return e.stop()}},e,this,[[0,6]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){dr(o,n,a,i,c,"next",e)}function c(e){dr(o,n,a,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"onChange",value:function(e){this.update(e),this.setState({value:e})}},{key:"render",value:function(){return this.props.children({value:null!==this.state.value?this.state.value:this.props.value,error:this.state.error,update:this.onChange})}}]),t}();Or.propTypes={value:h.a.oneOfType([h.a.string,h.a.object]).isRequired,update:h.a.func.isRequired,resetOnError:h.a.bool},Or.defaultProps={resetOnError:!0};var Pr=function(e){function t(e){var r;return hr(this,t),(r=br(this,gr(t).call(this,e))).state={value:e.value},r.update=r.update.bind(wr(wr(r))),r}return Er(t,p.a.Component),yr(t,[{key:"update",value:function(e){this.props.update(e.trim()),this.setState({value:e})}},{key:"render",value:function(){return this.props.children({value:this.state.value.trim()===this.props.value?this.state.value:this.props.value,update:this.update})}}]),t}();Pr.propTypes={value:h.a.string.isRequired,update:h.a.func.isRequired};var kr=function(){return p.a.createElement("span",{className:"editable-field-error-icon",role:"img","aria-label":"Warning"},"🚒")},Rr=function(e){var t=e.error,r=e.hideIcon;return p.a.createElement("span",{className:"editable-field-error-message"},!r&&p.a.createElement(kr,null),t)};function Cr(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Rr.propTypes={error:h.a.node.isRequired,hideIcon:h.a.bool};var _r=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=xr(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Sr(n):a).state={id:mr()("editable-field-")},r.textInput=p.a.createRef(),r.onChange=r.onChange.bind(Sr(Sr(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.textInput.current.select()}},{key:"onChange",value:function(e){this.props.update(e.target.value)}},{key:"render",value:function(){var e=["content-editable",this.props.error?"error":""].join(" "),t={id:this.state.id,className:e,value:this.props.value,onChange:this.onChange,spellCheck:!1,autoComplete:"off",placeholder:this.props.placeholder,autoFocus:this.props.autoFocus,onBlur:this.props.blur,type:this.props.inputType},r=!!this.props.error&&p.a.createElement(kr,null),n=!!this.props.error&&p.a.createElement(Rr,{error:this.props.error,hideIcon:!0}),a=!!this.props.prefix&&p.a.createElement("span",{className:"content-editable-affix "+e},this.props.prefix),o=!!this.props.suffix&&p.a.createElement("span",{className:"content-editable-affix "+e},this.props.suffix);return p.a.createElement("label",{htmlFor:t.id},p.a.createElement("span",{className:"editable-field-flex"},a,p.a.createElement("span",{className:"editable-field-input"},this.props.children(t,this.textInput),r),o),n)}}])&&Nr(r.prototype,n),a&&Nr(r,a),t}();_r.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,children:h.a.func.isRequired,blur:h.a.func,prefix:h.a.node,suffix:h.a.node,autoFocus:h.a.bool,error:h.a.string};var Ur=function(e){return p.a.createElement(_r,e,function(e,t){return p.a.createElement("textarea",Tr({},e,{ref:t}))})};Ur.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,blur:h.a.func,prefix:h.a.node,suffix:h.a.node,autoFocus:h.a.bool,error:h.a.string,inputType:h.a.string};var Ir=function(e){return p.a.createElement(_r,e,function(e,t){return p.a.createElement("input",Tr({},e,{ref:t}))})};Ir.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,blur:h.a.func,prefix:h.a.node,suffix:h.a.node,autoFocus:h.a.bool,error:h.a.string,inputType:h.a.string};var Ar=function(e){var t=e.value,r=e.update,n=Cr(e,["value","update"]);return p.a.createElement(Or,{value:t,update:r,resetOnError:!1},function(e){var t=e.value,r=e.update,a=e.error;return p.a.createElement(Pr,{value:t,update:r},function(e){return p.a.createElement(Ir,Tr({},n,e,{error:a}))})})};Ar.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,blur:h.a.func,prefix:h.a.node,suffix:h.a.node,autoFocus:h.a.bool};var Fr=Ar,Dr=function(e){return p.a.createElement(Lt,null,function(t){var r=t.visible,n=t.togglePopover,a=e.children;return e.passToggleToPop&&(a=p.a.Children.map(e.children,function(e){return p.a.cloneElement(e,{togglePopover:n})})),p.a.createElement("div",{className:"button-wrap "+e.containerClass},p.a.createElement("button",{className:e.buttonClass,"data-track":e.dataTrack,onClick:n},e.buttonText),r&&a)})};Dr.propTypes={buttonClass:h.a.string,containerClass:h.a.string,dataTrack:h.a.string,buttonText:h.a.node.isRequired,children:h.a.node.isRequired,passToggleToPop:h.a.bool},Dr.defaultProps={buttonClass:"",containerClass:"",dataTrack:"",passToggleToPop:!1};var $r=Dr;function Lr(){return(Lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Mr(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function zr(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Mr(o,n,a,i,c,"next",e)}function c(e){Mr(o,n,a,i,c,"throw",e)}i(void 0)})}}function Vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(e,t,r){return t&&Gr(e.prototype,t),r&&Gr(e,r),e}function Br(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Zr(e):t}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yr(e,t)}function Yr(e,t){return(Yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(){var e=new URLSearchParams;return e.append("client_id",GITHUB_CLIENT_ID),e.append("scope","user:email"),e.append("redirect_uri",`${APP_URL}/login/github`),`https://github.com/login/oauth/authorize?${e}`}var Qr=function(e){return p.a.createElement(kt,{className:"button button-small button-link has-emoji",to:e.href,onClick:e.onClick},"Sign in with ",e.company," ",p.a.createElement("span",{className:`emoji ${e.emoji}`}))},Xr=function(e){function t(e){var r;return Vr(this,t),(r=Br(this,Wr(t).call(this,e))).state={email:"",done:!1,error:!1},r.onChange=r.onChange.bind(Zr(Zr(r))),r.onSubmit=r.onSubmit.bind(Zr(Zr(r))),r}return Jr(t,p.a.Component),Hr(t,[{key:"onChange",value:function(e){this.setState({email:e.target.value})}},{key:"onSubmit",value:function(){var e=zr(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({done:!0}),e.prev=2,e.next=5,this.props.api.post("/email/sendLoginEmail",{emailAddress:this.state.email});case 5:this.setState({error:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),Object(n.captureException)(e.t0),this.setState({error:!0});case 12:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.email.length>0;return p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(tn,e.props)},startAlternateVisible:!1},function(r){return p.a.createElement("dialog",{className:"pop-over sign-in-pop"},p.a.createElement(Yt,null,"Email Sign In ",p.a.createElement("span",{className:"emoji email"})),p.a.createElement("section",{className:"pop-over-actions first-section"},!e.state.done&&p.a.createElement("form",{onSubmit:e.onSubmit,style:{marginBottom:0}},p.a.createElement("input",{value:e.state.email,onChange:e.onChange,className:"pop-over-input",type:"email",placeholder:"new@user.com"}),p.a.createElement("button",{style:{marginTop:10},className:"button-small button-link",disabled:!t},"Send Link")),e.state.done&&!e.state.error&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"notification notifyPersistent notifySuccess"},"Almost Done"),p.a.createElement("div",null,"Finish signing in from the email sent to ",e.state.email,".")),e.state.done&&e.state.error&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"notification notifyPersistent notifyError"},"Error"),p.a.createElement("div",null,"Something went wrong, email not sent."))),e.state.done&&!e.state.error&&p.a.createElement(nn,{onClick:function(){r(e.props.api)}}))})}}]),t}(),en=function(e){function t(e){var r;return Vr(this,t),(r=Br(this,Wr(t).call(this,e))).state={code:"",done:!1,error:!1},r.onChange=r.onChange.bind(Zr(Zr(r))),r.onSubmit=r.onSubmit.bind(Zr(Zr(r))),r}return Jr(t,p.a.Component),Hr(t,[{key:"onChange",value:function(e){this.setState({code:e.target.value})}},{key:"onSubmit",value:function(){var e=zr(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({done:!0}),e.prev=2,e.next=5,this.props.api.post("/auth/email/"+this.state.code);case 5:r=e.sent,a=r.data,this.props.setUser(a),this.setState({error:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),Object(n.captureException)(e.t0),this.setState({error:!0});case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.code.length>0;return p.a.createElement("dialog",{className:"pop-over sign-in-pop"},p.a.createElement(Yt,null,"Use a sign in code"),p.a.createElement("section",{className:"pop-over-actions first-section"},!this.state.done&&p.a.createElement("form",{onSubmit:this.onSubmit,style:{marginBottom:0}},"Paste your temporary sign in code below",p.a.createElement("input",{value:this.state.code,onChange:this.onChange,className:"pop-over-input",type:"text",placeholder:"cute-unique-cosmos"}),p.a.createElement("button",{style:{marginTop:10},className:"button-small button-link",disabled:!e},"Sign In")),this.state.done&&!this.state.error&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"notification notifyPersistent notifySuccess"},"Success!")),this.state.done&&this.state.error&&p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"notification notifyPersistent notifyError"},"Error"),p.a.createElement("div",null,"Code not found or already used. Try signing in with email."))))}}]),t}(),tn=function(e){return p.a.createElement(ue,null,function(t,r,n){var a=n.login;return p.a.createElement(en,Lr({setUser:a},e))})},rn=function(e){var t=e.onClick;return p.a.createElement("button",{className:"button button-small button-link has-emoji",onClick:function(){t()}},"Sign in with Email ",p.a.createElement("span",{className:"emoji email"}))};rn.propTypes={onClick:h.a.func.isRequired};var nn=function(e){var t=e.onClick;return p.a.createElement("section",{className:"pop-over-actions last-section pop-over-info"},p.a.createElement("button",{className:"button-small button-tertiary button-on-secondary-background",onClick:t},p.a.createElement("span",null,"Use a sign in code")))};nn.propTypes={onClick:h.a.func.isRequired};var an=Object($e.a)(function(e){return p.a.createElement(H,{name:"destinationAfterAuth"},function(t,r){var n=function(){return r({expires:o()().add(10,"minutes").toISOString(),to:{pathname:s.pathname,search:s.search,hash:u}})},a=e.header,i=e.prompt,c=e.api,s=e.location,u=e.hash;return p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(Xr,e)},startAlternateVisible:!1},function(t){return p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(tn,e)},startAlternateVisible:!1},function(e){return p.a.createElement("div",{className:"pop-over sign-in-pop"},a,p.a.createElement("section",{className:"pop-over-actions first-section"},i,p.a.createElement(Qr,{href:(r=new URLSearchParams,r.append("client_id",FACEBOOK_CLIENT_ID),r.append("scope","email"),r.append("redirect_uri",`${APP_URL}/login/facebook`),`https://www.facebook.com/v2.9/dialog/oauth?${r}`),company:"Facebook",emoji:"facebook",onClick:n}),p.a.createElement(Qr,{href:Kr(),company:"GitHub",emoji:"octocat",onClick:n}),p.a.createElement(rn,{onClick:function(){n(),t(c)}})),p.a.createElement(nn,{onClick:function(){n(),e(c)}}));var r})})})});function on(e){return p.a.createElement($r,{buttonClass:"button button-small",buttonText:"Sign in",passToggleToPop:!0},p.a.createElement(an,e))}function cn(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function sn(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){cn(o,n,a,i,c,"next",e)}function c(e){cn(o,n,a,i,c,"throw",e)}i(void 0)})}}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}an.propTypes={api:h.a.func.isRequired,header:h.a.node,prompt:h.a.node,hash:h.a.string};var mn=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=ln(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?fn(n):a).state={teamName:"",isLoading:!1,error:""},r.debouncedValidate=Xt()(r.validate.bind(fn(fn(r))),200),r.handleChange=r.handleChange.bind(fn(fn(r))),r.handleSubmit=r.handleSubmit.bind(fn(fn(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=sn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ar("team-pairs");case 3:t=e.sent,this.setState(function(e){return e.teamName?{}:{teamName:t}}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:this.validate();case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(){var e=sn(regeneratorRuntime.mark(function e(){var t,r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.teamName)){e.next=29;break}return r=Kt()(t),n=null,e.prev=4,e.next=7,this.props.api.get(`userId/byLogin/${r}`);case 7:a=e.sent,"NOT FOUND"!==a.data&&(n="Name in use, try another"),e.next=16;break;case 12:if(e.prev=12,e.t0=e.catch(4),e.t0.response&&404===e.t0.response.status){e.next=16;break}throw e.t0;case 16:return e.prev=16,e.next=19,this.props.api.get(`teams/byUrl/${r}`);case 19:o=e.sent,o.data&&(n="Team already exists, try another"),e.next=28;break;case 24:if(e.prev=24,e.t1=e.catch(16),e.t1.response&&404===e.t1.response.status){e.next=28;break}throw e.t1;case 28:n&&this.setState(function(e){var r=e.teamName;return t===r?{error:n}:{}});case 29:case"end":return e.stop()}},e,this,[[4,12],[16,24]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(){var e=sn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({teamName:t,error:""}),this.debouncedValidate();case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=sn(regeneratorRuntime.mark(function e(t){var r,n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({isLoading:!0}),e.prev=2,r="A team that makes things",e.prev=4,e.next=7,nr("predicates");case 7:n=e.sent,r=`A ${n[0]} team that makes ${n[1]} things`,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:return e.next=15,this.props.api.post("teams",{name:this.state.teamName,url:Kt()(this.state.teamName),hasAvatarImage:!1,coverColor:"",location:"",description:r,backgroundColor:"",hasCoverImage:!1,isVerified:!1});case 15:a=e.sent,o=a.data,this.props.history.push(Ze(o)),e.next=24;break;case 20:e.prev=20,e.t1=e.catch(2),i=e.t1&&e.t1.response&&e.t1.response.data&&e.t1.response.data.message,this.setState({isLoading:!1,error:i||"Something went wrong"});case 24:case"end":return e.stop()}},e,this,[[2,20],[4,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return p.a.createElement("dialog",{className:"pop-over create-team-pop"},p.a.createElement(Yt,null,"Create Team ",p.a.createElement("span",{className:"emoji herb"})),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description"},"Showcase your projects in one place, manage collaborators, and view analytics")),p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement("form",{onSubmit:this.handleSubmit},p.a.createElement(Ir,{value:this.state.teamName,update:this.handleChange,placeholder:"Your Team Name",error:this.state.error}),p.a.createElement("p",{className:"action-description team-url-preview"},"/@",Kt()(this.state.teamName||"Your Team Name")),this.state.isLoading?p.a.createElement(lr,null):p.a.createElement(A,{name:"Create Team submitted"},p.a.createElement("button",{type:"submit",className:"button-small has-emoji"},"Create Team ",p.a.createElement("span",{className:"emoji thumbs_up"}))))),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description"},"You can change this later")))}}])&&un(r.prototype,n),a&&un(r,a),t}();mn.propTypes={api:h.a.func.isRequired};var dn=Object($e.a)(mn),hn=function(e){var t=e.api;return p.a.createElement(ue,null,function(e){return e&&e.login?p.a.createElement(dn,{api:t}):p.a.createElement(an,{api:t,hash:"create-team",header:p.a.createElement(Yt,null,"Sign In"),prompt:p.a.createElement("p",{className:"action-description"},"You'll need to sign in to create a team")})})};function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wn(e,t,r[t])})}return e}function wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var On=function(e){var t=e.showCreateTeam;return e.userIsAnon?p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"description action-description"},p.a.createElement("button",{onClick:t,className:"button-unstyled link"},"Sign in")," to create teams"),p.a.createElement("button",{className:"button button-small has-emoji",disabled:!0},"Create Team ",p.a.createElement("span",{className:"emoji herb"}))):p.a.createElement(A,{name:"Create Team clicked"},p.a.createElement("button",{onClick:t,className:"button button-small has-emoji"},"Create Team ",p.a.createElement("span",{className:"emoji herb"})))};On.propTypes={showCreateTeam:h.a.func.isRequired,userIsAnon:h.a.bool.isRequired};var Pn=function(e){var t=e.teams,r=e.showCreateTeam,n=e.userIsAnon,a=St()(t,function(e){return e.name.toLowerCase()});return p.a.createElement("section",{className:"pop-over-actions"},a.map(function(e){return p.a.createElement("div",{className:"button-wrap",key:e.id},p.a.createElement(Ot,{key:e.id,team:e,className:"button button-small has-emoji button-tertiary"},e.name," ",p.a.createElement("img",{className:"emoji avatar",src:Ke(jn({},e,{size:"small"})),alt:"",width:"16px",height:"16px"})))}),p.a.createElement(On,{showCreateTeam:r,userIsAnon:n}))};Pn.propTypes={teams:h.a.arrayOf(h.a.shape({hasAvatarImage:h.a.bool.isRequired,id:h.a.number.isRequired,name:h.a.string.isRequired,url:h.a.string.isRequired})),showCreateTeam:h.a.func.isRequired,userIsAnon:h.a.bool.isRequired};var kn=function(e){var t=e.togglePopover,r=e.showCreateTeam,n=e.user,a=e.signOut,o=e.showNewStuffOverlay,i=n.name||"Anonymous",c={backgroundColor:n.color};return p.a.createElement("dialog",{className:"pop-over user-options-pop"},p.a.createElement(Pt,{user:n,className:"user-info"},p.a.createElement("section",{className:"pop-over-actions user-info"},p.a.createElement("img",{className:"avatar",src:nt(n),alt:"Your avatar",style:c}),p.a.createElement("div",{className:"info-container"},p.a.createElement("p",{className:"name",title:i},i),n.login&&p.a.createElement("p",{className:"user-login",title:n.login},"@",n.login)))),p.a.createElement(Pn,{teams:n.teams,showCreateTeam:r,userIsAnon:!n.login}),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("button",{onClick:function(e){t(),o(),e.stopPropagation()},className:"button-small has-emoji button-tertiary button-on-secondary-background"},"New Stuff ",p.a.createElement("span",{className:"emoji dog-face"})),p.a.createElement(Et,{to:"https://support.glitch.com",className:"button button-small has-emoji button-tertiary button-on-secondary-background"},"Support ",p.a.createElement("span",{className:"emoji ambulance"})),p.a.createElement("button",{onClick:function(){(n.login||window.confirm("You won't be able to sign back in under this same anonymous account.\nAre you sure you want to sign out?"))&&(t(),analytics.track("Logout"),analytics.reset(),a())},className:"button-small has-emoji button-tertiary button-on-secondary-background"},"Sign Out ",p.a.createElement("span",{className:"emoji balloon"}))))};kn.propTypes={togglePopover:h.a.func.isRequired,showCreateTeam:h.a.func.isRequired,user:h.a.object.isRequired,signOut:h.a.func.isRequired,showNewStuffOverlay:h.a.func.isRequired};var Rn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bn(this,gn(t).call(this,e))).state={active:"#create-team"===window.location.hash},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){this.setState({active:!1})}},{key:"render",value:function(){return this.props.children(this.state.active)}}])&&yn(r.prototype,n),a&&yn(r,a),t}();function Cn(e){var t=nt(e.user),r={backgroundColor:e.user.color};return p.a.createElement(Rn,null,function(n){return p.a.createElement(Lt,{startOpen:n},function(a){var o=a.togglePopover,i=a.visible;return p.a.createElement("div",{className:"button user-options-pop-button","data-tooltip":"User options","data-tooltip-right":"true"},p.a.createElement("button",{className:"user",onClick:o,disabled:!e.user.id},p.a.createElement("img",{className:"user-avatar",src:t,style:r,width:"30px",height:"30px",alt:"User options"}),p.a.createElement("span",{className:"down-arrow icon"})),i&&p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(hn,e)},startAlternateVisible:n},function(t){return p.a.createElement(kn,vn({},e,{togglePopover:o,showCreateTeam:t}))}))})})}function Tn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Nn(e,t,r[t])})}return e}function Nn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Cn.propTypes={user:h.a.shape({avatarThumbnailUrl:h.a.string,color:h.a.string.isRequired,id:h.a.number.isRequired,login:h.a.string,teams:h.a.array.isRequired}).isRequired,api:h.a.func.isRequired};var xn=function(e){var t=e.name,r=e.src,n=e.color,a=e.srcFallback,o=e.type;return p.a.createElement("div",{"data-tooltip":t,"data-tooltip-left":"true"},p.a.createElement("img",{width:"32px",height:"32px",src:r,alt:t,style:n?{backgroundColor:n}:null,onError:a?function(e){return e.target.src=a}:null,className:o+"-avatar"}))};xn.propTypes={name:h.a.string.isRequired,src:h.a.string.isRequired,srcFallback:h.a.string,color:h.a.string,type:h.a.string};var qn=function(e){var t=e.team;return p.a.createElement(xn,{name:t.name,src:Ke(Tn({},t,{size:"small"})),srcFallback:Ye,type:"team"})};qn.propTypes={team:h.a.shape({id:h.a.number.isRequired,name:h.a.string.isRequired,hasAvatarImage:h.a.bool.isRequired}).isRequired};var Sn=function(e){var t=e.user,r=e.suffix,n=void 0===r?"":r;return p.a.createElement(xn,{name:tt(t)+n,src:nt(t),color:t.color,srcFallback:et,type:"user"})};Sn.propTypes={user:h.a.shape({id:h.a.number.isRequired,login:h.a.string,name:h.a.string,avatarThumbnailUrl:h.a.string,color:h.a.string.isRequired}).isRequired,suffix:h.a.string};var _n=function(e){var t=e.users,r=e.extraClass,n=void 0===r?"":r;return p.a.createElement("ul",{className:`users ${n}`},t.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement("span",{className:"user"},p.a.createElement(Sn,{user:e})))}))};_n.propTypes={users:h.a.array.isRequired,extraClass:h.a.string};var Un=function(e){return p.a.createElement(Pt,{user:e,className:"user"},p.a.createElement(Sn,{user:e}))};Un.propTypes={id:h.a.number.isRequired,login:h.a.string,name:h.a.string,avatarThumbnailUrl:h.a.string,color:h.a.string.isRequired};var In=function(e){var t=e.users,r=e.extraClass,n=void 0===r?"":r,a=e.teams,o=void 0===a?[]:a;return t.length?p.a.createElement("ul",{className:`users ${n}`},t.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(Pt,{user:e,className:"user"},p.a.createElement(Sn,{user:e})))})):p.a.createElement("ul",{className:`users ${n}`},o.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(Ot,{team:e,className:"team"},p.a.createElement(qn,{team:e})))}))};In.propTypes={users:h.a.array.isRequired,extraClass:h.a.string,teams:h.a.array};var An=function(e){var t=e.extraClass,r=void 0===t?"":t;return p.a.createElement("ul",{className:`users ${r}`},p.a.createElement("li",null,p.a.createElement("span",{className:"user made-by-glitch"},p.a.createElement(xn,{name:"Glitch Team",src:"https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Fglitch-team-avatar.svg?1489266029267",color:"#74ecfc"}))))},Fn=function(e){var t=e.glitchTeam,r=void 0!==t&&t,n=e.users,a=e.extraClass,o=e.teams;return r?p.a.createElement(An,{extraClass:a}):p.a.createElement(In,{users:n,extraClass:a,teams:o})};Fn.propTypes={glitchTeam:h.a.bool};var Dn=Fn;function $n(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ln=function(e){var t=e.onClick,r=e.isActive,n=e.isPrivate,a=e.cdnUrl,o=$n(e,["onClick","isActive","isPrivate","cdnUrl"]),i=`button-unstyled result result-project ${r?"active":""} ${n?"private":""}`,c=o.id,s=o.domain,u=o.description,l=o.users;return p.a.createElement("div",null,p.a.createElement("button",{className:i,onClick:t,"data-project-id":c},p.a.createElement("img",{className:"avatar",src:ft(c,a),alt:`Project avatar for ${s}`,onError:function(e){return e.target.src="https://cdn.glitch.com/c53fd895-ee00-4295-b111-7e024967a033%2Ffallback-project-avatar.svg?1528812220123"}}),p.a.createElement("div",{className:"results-info"},p.a.createElement("div",{className:"result-name",title:s},s),u.length>0&&p.a.createElement("div",{className:"result-description"},u),!!l&&l.length>0&&p.a.createElement(_n,{users:l}))),p.a.createElement(wt,{project:o,className:"view-result-link button button-small button-link",target:"_blank",rel:"noopener noreferrer"},"View →"))};Ln.propTypes={onClick:h.a.func.isRequired,domain:h.a.string.isRequired,description:h.a.string.isRequired,id:h.a.string.isRequired,users:h.a.array,isActive:h.a.bool,isPrivate:h.a.bool};var Mn=Ln;function zn(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hn(e){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wn(){return(Wn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Jn=function(e){var t=e.projects;return p.a.createElement("div",{className:"pop-over new-project-pop"},p.a.createElement("section",{className:"pop-over-actions results-list"},p.a.createElement("div",{className:"results"},t.length?t.map(function(e){return p.a.createElement(D,{key:e.id,to:vt(e.domain),name:"New Project Clicked",properties:{baseDomain:e.domain,origin:"community new project pop"}},p.a.createElement(Mn,Wn({},e,{cdnUrl:"https://cdn.glitch.com",users:[],onClick:function(){}})))}):p.a.createElement(lr,null))),p.a.createElement("section",{className:"pop-over-actions last-section pop-over-info"},p.a.createElement("button",{className:"button-small button-tertiary button-on-secondary-background",onClick:Yn},p.a.createElement("span",null,"Clone from Git Repo"))))};Jn.propTypes={projects:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,domain:h.a.string.isRequired})).isRequired};var Yn=function(){var e=window.prompt("Paste the full URL of your repository","https://github.com/orgname/reponame.git");e&&(window.location.href=`/edit/#!/import/git?url=${e}`)},Zn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Gn(this,Hn(t).call(this,e))).state={projects:[]},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,p.a.Component),r=t,(n=[{key:"load",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=["a0fcd798-9ddf-42e5-8205-17158d4bf5bb","cb519589-591c-474f-8986-a513f22dbf88","929980a8-32fc-4ae7-a66f-dddb3ae4912c"],e.next=3,this.props.api.get(`https://api.glitch.com/projects/byIds?ids=${t.join(",")}`,{headers:{Authorization:""}});case 3:r=e.sent,n=r.data,this.setState({projects:n});case 6:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){zn(o,n,a,i,c,"next",e)}function c(e){zn(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){return p.a.createElement($r,{buttonClass:"button-small",dataTrack:"open new-project pop",buttonText:"New Project"},p.a.createElement(Jn,{projects:this.state.projects}))}}])&&Vn(r.prototype,n),a&&Vn(r,a),t}();Zn.propTypes={api:h.a.any.isRequired};var Kn=Zn,Qn=r(207),Xn=r.n(Qn),ea=r(208),ta=r.n(ea),ra=r(209),na=r.n(ra),aa=r(210),oa=r.n(aa),ia=ta()({html:!0,breaks:!0,linkify:!0,typographer:!0}).disable("smartquotes").use(na.a).use(oa.a),ca=function(e){var t=e.children;return t?p.a.createElement("span",{className:"markdown-content",dangerouslySetInnerHTML:{__html:t}}):null};ca.propTypes={children:h.a.string.isRequired};var sa=p.a.memo(function(e){var t=e.children,r=ia.render(t||"");return p.a.createElement(ca,null,r)});sa.propTypes={children:h.a.string.isRequired};var ua=p.a.memo(function(e){var t=e.children,r=e.length,n=ia.render(t||""),a=Xn()(n,r,{ellipsis:"…"});return p.a.createElement(ca,null,a)});ua.propTypes={children:h.a.string.isRequired,length:h.a.number.isRequired};var la=sa,pa=r(70);function fa(){return(fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ma(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function da(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ha(e){return(ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ya,ba=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(ya=pa.a.map(function(e){return e.id}))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(ya)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),ga=function(e){var t=e.setShowNewStuff,r=e.showNewStuff,n=e.newStuff;return p.a.createElement("dialog",{className:"pop-over overlay new-stuff-overlay overlay-narrow",open:!0},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("figure",{className:"new-stuff-avatar"}),p.a.createElement("div",{className:"overlay-title"},"New Stuff"),p.a.createElement("div",null,p.a.createElement("label",{className:"button button-small",htmlFor:"showNewStuff"},p.a.createElement("input",{id:"showNewStuff",className:"button-checkbox",type:"checkbox",checked:r,onChange:function(e){return t(e.target.checked)}}),"Keep showing me these"))),p.a.createElement("section",{className:"pop-over-actions"},n.map(function(e){var t=e.id,r=e.title,n=e.body,a=e.link;return p.a.createElement("article",{key:t},p.a.createElement("div",{className:"title"},r),p.a.createElement("div",{className:"body"},p.a.createElement(la,null,n)),!!a&&p.a.createElement("p",null,p.a.createElement(kt,{className:"link",to:a},"Read the blog post →")))})))};ga.propTypes={setShowNewStuff:h.a.func.isRequired,showNewStuff:h.a.bool.isRequired,newStuff:h.a.arrayOf(h.a.shape({id:h.a.number.isRequired,title:h.a.string.isRequired,body:h.a.string.isRequired,link:h.a.string}).isRequired).isRequired};var Ea=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=da(this,ha(t).call(this,e))).state={log:pa.a},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,p.a.Component),r=t,(n=[{key:"showNewStuff",value:function(e){var t=this;e(!0);var r=pa.a.filter(function(e){return e.id>t.props.newStuffReadId});this.setState({log:r.length?r:pa.a}),this.props.setNewStuffReadId(ba)}},{key:"renderOuter",value:function(e){var t=this,r=e.visible,n=e.setVisible,a=this.props,o=a.children,i=a.isSignedIn,c=a.showNewStuff,s=a.newStuffReadId,u=i&&c&&s<ba,l=function(){window.analytics&&window.analytics.track("Pupdate"),t.showNewStuff(n)};return p.a.createElement(p.a.Fragment,null,o(l),u&&p.a.createElement("div",{className:"new-stuff-footer"},p.a.createElement("button",{className:"button-unstyled new-stuff opens-pop-over",onClick:l},p.a.createElement("figure",{className:"new-stuff-avatar","data-tooltip":"New","data-tooltip-top":"true","data-tooltip-persistent":"true",alt:"New Stuff"}))),r&&p.a.createElement("div",{className:"overlay-background",role:"presentation"}))}},{key:"render",value:function(){var e=this;return p.a.createElement(Lt,{outer:this.renderOuter.bind(this)},function(t){return t.visible?p.a.createElement(ga,fa({},e.props,{newStuff:e.state.log})):null})}}])&&ma(r.prototype,n),a&&ma(r,a),t}();Ea.propTypes={children:h.a.func.isRequired,isSignedIn:h.a.bool.isRequired,showNewStuff:h.a.bool.isRequired,newStuffReadId:h.a.number.isRequired,setNewStuffReadId:h.a.func.isRequired};var ja=function(e){var t=e.children,r=e.isSignedIn;return p.a.createElement(ge,{name:"showNewStuff",default:!0},function(e,n){return p.a.createElement(ge,{name:"newStuffReadId",default:0},function(a,o){return p.a.createElement(Ea,{isSignedIn:r,showNewStuff:e,newStuffReadId:a,setShowNewStuff:n,setNewStuffReadId:o},t)})})};ja.propTypes={children:h.a.func.isRequired,isSignedIn:h.a.bool.isRequired};var wa=ja;function Oa(){return(Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ka(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ta=function(){return p.a.createElement(D,{name:"Resume Coding clicked",className:"button button-small button-cta",to:EDITOR_URL},"Resume Coding")},Na=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ka(this,Ra(t).call(this,e))).state={value:e.defaultValue||"",submitted:!1},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}(t,p.a.Component),r=t,(n=[{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.state.value&&this.setState({submitted:!0})}},{key:"render",value:function(){var e=this.state,t=e.value,r=e.submitted;return p.a.createElement("form",{action:"/search",method:"get",role:"search",onSubmit:this.onSubmit.bind(this)},p.a.createElement("input",{className:"search-input",name:"q",placeholder:"bots, apps, users",value:t,onChange:this.onChange.bind(this)}),r&&p.a.createElement(Ge.a,{to:`/search?q=${t}`,push:!0}))}}])&&Pa(r.prototype,n),a&&Pa(r,a),t}();Na.propTypes={defaultValue:h.a.string};var xa=function(e){var t=e.api,r=e.maybeUser,n=e.clearUser,a=e.searchQuery,o=e.showNewStuffOverlay;return p.a.createElement("header",{role:"banner"},p.a.createElement("div",{className:"header-info"},p.a.createElement(kt,{to:"/"},p.a.createElement(xt,null))),p.a.createElement("nav",null,p.a.createElement(Na,{defaultValue:a}),p.a.createElement(Kn,{api:t}),!!r&&!!r.projects.length&&p.a.createElement(Ta,null),!(r&&r.login)&&p.a.createElement(on,{api:t}),!!r&&p.a.createElement(Cn,{user:r,signOut:n,showNewStuffOverlay:o,api:t})))};xa.propTypes={maybeUser:h.a.object,api:h.a.func.isRequired};var qa=function(e){var t=Object.assign({},e);return p.a.createElement(ue,null,function(e,r,n){var a=n.clear;return p.a.createElement(wa,{isSignedIn:!!e&&!!e.login},function(r){return p.a.createElement(xa,Oa({},t,{maybeUser:e,clearUser:a,showNewStuffOverlay:r}))})})},Sa=function(e){var t=e.href,r=e.track,n=e.children;return p.a.createElement("p",null,p.a.createElement(kt,{to:t,"data-track":"footer → "+r},n))};function _a(){return p.a.createElement("footer",{role:"contentinfo"},p.a.createElement(Sa,{href:"/about",track:"about"},"About Glitch ",p.a.createElement("span",{role:"img","aria-label":""},"🔮")),p.a.createElement(Sa,{href:"https://medium.com/glitch",track:"blog"},"Blog ",p.a.createElement("span",{role:"img","aria-label":""},"📰")),p.a.createElement(Sa,{href:"/help/",track:"faq"},"Help Center ",p.a.createElement("span",{role:"img","aria-label":""},"☂️")),p.a.createElement(Sa,{href:"http://status.glitch.com/",track:"system status"},"System Status ",p.a.createElement("span",{role:"img","aria-label":""},"🚥")),p.a.createElement(Sa,{href:"/legal",track:"legal stuff"},"Legal Stuff ",p.a.createElement("span",{role:"img","aria-label":""},"👮‍")),p.a.createElement("hr",null),p.a.createElement(Sa,{href:"/teams",track:"platforms"},p.a.createElement("img",{className:"for-platforms-icon",src:"https://cdn.glitch.com/be1ad2d2-68ab-404a-82f4-6d8e98d28d93%2Ffor-platforms-icon.svg?1506442305188",alt:""}),p.a.createElement("span",{className:"for-platforms-text"},"Glitch Teams")))}Sa.propTypes={href:h.a.string.isRequired,track:h.a.string.isRequired,children:h.a.node.isRequired};var Ua=r(215),Ia=r.n(Ua);function Aa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fa(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var La=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Fa(this,Da(t).call(this,e))).state={active:!1},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,p.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Ia.a,{easterEgg:function(){return e.setState({active:!0})}}),!!this.state.active&&this.props.children)}}])&&Aa(r.prototype,n),a&&Aa(r,a),t}();La.propTypes={children:h.a.node.isRequired};var Ma=function(e){var t=e.children,r=e.api,n=e.searchQuery;return p.a.createElement("div",{className:"content"},p.a.createElement(Be.a,null,p.a.createElement("title",null,"Glitch")),p.a.createElement(qa,{api:r,searchQuery:n}),p.a.createElement(E,null,t),p.a.createElement(_a,null),p.a.createElement(E,{fallback:null},p.a.createElement(La,null,p.a.createElement(Ge.a,{to:"/secret",push:!0}))))};Ma.propTypes={api:h.a.any.isRequired,children:h.a.node.isRequired,searchQuery:h.a.string};var za=Ma,Va=function(){return p.a.createElement("section",{className:"categories",role:"navigation"},p.a.createElement("h2",null,"More Ideas"),p.a.createElement("ul",null,ze.a.map(function(e){var t=e.avatarUrl,r=e.color,n=e.id,a=e.name,o=e.url;return p.a.createElement("li",{key:n},p.a.createElement(kt,{className:"category-box-link",to:`/${o}`},p.a.createElement("div",{className:"category-box centered",style:{backgroundColor:r}},p.a.createElement("img",{src:t,alt:a})),p.a.createElement("div",{className:"category-box-label centered",style:{backgroundColor:r}},a)))})))},Ga=r(35),Ha=r.n(Ga),Ba=r(213),Wa=r(212);function Ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ya(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qa=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ya(this,Za(t).call(this,e))).state={browserSupported:r.browserSatisfiesRequirements()},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,p.a.Component),r=t,(n=[{key:"browserSatisfiesRequirements",value:function(){try{return new URLSearchParams,!0}catch(e){return console.log("Sorry, you don't have the necessary JavaScript features to run Glitch code editors. Try applying your latest system updates, or try again with a different web browser.",e),!1}}},{key:"render",value:function(){return p.a.createElement("div",{className:"glitch-embed-wrap"},this.state.browserSupported?p.a.createElement("iframe",{title:"embed",src:`${APP_URL}/embed/#!/embed/${this.props.domain}?path=README.md&previewSize=100`,alt:`${this.props.domain} on Glitch`,allow:"geolocation; microphone; camera; midi; encrypted-media",height:"100%",width:"100%",border:"0"}):p.a.createElement("div",{className:"error-container"},p.a.createElement("img",{className:"error-image",src:"https://cdn.glitch.com/7138972f-76e1-43f4-8ede-84c3cdd4b40a%2Ftelescope_404.svg?1543258683849",alt:"",width:"50%",height:"50%"}),p.a.createElement("div",{className:"error-msg"},p.a.createElement("h2",null,"The web browser you're using is missing some important Javascript features"),p.a.createElement("p",null,"To use this app, please try applying your latest system updates, or try again with a different web browser."))))}}])&&Ja(r.prototype,n),a&&Ja(r,a),t}();Qa.propTypes={domain:h.a.string.isRequired,alt:h.a.string};var Xa=Qa,eo=function(e){var t=e.image,r=e.mask,n=e.title,a=e.appDomain,o=e.blogUrl,i=e.body,c=e.color;return p.a.createElement("div",{className:"featured-embed"},p.a.createElement("div",{className:"mask-container"},p.a.createElement(kt,{to:`culture${o}`},p.a.createElement("img",{className:"mask "+r,src:t,alt:""}))),p.a.createElement("div",{className:"content",style:{backgroundColor:c}},p.a.createElement("div",{className:"description"},p.a.createElement(kt,{to:`culture${o}`},p.a.createElement("h2",null,n)),p.a.createElement("p",{dangerouslySetInnerHTML:{__html:i}}),p.a.createElement(kt,{to:`culture${o}`,className:"learn-more"},p.a.createElement("button",{className:"button-small"},"Learn More →"))),p.a.createElement(Xa,{domain:a})))};eo.propTypes={image:h.a.string.isRequired,mask:h.a.string.isRequired,title:h.a.string.isRequired,appDomain:h.a.string.isRequired,blogUrl:h.a.string.isRequired,body:h.a.string.isRequired,color:h.a.string.isRequired};var to=eo;function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function no(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oo(e,t){return(oo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var io=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=no(this,ao(t).call(this,e))).state={posts:window.ZINE_POSTS.slice(0,4),masks:Ha()([1,2,3,4,5],4)},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oo(e,t)}(t,p.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;return this.state.posts.length?p.a.createElement("section",null,p.a.createElement("ul",{className:"zine-items"},this.state.posts.map(function(t,r){var n=t.id,a=t.title,o=t.url,i=t.feature_image,c=t.primary_tag;return p.a.createElement("li",{key:n,className:"zine-item"},p.a.createElement(kt,{to:`/culture${o}`},!!i&&p.a.createElement("div",{className:"mask-container"},p.a.createElement("img",{className:`mask mask-${e.state.masks[r]}`,src:i,alt:""})),p.a.createElement("div",{className:"zine-item-meta"},p.a.createElement("h1",{className:"zine-item-title"},a),!!c&&p.a.createElement("p",{className:"zine-item-tag"},c.name))))}))):null}}])&&ro(r.prototype,n),a&&ro(r,a),t}(),co=function(e){var t=e.img,r=e.link,n=e.title;return p.a.createElement(kt,{to:r,"data-track":"featured-project","data-track-label":n},p.a.createElement("div",{className:"featured-container"},p.a.createElement("img",{className:"featured",src:t,alt:""}),p.a.createElement("p",{className:"project-name"},n)))};co.propTypes={img:h.a.string.isRequired,link:h.a.string.isRequired,title:h.a.string.isRequired};var so=function(e){var t=e.featured;return p.a.createElement("section",{className:"featured"},p.a.createElement("div",{className:"community-pick-embed-container"},p.a.createElement(to,Wa.a)),p.a.createElement("section",null,p.a.createElement("ul",{className:"featured-items"},t.map(function(e){return p.a.createElement("li",{key:e.link},p.a.createElement(co,e))}))),p.a.createElement(io,null))};so.propTypes={featured:h.a.array.isRequired};var uo=function(e){var t=e.isAuthorized;return p.a.createElement(so,{featured:Ba.a,isAuthorized:t})};uo.propTypes={isAuthorized:h.a.bool};var lo=uo,po=function(){return p.a.createElement("div",{className:"wistia_responsive_padding"},p.a.createElement("div",{className:"wistia_responsive_wrapper"},p.a.createElement("div",{className:"wistia_embed wistia_async_i0m98yntdb",videofoam:"true"})))},fo=function(e){var t=e.children;return p.a.createElement(Lt,null,function(e){var r=e.visible,n=e.setVisible;return p.a.createElement("details",{onToggle:function(e){return n(e.target.open)},open:r,className:"overlay-container"},p.a.createElement("summary",null,t),p.a.createElement("dialog",{className:"overlay video-overlay"},p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement(po,null))))})};fo.propTypes={children:h.a.node.isRequired};var mo=fo,ho=r(211),vo=r.n(ho),yo=r(31),bo=r.n(yo);var go=function(e){var t=e.colorOuter,r=e.colorInner,n=e.domain,a=e.question,o=e.tags,i=e.userAvatar,c=e.userColor,s=e.userLogin,u=e.path,l=e.line,f=e.character;return p.a.createElement(p.a.Fragment,null,p.a.createElement("img",{className:"help-icon",src:"https://cdn.glitch.com/f7224274-1330-4022-a8f2-8ae09dbd68a8%2Fask-for-help.svg?1494954687906",alt:""}),p.a.createElement(kt,{to:ht(n,u,l,f),"data-track":"question","data-track-label":n},p.a.createElement("div",{className:"project",style:{backgroundColor:t}},p.a.createElement("div",{className:"project-container",style:{backgroundColor:r}},p.a.createElement("img",{className:"avatar",src:i,style:{backgroundColor:c},alt:""}),p.a.createElement("div",{className:"button"},"Help ",s),p.a.createElement("div",{className:"description question",title:a},function(e){return e.length>140?e.substring(0,139)+"…":e}(a)),p.a.createElement("div",{className:"description tags"},o.map(function(e){return p.a.createElement("div",{key:e,className:"tag",title:e},function(e){return e.substring(0,15)}(e))}))))))};go.propTypes={colorOuter:h.a.string.isRequired,colorInner:h.a.string.isRequired,domain:h.a.string.isRequired,question:h.a.string.isRequired,tags:h.a.arrayOf(h.a.string.isRequired).isRequired,userAvatar:h.a.string.isRequired,userColor:h.a.string.isRequired,userLogin:h.a.string.isRequired,path:h.a.string,line:h.a.number,character:h.a.number};var Eo=go;function jo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){wo(e,t,r[t])})}return e}function wo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Po(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function ko(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ro(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var No=["八(＾□＾*)","(ノ^_^)ノ","ヽ(*ﾟｰﾟ*)ﾉ","♪(┌・。・)┌","ヽ(๏∀๏ )ﾉ","ヽ(^。^)丿"],xo=function(e){var t=e.animating,r=e.callback;return p.a.createElement("div",{className:"loader-pie",title:"Looking for more questions..."},p.a.createElement("div",{className:"left-side"},p.a.createElement("div",{className:`slice ${t?"animated":""}`,onAnimationEnd:r})),p.a.createElement("div",{className:"right-side"},p.a.createElement("div",{className:`slice ${t?"animated":""}`})))};xo.propTypes={animating:h.a.bool.isRequired,callback:h.a.func.isRequired};var qo=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ro(this,Co(t).call(this,e))).state={kaomoji:"",loading:!0,questions:[]},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(t,p.a.Component),r=t,(a=[{key:"load",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.prev=1,e.next=4,this.props.api.get("projects/questions");case 4:t=e.sent,r=t.data,a=r.map(function(e){return JSON.parse(e.details)}).filter(function(e){return!!e}).slice(0,this.props.max).map(function(e){var t=Oo(bo()({luminosity:"light",count:2}),2);return jo({colorInner:t[0],colorOuter:t[1]},e)}),this.setState({kaomoji:vo()(No),questions:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0),Object(n.captureException)(e.t0);case 14:this.setState({loading:!1});case 15:case"end":return e.stop()}},e,this,[[1,10]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Po(o,n,a,i,c,"next",e)}function c(e){Po(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.load()}},{key:"render",value:function(){var e=this,t=this.state,r=t.kaomoji,n=t.loading,a=t.questions;return p.a.createElement("section",{className:"questions"},p.a.createElement("h2",null,p.a.createElement(kt,{to:"/questions"},"Help Others, Get Thanks →")," ",p.a.createElement(xo,{animating:!n,callback:function(){return e.load()}})),p.a.createElement("article",{className:"projects"},a.length?p.a.createElement(E,null,p.a.createElement("ul",{className:"projects-container"},a.map(function(e){return p.a.createElement("li",{key:e.questionId},p.a.createElement(Eo,e))}))):p.a.createElement(p.a.Fragment,null,r," Looks like nobody is asking for help right now."," ",p.a.createElement(kt,{className:"general-link",to:"/help/how-can-i-get-help-with-code-in-my-project/"},"Learn about helping"))))}}])&&ko(r.prototype,a),o&&ko(r,o),t}();qo.propTypes={api:h.a.any.isRequired,max:h.a.number},qo.defaultProps={max:3};var So=qo,_o=r(206),Uo=r.n(_o);function Io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ao(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ao(this,Fo(t).call(this,e))).ref=p.a.createRef(),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(t,p.a.Component),r=t,(n=[{key:"syncColor",value:function(){this.ref.current.querySelector(".background").setAttribute("fill",this.props.backgroundColor)}},{key:"componentDidMount",value:function(){this.syncColor()}},{key:"componentDidUpdate",value:function(){this.syncColor()}},{key:"render",value:function(){return p.a.createElement("span",{ref:this.ref},p.a.createElement(Uo.a,{svg:'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="159px" height="147px" viewBox="0 0 159 147" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\x3c!-- Generator: Sketch 52.3 (67297) - http://www.bohemiancoding.com/sketch --\x3e<title>collection-avatar</title><desc>Created with Sketch.</desc><defs><polygon id="path-1" points="0 0 159 0 159 132 0 132"></polygon><polygon id="path-3" points="0 0 124 0 124 102 0 102"></polygon></defs><g id="collection-avatar" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><polygon id="frame" fill="#FFFB98" points="0 147 159 147 159 15 0 15"></polygon><rect id="Rectangle" stroke="#979797" fill="#FFFFFF" fill-rule="nonzero" x="19.5" y="34.5" width="119" height="93"></rect><polygon class="background" fill="#45C1F7" points="17 132 141 132 141 30 17 30"></polygon><g id="picture-frame-copy"><g id="Group-4" transform="translate(0.000000, 15.000000)"><mask id="mask-2" fill="white"><use xlink:href="#path-1"></use></mask><g id="Clip-3"></g><path d="M4.41666667,127.550562 L154.583333,127.550562 L154.583333,4.4494382 L4.41666667,4.4494382 L4.41666667,127.550562 Z M159,136.449438 L-3.55271368e-15,136.449438 C-2.43947222,136.449438 -4.41666667,134.457573 -4.41666667,132 L-4.41666667,4.4408921e-15 C-4.41666667,-2.45757303 -2.43947222,-4.4494382 -3.55271368e-15,-4.4494382 L159,-4.4494382 C161.439472,-4.4494382 163.416667,-2.45757303 163.416667,4.4408921e-15 L163.416667,132 C163.416667,134.457573 161.439472,136.449438 159,136.449438 Z" id="Fill-2" fill="#222222" mask="url(#mask-2)"></path></g><g id="Group-9" transform="translate(63.000000, 0.000000)" fill="#222222"><path d="M5.39511061,14.06 L29.8773227,14.06 C28.7177318,8.99988 23.6693227,5.18 17.6362167,5.18 C11.6031106,5.18 6.55617121,8.99988 5.39511061,14.06 M32.3331864,18.5 L2.93924697,18.5 C1.72086818,18.5 0.734701515,17.50692 0.734701515,16.28 C0.734701515,7.7108 8.31686818,0.74 17.6362167,0.74 C26.9555652,0.74 34.5377318,7.7108 34.5377318,16.28 C34.5377318,17.50692 33.5515652,18.5 32.3331864,18.5" id="Fill-5"></path><polygon id="Fill-7" points="92.9008682 146.683984 73.3215652 130.551984 76.1139894 127.115424 95.6932924 143.247424"></polygon></g><g id="Group-13" transform="translate(17.000000, 30.000000)"><mask id="mask-4" fill="white"><use xlink:href="#path-3"></use></mask><g id="Clip-12"></g><path d="M4.42857143,97.5652174 L119.571429,97.5652174 L119.571429,4.43478261 L4.42857143,4.43478261 L4.42857143,97.5652174 Z M124,106.434783 L-8.8817842e-14,106.434783 C-2.44604762,106.434783 -4.42857143,104.449478 -4.42857143,102 L-4.42857143,-2.48689958e-14 C-4.42857143,-2.44947826 -2.44604762,-4.43478261 -8.8817842e-14,-4.43478261 L124,-4.43478261 C126.446048,-4.43478261 128.428571,-2.44947826 128.428571,-2.48689958e-14 L128.428571,102 C128.428571,104.449478 126.446048,106.434783 124,106.434783 Z" id="Combined-Shape" fill="#222222" mask="url(#mask-4)"></path><path d="" id="Path-2" stroke="#979797" fill-rule="nonzero" mask="url(#mask-4)"></path></g><g id="corners" transform="translate(0.000000, 16.000000)" fill="#222222"><polygon id="Fill-14" points="140.496387 18 138 14.8389049 155.503613 0 158 3.16109514"></polygon><polygon id="Fill-15" points="17.5036132 18 0 3.16109514 2.49638681 0 20 14.8389049"></polygon><polygon id="Fill-16" points="2.74602549 131 0 127.487672 19.2539745 111 22 114.512328"></polygon></g><path d="M19.4882812,94.8593842 C44.7643229,101.507816 67.0872396,101.059896 86.4570312,93.515625 C115.511719,82.1992188 108.802734,83.5839844 116.876953,81.3066406 C124.951172,79.0292969 136.530273,77.3828125 138.008789,78.2841797 C138.068685,83.0810547 138.235352,100.222656 138.508789,129.708984 C70.5751953,130.298828 31.0029297,130.347656 19.7919922,129.855469 C19.9182943,114.765309 19.8170573,103.099947 19.4882812,94.8593842 Z" id="Path-3" stroke="#222222" stroke-width="4" fill="#05D458" fill-rule="nonzero"></path></g><circle id="Oval" stroke="#000000" stroke-width="4" fill="#E8DE1B" fill-rule="nonzero" cx="40.8486328" cy="59.6357422" r="16"></circle><path d="M60.3348254,77.5704551 C58.9993547,80.6825277 55.8689424,82.8666205 52.2201169,82.8666205 C51.0942738,82.8666205 50.017785,82.6586888 49.0281483,82.2797234 C47.8967722,83.2670781 46.4079181,83.8666205 44.7767575,83.8666205 C41.2366977,83.8666205 38.3669121,81.042731 38.3669121,77.5592868 C38.3669121,74.362029 40.7845266,71.7204047 43.9190364,71.3079336 C44.4206293,69.9153121 45.2738944,68.6864115 46.3737706,67.7246127 C46.0662734,66.8112197 45.8994141,65.8316421 45.8994141,64.8125 C45.8994141,59.8419373 49.8685147,55.8125 54.7646484,55.8125 C58.4425588,55.8125 61.5973616,58.0862365 62.9395833,61.3246338 C63.8172067,61.0552858 64.7505289,60.9101562 65.7182989,60.9101562 C70.8661431,60.9101562 75.0392954,65.0165679 75.0392954,70.0820833 C75.0392954,75.1475988 70.8661431,79.2540104 65.7182989,79.2540104 C63.7128485,79.2540104 61.8553227,78.6307987 60.3348254,77.5704551 Z" id="Combined-Shape" stroke="#000000" stroke-width="4" fill="#FFFFFF" fill-rule="nonzero"></path><path d="M121.554267,48.9330178 C121.561107,48.9330067 121.567948,48.9330011 121.57479,48.9330011 C128.315872,48.9330011 133.780598,54.3103309 133.780598,60.9436034 C133.780598,67.5768759 128.315872,72.9542057 121.57479,72.9542057 C118.736067,72.9542057 116.123683,72.0006337 114.050407,70.4012578 C112.497386,71.7531025 110.455645,72.5736517 108.21914,72.5736517 C103.3565,72.5736517 99.4145508,68.6947458 99.4145508,63.9098727 C99.4145508,62.7888762 99.6309116,61.7176053 100.024784,60.7342885 C98.6643533,59.5776974 97.8034355,57.8676186 97.8034355,55.9596774 C97.8034355,52.4762332 100.673221,49.6523438 104.213281,49.6523438 C104.670308,49.6523438 105.116163,49.69941 105.546114,49.7888854 C106.871499,46.5129316 110.045383,44.2060547 113.75,44.2060547 C117.122846,44.2060547 120.055763,46.1182434 121.554267,48.9330178 Z" id="Combined-Shape-Copy" stroke="#000000" stroke-width="4" fill="#FFFFFF" fill-rule="nonzero"></path><path d="M82.3606089,42.5137208 C86.0065614,42.5895456 88.9384448,45.5215419 88.9384448,49.1273647 C88.9384448,52.7808104 85.928606,55.7425133 82.2157816,55.7425133 C79.6428183,55.7425133 77.4074568,54.3201849 76.2774254,52.2309783 C75.8404163,52.3576604 75.3778461,52.425639 74.8991407,52.425639 C72.2100723,52.425639 70.0301517,50.2805815 70.0301517,47.634519 C70.0301517,44.9884565 72.2100723,42.843399 74.8991407,42.843399 C75.2392876,42.843399 75.5712879,42.8777207 75.8917602,42.9430366 C76.3155392,41.4927371 77.63826,40.4348278 79.2043688,40.4348278 C80.6113173,40.4348278 81.8218341,41.2886374 82.3606089,42.5137208 Z" id="Combined-Shape-Copy-2" stroke="#000000" stroke-width="4" fill="#FFFFFF" fill-rule="nonzero" transform="translate(79.484298, 48.088671) rotate(-27.000000) translate(-79.484298, -48.088671) "></path></g>\n</svg>'}))}}])&&Io(r.prototype,n),a&&Io(r,a),t}();$o.propTypes={backgroundColor:h.a.string.isRequired};var Lo=function(e){var t=e.projectName,r=e.collectionName,n=e.url;return p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,"Added ",p.a.createElement("b",null,p.a.createElement("span",{className:"project-name"},t))," to collection ",p.a.createElement("b",null,p.a.createElement("span",{className:"collection-name"},r))),p.a.createElement("a",{href:n,rel:"noopener noreferrer",className:"button button-small button-tertiary button-in-notification-container notify-collection-link"},"Take me there"))};Lo.propTypes={projectName:h.a.string,collectionName:h.a.string.isRequired,url:h.a.string.isRequired};var Mo=function(e){var t=e.onClick,r=e.project,n=e.collection,a=e.currentUserLogin,o=e.isActive,i=e.togglePopover,c="button-unstyled result result-collection";o&&(c+=" active");var s=`/@${a}/${n.url}`;return p.a.createElement(De,null,function(e){var a=e.createNotification;return p.a.createElement("div",null,p.a.createElement("button",{className:c,onClick:function(){return function(e,t,r,n,a,o){try{e(t,r),o(),a(p.a.createElement(Lo,{projectName:t.domain,collectionName:r.name,url:n}),"notifySuccess")}catch(i){a(p.a.createElement("p",null,"Something went wrong. Try refreshing and adding the project again."),"notifyError")}}(t,r,n,s,a,i)},"data-project-id":r.id},p.a.createElement("div",{className:"avatar",id:"avatar-collection-"+n.id},p.a.createElement($o,{backgroundColor:n.coverColor})),p.a.createElement("div",{className:"results-info"},p.a.createElement("div",{className:"result-name",title:n.name},n.name),n.description.length>0&&p.a.createElement("div",{className:"result-description"},n.description))),p.a.createElement("a",{href:s,className:"view-result-link button button-small button-link",target:"_blank",rel:"noopener noreferrer"},"View →"))})};Mo.propTypes={onClick:h.a.func,collection:h.a.object.isRequired,currentUserLogin:h.a.string.isRequired,isActive:h.a.bool,project:h.a.object.isRequired,togglePopover:h.a.func.isRequired};var zo=Mo;function Vo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Go(e,t,r[t])})}return e}function Go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ho(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Bo(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Ho(o,n,a,i,c,"next",e)}function c(e){Ho(o,n,a,i,c,"throw",e)}i(void 0)})}}function Wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ko=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Jo(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Zo(n):a).state={working:!1,error:null,query:"",collectionPair:"wondrous-collection",maybeCollections:null},r.handleChange=r.handleChange.bind(Zo(Zo(r))),r.handleSubmit=r.handleSubmit.bind(Zo(Zo(r))),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,p.a.Component),r=t,(a=[{key:"loadCollections",value:function(){var e=Bo(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.get(`collections/?userId=${this.props.currentUser.id}`);case 2:t=e.sent,this.setState({maybeCollections:St()(t.data,function(e){return e.updatedAt}).reverse()});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Bo(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadCollections(),e.prev=1,e.next=4,ar("collection-pairs");case 4:t=e.sent,this.setState(function(e){return{query:e.query||t,collectionPair:t}}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({query:e,error:null})}},{key:"handleSubmit",value:function(){var e=Bo(regeneratorRuntime.mark(function e(t){var r,a,o,i,c,s,u,l,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({working:!0}),r=this.state.query,e.prev=3,a=r,o=Kt()(r),i=this.state.collectionPair.split("-"),c=`A ${i[1]} of projects that does ${i[0]} things`,it,s=bo()({luminosity:"light"}),e.next=12,this.props.api.post("collections",{name:a,description:c,url:o,avatarUrl:"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fcollection-avatar.svg?1540389405633",coverColor:s});case 12:return u=e.sent,l=u.data,p=Vo({user:this.props.currentUser},l),e.next=17,this.props.api.patch(`collections/${p.id}/add/${this.props.project.id}`);case 17:f=lt(p),this.setState({newCollectionUrl:f}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),e.t0&&e.t0.response&&e.t0.response.data&&e.t0.response.data.message?this.setState({error:e.t0.response.data.message}):Object(n.captureException)(e.t0);case 24:case"end":return e.stop()}},e,this,[[3,21]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,r=t.error,n=t.maybeCollections,a=t.query,o=this.state.error;return n&&a&&n.some(function(e){return e.url===Kt()(a)})&&(o="You already have a collection with this url"),this.state.newCollectionUrl?p.a.createElement(Ge.a,{to:this.state.newCollectionUrl}):p.a.createElement("dialog",{className:"pop-over add-project-to-collection-pop wide-pop"},this.props.fromProject?null:p.a.createElement(Yt,null,p.a.createElement("img",{src:ft(this.props.project.id),alt:`Project avatar for ${this.props.project.domain}`})," Add ",this.props.project.domain," to collection"),n?n.length?p.a.createElement("section",{className:"pop-over-actions results-list"},p.a.createElement("ul",{className:"results"},n.map(function(t){return t.projects.every(function(t){return t.id!==e.props.project.id})&&p.a.createElement("li",{key:t.id},p.a.createElement(A,{name:"Project Added to Collection",context:{groupId:t.team?t.team.id:0}},p.a.createElement(zo,{onClick:e.props.addProjectToCollection,currentUserLogin:e.props.currentUser.login,project:e.props.project,collection:t,togglePopover:e.props.togglePopover})))}))):p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description"},"Organize your favorite projects in one place")):p.a.createElement(lr,null),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("div",{className:"pop-title collection-title"},"Add to a new collection"),p.a.createElement("form",{onSubmit:this.handleSubmit},p.a.createElement(Ir,{id:"collection-name",className:"pop-over-input create-input",value:a,update:this.handleChange,placeholder:"New Collection Name",error:r||o}),this.state.working?p.a.createElement(lr,null):p.a.createElement(A,{name:"Create Collection clicked",properties:function(e){return Vo({},e,{origin:`${e.origin} project`})}},p.a.createElement("button",{type:"submit",className:"create-collection button-small",disabled:!!o},"Create")))))}}])&&Wo(r.prototype,a),o&&Wo(r,o),t}();Ko.propTypes={addProjectToCollection:h.a.func,api:h.a.func.isRequired,currentUser:h.a.object,togglePopover:h.a.func,project:h.a.object.isRequired,fromProject:h.a.bool};var Qo=Ko;function Xo(){return(Xo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ei(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ti=function(e){var t=e.onClick,r=e.text,n=e.emoji;return p.a.createElement("button",{className:"button-small has-emoji button-tertiary",onClick:t},p.a.createElement("span",null,r," "),p.a.createElement("span",{className:`emoji ${n}`}))},ri=function(e){var t=e.addToCollectionPopover,r=ei(e,["addToCollectionPopover"]);function n(e,t,n){var a=e.target.closest("li");a.addEventListener("animationend",n,{once:!0}),a.classList.add(t),r.togglePopover()}function a(e){n(e,"slide-up",function(){return r.featureProject(r.project.id)})}return p.a.createElement("dialog",{className:"pop-over project-options-pop"},!!r.addPin&&p.a.createElement("section",{className:"pop-over-actions"},!r.project.private&&p.a.createElement(ti,{onClick:a,text:"Feature",emoji:"clapper"}),p.a.createElement(A,{name:"Project Pinned"},p.a.createElement(ti,{onClick:function(e){n(e,"slide-up",function(){return r.addPin(r.project.id)})},text:"Pin ",emoji:"pushpin"}))),!!r.removePin&&p.a.createElement("section",{className:"pop-over-actions"},!r.project.private&&p.a.createElement(ti,{onClick:a,text:"Feature",emoji:"clapper"}),p.a.createElement(A,{name:"Project Un-Pinned"},p.a.createElement(ti,{onClick:function(e){n(e,"slide-down",function(){return r.removePin(r.project.id)})},text:"Un-Pin ",emoji:"pushpin"}))),!!r.addProjectToCollection&&p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement(ti,Xo({onClick:t},r,{text:"Add to My Collection ",emoji:"framed-picture"}))),r.joinTeamProject&&!r.currentUserIsOnProject&&p.a.createElement("section",{className:"pop-over-actions collaborator-actions"},p.a.createElement(ti,{onClick:function(){r.joinTeamProject(r.project.id,r.currentUser)},text:"Join Project ",emoji:"rainbow"})),r.leaveTeamProject&&r.currentUserIsOnProject&&p.a.createElement("section",{className:"pop-over-actions collaborator-actions"},p.a.createElement(A,{name:"Leave Project clicked"},p.a.createElement(ti,{onClick:function(){r.leaveTeamProject(r.project.id,r.currentUser.id)},text:"Leave Project ",emoji:"wave"}))),r.leaveProject&&r.project.users.length>1&&r.currentUserIsOnProject&&p.a.createElement("section",{className:"pop-over-actions collaborator-actions"},p.a.createElement(A,{name:"Leave Project clicked"},p.a.createElement(ti,{onClick:function(e){var t=`Once you leave this project, you'll lose access to it unless someone else invites you back. \n\n Are sure you want to leave ${r.project.domain}?`;window.confirm(t)&&r.leaveProject(r.project.id,e)},text:"Leave Project ",emoji:"wave"}))),(r.currentUserIsOnProject||!!r.removeProjectFromTeam)&&!r.removeProjectFromCollection&&p.a.createElement("section",{className:"pop-over-actions danger-zone last-section"},!!r.removeProjectFromTeam&&p.a.createElement(ti,{onClick:function(){return r.removeProjectFromTeam(r.project.id)},text:"Remove Project ",emoji:"thumbs_down"}),r.currentUserIsOnProject&&!r.removeProjectFromCollection&&p.a.createElement(A,{name:"Delete Project clicked"},p.a.createElement(ti,{onClick:function(e){n(e,"slide-down",function(){return r.deleteProject(r.project.id)})},text:"Delete Project ",emoji:"bomb"}))),r.removeProjectFromCollection&&p.a.createElement("section",{className:"pop-over-actions danger-zone last-section"},r.removeProjectFromCollection&&p.a.createElement(ti,{onClick:function(){return r.removeProjectFromCollection(r.project)},text:"Remove from Collection",emoji:"thumbs_down"})))},ni=function(e){var t=Object.assign({},e);return p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(Qo,Xo({},t,{api:t.api,togglePopover:t.togglePopover}))}},function(e){return p.a.createElement(ri,Xo({},t,{addToCollectionPopover:e}))})};function ai(e,t){var r=e.projectOptions,n=void 0===r?{}:r,a=e.project,o=e.api,i=e.currentCollectionId,c=Object.assign({},t);if(0===Object.keys(n).length)return null;function s(e){if(a.users.map(function(e){return e.id}).includes(e.id))return!0}return p.a.createElement($r,{buttonClass:"project-options button-borderless opens-pop-over button-small",buttonText:p.a.createElement("div",{className:"down-arrow","aria-label":"options"}),containerClass:"project-options-pop-btn",passToggleToPop:!0},p.a.createElement(ue,null,function(e,t,r,u){return p.a.createElement(ni,Xo({},u,c,n,{project:a,currentCollectionId:i,api:o,currentUser:e,currentUserIsOnProject:s(e)}))}))}function oi(){return(oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ii(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}ni.propTypes={api:h.a.any,currentUser:h.a.object,project:h.a.shape({users:h.a.array.isRequired}),togglePopover:h.a.func.isRequired,addPin:h.a.func,removePin:h.a.func,deleteProject:h.a.func,leaveProject:h.a.func,removeProjectFromTeam:h.a.func,joinTeamProject:h.a.func,leaveTeamProject:h.a.func,featureProject:h.a.func,currentUserIsOnProject:h.a.bool.isRequired},ni.defaultProps={currentUserIsOnProject:!1},ai.propTypes={api:h.a.func,currentCollectionId:h.a.number,project:h.a.object.isRequired};var ci=function(e){var t=e.api,r=e.project,n=e.collectionColor,a=e.homepageCollection,o=ii(e,["api","project","collectionColor","homepageCollection"]);return p.a.createElement("li",null,p.a.createElement(Dn,{glitchTeam:r.showAsGlitchTeam,users:r.users,extraClass:"single-line",teams:r.teams}),p.a.createElement(ai,oi({project:r,api:t},o)),p.a.createElement(wt,{project:r,className:"button-area"},p.a.createElement("div",{className:["project",r.private?"private-project":""].join(" "),style:r.private?{}:{backgroundColor:n,borderBottomColor:n},"data-track":"project","data-track-label":r.domain},p.a.createElement("div",{className:"project-container"},p.a.createElement("img",{className:"avatar",src:ft(r.id),alt:`${r.domain} avatar`}),p.a.createElement("div",{className:"button"},p.a.createElement("span",{className:"project-badge private-project-badge","aria-label":"private"}),p.a.createElement("div",{className:"project-name"},r.domain)),a?p.a.createElement("div",{className:"description"},p.a.createElement(ua,{length:80},r.description)):p.a.createElement("div",{className:"description",style:r.private?{}:{color:o.category?"black":n?ct(n):"black"}},p.a.createElement(ua,{length:80},r.description)),p.a.createElement("div",{className:"overflow-mask",style:r.private?{}:{backgroundColor:n}})))))};ci.propTypes={api:h.a.func,category:h.a.bool,currentUser:h.a.object,project:h.a.shape({description:h.a.string.isRequired,domain:h.a.string.isRequired,id:h.a.string.isRequired,private:h.a.bool.isRequired,showAsGlitchTeam:h.a.bool.isRequired,users:h.a.array.isRequired,teams:h.a.array}).isRequired,collectionColor:h.a.string,homepageCollection:h.a.bool,projectOptions:h.a.object};var si=ci;function ui(){return(ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pi(e){return(pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function di(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var hi=function(e){var t=e.title,r=e.placeholder,n=e.extraClasses,a=di(e,["title","placeholder","extraClasses"]);return p.a.createElement("article",{className:"projects "+n},p.a.createElement("h2",null,t),!(!r||a.projects.length)&&p.a.createElement("div",{className:"placeholder"},r),p.a.createElement(vi,a))};hi.propTypes={api:h.a.any,projects:h.a.array.isRequired,title:h.a.node.isRequired,placeholder:h.a.node,extraClasses:h.a.string};var vi=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=pi(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?mi(n):a).state={expanded:!1},r.handleClick=r.handleClick.bind(mi(mi(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(t,p.a.Component),r=t,(n=[{key:"handleClick",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props.maxCollapsedProjects,t=this.props.projects.length-e,r=this.props,n=r.projects,a=di(r,["projects"]),o=!1;return this.state.expanded||(o=t>0,n=n.slice(0,e)),p.a.createElement(p.a.Fragment,null,p.a.createElement(yi,ui({projects:n},a)),o&&p.a.createElement("button",{className:"button-tertiary",onClick:this.handleClick},"Show ",t," More"))}}])&&li(r.prototype,n),a&&li(r,a),t}();vi.propTypes={projects:h.a.array.isRequired,maxCollapsedProjects:h.a.number},vi.defaultProps={maxCollapsedProjects:12};var yi=function(e){var t=e.projectCount,r=e.collectionUrl,n=di(e,["projectCount","collectionUrl"]);return p.a.createElement("ul",{className:"projects-container"},n.projects.map(function(e){return p.a.createElement(si,ui({key:e.id},{project:e},n))}),n.homepageCollection&&p.a.createElement(kt,{to:r,className:"collection-view-all"},"View all ",t," projects →"))};yi.propTypes={projects:h.a.array.isRequired,homepageCollection:h.a.bool,collectionUrl:h.a.string,projectCount:h.a.number};var bi=hi;function gi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Ei(e,t,r[t])})}return e}function Ei(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ji(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function wi(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){ji(o,n,a,i,c,"next",e)}function c(e){ji(o,n,a,i,c,"throw",e)}i(void 0)})}}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ri(e,t){return(Ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ci(){return(Ci=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ti=function(e){var t=e.category,r=e.projectCount,n={projects:t.projects||[],categoryColor:t.color,homepageCollection:!0,collectionUrl:t.url};return p.a.createElement("article",{className:"projects",style:{backgroundColor:t.backgroundColor}},p.a.createElement("header",{className:"category"},p.a.createElement(kt,{className:"category-name",to:t.url},p.a.createElement("h2",null,t.name)),p.a.createElement("span",{className:"category-image-container"},p.a.createElement(kt,{className:"category-image",to:t.url},p.a.createElement("img",{height:"80px",width:"120px",src:t.avatarUrl,alt:t.name}))),p.a.createElement("p",{className:"category-description"},t.description)),p.a.createElement(yi,Ci({},n,{projectCount:r,collectionColor:t.color})))};Ti.propTypes={category:h.a.shape({avatarUrl:h.a.string.isRequired,backgroundColor:h.a.string.isRequired,description:h.a.string.isRequired,name:h.a.string.isRequired,url:h.a.string.isRequired}).isRequired};var Ni=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pi(this,ki(t).call(this,e))).state={categories:[],categoriesProjectCount:{}},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ri(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=wi(regeneratorRuntime.mark(function e(){var t,r,n,a,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.get("categories/random?numCategories=3");case 2:t=e.sent,r=t.data,n=r.filter(function(e){return!!e.projects}),a=Ha()(n,3),this.setState({categories:a}),a.forEach(function(){var e=wi(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,o.props.api.get(`categories/${r}`);case 3:n=e.sent,a=n.data,o.setState(function(e){return{categoriesProjectCount:gi({},e.categoriesProjectCount,Ei({},r,a.projects.length))}});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.categories.map(function(t){return p.a.createElement(Ti,{key:t.id,category:t,projectCount:e.state.categoriesProjectCount[t.id]})})}}])&&Oi(r.prototype,n),a&&Oi(r,a),t}();Ni.propTypes={api:h.a.any.isRequired};var xi=Ni,qi=function(e){var t=e.team;return p.a.createElement(Ot,{team:t,className:"user"},p.a.createElement(qn,{team:t}))};qi.propTypes={team:h.a.shape({id:h.a.number.isRequired,name:h.a.string.isRequired,url:h.a.string.isRequired}).isRequired};var Si=function(e){var t=e.teams;return p.a.createElement("ul",{className:"users teams-information"},t.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(qi,{team:e}))}))};Si.propTypes={teams:h.a.array.isRequired};var _i=Si;function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ii(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ai=function(e){var t=e.name,r=e.uploadImage,n=e.clearImage;return p.a.createElement("div",{className:"upload-image-buttons"},!!r&&p.a.createElement(A,{name:`Upload ${t}`},p.a.createElement("button",{className:"button button-small button-tertiary",onClick:r},"Upload ",t)),!!n&&p.a.createElement(A,{name:`Clear ${t}`},p.a.createElement("button",{className:"button button-small button-tertiary",onClick:n},"Clear ",t)))};Ai.propTypes={name:h.a.string.isRequired,uploadImage:h.a.func,clearImage:h.a.func};var Fi=function(e){var t=e.style,r=e.children,n=e.buttons;return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"avatar-container"},p.a.createElement("div",{className:"user-avatar",style:t}),n),p.a.createElement("div",{className:"profile-information"},r))};Fi.propTypes={style:h.a.object.isRequired,children:h.a.node.isRequired,buttons:h.a.element};var Di=function(e){var t=e.children;return p.a.createElement("div",{className:"profile-info"},t)};Di.propTypes={children:h.a.node.isRequired};var $i=function(e){var t=e.buttons,r=e.children,n=e.className,a=Ii(e,["buttons","children","className"]);return p.a.createElement("div",Ui({className:`cover-container ${n}`},a),r,t)};$i.propTypes={buttons:h.a.node,children:h.a.node.isRequired,className:h.a.string},$i.defaultProps={className:""};var Li=function(e){var t=e.avatarStyle,r=e.avatarButtons,n=e.coverStyle,a=e.coverButtons,o=e.children,i=e.teams;return p.a.createElement($i,{style:n,buttons:a},p.a.createElement(Di,null,p.a.createElement("div",{className:"avatar-container"},p.a.createElement("div",{className:"user-avatar",style:t}),r),p.a.createElement("div",{className:"profile-information"},o)),!!i&&!!i.length&&p.a.createElement("div",{className:"teams-information"},p.a.createElement(_i,{teams:i})))},Mi=r(205),zi=r.n(Mi);function Vi(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gi(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Hi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bi(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Zi(e,t,r[t])})}return e}function Zi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ki(e,t){return e.reduce(function(e,r){return Yi({},e,Zi({},r,t))},{})}function Qi(e,t){return e.reduce(function(e,r){return Yi({},e,Zi({},r[t],r))},{})}var Xi=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Bi(this,Wi(t).call(this,e))).state={},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(t,p.a.Component),r=t,(n=[{key:"loadProjects",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,n,a,o,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i.length,r=new Array(t),n=0;n<t;n++)r[n]=i[n];if(r.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.props.api.get(`projects/byIds?ids=${r.join(",")}`);case 5:a=e.sent,o=a.data,this.setState(Qi(o,"id"));case 8:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Gi(o,n,a,i,c,"next",e)}function c(e){Gi(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"ensureProjects",value:function(e){var t=this,r=e.map(function(e){return e.id}),n=Object.keys(this.state).filter(function(e){return t.state[e]&&!r.includes(e)});n.length&&this.setState(Ki(n,void 0));var a=r.filter(function(e){return void 0===t.state[e]});a.length&&(this.setState(Ki(a,null)),zi()(a,100).forEach(function(e){return t.loadProjects.apply(t,Vi(e))}))}},{key:"componentDidMount",value:function(){this.ensureProjects(this.props.projects)}},{key:"componentDidUpdate",value:function(){this.ensureProjects(this.props.projects)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.projects.map(function(t){return e.state[t.id]||t});return p.a.createElement(ue,null,function(t){return r(pe(n,t),e.loadProjects.bind(e))})}}])&&Hi(r.prototype,n),a&&Hi(r,a),t}();Xi.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,projects:h.a.array.isRequired};var ec=Xi,tc=function(e){var t=e.children,r=e.user,n=e.api;return p.a.createElement("section",{className:"profile recent-projects"},p.a.createElement("h2",null,p.a.createElement(Pt,{user:r},"Your Projects →")),p.a.createElement($i,{style:ot(r)},p.a.createElement("div",{className:"profile-avatar"},p.a.createElement("div",{className:"user-avatar-container"},p.a.createElement(Pt,{user:r},p.a.createElement("div",{className:`user-avatar ${r.login?"":"anon-user-avatar"}`,style:at(r),alt:""})),!r.login&&p.a.createElement("div",{className:"anon-user-sign-up"},p.a.createElement(on,{api:n})))),p.a.createElement("article",{className:"projects"},t)))};tc.propTypes={children:h.a.node.isRequired,user:h.a.shape({avatarUrl:h.a.string,color:h.a.string.isRequired,coverColor:h.a.string,hasCoverImage:h.a.bool.isRequired,id:h.a.number.isRequired,login:h.a.string}).isRequired};var rc=function(e){var t=e.api;return p.a.createElement(ue,null,function(e,r){return p.a.createElement(tc,{user:e,api:t},r?p.a.createElement(ec,{api:t,projects:e.projects.slice(0,3)},function(e){return p.a.createElement(yi,{projects:e})}):p.a.createElement(lr,null))})};rc.propTypes={api:h.a.any.isRequired};var nc=rc,ac=r(214),oc=r.n(ac),ic=r(68),cc=function(e,t){var r;switch(t){case"project":r=e.domain;break;case"user":r=e.login;break;case"collection":case"team":r=e.name}return r},sc=function(e,t,r,n,a){var o;if("home"==r)o=`- [Glitch Home Page](${APP_URL})`;else{var i=APP_URL+function(e,t){switch(t){case"project":return mt(e);case"collection":return lt(e);case"team":return Ze(e);case"user":return rt(e)}}(n,r),c=uc(r);o=`\n- ${c} Name: [${cc(n,r)}](${i})\n\n- ${c} Id: ${n.id}`}return`${o}\n\n- Submitted by: [${tt(e)}](${APP_URL}${rt(e)})\n\n- Contact: ${lc(e,t)}\n\n- Message: ${a}`},uc=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},lc=function(e,t){return t||(Array.isArray(e.emails)&&e.emails.find(function(e){return e.primary})).email};function pc(){return(pc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mc(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function dc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hc(e){return(hc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vc(e,t){return(vc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bc=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=hc(t).call(this,e),"user"==(r=!a||"object"!=typeof a&&"function"!=typeof a?yc(n):a).props.reportedType?r.defaultReason="This user profile doesn't seem appropriate for Glitch because...":"home"==r.props.reportedType?r.defaultReason="[Something here] doesn't seem appropriate for Glitch because...":r.defaultReason=`This ${e.reportedType} doesn't seem appropriate for Glitch because...`,r.state={reason:r.defaultReason,email:"",emailError:"",reasonError:"",submitted:!1,loading:!1},r.submitReport=r.submitReport.bind(yc(yc(r))),r.reasonOnChange=r.reasonOnChange.bind(yc(yc(r))),r.formatRaw=r.formatRaw.bind(yc(yc(r))),r.getUserInfoSection=r.getUserInfoSection.bind(yc(yc(r))),r.emailOnChange=r.emailOnChange.bind(yc(yc(r))),r.validateNotEmpty=r.validateNotEmpty.bind(yc(yc(r))),r.validateReason=r.validateReason.bind(yc(yc(r))),r.validateEmail=r.validateEmail.bind(yc(yc(r))),r.renderForm=r.renderForm.bind(yc(yc(r))),r.renderSuccess=r.renderSuccess.bind(yc(yc(r))),r.renderFailure=r.renderFailure.bind(yc(yc(r))),r.pickFormBody=r.pickFormBody.bind(yc(yc(r))),r.debouncedValidateEmail=Xt()(function(){return r.validateEmail()},200),r.debouncedValidateReason=Xt()(function(){return r.validateReason()},200),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vc(e,t)}(t,p.a.Component),r=t,(a=[{key:"formatRaw",value:function(){return sc(this.props.currentUser,this.state.email,this.props.reportedType,this.props.reportedModel,this.state.reason)}},{key:"submitReport",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.validateEmail(),r=this.validateReason(),""==t.emailError&&""==r.reasonError){e.next=5;break}return e.abrupt("return");case 5:return this.setState({loading:!0}),e.next=8,L.a.post("https://support-poster.glitch.me/post",{raw:this.formatRaw(),title:(a=this.props.reportedModel,o=this.props.reportedType,"home"==o?"Abuse Report for Glitch Homepage":`Abuse Report for ${o} ${cc(a,o)}`)});case 8:this.setState({submitted:!0,submitSuccess:!0,loading:!1}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),Object(n.captureException)(e.t0),this.setState({submitted:!0,submitSuccess:!1,loading:!1});case 15:case"end":return e.stop()}var a,o},e,this,[[0,11]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){mc(o,n,a,i,c,"next",e)}function c(e){mc(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"validateNotEmpty",value:function(e,t,r){var n;return n=""===this.state[e]?fc({},t,`${r} is required`):fc({},t,""),this.setState(n),n}},{key:"validateReason",value:function(){var e=this.validateNotEmpty("reason","reasonError","A description of the issue");return""==e.reasonError&&this.state.reason===this.defaultReason&&(e={reasonError:"Reason is required"},this.setState(e)),e}},{key:"validateEmail",value:function(){if(this.props.currentUser.login)return{emailError:""};var e=this.validateNotEmpty("email","emailError","Email");return""!=e.emailError?e:(e=Object(ic.parseOneAddress)(this.state.email)?{emailError:""}:{emailError:"Please enter a valid email"},this.setState(e),e)}},{key:"reasonOnChange",value:function(e){this.setState({reason:e}),this.debouncedValidateReason()}},{key:"emailOnChange",value:function(e){this.setState({email:e}),this.debouncedValidateEmail()}},{key:"getUserInfoSection",value:function(){var e=this;return this.props.currentUser.login?p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description right"},"from ",p.a.createElement("strong",null,this.props.currentUser.login))):p.a.createElement("section",{className:"pop-over-info"},p.a.createElement(Ir,{value:this.state.email,update:this.emailOnChange,blur:function(){return e.debouncedValidateEmail()},placeholder:"your@email.com",error:this.state.emailError,inputType:"email"}))}},{key:"renderForm",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("h1",{className:"pop-title"},"Report Abuse")),p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement(Ur,{value:this.state.reason,update:this.reasonOnChange,blur:function(){return e.debouncedValidateReason()},autoFocus:!0,placeholder:"",error:this.state.reasonError})),this.getUserInfoSection(),p.a.createElement("section",{className:"pop-over-actions"},this.state.loading?p.a.createElement(lr,null):p.a.createElement("button",{className:"button button-small",onClick:this.submitReport},"Submit Report")))}},{key:"renderSuccess",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("h1",{className:"pop-title"},"Report Abuse")),p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement("div",{className:"notification notifySuccess"},"Report Sent"),p.a.createElement("p",{className:"pop-description tight-line"},"Thanks for helping to keep Glitch a safe, friendly community"," ",p.a.createElement("span",{className:"emoji park",role:"img","aria-label":""}))))}},{key:"renderFailure",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("h1",{className:"pop-title"},"Failed to Send"," ",p.a.createElement("span",{className:"emoji sick",role:"img","aria-label":""}))),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description"},"But you can still send us your message by emailing the details below to ",p.a.createElement("b",null,"support@glitch.com"))),p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement("textarea",{className:"content-editable tall-text traditional",value:oc()(this.formatRaw()),readOnly:!0})))}},{key:"pickFormBody",value:function(){return this.state.submitted?this.state.submitSuccess?this.renderSuccess():this.renderFailure():this.renderForm()}},{key:"render",value:function(){return p.a.createElement("dialog",{className:"pop-over wide-pop top-right report-abuse-pop"},this.pickFormBody())}}])&&dc(r.prototype,a),o&&dc(r,o),t}();bc.propTypes={reportedType:h.a.string.isRequired,reportedModel:h.a.object.isRequired,currentUser:h.a.object};var gc=function(e){return p.a.createElement(ue,null,function(t){return p.a.createElement(bc,pc({currentUser:t},e))})},Ec=function(e){return p.a.createElement($r,{buttonClass:"button-small button-tertiary margin",buttonText:"Report Abuse"},p.a.createElement(gc,{reportedType:e.reportedType,reportedModel:e.reportedModel}))};Ec.propTypes={reportedType:h.a.string.isRequired,reportedModel:h.a.object};var jc=Ec;function wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kc(e,t){return(kc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rc(e){var t=document.createElement("script");t.src=e,t.async=!0,document.head.appendChild(t)}var Cc=function(e){var t=e.classes,r=e.imgUrl,n=e.title,a=e.description;return p.a.createElement("div",{className:"callout "+t},p.a.createElement("img",{className:"badge",src:r,alt:n}),p.a.createElement("div",{className:"window"},p.a.createElement("div",{className:"title"},n),p.a.createElement("div",{className:"description"},a)))};Cc.propTypes={classes:h.a.string,imgUrl:h.a.string,title:h.a.string,description:h.a.string};var Tc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oc(this,Pc(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kc(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){Rc("//fast.wistia.com/embed/medias/i0m98yntdb.jsonp"),Rc("//fast.wistia.com/assets/external/E-v1.js")}},{key:"render",value:function(){var e="Glitch is the friendly community where you'll find the app of your dreams";return p.a.createElement("section",{className:"what-is-glitch"},p.a.createElement("span",null,p.a.createElement("figure",null,p.a.createElement("h1",null,p.a.createElement("img",{className:"witch large",src:"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fglitch-witch-large.svg?1543872118446",alt:e}),p.a.createElement("img",{className:"witch small",src:"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fglitch-witch-small.svg?1543872119039",alt:e})),p.a.createElement(mo,null,p.a.createElement("div",{className:"button video"},p.a.createElement("img",{className:"play-button",src:"https://cdn.glitch.com/6ce807b5-7214-49d7-aadd-f11803bc35fd%2Fplay.svg",alt:"How it works"}),p.a.createElement("span",null,"How it works")))),p.a.createElement("div",{className:"callouts"},p.a.createElement(Cc,{classes:"discover",imgUrl:"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fexplore-illustration.svg?1543508598659",title:"Explore Apps",description:"Discover over a million free apps built by people like you"}),p.a.createElement(Cc,{classes:"remix",imgUrl:"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fremix-illustration.svg?1543508529783",title:"Remix Anything",description:"Edit any project and have your own app running instantly"}),p.a.createElement(Cc,{classes:"collaborate",imgUrl:"https://cdn.glitch.com/a67e7e84-c063-4c8e-a7fc-f4c7ab86186f%2Fcollaborate-illustration.svg?1543508686482",title:"Build with Your Team",description:"Invite everyone to create together"}),"          ")))}}])&&wc(r.prototype,n),a&&wc(r,a),t}(),Nc=function(){return p.a.createElement("section",{className:"made-in-glitch"},p.a.createElement("p",null,"Of course, this site was made on Glitch too"),p.a.createElement(kt,{to:ht("community"),className:"button button-link has-emoji"},"View Source ",p.a.createElement("span",{className:"emoji carp_streamer"})))},xc=function(e){var t=e.api,r=e.user;return p.a.createElement("main",null,!r.login&&p.a.createElement(Tc,null),!!r.projects.length&&p.a.createElement(nc,{api:t}),!!r.login&&p.a.createElement(So,{api:t}),p.a.createElement(lo,{isAuthorized:!!r.login}),p.a.createElement(xi,{api:t}),p.a.createElement(Va,null),p.a.createElement(Nc,null),p.a.createElement(jc,{reportedType:"home"}))};xc.propTypes={user:h.a.shape({id:h.a.number,login:h.a.string})};var qc=function(e){var t=e.api;return p.a.createElement(za,{api:t},p.a.createElement(U,{properties:{origin:"index"}},p.a.createElement(ue,null,function(e){return p.a.createElement(xc,{api:t,user:e})})))},Sc=function(e){var t=e.name;return p.a.createElement("section",null,p.a.createElement("p",null,"We didn't find ",t),p.a.createElement("div",{className:"error-image"},p.a.createElement("img",{className:"compass",src:"https://cdn.glitch.com/bc50f686-4c0a-4e20-852f-3999b29e8092%2Fcompass.svg?1545073264846",alt:""}),p.a.createElement("img",{className:"needle",src:"https://cdn.glitch.com/bc50f686-4c0a-4e20-852f-3999b29e8092%2Fneedle.svg?1545073265096",alt:""})))};Sc.propTypes={name:h.a.string.isRequired};var _c=Sc;function Uc(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ac(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fc(e){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $c=function(e){var t=e.api;return p.a.createElement(za,{api:t},p.a.createElement(He.Helmet,null,p.a.createElement("title",null,"👻 Page not found")," "),p.a.createElement("main",{className:"error-page-container"},p.a.createElement("img",{className:"error-image",src:"https://cdn.glitch.com/7138972f-76e1-43f4-8ede-84c3cdd4b40a%2Ftelescope_404.svg?1543258683849",alt:"",width:"318px",height:"297px"}),p.a.createElement("div",{className:"error-msg"},p.a.createElement("h1",null,"Page Not Found"),p.a.createElement("p",null,"Maybe a typo, or perhaps it's moved?"),p.a.createElement("a",{className:"button button-link",href:"/"},"Back to Glitch"))))};$c.propTypes={api:h.a.func.isRequired};var Lc=function(e){var t=e.api,r=e.title,n=e.description;return p.a.createElement(za,{api:t},p.a.createElement(He.Helmet,null,p.a.createElement("title",null,"✉️ ",r)," "),p.a.createElement("main",{className:"error-page-container"},p.a.createElement("img",{className:"error-image email-error-image",src:"https://cdn.glitch.com/26ac422d-705d-42be-b9cb-1fbdfe7e5a63%2Ferror-mailer.svg?1543429767321",alt:"",width:"470px"}),p.a.createElement("div",{className:"error-msg"},p.a.createElement("h1",null,r),p.a.createElement("p",null,n),p.a.createElement("a",{className:"button button-link",href:"/"},"Back to Glitch"))))};Lc.propTypes={api:h.a.func.isRequired,title:h.a.string.isRequired,description:h.a.string.isRequired};var Mc=function(e){var t=e.api,r=e.title,n=e.description;return p.a.createElement(za,{api:t},p.a.createElement(He.Helmet,null,p.a.createElement("title",null,"🔑 ",r)," "),p.a.createElement("main",{className:"error-page-container"},p.a.createElement("img",{className:"error-image",src:"https://cdn.glitch.com/8ae9b195-ef39-406b-aee0-764888d15665%2Foauth-key.svg?1544466885907",alt:"",width:"370px"}),p.a.createElement("div",{className:"error-msg"},p.a.createElement("h1",null,r),p.a.createElement("p",null,n),p.a.createElement("a",{className:"button button-link",href:"/"},"Back to Glitch"))))};Mc.propTypes={api:h.a.func.isRequired,title:h.a.string.isRequired,description:h.a.string.isRequired};var zc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ac(this,Fc(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(t,p.a.Component),r=t,(n=[{key:"check",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.get(`projects/${this.props.name}`);case 2:t=e.sent,t.data&&window.location.replace(dt(this.props.name));case 5:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Uc(o,n,a,i,c,"next",e)}function c(e){Uc(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.check()}},{key:"componentDidUpdate",value:function(e){var t=this.props.currentUser&&this.props.currentUser.persistentToken,r=e.currentUser&&e.currentUser.persistentToken;this.props.name===e.name&&t===r||this.check()}},{key:"render",value:function(){return null}}])&&Ic(r.prototype,n),a&&Ic(r,a),t}(),Vc=function(e){var t=e.api,r=e.name;return p.a.createElement(za,{api:t},p.a.createElement(He.Helmet,null,p.a.createElement("title",null,"👻 Project not found")," "),p.a.createElement(_c,{name:r}),p.a.createElement("p",null,"Either there's no project here, or you don't have access to it.  Are you logged in as the right user?"),p.a.createElement(ue,null,function(e){return p.a.createElement(zc,{api:t,name:r,currentUser:e})}))};function Gc(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hc(){return(Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bc(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yc(e){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zc(e,t){return(Zc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(window.parent!==window){var t=window.origin;e.type="LoginMessage",window.parent.postMessage(e,t)}}Vc.propTypes={api:h.a.func.isRequired,name:h.a.string.isRequired};var Qc=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jc(this,Yc(t).call(this,e))).state={done:!1,redirect:{pathname:"/"},error:!1,errorMessage:null},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zc(e,t)}(t,p.a.Component),r=t,(a=[{key:"componentDidMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,a,o,i,c,s,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,a=t.provider,o=t.url,i=t.destination,this.props.setDestination(void 0),e.prev=2,e.next=5,r.post(o);case 5:if(c=e.sent,!((s=c.data).id<=0)){e.next=9;break}throw new Error(`Bad user id (${s.id}) after ${a} login`);case 9:console.log("LOGGED IN",s),this.props.setUser(s),i&&i.expires>(new Date).toISOString()&&this.setState({redirect:i.to}),this.setState({done:!0}),analytics.track("Signed In",{provider:a}),Kc({success:!0,details:{provider:a}}),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(2),this.setState({error:!0}),(u=e.t0&&e.t0.response&&e.t0.response.data)&&u.message&&this.setState({errorMessage:u.message}),l={provider:a,error:u},console.error("Login error.",l),Object(n.captureMessage)("Login error",{extra:l}),Kc({success:!1,details:l});case 26:case"end":return e.stop()}},e,this,[[2,17]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Bc(o,n,a,i,c,"next",e)}function c(e){Bc(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){if(this.state.done)return p.a.createElement(Ge.a,{to:this.state.redirect});if(this.state.error){var e="Hard to say what happened, but we couldn't log you in. Try again?";return"Email"===this.props.provider?p.a.createElement(Lc,{api:this.props.api,title:`${this.props.provider} Login Problem`,description:this.state.errorMessage||e}):p.a.createElement(Mc,{api:this.props.api,title:`${this.props.provider} Login Problem`,description:this.state.errorMessage||e})}return p.a.createElement("div",{className:"content"})}}])&&Wc(r.prototype,a),o&&Wc(r,o),t}();Qc.propTypes={api:h.a.any.isRequired,url:h.a.string.isRequired,provider:h.a.string.isRequired,setUser:h.a.func.isRequired,destination:h.a.shape({expires:h.a.string.isRequired,to:h.a.object.isRequired}),hash:h.a.string};var Xc=function(e){return p.a.createElement(H,{name:"destinationAfterAuth",default:void 0},function(t,r,n){return n&&p.a.createElement(ue,null,function(n,a,o){var i=o.login;return p.a.createElement(Qc,Hc({setUser:i,destination:t,setDestination:r},e))})})},es=function(e){var t=e.code,r=Gc(e,["code"]),n=`${APP_URL}/login/facebook`,a=`/auth/facebook/${t}?callbackURL=${encodeURIComponent(n)}`;return p.a.createElement(Xc,Hc({},r,{provider:"Facebook",url:a}))},ts=function(e){var t=e.code,r=Gc(e,["code"]),n=`/auth/github/${t}`;return p.a.createElement(Xc,Hc({},r,{provider:"GitHub",url:n}))},rs=function(e){var t=e.token,r=Gc(e,["token"]),n=`/auth/email/${t}`;return p.a.createElement(Xc,Hc({},r,{provider:"Email",url:n}))};function ns(){return(ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function as(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function os(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function is(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cs(e){return(cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ss(e,t){return(ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var us=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=is(this,cs(t).call(this,e))).state={redirect:null},r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ss(e,t)}(t,p.a.Component),r=t,(a=[{key:"componentDidMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.api.get(`/teams/byUrl/${this.props.teamUrl}`);case 3:t=e.sent,r=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),!e.t0||e.t0.response&&404===e.t0.response.status||Object(n.captureException)(e.t0);case 10:if(r){e.next=14;break}return this.props.createErrorNotification("Invite failed, try asking your teammate to resend the invite"),this.setState({redirect:Ze({url:this.props.teamUrl})}),e.abrupt("return");case 14:return e.prev=14,e.next=17,this.props.api.post(`/teams/${r.id}/join/${this.props.joinToken}`,{},{headers:{Authorization:""}});case 17:this.props.createNotification("Invitation accepted"),e.next=25;break;case 20:e.prev=20,e.t1=e.catch(14),console.log("Team invite error",e.t1&&e.t1.response&&e.t1.response.data),Object(n.captureMessage)("Team invite error",{extra:{error:e.t1}}),this.props.createErrorNotification("Invite failed, try asking your teammate to resend the invite");case 25:return e.next=27,this.props.reloadCurrentUser();case 27:this.setState({redirect:Ze(r)});case 28:case"end":return e.stop()}},e,this,[[0,7],[14,20]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){as(o,n,a,i,c,"next",e)}function c(e){as(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.redirect?p.a.createElement(Ge.a,{to:this.state.redirect}):null}}])&&os(r.prototype,a),o&&os(r,o),t}();us.propTypes={api:h.a.any.isRequired,teamUrl:h.a.string.isRequired,joinToken:h.a.string.isRequired,createErrorNotification:h.a.func.isRequired,createNotification:h.a.func.isRequired,reloadCurrentUser:h.a.func.isRequired};var ls=function(e){return p.a.createElement(ue,null,function(t,r,n){var a=n.reload;return p.a.createElement(De,null,function(t){return p.a.createElement(us,ns({},t,e,{reloadCurrentUser:a}))})})},ps=function(e){var t=e.api;return p.a.createElement(za,{api:t},p.a.createElement(Be.a,null,p.a.createElement("title",null,"Questions")),p.a.createElement("main",{className:"questions-page"},p.a.createElement(So,{api:t,max:12}),p.a.createElement(Va,null)))};ps.propTypes={api:h.a.any.isRequired};var fs=ps;var ms=function(e){var t=e.children;return p.a.createElement(De,null,function(e){var r=e.createErrorNotification;return t({handleError:function(e){return function(e,t){return console.error(t),e(),Promise.reject(t)}(r,e)},handleErrorForInput:function(e){return function(e,t){return t&&t.response&&t.response.data?Promise.reject(t.response.data.message):(console.error(t),e(),Promise.reject())}(r,e)}})})};ms.propTypes={children:h.a.func.isRequired};var ds=ms;function hs(){return(hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vs(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function ys(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){vs(o,n,a,i,c,"next",e)}function c(e){vs(o,n,a,i,c,"throw",e)}i(void 0)})}}function bs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Es(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function js(e){return(js=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ws(e,t){return(ws=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Os=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Es(this,js(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){bs(e,t,r[t])})}return e}({},e.initialProject),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ws(e,t)}(t,p.a.Component),r=t,(n=[{key:"userIsMember",value:function(){if(!this.props.currentUser)return!1;var e=this.props.currentUser.id;return this.state.users.some(function(t){var r=t.id;return e===r})}},{key:"updateFields",value:function(){var e=ys(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`projects/${this.state.id}`,t);case 2:this.setState(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addProjectToCollection",value:function(){var e=ys(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${r.id}/add/${t.id}`);case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,r=t.handleError,n=t.handleErrorForInput,a={addProjectToCollection:function(t,n){return e.addProjectToCollection(t,n).catch(r)},updateDomain:function(t){return e.updateFields({domain:t}).catch(n)},updateDescription:function(t){return e.updateFields({description:t}).catch(r)},updatePrivate:function(t){return e.updateFields({private:t}).catch(r)}};return this.props.children(this.state,a,this.userIsMember())}}])&&gs(r.prototype,n),a&&gs(r,a),t}();Os.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,currentUser:h.a.object,handleError:h.a.func.isRequired,handleErrorForInput:h.a.func.isRequired,initialProject:h.a.object.isRequired};var Ps=function(e){var t=e.api,r=e.children,n=e.initialProject;return p.a.createElement(ds,null,function(e){return p.a.createElement(ue,null,function(a){return p.a.createElement(Os,hs({api:t,currentUser:a,initialProject:n},e),r)})})};Ps.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,initialProject:h.a.object.isRequired};var ks=Ps;function Rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cs(e){return(Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ts(e,t){return(Ts=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xs=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Cs(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Ns(n):a).state={startedExpanding:!1,doneExpanding:!1,scrollHeight:1/0},r.ref=p.a.createRef(),r.updateHeight=r.updateHeight.bind(Ns(Ns(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ts(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){this.updateHeight(),this.ref.current.addEventListener("load",this.updateHeight,{capture:!0}),window.addEventListener("resize",this.updateHeight,{passive:!0})}},{key:"componentWillUnmount",value:function(){this.ref.current.removeEventListener("load",this.updateHeight,{capture:!0}),window.removeEventListener("resize",this.updateHeight,{passive:!0})}},{key:"componentDidUpdate",value:function(){this.updateHeight()}},{key:"updateHeight",value:function(){var e=this.ref.current.scrollHeight;e!==this.state.scrollHeight&&this.setState({scrollHeight:e})}},{key:"expand",value:function(){this.updateHeight(),this.setState({startedExpanding:!0})}},{key:"onExpandEnd",value:function(e){"max-height"===e.propertyName&&this.setState({doneExpanding:!0})}},{key:"render",value:function(){var e=this.state,t=e.startedExpanding,r=e.doneExpanding,n=e.scrollHeight,a=n>this.props.height,o=a?this.props.height-this.props.minSlide:this.props.height,i=r?null:{maxHeight:t?n:o};return p.a.createElement("div",{ref:this.ref,className:"expander",style:i,onTransitionEnd:t?this.onExpandEnd.bind(this):null},this.props.children,!r&&a&&p.a.createElement("div",{className:"expander-mask"},!t&&p.a.createElement("button",{onClick:this.expand.bind(this),className:"expander-button button-small button-tertiary"},"Show More")))}}])&&Rs(r.prototype,n),a&&Rs(r,a),t}();xs.propTypes={children:h.a.node.isRequired,height:h.a.number.isRequired,minSlide:h.a.number.isRequired},xs.defaultProps={minSlide:50};var qs=r(88);function Ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _s(e){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var As=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=_s(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Is(n):a).state={focused:!1},r.onFocus=r.onFocus.bind(Is(Is(r))),r.onBlur=r.onBlur.bind(Is(Is(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}(t,p.a.Component),r=t,(n=[{key:"onFocus",value:function(e){e.currentTarget===e.target&&this.setState({focused:!0})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.description,n=t.placeholder;return this.state.focused?p.a.createElement(qs.a,{className:"description content-editable",value:r,onChange:function(t){return e.props.update(t.target.value)},onFocus:this.onFocus,onBlur:this.onBlur,placeholder:n,spellCheck:!1,autoFocus:!0}):p.a.createElement("p",{className:"description content-editable",placeholder:n,"aria-label":n,role:"textbox",tabIndex:0,onFocus:this.onFocus,onBlur:this.onBlur},p.a.createElement(la,null,r))}}])&&Ss(r.prototype,n),a&&Ss(r,a),t}();As.propTypes={description:h.a.string.isRequired,placeholder:h.a.string,update:h.a.func.isRequired};var Fs=function(e){var t=e.description,r=e.placeholder,n=e.update;return p.a.createElement(Or,{value:t,update:n},function(e){var t=e.value,n=e.update;return p.a.createElement(As,{description:t,update:n,placeholder:r})})};Fs.propTypes={description:h.a.string.isRequired,placeholder:h.a.string,update:h.a.func.isRequired};var Ds=function(e){var t=e.description;return t?p.a.createElement("p",{className:"description read-only"},p.a.createElement(la,null,t)):null};Ds.propTypes={description:h.a.string.isRequired};var $s=function(e){var t=e.authorized,r=e.description,n=e.placeholder,a=e.update;return t?p.a.createElement(Fs,{description:r,update:a,placeholder:n}):p.a.createElement(Ds,{description:r})};function Ls(){return(Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ms(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}$s.propTypes={authorized:h.a.bool.isRequired,description:h.a.string.isRequired,placeholder:h.a.string,update:h.a.func.isRequired};var zs=function(e){var t=e.href,r=e.children,n=e.className,a=Ms(e,["href","children","className"]);return p.a.createElement(kt,Ls({to:t,className:`button button-link ${n}`},a),r)};zs.propTypes={href:h.a.string.isRequired,children:h.a.node.isRequired,className:h.a.string};var Vs=function(e){var t=e.name,r=e.className,n=Ms(e,["name","className"]);return p.a.createElement(zs,Ls({href:dt(t),className:`has-emoji ${r}`},n),p.a.createElement("img",{src:"https://cdn.glitch.com/6ce807b5-7214-49d7-aadd-f11803bc35fd%2Fshow-app.svg",alt:""})," ","Show")};Vs.propTypes={name:h.a.string.isRequired,className:h.a.string};var Gs=function(e){var t=e.name,r=e.isMember,n=Ms(e,["name","isMember"]);return p.a.createElement(zs,Ls({href:ht(t)},n),r?"Edit Project":"View Source")};Gs.propTypes={name:h.a.string.isRequired,isMember:h.a.bool,className:h.a.string};var Hs=function(e){var t=e.name,r=e.isMember,n=e.className,a=Ms(e,["name","isMember","className"]);return p.a.createElement(zs,Ls({href:vt(t),className:`has-emoji ${n}`},a),r?"Remix This":"Remix your own"," ",p.a.createElement("span",{className:"emoji microphone",role:"presentation"}))};function Bs(){return(Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ws(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}Hs.propTypes={name:h.a.string.isRequired,isMember:h.a.bool,className:h.a.string};var Js=function(e){var t=e.project,r=Ws(e,["project"]);return p.a.createElement($r,{buttonClass:"button button-small has-emoji add-project opens-pop-over",buttonText:p.a.createElement(p.a.Fragment,null,"Add to Collection "," ",p.a.createElement("span",{className:"emoji framed-picture",role:"presentation"})),passToggleToPop:!0},p.a.createElement(Qo,Bs({},r,{project:t})))};Js.propTypes={addProjectToCollection:h.a.func.isRequired,api:h.a.func.isRequired,project:h.a.object.isRequired};var Ys=Js,Zs=r(126),Ks=r.n(Zs);function Qs(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xs(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function eu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ru(e){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var au=function(e){var t=e.projects,r=e.coverStyle;return t.length?p.a.createElement($i,{style:r,className:"projects"},p.a.createElement(yi,{projects:t})):null};au.propTypes={projects:h.a.array.isRequired};var ou=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=tu(this,ru(t).call(this,e));var n=Ha()(e.teams,1),a=Ha()(e.users,2-n.length);return r.state={teams:n,users:a},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(t,p.a.Component),r=t,(n=[{key:"getProjects",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t,r,n){var a,o,i,c,s,u,l,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:if(a=e.sent,o=a.map(function(e){return e.projectId}),!((i=Ha()(Ks()(o,[this.props.ignoreProjectId]),3)).length<3)){e.next=13;break}return e.next=8,n(t);case 8:c=e.sent,s=c.projects,u=s.map(function(e){return e.id}),l=Ks()(u,[this.props.ignoreProjectId].concat(Qs(i))),i=[].concat(Qs(i),Qs(Ha()(l,3-i.length)));case 13:if(!i.length){e.next=19;break}return e.next=16,this.props.api.get(`projects/byIds?ids=${i.join(",")}`);case 16:return p=e.sent,f=p.data,e.abrupt("return",f);case 19:return e.abrupt("return",[]);case 20:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Xs(o,n,a,i,c,"next",e)}function c(e){Xs(o,n,a,i,c,"throw",e)}i(void 0)})});return function(e,r,n){return t.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.api,r=function(e){return t.get(`teams/${e}`).then(function(e){return e.data})},n=function(e){return t.get(`teams/${e}/pinned-projects`).then(function(e){return e.data})},a=function(e){return t.get(`users/${e}`).then(function(e){return e.data})},o=function(e){return t.get(`users/${e}/pinned-projects`).then(function(e){return e.data})},i=this.state,c=i.teams,s=i.users;return c.length||s.length?p.a.createElement("ul",{className:"related-projects"},c.map(function(t){return p.a.createElement("li",{key:t.id},p.a.createElement("h2",null,p.a.createElement(Ot,{team:t},"More by ",t.name," →")),p.a.createElement(pr,{get:function(){return e.getProjects(t.id,n,r)}},function(e){return p.a.createElement(au,{projects:e,coverStyle:Qe(t)})}))}),s.map(function(t){return p.a.createElement("li",{key:t.id},p.a.createElement("h2",null,p.a.createElement(Pt,{user:t},"More by ",tt(t)," →")),p.a.createElement(pr,{get:function(){return e.getProjects(t.id,o,a)}},function(e){return p.a.createElement(au,{projects:e,coverStyle:ot(t)})}))})):null}}])&&eu(r.prototype,n),a&&eu(r,a),t}();ou.propTypes={api:h.a.any.isRequired,ignoreProjectId:h.a.string.isRequired,teams:h.a.array.isRequired,users:h.a.array.isRequired};var iu=ou;function cu(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function su(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function uu(){return(uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var lu=function(){return p.a.createElement("span",{className:"project-badge private-project-badge","aria-label":"Only members can view code","data-tooltip":"Only members can view code"})},pu=function(e){var t=e.isPrivate,r=e.setPrivate,n=t?"Only members can view code":"Visible to everyone",a=t?"private-project-badge":"public-project-badge";return p.a.createElement("span",{"data-tooltip":n},p.a.createElement("button",{"aria-label":n,onClick:function(){return r(!t)},className:`button-tertiary button-on-secondary-background project-badge ${a}`}))};pu.propTypes={isPrivate:h.a.bool.isRequired,setPrivate:h.a.func.isRequired};var fu=function(e){return e&&e.response&&404===e.response.status?p.a.createElement(p.a.Fragment,null,"This project would be even better with a ",p.a.createElement("code",null,"README.md")):p.a.createElement(p.a.Fragment,null,"We couldn't load the readme. Try refreshing?")},mu=function(e){var t=e.api,r=e.domain;return p.a.createElement(pr,{get:function(){return t.get(`projects/${r}/readme`)},renderError:fu},function(e){var t=e.data;return p.a.createElement(xs,{height:250},p.a.createElement(sa,null,t))})};mu.propTypes={api:h.a.any.isRequired,domain:h.a.string.isRequired};var du=function(e){var t=e.project,r=e.addProjectToCollection,n=e.api,a=e.currentUser,o=e.isAuthorized,i=e.updateDomain,c=e.updateDescription,s=e.updatePrivate,u=t.domain,l=t.users,f=t.teams;return p.a.createElement("main",{className:"project-page"},p.a.createElement("section",{id:"info"},p.a.createElement(Di,null,p.a.createElement(Fi,{style:{backgroundImage:`url('${ft(t.id)}')`}},p.a.createElement("h1",null,o?p.a.createElement(Fr,{value:u,placeholder:"Name your project",update:function(e){return i(e).then(function(){return function(e){history.replaceState(null,null,`/~${e}`)}(e)})},suffix:p.a.createElement(pu,{isPrivate:t.private,isMember:o,setPrivate:s})}):p.a.createElement(p.a.Fragment,null,u," ",t.private&&p.a.createElement(lu,null))),p.a.createElement("div",{className:"users-information"},p.a.createElement(Dn,{users:l}),!!f.length&&p.a.createElement(_i,{teams:f})),p.a.createElement($s,{authorized:o,description:t.description,update:c,placeholder:"Tell us about your app"}),p.a.createElement("p",{className:"buttons"},p.a.createElement(Vs,{name:u}),p.a.createElement(Gs,{name:u,isMember:o}))))),p.a.createElement("section",{id:"embed"},p.a.createElement(Xa,{domain:u}),p.a.createElement("div",{className:"buttons space-between"},p.a.createElement(jc,{reportedType:"project",reportedModel:t}),p.a.createElement("div",null,a.login&&p.a.createElement(Ys,{className:"button-small margin",api:n,currentUser:a,project:t,fromProject:!0,addProjectToCollection:r}),p.a.createElement(Hs,{className:"button-small margin",name:u,isMember:o,onClick:function(){return function(e,t){analytics.track("Click Remix",{origin:"project page",baseProjectId:e,baseDomain:t})}(t.id,u)}})))),p.a.createElement("section",{id:"readme"},p.a.createElement(mu,{api:n,domain:u})),p.a.createElement("section",{id:"related"},p.a.createElement(iu,uu({ignoreProjectId:t.id},{api:n,teams:f,users:l}))))};function hu(){var e;return e=regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(`projects/${r}`);case 2:return n=e.sent,a=n.data,console.log("project",a),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,this)}),(hu=function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){su(o,n,a,i,c,"next",e)}function c(e){su(o,n,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}du.propTypes={api:h.a.any.isRequired,currentUser:h.a.object.isRequired,isAuthorized:h.a.bool.isRequired,project:h.a.object.isRequired};var vu=function(e){var t=e.domain,r=e.api,n=e.currentUser,a=cu(e,["domain","api","currentUser"]);return p.a.createElement(pr,{get:function(){return function(e,t){return hu.apply(this,arguments)}(r,t)},renderError:function(){return p.a.createElement(_c,{name:t})}},function(e){return e?p.a.createElement(ks,{api:r,initialProject:e},function(e,t,o){return p.a.createElement(p.a.Fragment,null,p.a.createElement(Be.a,null,p.a.createElement("title",null,e.domain)),p.a.createElement(du,uu({api:r,project:e},t,{isAuthorized:o,currentUser:n},a)))}):p.a.createElement(_c,{name:t})})};vu.propTypes={api:h.a.func.isRequired,domain:h.a.string.isRequired,currentUser:h.a.object.isRequired};var yu=function(e){var t=e.api,r=e.name;return p.a.createElement(za,{api:t},p.a.createElement(U,{properties:{origin:"project"}},p.a.createElement(ue,null,function(e){return p.a.createElement(vu,{api:t,domain:r,currentUser:e})})))},bu=(r(459),r(130),r(460),function(e){var t=new Promise(function(r,n){return e(r,n,function(){return null!=t._progressHandlers?t._progressHandlers.forEach(function(e){try{return e(event)}catch(t){}}):void 0})});return t.then=function(e,r){var n=Promise.prototype.then.call(t,e,r);return t.progress(n._notify.bind(n)),n},t});function gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}null==Promise.prototype.finally&&(Promise.prototype.finally=function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}),null==Promise.prototype._notify&&(Promise.prototype._notify=function(e){return this._progressHandlers.forEach(function(t){try{return t(e)}catch(r){}})}),null==Promise.prototype.progress&&(Promise.prototype.progress=function(e){return null==this._progressHandlers&&(this._progressHandlers=[]),this._progressHandlers.push(e),this});var Eu=function(e){var t=e.policy,r=e.signature,n=e.accessKeyId,a=Ou(t),o=a.acl,i=a.bucket,c=a.namespace,s=`https://s3.amazonaws.com/${i}`,u=function(e){return`${s}/${`${c}${e}`}`};return{urlFor:u,upload:function(a){var i=a.key,l=a.blob,p=a.cacheControl;console.log("upload called",i),console.log("using namespace",c);var f=`${c}${i}`;u(i);return Pu(s,ku({key:f,"Content-Type":l.type||"binary/octet-stream","Cache-Control":`max-age=${p||31536e3}`,AWSAccessKeyId:n,"x-amz-security-token":e.sessionToken,acl:o,policy:t,signature:r,file:l})).then(function(){return`${s}/${encodeURIComponent(f)}`})}}},ju=function(e,t){return e.filter(function(e){return"object"==typeof e}).map(function(e){return e[t]}).filter(function(e){return e})[0]},wu=function(e){return e.filter(function(e){if(Array.isArray(e)){var t=gu(Array.from(e),3),r=t[0],n=t[1];t[2];return"$key"===n&&("starts-with"===r||"eq"===r)}})[0][2]},Ou=function(e){var t=JSON.parse(atob(e)).conditions;return{acl:ju(t,"acl"),bucket:ju(t,"bucket"),namespace:wu(t)}},Pu=function(e,t){return new bu(function(r,n,a){var o=new XMLHttpRequest;return o.open("POST",e,!0),null!=o.upload&&(o.upload.onprogress=a),o.onreadystatechange=function(e){if(4===o.readyState)return function(e){return"2"===e.status.toString()[0]}(o)?r(o):n(o)},o.send(t)})},ku=function(e){return Object.keys(e).reduce(function(t,r){var n=e[r];return n&&t.append(r,n),t},new FormData)},Ru=r(221),Cu=r.n(Ru);function Tu(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var xu={large:1e3,medium:700,small:450},qu={large:300,medium:150,small:60},Su=function(e){return new Promise(function(t,r){var n=new Image;return n.onload=function(){return t(n)},n.onerror=r,n.src=URL.createObjectURL(e)})},_u=function(e,t,r){var n=e.width,a=e.height,o=document.createElement("canvas");for(o.width=n,o.height=a,o.getContext("2d").drawImage(e,0,0,n,a);n>r&&a>r;){n*=.75,a*=.75;var i=document.createElement("canvas"),c=i.getContext("2d");i.width=n,i.height=a,c.drawImage(o,0,0,n,a),o=i}return new Promise(function(e){return o.toBlob(function(t){return t.width=n,t.height=a,e(t)},t,.92)})};function Uu(e){var t=e.width,r=e.height,n=document.createElement("canvas");n.width=t,n.height=r;var a=n.getContext("2d");a.drawImage(e,0,0,t,r);for(var o=!1,i=[],c=[],s=JSON.stringify([[255,255,255],[0,0,0]]),u=0;u<11;u++)for(var l=0;l<11;l++){var p=a.getImageData(u,l,1,1).data,f=[p[0],p[1],p[2]],m=new RegExp(`(${f})`,"g");if(p[3]<255){o=!0;break}s.match(m)?c.push(f):i.push(f)}if(c.length>i.length&&(i=c),o)return null;var d=Cu()(i,5),h=Nu(Array.from(d.palette()[0]),3);return`rgb(${h[0]},${h[1]},${h[2]})`}function Iu(e){var t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=function(t){var r=t.target.files[0];console.log("☔️☔️☔️ input onchange",r),e(r)},t.click(),console.log("input created: ",t)}function Au(e,t){return e.get(`users/${t}/cover/policy`)}function Fu(e,t,r){return Eu(t).upload({key:r,blob:e})}function Du(e,t,r,n){var a=Fu(e,t,"original");a.progress(n);var o=Object.keys(r).map(function(n){return(a=e,o=r[n],Su(a).then(function(e){return a.width=e.width,a.height=e.height,e.width<o&&e.height<o?a:_u(e,a.type,o)})).then(function(e){return Fu(e,t,n)});var a,o});return Promise.all([a].concat(Tu(o)))}function $u(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}var Lu=function(e){var t=e.progress;return p.a.createElement(p.a.Fragment,null,"Uploading asset",p.a.createElement("progress",{className:"notify-progress",value:t}))},Mu=function(){return"File upload failed. Try again in a few minutes?"};function zu(e,t){return Vu.apply(this,arguments)}function Vu(){var e;return e=regeneratorRuntime.mark(function e(t,r){var n,a,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,a=0,o=t.createPersistentNotification(p.a.createElement(Lu,{progress:a}),"notifyUploading"),i=o.updateNotification,c=o.removeNotification,e.prev=3,e.next=6,r(function(e){var t=e.lengthComputable,r=e.loaded,n=e.total;a=t?r/n:(a+1)/2,i(p.a.createElement(Lu,{progress:a}))});case 6:n=e.sent,e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),t.createErrorNotification(p.a.createElement(Mu,null)),e.t0;case 13:return e.prev=13,c(),t.createNotification("Image uploaded!"),e.finish(13);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this,[[3,9,13,17]])}),(Vu=function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){$u(o,n,a,i,c,"next",e)}function c(e){$u(o,n,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}var Gu=function(e){var t=e.children;return p.a.createElement(De,null,function(e){return t({uploadAsset:function(t,r,n){return zu(e,function(e){return Fu(t,r,n)})},uploadAssetSizes:function(t,r,n){return zu(e,function(e){return Du(t,r,n,e)})}})})};Gu.propTypes={children:h.a.func.isRequired};var Hu=Gu;function Bu(){return(Bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wu(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ju(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Yu(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Ju(o,n,a,i,c,"next",e)}function c(e){Ju(o,n,a,i,c,"throw",e)}i(void 0)})}}function Zu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qu(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xu(e){return(Xu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qu(this,Xu(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Zu(e,t,r[t])})}return e}({},e.initialTeam,{_cacheAvatar:Date.now(),_cacheCover:Date.now()}),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(t,p.a.Component),r=t,(n=[{key:"currentUserIsOnTeam",value:function(){if(!this.props.currentUser)return!1;var e=this.props.currentUser.id;return this.state.users.some(function(t){var r=t.id;return e===r})}},{key:"updateFields",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){var r,n,a,o,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`teams/${this.state.id}`,t);case 2:r=e.sent,n=r.data,this.setState(n),this.props.currentUser&&(a=this.props.currentUser.teams.findIndex(function(e){return e.id===i.state.id}))>=0&&((o=Wu(this.props.currentUser.teams))[a]=this.state,this.props.updateCurrentUser({teams:o}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"uploadAvatar",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i=this.props.api,c=this.state.id,i.get(`teams/${c}/avatar/policy`);case 2:return r=e.sent,n=r.data,e.next=6,this.props.uploadAssetSizes(t,n,qu);case 6:return e.next=8,Su(t);case 8:return a=e.sent,o=Uu(a),e.next=12,this.updateFields({hasAvatarImage:!0,backgroundColor:o});case 12:this.setState({_cacheAvatar:Date.now()});case 13:case"end":return e.stop()}var i,c},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"uploadCover",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i=this.props.api,c=this.state.id,i.get(`teams/${c}/cover/policy`);case 2:return r=e.sent,n=r.data,e.next=6,this.props.uploadAssetSizes(t,n,xu);case 6:return e.next=8,Su(t);case 8:return a=e.sent,o=Uu(a),e.next=12,this.updateFields({hasCoverImage:!0,coverColor:o});case 12:this.setState({_cacheCover:Date.now()});case 13:case"end":return e.stop()}var i,c},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"joinTeam",value:function(){var e=Yu(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`teams/${this.state.id}/join`);case 2:this.setState(function(e){var t=e.users;return{users:[].concat(Wu(t),[r.props.currentUser])}}),this.props.currentUser&&(t=this.props.currentUser.teams,this.props.updateCurrentUser({teams:[].concat(Wu(t),[this.state])}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"inviteEmail",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("💣 inviteEmail",t),e.next=3,this.props.api.post(`teams/${this.state.id}/sendJoinTeamEmail`,{emailAddress:t});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"inviteUser",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("💣 inviteUser",t),e.next=3,this.props.api.post(`teams/${this.state.id}/sendJoinTeamEmail`,{userId:t.id});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeUserFromTeam",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t,r){var n,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(r.map(function(e){return a.props.api.delete(`projects/${e}/authorization`,{data:{targetUserId:t}})}));case 2:return e.next=4,this.props.api.delete(`teams/${this.state.id}/users/${t}`);case 4:this.removeUserAdmin(t),this.setState(function(e){return{users:e.users.filter(function(e){return e.id!==t})}}),this.props.currentUser&&this.props.currentUser.id===t&&(n=this.props.currentUser.teams.filter(function(e){return e.id!==a.state.id}),this.props.updateCurrentUser({teams:n}));case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeUserAdmin",value:function(e){var t=this.state.adminIds.indexOf(e);-1!==t&&this.setState(function(e){return{counter:e.adminIds.splice(t,1)}})}},{key:"updateUserPermissions",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(20===r&&this.state.adminIds.length<=1)){e.next=3;break}return this.props.createErrorNotification("A team must have at least one admin"),e.abrupt("return",!1);case 3:return e.next=5,this.props.api.patch(`teams/${this.state.id}/users/${t}`,{access_level:r});case 5:30===r?this.setState(function(e){return{counter:e.adminIds.push(t)}}):this.removeUserAdmin(t);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"addProject",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`teams/${this.state.id}/projects/${t.id}`);case 2:this.setState(function(e){var r=e.projects;return{projects:[t].concat(Wu(r))}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeProject",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`teams/${this.state.id}/projects/${t}`);case 2:this.setState(function(e){return{projects:e.projects.filter(function(e){return e.id!==t})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteProject",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`/projects/${t}`);case 2:this.setState(function(e){return{projects:e.projects.filter(function(e){return e.id!==t})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPin",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`teams/${this.state.id}/pinned-projects/${t}`);case 2:this.setState(function(e){var r=e.teamPins;return{teamPins:[].concat(Wu(r),[{projectId:t}])}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removePin",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`teams/${this.state.id}/pinned-projects/${t}`);case 2:this.setState(function(e){return{teamPins:e.teamPins.filter(function(e){return e.projectId!==t})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"joinTeamProject",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`/teams/${this.state.id}/projects/${t}/join`);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"leaveTeamProject",value:function(){var e=Yu(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`/projects/${t}/authorization`,{data:{targetUserId:this.props.currentUser.id}});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"currentUserIsTeamAdmin",value:function(){if(!this.props.currentUser)return!1;var e=this.props.currentUser.id;return!!this.state.adminIds.includes(e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.handleError,n=t.handleErrorForInput,a={updateName:function(t){return e.updateFields({name:t}).catch(n)},updateUrl:function(t){return e.updateFields({url:t}).catch(n)},updateDescription:function(t){return e.updateFields({description:t}).catch(r)},joinTeam:function(){return e.joinTeam().catch(r)},inviteEmail:function(t){return e.inviteEmail(t).catch(r)},inviteUser:function(t){return e.inviteUser(t).catch(r)},removeUserFromTeam:function(t,n){return e.removeUserFromTeam(t,n).catch(r)},uploadAvatar:function(){return Iu(function(t){return e.uploadAvatar(t).catch(r)})},uploadCover:function(){return Iu(function(t){return e.uploadCover(t).catch(r)})},clearCover:function(){return e.updateFields({hasCoverImage:!1}).catch(r)},addProject:function(t){return e.addProject(t).catch(r)},removeProject:function(t){return e.removeProject(t).catch(r)},deleteProject:function(t){return e.deleteProject(t).catch(r)},addPin:function(t){return e.addPin(t).catch(r)},removePin:function(t){return e.removePin(t).catch(r)},updateWhitelistedDomain:function(t){return e.updateFields({whitelistedDomain:t}).catch(r)},updateUserPermissions:function(t,n){return e.updateUserPermissions(t,n).catch(r)},joinTeamProject:function(t){return e.joinTeamProject(t).catch(r)},leaveTeamProject:function(t){return e.leaveTeamProject(t).catch(r)}};return this.props.children(this.state,a,this.currentUserIsOnTeam(),this.currentUserIsTeamAdmin())}}])&&Ku(r.prototype,n),a&&Ku(r,a),t}();tl.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,currentUser:h.a.object,updateCurrentUser:h.a.func.isRequired,handleError:h.a.func.isRequired,initialTeam:h.a.object.isRequired,uploadAssetSizes:h.a.func.isRequired};var rl=function(e){var t=e.api,r=e.children,n=e.initialTeam;return p.a.createElement(ds,null,function(e){return p.a.createElement(Hu,null,function(a){return p.a.createElement(De,null,function(o){return p.a.createElement(ue,null,function(i,c,s){var u=s.update;return p.a.createElement(tl,Bu({api:t,currentUser:i,initialTeam:n},{updateCurrentUser:u},a,e,o),r)})})})})};rl.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,initialTeam:h.a.object.isRequired};var nl=rl,al=r(69),ol=r.n(al),il=function(e){var t=e.onClick,r=e.text,n=e.emoji;return p.a.createElement("button",{className:"button-small has-emoji button-tertiary",onClick:t},p.a.createElement("span",null,r," "),p.a.createElement("span",{className:`emoji ${n}`}))};il.propTypes={onClick:h.a.func.isRequired,text:h.a.node.isRequired,emoji:h.a.string.isRequired};var cl=il,sl=function(e){return p.a.createElement("dialog",{className:"pop-over collection-options-pop"},p.a.createElement("section",{className:"pop-over-actions danger-zone last-section"},e.deleteCollection&&p.a.createElement(cl,{onClick:function(t){window.confirm("Are you sure you want to delete your collection?")&&function(e,t,r){var n=e.target.closest("li");n.addEventListener("animationend",r,{once:!0}),n.classList.add(t)}(t,"slide-down",function(){return e.deleteCollection(e.collection.id)})},text:"Delete Collection ",emoji:"bomb"})))};function ul(e){var t=e.deleteCollection,r=e.collection;return t?p.a.createElement($r,{buttonText:p.a.createElement("div",{className:"down-arrow","aria-label":"options"}),containerClass:"collection-options-pop-btn",buttonClass:"collection-options button-borderless opens-pop-over"},p.a.createElement(ue,null,function(e){return p.a.createElement(sl,{collection:r,deleteCollection:t,currentUser:e})})):null}function ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pl(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fl(e){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ml(e,t){return(ml=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}sl.propTypes={deleteCollection:h.a.func},ul.propTypes={collection:h.a.object.isRequired,deleteCollection:h.a.func};var dl=function(e){var t=e.projects;return p.a.createElement(p.a.Fragment,null,p.a.createElement("ul",{className:"projects-preview"},t.slice(0,3).map(function(e){return p.a.createElement("li",{key:e.id,className:"project-container "+(e.private?"private":"")},p.a.createElement("img",{className:"avatar",src:ft(e.id),alt:`Project avatar for ${e.domain}`}),p.a.createElement("div",{className:"project-name"},e.domain),p.a.createElement("div",{className:"project-badge private-project-badge","aria-label":"private"}))})),p.a.createElement("div",{className:"collection-link"},"View ",p.a.createElement(ol.a,{count:t.length,singular:"project"})," →"))};dl.propTypes={projects:h.a.any.isRequired};var hl=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pl(this,fl(t).call(this,e))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ml(e,t)}(t,p.a.Component),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.collection,r=e.deleteCollection,n=e.isAuthorized;return p.a.createElement("li",null,n&&p.a.createElement(ul,{collection:t,deleteCollection:r}),t&&p.a.createElement(jt,{collection:t,className:"button-area"},p.a.createElement("div",{className:"collection"+(n?" authorized":""),id:"collection-"+t.id},p.a.createElement("div",{className:"collection-container"},p.a.createElement("div",{className:"collection-info",style:{backgroundColor:t.coverColor}},p.a.createElement("div",{className:"avatar-container"},p.a.createElement("div",{className:"avatar"},p.a.createElement($o,{backgroundColor:st(t.coverColor),collectionId:t.id}))),p.a.createElement("div",{className:"collection-name-description"},p.a.createElement("div",{className:"button"},p.a.createElement("span",{className:"project-badge private-project-badge","aria-label":"private"}),p.a.createElement("div",{className:"project-name"},t.name)),p.a.createElement("div",{className:"description",style:{color:ct(t.coverColor)}},p.a.createElement(ua,{length:96},t.description))),p.a.createElement("div",{className:"overflow-mask"})),t.projects?t.projects.length>0?p.a.createElement(dl,{projects:t.projects,color:t.coverColor,collection:t}):p.a.createElement("div",{className:"projects-preview empty"},n?p.a.createElement("p",null,"This collection is empty – add some projects ",p.a.createElement("span",{role:"img","aria-label":""},"☝️")):p.a.createElement("p",null,"No projects to see in this collection just yet.")):p.a.createElement("div",{className:"collection-link"},p.a.createElement(lr,null))))))}}])&&ll(r.prototype,n),a&&ll(r,a),t}();hl.propTypes={collection:h.a.object.isRequired,isAuthorized:h.a.bool.isRequired,deleteCollection:h.a.func};var vl=hl;function yl(){return(yl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function gl(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function El(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function jl(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){El(o,n,a,i,c,"next",e)}function c(e){El(o,n,a,i,c,"throw",e)}i(void 0)})}}function wl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ol(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pl(e,t,r){return t&&Ol(e.prototype,t),r&&Ol(e,r),e}function kl(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Nl(e):t}function Rl(e){return(Rl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tl(e,t)}function Tl(e,t){return(Tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xl=function(e){function t(e){var r;return wl(this,t),(r=kl(this,Rl(t).call(this,e))).state={deletedCollectionIds:[]},r.deleteCollection=r.deleteCollection.bind(Nl(Nl(r))),r}return Cl(t,p.a.Component),Pl(t,[{key:"deleteCollection",value:function(){var e=jl(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(function(e){var r=e.deletedCollectionIds;return{deletedCollectionIds:[].concat(gl(r),[t])}}),e.next=3,this.props.api.delete(`/collections/${t}`);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.api,a=t.isAuthorized,o=t.maybeCurrentUser,i=t.maybeTeam,c=this.deleteCollection,s=this.props.collections.filter(function(t){var r=t.id;return!e.state.deletedCollectionIds.includes(r)}),u=!!s.length,l=a&&!!o;return u||l?p.a.createElement("article",{className:"collections"},p.a.createElement("h2",null,r),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement(Sl,{api:n,currentUser:o,maybeTeam:i}),!u&&p.a.createElement(ql,{api:n,currentUser:o})),p.a.createElement(_l,{collections:s,api:n,isAuthorized:a,deleteCollection:c})):null}}]),t}();xl.propTypes={collections:h.a.array.isRequired,maybeCurrentUser:h.a.object,maybeTeam:h.a.object,title:h.a.node.isRequired,api:h.a.func.isRequired,isAuthorized:h.a.bool.isRequired};var ql=function(){return p.a.createElement("div",{className:"create-first-collection"},p.a.createElement("img",{src:"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fpsst-pink.svg?1541086338934",alt:""}),p.a.createElement("p",{className:"placeholder"},"Create collections to organize your favorite projects."),p.a.createElement("br",null))},Sl=function(e){function t(e){var r;return wl(this,t),(r=kl(this,Rl(t).call(this,e))).state={shouldRedirect:!1,error:!1,loading:!1,newCollectionUrl:""},r.createCollection=r.createCollection.bind(Nl(Nl(r))),r}return Cl(t,p.a.Component),Pl(t,[{key:"postCollection",value:function(){var e=jl(regeneratorRuntime.mark(function e(t,r){var n,a,o,i,c,s,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[r,t].join("-"),a=`A ${t} of projects that does ${r} things`,o=Kt()(n),it,i=bo()({luminosity:"light"}),c=this.props.maybeTeam?this.props.maybeTeam.id:void 0,e.next=8,this.props.api.post("collections",{name:n,description:a,url:o,avatarUrl:"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fcollection-avatar.svg?1540389405633",coverColor:i,teamId:c});case 8:if(s=e.sent,!(u=s.data)||!u.url){e.next=15;break}return this.props.maybeTeam?u.team=this.props.maybeTeam:u.user=this.props.currentUser,l=lt(u),this.setState({newCollectionUrl:l,shouldRedirect:!0}),e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"generateNames",value:function(){var e=jl(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=["mix","bricolage","playlist","assortment","potpourri","melange","album","collection","variety","compilation"],r="radical",e.prev=2,e.next=5,nr("collections");case 5:return t=e.sent,e.next=8,ar("predicates");case 8:r=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:return e.abrupt("return",[t,r]);case 14:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"createCollection",value:function(){var e=jl(regeneratorRuntime.mark(function e(){var t,r,n,a,o,i,c,s,u,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.generateNames();case 3:t=e.sent,r=bl(t,2),n=r[0],a=r[1],o=!1,i=!0,c=!1,s=void 0,e.prev=11,u=n[Symbol.iterator]();case 13:if(i=(l=u.next()).done){e.next=28;break}return p=l.value,e.prev=15,e.next=18,this.postCollection(p,a);case 18:if(!(o=e.sent)){e.next=21;break}return e.abrupt("break",28);case 21:e.next=25;break;case 23:e.prev=23,e.t0=e.catch(15);case 25:i=!0,e.next=13;break;case 28:e.next=34;break;case 30:e.prev=30,e.t1=e.catch(11),c=!0,s=e.t1;case 34:e.prev=34,e.prev=35,i||null==u.return||u.return();case 37:if(e.prev=37,!c){e.next=40;break}throw s;case 40:return e.finish(37);case 41:return e.finish(34);case 42:o||this.setState({error:"Unable to create collection :-("});case 43:case"end":return e.stop()}},e,this,[[11,30,34,42],[15,23],[35,,37,41]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.shouldRedirect?p.a.createElement(Ge.a,{to:this.state.newCollectionUrl,push:!0}):this.state.loading?p.a.createElement("div",{id:"create-collection-container"},p.a.createElement(lr,null)):p.a.createElement("div",{id:"create-collection-container"},p.a.createElement(A,{name:"Create Collection clicked"},p.a.createElement("button",{className:"button",id:"create-collection",onClick:function(){return e.createCollection()}},"Create Collection")))}}]),t}();Sl.propTypes={api:h.a.any.isRequired,currentUser:h.a.object.isRequired,maybeTeam:h.a.object};var _l=function(e){var t=e.collections,r=e.deleteCollection,n=e.api,a=e.isAuthorized,o=St()(t,function(e){return e.updatedAt}).reverse();return p.a.createElement("ul",{className:"collections-container"},o.map(function(e){return p.a.createElement(vl,yl({key:e.id},{collection:e,api:n,isAuthorized:a,deleteCollection:r}))}))};_l.propTypes={api:h.a.func.isRequired,collections:h.a.array.isRequired,isAuthorized:h.a.bool.isRequired,deleteCollection:h.a.func};var Ul=xl,Il=function(e){var t=e.count;return 1===t?"Thanked once":2===t?"Thanked twice":`Thanked ${t} times`};Il.propTypes={count:h.a.number.isRequired};var Al=function(e){var t=e.count;return t>0?p.a.createElement("p",{className:"thanks"},p.a.createElement(Il,{count:t})," ",p.a.createElement("span",{className:"emoji sparkling_heart"})):null};Al.propTypes={count:h.a.number.isRequired};var Fl=function(e){var t=e.count;return p.a.createElement("p",{className:"thanks"},p.a.createElement("span",{className:"emoji sparkling_heart"})," ",t)};Fl.propTypes={count:h.a.number.isRequired};var Dl=Al;function $l(){return($l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ml(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zl(e){return(zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vl(e,t){return(Vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gl=function(e){var t=e.id;return p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,"This team has your name. You should update your info to remain unique ❄"),p.a.createElement(kt,{className:"button button-small button-tertiary button-in-notification-container",to:`/user/${t}`},"Your Profile"))};Gl.propTypes={id:h.a.number.isRequired};var Hl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ml(this,zl(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vl(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=Gl({id:this.props.userId});this.notification=this.props.createPersistentNotification(e)}},{key:"componentWillUnmount",value:function(){this.notification.removeNotification()}},{key:"render",value:function(){return null}}])&&Ll(r.prototype,n),a&&Ll(r,a),t}();Hl.propTypes={createPersistentNotification:h.a.func.isRequired,userId:h.a.number};var Bl=function(){return p.a.createElement(ue,null,function(e){var t=e.id;return p.a.createElement(De,null,function(e){return p.a.createElement(Hl,$l({userId:t},e))})})};function Wl(){return(Wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jl(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Yl(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Jl(o,n,a,i,c,"next",e)}function c(e){Jl(o,n,a,i,c,"throw",e)}i(void 0)})}}function Zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kl(e){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ql(e,t){return(Ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var ep=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Kl(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Xl(n):a).state={templateProjects:[],filteredProjects:[],source:"my-projects",filterPlaceholder:"Filter my projects",loadingTemplates:!1,notifyTemplateIsRemixing:!1},r.onClick=r.onClick.bind(Xl(Xl(r))),r.updateFilter=r.updateFilter.bind(Xl(Xl(r))),r.filterInputIsBlank=r.filterInputIsBlank.bind(Xl(Xl(r))),r.filterInput=p.a.createRef(),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ql(e,t)}(t,p.a.Component),r=t,(n=[{key:"normalizeTemplateProjects",value:function(e){return e.map(function(e){return e.users=[],e})}},{key:"updateFilter",value:function(e){var t=[];t="templates"===this.state.source?this.state.templateProjects:this.props.myProjects;var r=this.filterProjects(e,t,this.props.teamProjects);this.setState({filteredProjects:r})}},{key:"filterProjects",value:function(e,t,r){e=e.toLowerCase().trim();var n=r.map(function(e){return e.id}),a=t.filter(function(e){var t=e.id;return!n.includes(t)}),o=[];if(!e)return a.splice(0,20);var i=!0,c=!1,s=void 0;try{for(var u,l=a[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var p=u.value;if(o.length>20)break;var f=p.domain.toLowerCase().includes(e),m=p.description.toLowerCase().includes(e);(f||m)&&o.push(p)}}catch(d){c=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}return o}},{key:"activeIfSourceIsTemplates",value:function(){if("templates"===this.state.source)return"active"}},{key:"activeIfSourceIsMyProjects",value:function(){if("my-projects"===this.state.source)return"active"}},{key:"remixTemplate",value:function(){var e=Yl(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=`projects/${t}/remix`,e.next=3,this.props.api.post(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"inviteUserToRemix",value:function(){var e=Yl(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=`projects/${t.inviteToken}/join`,e.next=3,this.props.api.post(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClick",value:function(e,t){e.preventDefault(),this.props.togglePopover(),this.props.addProject(t)}},{key:"sourceIsTemplates",value:function(){this.setState({source:"templates",filterPlaceholder:"Filter templates"})}},{key:"sourceIsMyProjects",value:function(){this.setState({source:"my-projects",filterPlaceholder:"Filter projects"})}},{key:"getTemplateProjects",value:function(){var e=this;this.setState({loadingTemplates:!0});var t=`projects/byIds?ids=${["9cd48134-1624-48f5-beaf-6c1b68bd9217","712cc905-bfcb-454e-a47a-c729ab63c455","929980a8-32fc-4ae7-a66f-dddb3ae4912c"].join(",")}`;this.props.api.get(t).then(function(t){var r=t.data,n=e.normalizeTemplateProjects(r);e.setState({templateProjects:n,loadingTemplates:!1}),e.updateFilter("")})}},{key:"componentDidUpdate",value:function(e,t){t.source!==this.state.source&&(this.updateFilter(""),this.filterInput.current.focus())}},{key:"componentDidMount",value:function(){this.getTemplateProjects(),this.filterInput.current.focus(),this.updateFilter("")}},{key:"filterInputIsBlank",value:function(){if(0===this.filterInput.current.value.length)return!0}},{key:"render",value:function(){var e=this,t=this.state.filteredProjects;return p.a.createElement("dialog",{className:"pop-over add-team-project-pop wide-pop"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("input",{ref:this.filterInput,onChange:function(t){e.updateFilter(t.target.value)},id:"team-project-search",className:"pop-over-input search-input pop-over-search",placeholder:this.state.filterPlaceholder,autoFocus:!0})),p.a.createElement("section",{className:"pop-over-actions results-list","data-source":"templates"},p.a.createElement("ul",{className:"results"},t.map(function(t){return p.a.createElement("li",{key:t.id},p.a.createElement(Mn,Wl({onClick:function(r){return e.onClick(r,t)}},t,{title:t.domain,isPrivate:t.private})))})),0===this.state.filteredProjects.length&&this.filterInputIsBlank&&p.a.createElement("p",{className:"action-description no-projects-description"},"Create or Join projects to add them to the team")))}}])&&Zl(r.prototype,n),a&&Zl(r,a),t}();ep.propTypes={myProjects:h.a.array.isRequired,teamProjects:h.a.array.isRequired,addProject:h.a.func.isRequired,togglePopover:h.a.func.isRequired,api:h.a.any.isRequired};var tp=function(e){return p.a.createElement(ue,null,function(t){return p.a.createElement(ep,Wl({myProjects:t.projects},e))})};function rp(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var np=function(e){var t=e.currentUserIsOnTeam,r=rp(e,["currentUserIsOnTeam"]);return t?p.a.createElement("section",{className:"add-project-container"},p.a.createElement($r,{buttonClass:`button add-project has-emoji opens-pop-over ${r.extraButtonClass}`,buttonText:p.a.createElement(p.a.Fragment,null,"Add Project ",p.a.createElement("span",{className:"emoji bento-box",role:"img","aria-label":""})),passToggleToPop:!0},p.a.createElement(tp,r))):null};np.propTypes={currentUserIsOnTeam:h.a.bool.isRequired,addProject:h.a.func.isRequired,teamProjects:h.a.array.isRequired,extraButtonClass:h.a.string,api:h.a.func.isRequired};var ap=np;function op(){return(op=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ip(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function cp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function up(e,t){return(up=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pp=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=sp(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?lp(n):a).state={teamIsDeleting:!1},r.deleteTeam=r.deleteTeam.bind(lp(lp(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&up(e,t)}(t,p.a.Component),r=t,(n=[{key:"deleteTeam",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.teamIsDeleting){e.next=2;break}return e.abrupt("return",null);case 2:return this.setState({teamIsDeleting:!0}),e.prev=3,e.next=6,this.props.api().delete(`teams/${this.props.teamId}`);case 6:this.props.history.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("deleteTeam",e.t0,e.t0.response),this.props.createErrorNotification("Something went wrong, try refreshing?"),this.setState({teamIsDeleting:!1});case 14:case"end":return e.stop()}},e,this,[[3,9]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){ip(o,n,a,i,c,"next",e)}function c(e){ip(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return p.a.createElement("dialog",{className:"pop-over delete-team-pop",open:!0},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("div",{className:"pop-title"},"Delete ",this.props.teamName)),p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement("img",{className:"illustration",src:"https://cdn.glitch.com/c53fd895-ee00-4295-b111-7e024967a033%2Fdelete-team.svg?1531267699621","aria-label":"illustration",alt:""}),p.a.createElement("div",{className:"action-description"},"Deleting ",this.props.teamName," will remove this team page. No projects will be deleted, but only current project members will be able to edit them.")),p.a.createElement("section",{className:"pop-over-actions danger-zone"},p.a.createElement("button",{className:"button button-small has-emoji opens-pop-over",onClick:this.deleteTeam},p.a.createElement("span",null,"Delete ",this.props.teamName," "),p.a.createElement("span",{className:"emoji bomb",role:"img","aria-label":"bomb emoji"}),this.state.teamIsDeleting&&p.a.createElement(lr,null))))}}])&&cp(r.prototype,n),a&&cp(r,a),t}(),fp=Object($e.a)(function(e){return p.a.createElement(De,null,function(t){return p.a.createElement(pp,op({},t,e))})});fp.propTypes={api:h.a.func.isRequired,teamId:h.a.number.isRequired,teamName:h.a.string.isRequired,users:h.a.array.isRequired,teamAdmins:h.a.array.isRequired,togglePopover:h.a.func};var mp=fp,dp=function(e){var t=Object.assign({},e);return p.a.createElement("section",null,p.a.createElement($r,{buttonClass:"button button-small button-tertiary has-emoji opens-pop-over danger-zone",buttonText:p.a.createElement(p.a.Fragment,null,"Delete ",t.teamName," ",p.a.createElement("span",{className:"emoji bomb",role:"img","aria-label":""})," "),passToggleToPop:!0},p.a.createElement(mp,t)))};dp.propTypes={api:h.a.func.isRequired,teamId:h.a.number.isRequired,teamName:h.a.string.isRequired,users:h.a.array.isRequired,teamAdmins:h.a.array.isRequired};var hp=dp;function vp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yp(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bp(e){return(bp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gp(e,t){return(gp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ep=function(){return p.a.createElement("section",{className:"team-marketing"},p.a.createElement("p",null,p.a.createElement("img",{className:"for-platforms-icon",src:"https://cdn.glitch.com/be1ad2d2-68ab-404a-82f4-6d8e98d28d93%2Ffor-platforms-icon.svg?1506442305188",alt:"fishing emoji"}),"Want your own team page, complete with detailed app analytics?"),p.a.createElement(kt,{to:"/teams",className:"button button-link has-emoji"},"About Teams ",p.a.createElement("span",{className:"emoji fishing_pole",role:"img","aria-label":"emoji"})))},jp=function(){return p.a.createElement("span",{"data-tooltip":"Verified to be supportive, helpful people"},p.a.createElement("img",{className:"verified",src:"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fverified.svg?1501783108220",alt:"✓"}))},wp=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=yp(this,bp(t).call(this,e))).state={src:null},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gp(e,t)}(t,p.a.Component),r=t,(n=[{key:"load",value:function(){this.setState({src:"https://favicon-fetcher.glitch.me/img/"+this.props.domain})}},{key:"componentDidMount",value:function(){this.load(),this.load=Xt()(this.load.bind(this),250)}},{key:"componentDidUpdate",value:function(e){e.domain!==this.props.domain&&(this.setState({src:null}),this.load())}},{key:"componentWillUnmount",value:function(){this.load.cancel()}},{key:"render",value:function(){var e=this,t=this.props.domain;return this.state.src?p.a.createElement("img",{className:"whitelisted-domain",alt:t,src:this.state.src,onError:function(){return e.setState({src:null})}}):p.a.createElement("div",{className:"whitelisted-domain","aria-label":t},t[0].toUpperCase())}}])&&vp(r.prototype,n),a&&vp(r,a),t}();h.a.bool.isRequired;r(432);function Op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pp(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kp(e){return(kp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rp(e,t){return(Rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cp=function(e){var t=e.user,r=e.action,n=tt(t),a=t.login,o=t.thanksCount;return p.a.createElement("button",{onClick:function(e){r(e)},className:"button-unstyled result result-user"},p.a.createElement("img",{className:"avatar",src:nt(t),alt:""}),p.a.createElement("div",{className:"result-info"},p.a.createElement("div",{className:"result-name",title:n},n),!!t.name&&p.a.createElement("div",{className:"result-description"},"@",a),o>0&&p.a.createElement(Fl,{count:o})))};Cp.propTypes={user:h.a.shape({avatarThumbnailUrl:h.a.string,name:h.a.string,login:h.a.string.isRequired,thanksCount:h.a.number.isRequired}).isRequired,action:h.a.func.isRequired};var Tp=Cp,Np=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pp(this,kp(t).call(this,e))).state={color:bo()({luminosity:"light"})},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rp(e,t)}(t,p.a.Component),r=t,(n=[{key:"render",value:function(){var e={backgroundColor:this.state.color};return p.a.createElement("button",{onClick:this.props.onClick,className:"button-unstyled result"},p.a.createElement("img",{className:"avatar",src:et,style:e,alt:""}),p.a.createElement("div",{className:"result-name"},"Invite ",this.props.email))}}])&&Op(r.prototype,n),a&&Op(r,a),t}();Np.propTypes={email:h.a.string.isRequired,onClick:h.a.func.isRequired};var xp=function(e){var t=e.domain,r=e.prevDomain,n=e.onClick;return p.a.createElement("button",{onClick:n,className:"button-unstyled result"},p.a.createElement(wp,{domain:t}),p.a.createElement("div",{className:"result-name"},"Allow anyone with an @",t," email to join"),!!r&&p.a.createElement("div",{className:"result-description"},"This will replace @",r))};function qp(){return(qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sp(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Up(e,t,r[t])})}return e}function Up(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ip(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ap(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Ip(o,n,a,i,c,"next",e)}function c(e){Ip(o,n,a,i,c,"throw",e)}i(void 0)})}}function Fp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dp(e){return(Dp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $p(e,t){return($p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}xp.propTypes={domain:h.a.string.isRequired,prevDomain:h.a.string,onClick:h.a.func.isRequired};var Mp=function(e){var t=Object(ic.parseOneAddress)(e.replace("@","test@"));return t&&t.domain.includes(".")?t.domain.toLowerCase():null},zp=function(e,t){var r=t.toLowerCase(),n=0,a=(e.login||"").toLowerCase(),o=e.name||"",i=o.toLowerCase();return a===r&&(n+=9e3),i===r&&(n+=50,o===t&&(n+=10)),[a,i].forEach(function(e){e.includes(r)&&(n+=10,e.startsWith(r)&&(n+=5))}),n},Vp=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Dp(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Lp(n):a).state={query:"",maybeRequest:null,maybeResults:null,validDomains:{}},r.handleChange=r.handleChange.bind(Lp(Lp(r))),r.clearSearch=r.clearSearch.bind(Lp(Lp(r))),r.debouncedSearch=Xt()(r.debouncedSearch.bind(Lp(Lp(r))),300),r}var r,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$p(e,t)}(t,p.a.Component),r=t,(a=[{key:"handleChange",value:function(e){var t=e.currentTarget.value.trimStart();this.setState({query:t}),t?this.debouncedSearch():this.clearSearch()}},{key:"clearSearch",value:function(){this.setState({maybeRequest:null,maybeResults:null})}},{key:"debouncedSearch",value:function(){var e=this.state.query.trim();e?(this.startSearch(e),this.validateDomain(e)):this.clearSearch()}},{key:"startSearch",value:function(){var e=Ap(regeneratorRuntime.mark(function e(t){var r,n,a,o,i,c=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props.api.get(`users/search?q=${t}`),this.setState({maybeRequest:r}),e.next=4,r;case 4:n=e.sent,a=n.data,o=a.filter(function(e){return!c.props.members.includes(e.id)}),i=o.sort(function(e,r){return zp(r,t)-zp(e,t)}),this.setState(function(e){var t=e.maybeRequest;return r===t?{maybeRequest:null,maybeResults:i}:{}});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"validateDomain",value:function(){var e=Ap(regeneratorRuntime.mark(function e(t){var r,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Mp(t))&&void 0===this.state.validDomains[r]){e.next=3;break}return e.abrupt("return");case 3:return this.setState(function(e){return{validDomains:_p({},e.validDomains,Up({},r,null))}}),a=!["gmail.com","yahoo.com"].includes(r),e.prev=5,e.next=8,L.a.get(`https://freemail.glitch.me/${r}`);case 8:o=e.sent,i=o.data,a=!i.free,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),Object(n.captureException)(e.t0);case 16:this.setState(function(e){return{validDomains:_p({},e.validDomains,Up({},r,a))}});case 17:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.inviteEmail,r=e.inviteUser,n=e.setWhitelistedDomain,a=this.state,o=a.maybeRequest,i=a.maybeResults,c=a.query,s=!!o||!i,u=[],l=Object(ic.parseOneAddress)(c);if(l&&this.props.enabledToggles.includes("Email Invites")&&u.push({key:"invite-by-email",item:p.a.createElement(Np,{email:l.address,onClick:function(){return t(l.address)}})}),n){var f=Mp(c),m=this.props.whitelistedDomain;f&&m!==f&&this.state.validDomains[f]&&u.push({key:"whitelist-email-domain",item:p.a.createElement(xp,{domain:f,prevDomain:m,onClick:function(){return n(f)}})})}return i&&u.push.apply(u,Sp(i.map(function(e){return{key:e.id,item:p.a.createElement(Tp,{user:e,action:function(){return r(e)}})}}))),p.a.createElement("dialog",{className:"pop-over add-team-user-pop"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("input",{id:"team-user-search",autoFocus:!0,value:c,onChange:this.handleChange,className:"pop-over-input search-input pop-over-search",placeholder:"Search for a user"})),!!c&&p.a.createElement(Gp,{isLoading:s,results:u}),!c&&n&&p.a.createElement("aside",{className:"pop-over-info"},"You can also whitelist with @example.com"))}}])&&Fp(r.prototype,a),o&&Fp(r,o),t}();Vp.propTypes={api:h.a.func.isRequired,inviteEmail:h.a.func.isRequired,inviteUser:h.a.func.isRequired,members:h.a.arrayOf(h.a.number.isRequired).isRequired,setWhitelistedDomain:h.a.func,whitelistedDomain:h.a.string,enabledToggles:h.a.array.isRequired};var Gp=function(e){var t=e.results;return e.isLoading?p.a.createElement("section",{className:"pop-over-actions last-section"},p.a.createElement(lr,null)):0===t.length?p.a.createElement("section",{className:"pop-over-actions last-section"},"Nothing found ",p.a.createElement("span",{role:"img","aria-label":""},"💫")):p.a.createElement("section",{className:"pop-over-actions last-section results-list"},p.a.createElement("ul",{className:"results"},t.map(function(e){var t=e.key,r=e.item;return p.a.createElement("li",{key:t},r)})))};Gp.propTypes={results:h.a.array.isRequired,isLoading:h.a.bool.isRequired};var Hp=function(e){return p.a.createElement(Re,null,function(t){return p.a.createElement(Vp,qp({},e,{enabledToggles:t}))})};r(192);function Bp(){return(Bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wp(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Jp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yp(e){return(Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zp(e,t){return(Zp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Qp=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Yp(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Kp(n):a).state={gettingUser:!0,userTeamProjects:[],selectedProjects:new Set},r.selectAllProjects=r.selectAllProjects.bind(Kp(Kp(r))),r.unselectAllProjects=r.unselectAllProjects.bind(Kp(Kp(r))),r.handleCheckboxChange=r.handleCheckboxChange.bind(Kp(Kp(r))),r.removeUser=r.removeUser.bind(Kp(Kp(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zp(e,t)}(t,p.a.Component),r=t,(n=[{key:"removeUser",value:function(){this.props.togglePopover(),this.props.createNotification(`${tt(this.props.user)} removed from Team`),this.props.removeUserFromTeam(this.props.user.id,Array.from(this.state.selectedProjects))}},{key:"selectAllProjects",value:function(){this.setState(function(e){var t=e.userTeamProjects;return{selectedProjects:new Set(t.map(function(e){return e.id}))}})}},{key:"unselectAllProjects",value:function(){this.setState({selectedProjects:new Set})}},{key:"handleCheckboxChange",value:function(e){var t=e.target,r=t.checked,n=t.value;this.setState(function(e){var t=e.selectedProjects;return t=new Set(t),r?t.add(n):t.delete(n),{selectedProjects:t}})}},{key:"getUserWithProjects",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.get(`users/${this.props.user.id}`);case 2:t=e.sent,r=t.data,this.setState({userTeamProjects:r.projects.filter(function(e){return n.props.team.projects.some(function(t){return t.id===e.id})}),gettingUser:!1});case 5:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Wp(o,n,a,i,c,"next",e)}function c(e){Wp(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getUserWithProjects()}},{key:"render",value:function(){var e=this,t=this.state.userTeamProjects.every(function(t){return e.state.selectedProjects.has(t.id)}),r={backgroundColor:this.props.user.color},n=null;return this.state.gettingUser?n=p.a.createElement(lr,null):this.state.userTeamProjects.length>0&&(n=p.a.createElement(p.a.Fragment,null,p.a.createElement("p",{className:"action-description"},"Also remove them from these projects"),p.a.createElement("div",{className:"projects-list"},this.state.userTeamProjects.map(function(t){return p.a.createElement("label",{key:t.id,htmlFor:`remove-user-project-${t.id}`},p.a.createElement("input",{className:"checkbox-project",type:"checkbox",id:`remove-user-project-${t.id}`,checked:e.state.selectedProjects.has(t.id),value:t.id,onChange:e.handleCheckboxChange}),p.a.createElement("img",{className:"avatar",src:ft(t.id),alt:""}),t.domain)})),this.state.userTeamProjects.length>1&&p.a.createElement("button",{className:"button-small",onClick:t?this.unselectAllProjects:this.selectAllProjects},t?"Unselect All":"Select All"))),p.a.createElement("dialog",{className:"pop-over team-user-info-pop team-user-remove-pop"},p.a.createElement(Yt,null,"Remove ",tt(this.props.user)),p.a.createElement("section",{className:"pop-over-actions",id:"user-team-projects"},n||p.a.createElement("p",{className:"action-description"},tt(this.props.user)," is not a member of any projects")),p.a.createElement("section",{className:"pop-over-actions danger-zone"},p.a.createElement(A,{name:"Remove from Team submitted"},p.a.createElement("button",{className:"button-small has-emoji",onClick:this.removeUser},"Remove ",p.a.createElement("img",{className:"emoji avatar",src:nt(this.props.user),alt:this.props.user.login,style:r})))))}}])&&Jp(r.prototype,n),a&&Jp(r,a),t}();Qp.propTypes={api:h.a.func.isRequired,user:h.a.shape({name:h.a.string,login:h.a.string,thanksCount:h.a.number.isRequired,isOnTeam:h.a.bool,color:h.a.string}).isRequired,team:h.a.shape({projects:h.a.array.isRequired}),removeUserFromTeam:h.a.func.isRequired,createNotification:h.a.func.isRequired};var Xp=function(e){return p.a.createElement(De,null,function(t){return p.a.createElement(Qp,Bp({},t,e))})};function ef(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tf(){return(tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var rf=function(e){return p.a.createElement("section",{className:"pop-over-actions danger-zone"},p.a.createElement(A,{name:"Remove from Team clicked"},p.a.createElement("button",tf({className:"button-small has-emoji button-tertiary button-on-secondary-background"},e),"Remove from Team ",p.a.createElement("span",{className:"emoji wave",role:"img","aria-label":""}))))},nf=function(e){var t=e.user,r=e.userIsTeamAdmin,n=e.updateUserPermissions;return p.a.createElement("section",{className:"pop-over-actions admin-actions"},p.a.createElement("p",{className:"action-description"},"Admins can update team info, billing, and remove users"),r?p.a.createElement(A,{name:"Remove Admin Status clicked"},p.a.createElement("button",{className:"button-small button-tertiary has-emoji",onClick:function(){return n(t.id,20)}},"Remove Admin Status ",p.a.createElement("span",{className:"emoji fast-down"}))):p.a.createElement(A,{name:"Make an Admin clicked"},p.a.createElement("button",{className:"button-small button-tertiary has-emoji",onClick:function(){return n(t.id,30)}},"Make an Admin ",p.a.createElement("span",{className:"emoji fast-up"}))))};nf.propTypes={user:h.a.shape({id:h.a.number.isRequired}).isRequired,userIsTeamAdmin:h.a.bool.isRequired,updateUserPermissions:h.a.func.isRequired};var af=function(e){var t=e.count;return p.a.createElement("section",{className:"pop-over-info"},p.a.createElement(Dl,{count:t}))},of=function(e){var t=e.currentUser,r=e.showRemove,n=ef(e,["currentUser","showRemove"]),a={backgroundColor:n.user.color},o=n.currentUserIsTeamAdmin||t&&t.id===n.user.id;return p.a.createElement("dialog",{className:"pop-over team-user-info-pop"},p.a.createElement("section",{className:"pop-over-info user-info"},p.a.createElement(Pt,{user:n.user},p.a.createElement("img",{className:"avatar",src:nt(n.user),alt:n.user.login,style:a})),p.a.createElement("div",{className:"info-container"},p.a.createElement("p",{className:"name",title:n.user.name},n.user.name||"Anonymous"),n.user.login&&p.a.createElement("p",{className:"user-login",title:n.user.login},"@",n.user.login),n.userIsTeamAdmin&&p.a.createElement("div",{className:"status-badge"},p.a.createElement("span",{className:"status admin","data-tooltip":"Can edit team info and billing"},"Team Admin")))),n.user.thanksCount>0&&p.a.createElement(af,{count:n.user.thanksCount}),n.currentUserIsTeamAdmin&&p.a.createElement(nf,{user:n.user,userIsTeamAdmin:n.userIsTeamAdmin,updateUserPermissions:n.updateUserPermissions}),o&&!n.userIsTheOnlyMember&&p.a.createElement(rf,{onClick:r}))},cf=function(e){return p.a.createElement(Jt,{alternateContent:function(){return p.a.createElement(Xp,e)}},function(t){return p.a.createElement(of,tf({},e,{showRemove:t}))})};cf.propTypes={user:h.a.shape({name:h.a.string,login:h.a.string,thanksCount:h.a.number.isRequired,color:h.a.string}).isRequired,currentUserIsOnTeam:h.a.bool.isRequired,currentUserIsTeamAdmin:h.a.bool.isRequired,removeUserFromTeam:h.a.func.isRequired,userIsTeamAdmin:h.a.bool.isRequired,userIsTheOnlyMember:h.a.bool.isRequired,api:h.a.func.isRequired,teamId:h.a.number.isRequired,updateUserPermissions:h.a.func.isRequired,team:h.a.shape({projects:h.a.array.isRequired})},cf.defaultProps={currentUserIsOnTeam:!1};var sf=cf;function uf(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lf(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function pf(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function ff(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){pf(o,n,a,i,c,"next",e)}function c(e){pf(o,n,a,i,c,"throw",e)}i(void 0)})}}function mf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function df(e){return(df=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hf(e,t){return(hf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yf(){return(yf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var bf=function(e){return p.a.createElement("ul",{className:"users"},e.users.map(function(t){return p.a.createElement("li",{key:t.id},p.a.createElement($r,{buttonClass:"user button-unstyled",buttonText:p.a.createElement(Sn,{user:t,suffix:gf(e.adminIds,t)}),passToggleToPop:!0},p.a.createElement(sf,yf({userIsTeamAdmin:e.adminIds.includes(t.id),userIsTheOnlyMember:1===e.users.length,user:t},e))))}))},gf=function(e,t){return e.includes(t.id)?" (admin)":""};bf.propTypes={users:h.a.arrayOf(h.a.shape({id:h.a.number.isRequired})).isRequired,currentUserIsOnTeam:h.a.bool.isRequired,removeUserFromTeam:h.a.func.isRequired,updateUserPermissions:h.a.func.isRequired,api:h.a.func.isRequired,teamId:h.a.number.isRequired,currentUserIsTeamAdmin:h.a.bool.isRequired,adminIds:h.a.array.isRequired,team:h.a.object.isRequired};var Ef=function(e){var t=e.domain,r=e.setDomain,n=`Anyone with an @${t} email can join`;return p.a.createElement(Lt,null,function(e){var a=e.visible,o=e.setVisible;return p.a.createElement("details",{onToggle:function(e){return o(e.target.open)},open:a,className:"popover-container whitelisted-domain-container"},p.a.createElement("summary",{"data-tooltip":a?null:n},p.a.createElement(wp,{domain:t})),p.a.createElement("dialog",{className:"pop-over"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("p",{className:"info-description"},n)),!!r&&p.a.createElement("section",{className:"pop-over-actions danger-zone"},p.a.createElement("button",{className:"button button-small button-tertiary button-on-secondary-background has-emoji",onClick:function(){return r(null)}},"Remove ",t," ",p.a.createElement("span",{className:"emoji bomb"})))))})};Ef.propTypes={domain:h.a.string.isRequired,setDomain:h.a.func};var jf=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=df(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?vf(n):a).state={invitee:"",alreadyInvited:[]},r.removeNotifyInvited=r.removeNotifyInvited.bind(vf(vf(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hf(e,t)}(t,p.a.Component),r=t,(n=[{key:"setWhitelistedDomain",value:function(){var e=ff(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,this.props.setWhitelistedDomain(r);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"inviteUser",value:function(){var e=ff(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(),this.setState(function(e){return{invitee:tt(r),alreadyInvited:[].concat(lf(e.alreadyInvited),[r])}}),e.next=4,this.props.inviteUser(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"inviteEmail",value:function(){var e=ff(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(),this.setState({invitee:r}),e.next=4,this.props.inviteEmail(r);case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeNotifyInvited",value:function(){this.setState({invitee:""})}},{key:"render",value:function(){var e=this,t=this.props,r=t.inviteEmail,n=t.inviteUser,a=t.setWhitelistedDomain,o=uf(t,["inviteEmail","inviteUser","setWhitelistedDomain"]);return p.a.createElement(Lt,null,function(t){var i=t.visible,c=t.togglePopover;return p.a.createElement("span",{className:"add-user-container"},!!e.state.alreadyInvited.length&&p.a.createElement(Dn,{users:e.state.alreadyInvited}),p.a.createElement(A,{name:"Add to Team clicked"},p.a.createElement("button",{onClick:c,className:"button button-small button-tertiary add-user"},"Add")),!!e.state.invitee&&p.a.createElement("div",{className:"notification notifySuccess inline-notification",onAnimationEnd:e.removeNotifyInvited},"Invited ",e.state.invitee),i&&p.a.createElement(Hp,yf({},o,{setWhitelistedDomain:a?function(t){return e.setWhitelistedDomain(c,t)}:null,inviteUser:n?function(t){return e.inviteUser(c,t)}:null,inviteEmail:r?function(t){return e.inviteEmail(c,t)}:null})))})}}])&&mf(r.prototype,n),a&&mf(r,a),t}();jf.propTypes={inviteEmail:h.a.func,inviteUser:h.a.func,setWhitelistedDomain:h.a.func};var wf=function(e){var t=e.onClick;return p.a.createElement("button",{className:"button button-small button-cta join-team-button",onClick:t},"Join Team")};function Of(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Pf(e,t,r[t])})}return e}function Pf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kf=function(e){var t=e.api,r=e.projects,n=e.currentUser,a=e.isAuthorized,o=e.addPin,i=e.removePin,c=e.projectOptions,s=p.a.createElement(p.a.Fragment,null,"Pinned Projects",p.a.createElement("span",{className:"emoji pushpin emoji-in-title"}));return p.a.createElement(p.a.Fragment,null,r.length>0&&p.a.createElement(bi,{title:i?s:"Recent Projects",projects:r,api:t,projectOptions:a?Of({addPin:o,removePin:i},c):n&&n.login?Of({},c):{}}))};kf.propTypes={api:h.a.func.isRequired,currentUser:h.a.object,isAuthorized:h.a.bool.isRequired,projects:h.a.array.isRequired,addPin:h.a.func,removePin:h.a.func,projectOptions:h.a.object};var Rf=kf,Cf=r(218),Tf=r.n(Cf),Nf=r(127),xf=function(e){var t=e.selectTimeFrame,r=e.isActive,n=e.timeFrame,a="result button-unstyled";return r&&(a+=" active"),p.a.createElement("button",{className:a,onClick:t},p.a.createElement("div",{className:"result-container"},p.a.createElement("div",{className:"result-name"},n)))};xf.propTypes={selectTimeFrame:h.a.func.isRequired,isActive:h.a.bool.isRequired,timeFrame:h.a.string.isRequired};var qf=["Last 4 Weeks","Last 2 Weeks","Last 24 Hours"],Sf=function(e){var t=function(t){return function(){e.updateTimeFrame(t),e.togglePopover()}};return p.a.createElement("dialog",{className:"pop-over analytics-time-pop"},p.a.createElement("section",{className:"pop-over-actions last-section results-list"},p.a.createElement("div",{className:"results"},qf.map(function(r){return p.a.createElement(xf,{key:r,selectTimeFrame:t(r),isActive:e.currentTimeFrame===r,timeFrame:r})}))))};Sf.propTypes={updateTimeFrame:h.a.func.isRequired,currentTimeFrame:h.a.string.isRequired};var _f=function(e){var t=e.updateTimeFrame,r=e.currentTimeFrame;return p.a.createElement($r,{buttonClass:"button-small button-tertiary button-select",buttonText:p.a.createElement("span",null,r),passToggleToPop:!0},p.a.createElement(Sf,{updateTimeFrame:t,currentTimeFrame:r}))};_f.propTypes={updateTimeFrame:h.a.func.isRequired,currentTimeFrame:h.a.string.isRequired};var Uf=_f;function If(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Af(e){return(Af=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ff(e,t){return(Ff=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Df(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $f(){return($f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Lf=function(e){var t=e.currentProjectDomain,r=e.action,n="button-unstyled result";return t||(n+=" active"),p.a.createElement("button",{className:n,onClick:r},p.a.createElement("img",{className:"avatar",src:"https://cdn.glitch.com/55f8497b-3334-43ca-851e-6c9780082244%2Fbento-box.png?1502469566743",alt:"Bento emoji"}),p.a.createElement("div",{className:"result-name",title:"All Projects"},"All Projects"))};Lf.propTypes={currentProjectDomain:h.a.string.isRequired,action:h.a.func.isRequired};var Mf=function(e,t){if(e===t.domain)return!0},zf=function(e){var t=e.projects,r=e.togglePopover,n=e.setFilter,a=e.filter,o=e.updateProjectDomain,i=e.currentProjectDomain,c=function(e){r(),o(e),n("")},s=t.filter(function(e){return e.domain.toLowerCase().includes(a.toLowerCase())});return p.a.createElement("dialog",{className:"pop-over analytics-projects-pop wide-pop"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("input",{autoFocus:!0,onChange:function(e){n(e.target.value)},id:"analytics-project-filter",className:"pop-over-input search-input pop-over-search",placeholder:"Filter projects",value:a})),p.a.createElement("section",{className:"pop-over-actions results-list"},p.a.createElement("ul",{className:"results"},p.a.createElement("li",{className:"button-unstyled"},p.a.createElement(Lf,{currentProjectDomain:i,action:function(){return c("")}})),s.map(function(e){return p.a.createElement("li",{key:e.id,className:"button-unstyled"},p.a.createElement(Mn,$f({},e,{onClick:function(){return c(e.domain)},isActive:Mf(i,e)})))}))))};zf.propTypes={projects:h.a.arrayOf(h.a.shape({id:h.a.string.isRequired,domain:h.a.string.isRequired,description:h.a.string.isRequired})).isRequired,togglePopover:h.a.func,setFilter:h.a.func.isRequired,filter:h.a.string.isRequired,updateProjectDomain:h.a.func.isRequired,currentProjectDomain:h.a.string.isRequired};var Vf=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Af(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Df(n):a).state={filter:""},r.setFilter=r.setFilter.bind(Df(Df(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ff(e,t)}(t,p.a.Component),r=t,(n=[{key:"setFilter",value:function(e){this.setState({filter:e})}},{key:"render",value:function(){var e=this.props,t=e.updateProjectDomain,r=e.currentProjectDomain,n=e.projects;return p.a.createElement($r,{buttonClass:"button-small button-tertiary",buttonText:`Filter: ${r||"All Projects"}`,passToggleToPop:!0},p.a.createElement(zf,{projects:n,updateProjectDomain:t,currentProjectDomain:r,setFilter:this.setFilter,filter:this.state.filter}))}}])&&If(r.prototype,n),a&&If(r,a),t}();Vf.propTypes={updateProjectDomain:h.a.func.isRequired,currentProjectDomain:h.a.string.isRequired};var Gf=Vf;function Hf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bf(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jf(e,t){return(Jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yf=new CustomEvent("click",{bubbles:!0,cancelable:!0}),Zf=new CustomEvent("mouseout",{bubbles:!0,cancelable:!0}),Kf=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bf(this,Wf(t).call(this,e))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jf(e,t)}(t,p.a.Component),r=t,(n=[{key:"toggleGraph",value:function(e){var t=document.querySelector(`.c3-legend-item-${e}`);t.dispatchEvent(Yf),t.dispatchEvent(Zf)}},{key:"render",value:function(){var e=this;return p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"summary-item",onClick:function(){e.toggleGraph("Total-App-Views")},onKeyPress:function(){e.toggleGraph("App-Views")},role:"button",tabIndex:0},p.a.createElement("span",{className:"total app-views"},this.props.totalAppViews.toLocaleString("en"))," ",p.a.createElement(ol.a,{className:"summary-label",singular:"Total App View",plural:"Total App Views",count:this.props.totalAppViews,showCount:!1})),","," ",p.a.createElement("span",{className:"summary-item",onClick:function(){e.toggleGraph("Remixes")},onKeyPress:function(){e.toggleGraph("Remixes")},role:"button",tabIndex:0},p.a.createElement("span",{className:"total remixes"},this.props.totalRemixes.toLocaleString("en"))," ",p.a.createElement(ol.a,{className:"summary-label",singular:"Remix",plural:"Remixes",count:this.props.totalRemixes,showCount:!1})))}}])&&Hf(r.prototype,n),a&&Hf(r,a),t}();Kf.propTypes={totalAppViews:h.a.number.isRequired,totalRemixes:h.a.number.isRequired};var Qf=Kf,Xf=(r(434),r(219)),em=r.n(Xf),tm=r(220),rm=r.n(tm),nm=r(223);function am(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function om(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function im(e){return(im=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cm(e,t){return(cm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sm=nm.a().value(function(e){return e["@timestamp"]}),um=function(e,t){var r=function(e){var t=[];return(e=e||[]).forEach(function(e){var r=0,n=0,a=void 0;e.forEach(function(e){a||(a=e["@timestamp"]),n+=e.analytics.remixes,r+=e.analytics.visits}),t.push({time:a,appViews:r,remixes:n})}),t}(function(e,t){if("Last 24 Hours"===t)return sm(e);var r=rm()(e,"@timestamp","day");return Object.values(r)}(e.buckets,t)),n=["x"],a=["Remixes"],o=["Total App Views"];return r.shift(),r.forEach(function(e){n.push(e.time),o.push(e.appViews),a.push(e.remixes)}),[n,o,a]},lm=function(e){return"Last 24 Hours"===e?"%H:%M %p":"%b-%d"},pm=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),om(this,im(t).call(this,e))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cm(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidUpdate",value:function(e){!0===e.isGettingData&&!1===this.props.isGettingData&&function(e,t,r){var n=[];em()(t)||(n=um(t,r));e.generate({size:{height:200},data:{x:"x",xFormat:lm(r),columns:n},axis:{x:{type:"timeseries",tick:{format:lm(r)}}}})}(this.props.c3,this.props.analytics,this.props.currentTimeFrame)}},{key:"render",value:function(){return null}}])&&am(r.prototype,n),a&&am(r,a),t}();pm.propTypes={c3:h.a.object.isRequired,analytics:h.a.object.isRequired,currentTimeFrame:h.a.string.isRequired,isGettingData:h.a.bool.isRequired};var fm=pm;function mm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dm(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hm(e){return(hm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ym=function(e,t){var r=0;return e.forEach(function(e){r+=e[t]}),r},bm=function(e){return 0===e.count?"none":null},gm=function(e){var t=e.count,r=e.total,n=e.description,a=Math.max(Math.round(t/r*100),3);return t<=0?null:p.a.createElement("li",null,t.toLocaleString("en")," – ",n,p.a.createElement("progress",{value:a,max:"100"}))};gm.propTypes={count:h.a.number.isRequired,total:h.a.number.isRequired,description:h.a.string.isRequired};var Em=function(e){var t=e.filter(function(e){return!e.self});return t=t.slice(0,4)},jm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),dm(this,hm(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,p.a.PureComponent),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.analytics,r=e.totalRemixes,n=e.totalAppViews,a=Em(t.referrers),o=Em(t.remixReferrers),i=n-ym(a,"requests"),c=r-ym(o,"remixes");return p.a.createElement("div",{className:"referrers-content"},p.a.createElement("article",{className:"referrers-column app-views"},p.a.createElement("h4",null,"Total App Views"),p.a.createElement("ul",null,p.a.createElement(bm,{count:n}),p.a.createElement(gm,{count:i,total:n,description:"direct views"}),a.map(function(e,t){return p.a.createElement(gm,{key:t,count:e.requests,total:n,description:e.domain})}))),p.a.createElement("article",{className:"referrers-column remixes"},p.a.createElement("h4",null,"Remixes"),p.a.createElement("ul",null,p.a.createElement(bm,{count:r}),p.a.createElement(gm,{count:c,total:r,description:"direct remixes"}),o.map(function(e,t){return p.a.createElement(gm,{key:t,count:e.remixes,total:r,description:e.domain})}))))}}])&&mm(r.prototype,n),a&&mm(r,a),t}();jm.propTypes={analytics:h.a.object.isRequired,totalRemixes:h.a.number.isRequired,totalAppViews:h.a.number.isRequired};var wm=jm;function Om(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pm(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function km(e){return(km=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rm(e,t){return(Rm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cm(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}var Tm=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.api,a=t.currentProjectDomain,o=`analytics/${r}/project/${a}/overview`,e.prev=2,e.next=5,n.get(o);case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),console.error("getProjectDetails",e.t0);case 11:case"end":return e.stop()}},e,this,[[2,8]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Cm(o,n,a,i,c,"next",e)}function c(e){Cm(o,n,a,i,c,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}(),Nm=function(e){e.target.src=pt},xm=function(e){var t=e.project,r=e.className,n=void 0===r?"":r;return p.a.createElement("img",{src:ft(t.id),className:`avatar ${n}`,alt:t.domain,onError:Nm})};xm.propTypes={project:h.a.shape({domain:h.a.string.isRequired,id:h.a.string.isRequired}).isRequired,className:h.a.string};var qm=function(e){var t=e.projectDetails;return p.a.createElement("article",{className:"project-details"},p.a.createElement(wt,{project:t},p.a.createElement(xm,{project:t})),p.a.createElement("table",null,p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Created"),p.a.createElement("td",null,o()(t.createdAt).fromNow())),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Last viewed"),p.a.createElement("td",null,o()(t.lastAccess).fromNow())),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Last edited"),p.a.createElement("td",null,o()(t.lastEditedAt).fromNow())),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Last remixed"),p.a.createElement("td",null,t.lastRemixedAt?o()(t.lastRemixedAt).fromNow():"never")),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Total app views"),p.a.createElement("td",null,t.numAppVisits)),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Total code views"),p.a.createElement("td",null,t.numEditorVisits)),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Total direct remixes"),p.a.createElement("td",null,t.numDirectRemixes)),p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Total remixes"),p.a.createElement("td",null,t.numTotalRemixes)),t.baseProject.domain&&p.a.createElement("tr",null,p.a.createElement("td",{className:"label"},"Originally remixed from"),p.a.createElement("td",null,p.a.createElement(wt,{project:t.baseProject},p.a.createElement(xm,{project:t.baseProject,className:"baseproject-avatar"}),t.baseProject.domain))))))},Sm=function(e){var t=e.remix;return p.a.createElement(wt,{project:t},p.a.createElement("span",{"data-tooltip":t.domain,"data-tooltip-left":"true"},p.a.createElement(xm,{project:t})))},_m=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pm(this,km(t).call(this,e))).state={isGettingData:!0,projectDetails:{},projectRemixes:[]},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rm(e,t)}(t,p.a.Component),r=t,(n=[{key:"updateProjectDetails",value:function(){var e=this;this.setState({isGettingData:!0}),Tm(this.props).then(function(t){var r=t.data;e.setState({isGettingData:!1,projectDetails:r,projectRemixes:r.remixes.slice(0,100)})})}},{key:"componentDidMount",value:function(){this.updateProjectDetails()}},{key:"componentDidUpdate",value:function(e){this.props.currentProjectDomain!==e.currentProjectDomain&&this.updateProjectDetails()}},{key:"render",value:function(){return this.state.isGettingData?p.a.createElement(lr,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(qm,{projectDetails:this.state.projectDetails}),p.a.createElement("article",{className:"project-remixes"},p.a.createElement("h4",null,"Latest Remixes"),0===this.state.projectRemixes.length&&p.a.createElement("p",null,"No remixes yet (／_^)／ ●"),this.state.projectRemixes.map(function(e){return p.a.createElement(Sm,{key:e.id,remix:e})})))}}])&&Om(r.prototype,n),a&&Om(r,a),t}();_m.propTypes={currentProjectDomain:h.a.string.isRequired,id:h.a.number.isRequired,api:h.a.any.isRequired};var Um=_m;function Im(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Am(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dm(e,t){return(Dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $m(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}var Lm=function(e){return{"Last 4 Weeks":o()().subtract(4,"weeks").valueOf(),"Last 2 Weeks":o()().subtract(2,"weeks").valueOf(),"Last 24 Hours":o()().subtract(24,"hours").valueOf()}[e]},Mm=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,r,n){var a,o,i,c,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,o=t.api,t.projects.length){e.next=5;break}return(i=Tf()(Nf.a)).buckets.forEach(function(e){e["@timestamp"]+=Date.now()-Nf.b}),e.abrupt("return",i);case 5:return c=`analytics/${a}/team?from=${r}`,n&&(c=`analytics/${a}/project/${n}?from=${r}`),e.prev=7,e.next=10,o.get(c);case 10:return s=e.sent,u=s.data,e.abrupt("return",u);case 15:e.prev=15,e.t0=e.catch(7),console.error("getAnalytics",e.t0);case 18:case"end":return e.stop()}},e,this,[[7,15]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){$m(o,n,a,i,c,"next",e)}function c(e){$m(o,n,a,i,c,"throw",e)}i(void 0)})});return function(e,r,n){return t.apply(this,arguments)}}(),zm=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);return(r=Am(this,Fm(t).call(this,e))).state={currentTimeFrame:"Last 2 Weeks",fromDate:Lm("Last 2 Weeks"),currentProjectDomain:"",analytics:{},c3:{},isGettingData:!0,isGettingC3:!0,totalRemixes:0,totalAppViews:0},r}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dm(e,t)}(t,p.a.Component),n=t,(a=[{key:"updateTotals",value:function(){var e=0,t=0;this.state.analytics.buckets.forEach(function(r){e+=r.analytics.visits,t+=r.analytics.remixes}),this.setState({totalAppViews:e,totalRemixes:t})}},{key:"updateAnalytics",value:function(){var e=this;this.setState({isGettingData:!0}),Mm(this.props,this.state.fromDate,this.state.currentProjectDomain).then(function(t){e.setState({isGettingData:!1,analytics:t},function(){e.updateTotals()})})}},{key:"updateTimeFrame",value:function(e){var t=this;this.setState({currentTimeFrame:e,fromDate:Lm(e)},function(){t.updateAnalytics()})}},{key:"updateProjectDomain",value:function(e){var t=this;this.setState({currentProjectDomain:e},function(){t.updateAnalytics()})}},{key:"componentDidMount",value:function(){var e=this;r.e(0).then(r.t.bind(null,470,7)).then(function(t){e.setState({c3:t,isGettingC3:!1}),e.props.currentUserIsOnTeam&&e.updateAnalytics()})}},{key:"componentDidUpdate",value:function(e){!1===e.currentUserIsOnTeam&&!0===this.props.currentUserIsOnTeam&&!1===this.state.isGettingC3?this.updateAnalytics():e.projects.length!==this.props.projects.length&&!1===this.state.isGettingC3&&(this.updateAnalytics(),this.setState({currentProjectDomain:""}))}},{key:"render",value:function(){return this.props.currentUserIsOnTeam?p.a.createElement("section",{className:"team-analytics"},p.a.createElement("h2",null,"Analytics",0===this.props.projects.length&&!this.state.isGettingData&&p.a.createElement("aside",{className:"inline-banners team-page"},"Add projects to see their stats")),!!this.props.projects.length&&p.a.createElement("section",{className:"controls"},p.a.createElement(Gf,{updateProjectDomain:this.updateProjectDomain.bind(this),currentProjectDomain:this.state.currentProjectDomain,projects:this.props.projects}),p.a.createElement(Uf,{updateTimeFrame:this.updateTimeFrame.bind(this),currentTimeFrame:this.state.currentTimeFrame})),p.a.createElement("section",{className:"summary"},this.state.isGettingData?p.a.createElement(lr,null):p.a.createElement(Qf,{totalAppViews:this.state.totalAppViews,totalRemixes:this.state.totalRemixes})),p.a.createElement("section",{className:"activity"},p.a.createElement("figure",{id:"chart",className:"c3"}),(this.state.isGettingData||this.state.isGettingC3)&&p.a.createElement(lr,null),!this.state.isGettingC3&&p.a.createElement(fm,{c3:this.state.c3,analytics:this.state.analytics,isGettingData:this.state.isGettingData,currentTimeFrame:this.state.currentTimeFrame})),p.a.createElement("section",{className:"referrers"},p.a.createElement("h3",null,"Referrers"),this.state.isGettingData&&p.a.createElement(lr,null)||p.a.createElement(wm,{analytics:this.state.analytics,totalRemixes:this.state.totalRemixes,totalAppViews:this.state.totalAppViews})),this.state.currentProjectDomain&&p.a.createElement("section",{className:"project-details"},p.a.createElement("h3",null,"Project Details"),p.a.createElement(Um,{currentProjectDomain:this.state.currentProjectDomain,id:this.props.id,api:this.props.api})),p.a.createElement("section",{className:"explanation"},p.a.createElement("p",null,"Because Glitch doesn't inject code or cookies into your projects we don't collect the data required for unique app views. You can get uniques by adding Google Analytics to your project.")),!this.props.projects.length&&p.a.createElement("div",{className:"placeholder-mask"})):null}}])&&Im(n.prototype,a),o&&Im(n,o),t}();zm.propTypes={id:h.a.number,api:h.a.any.isRequired,projects:h.a.array.isRequired,currentUserIsOnTeam:h.a.bool.isRequired,addProject:h.a.func.isRequired,myProjects:h.a.array.isRequired};var Vm=zm;function Gm(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hm(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bm(){return(Bm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wm(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Jm(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Wm(o,n,a,i,c,"next",e)}function c(e){Wm(o,n,a,i,c,"throw",e)}i(void 0)})}}function Ym(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zm(e){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Km(e,t){return(Km=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ed(e,t,r[t])})}return e}function ed(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var td=function(e){var t=e.team,r=e.updateName,n=e.updateUrl;return p.a.createElement(p.a.Fragment,null,p.a.createElement("h1",null,p.a.createElement(Fr,{value:t.name,update:r,placeholder:"What's its name?",suffix:t.isVerified?p.a.createElement(jp,null):null})),p.a.createElement("p",{className:"team-url"},p.a.createElement(Fr,{value:t.url,update:function(e){return n(e).then(function(){return function(e){history.replaceState(null,null,Ze(e))}(Xm({},t,{url:e}))})},placeholder:"Short url?",prefix:"@"})))},rd=function(e){var t=e.collections,r=e.team,n=e.api,a=e.currentUser,o=e.currentUserIsOnTeam;return p.a.createElement(Ul,{title:"Collections",collections:t.map(function(e){return Xm({},e,{team:r})}),api:n,maybeCurrentUser:a,maybeTeam:r,isAuthorized:o})},nd=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Zm(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Qm(n):a).state={},r.teamAdmins=r.teamAdmins.bind(Qm(Qm(r))),r.addProjectToCollection=r.addProjectToCollection.bind(Qm(Qm(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Km(e,t)}(t,p.a.Component),r=t,(n=[{key:"addProjectToCollection",value:function(){var e=Jm(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${r.id}/add/${t.id}`);case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getProjectOptions",value:function(){var e={addProjectToCollection:this.addProjectToCollection,deleteProject:this.props.deleteProject,leaveTeamProject:this.props.leaveTeamProject};return this.props.currentUserIsOnTeam&&(e.removeProjectFromTeam=this.props.removeProject,e.joinTeamProject=this.props.joinTeamProject),e}},{key:"teamAdmins",value:function(){var e=this;return this.props.team.users.filter(function(t){return e.props.team.adminIds.includes(t.id)})}},{key:"userCanJoinTeam",value:function(){var e=this.props,t=e.currentUser,r=e.team;return!(this.props.currentUserIsOnTeam||!r.whitelistedDomain||!t||!t.emails)&&t.emails.some(function(e){var t=e.email;return e.verified&&t.endsWith(`@${r.whitelistedDomain}`)})}},{key:"render",value:function(){var e,t,r,n,a,o,i,c=this;return p.a.createElement("main",{className:"profile-page team-page"},p.a.createElement("section",null,p.a.createElement("a",{href:"/teams/",target:"_blank",className:"beta"},p.a.createElement("img",{src:"https://cdn.glitch.com/0c3ba0da-dac8-4904-bb5e-e1c7acc378a2%2Fbeta-flag.svg?1541448893958",alt:""}),p.a.createElement("div",null,p.a.createElement("h4",null,"Teams are in beta"),p.a.createElement("p",null,"Learn More"))),p.a.createElement(Li,{avatarStyle:(e=Xm({},this.props.team,{cache:this.props.team._cacheAvatar}),t=e.id,r=e.hasAvatarImage,n=e.backgroundColor,a=e.cache,o=e.size,i=Ke({id:t,hasAvatarImage:r,cache:a,size:o}),r?{backgroundImage:`url('${i}')`}:{backgroundColor:n,backgroundImage:`url('${i}')`}),coverStyle:Qe(Xm({},this.props.team,{cache:this.props.team._cacheCover})),avatarButtons:this.props.currentUserIsTeamAdmin?p.a.createElement(Ai,{name:"Avatar",uploadImage:this.props.uploadAvatar}):null,coverButtons:this.props.currentUserIsTeamAdmin?p.a.createElement(Ai,{name:"Cover",uploadImage:this.props.uploadCover,clearImage:this.props.team.hasCoverImage?this.props.clearCover:null}):null},this.props.currentUserIsTeamAdmin?p.a.createElement(td,{team:this.props.team,updateName:this.props.updateName,updateUrl:this.props.updateUrl}):p.a.createElement(p.a.Fragment,null,p.a.createElement("h1",null,this.props.team.name," ",this.props.team.isVerified&&p.a.createElement(jp,null)),p.a.createElement("p",{className:"team-url"},"@",this.props.team.url)),p.a.createElement("div",{className:"users-information"},p.a.createElement(bf,Bm({},this.props,{users:this.props.team.users,teamId:this.props.team.id,adminIds:this.props.team.adminIds})),!!this.props.team.whitelistedDomain&&p.a.createElement(Ef,{domain:this.props.team.whitelistedDomain,setDomain:this.props.currentUserIsTeamAdmin?this.props.updateWhitelistedDomain:null}),this.props.currentUserIsOnTeam&&p.a.createElement(jf,{inviteEmail:this.props.inviteEmail,inviteUser:this.props.inviteUser,setWhitelistedDomain:this.props.currentUserIsTeamAdmin?this.props.updateWhitelistedDomain:null,members:this.props.team.users.map(function(e){return e.id}),whitelistedDomain:this.props.team.whitelistedDomain,api:this.props.api}),this.userCanJoinTeam()&&p.a.createElement(wf,{onClick:this.props.joinTeam})),p.a.createElement(Dl,{count:this.props.team.users.reduce(function(e,t){return e+t.thanksCount},0)}),p.a.createElement($s,{authorized:this.props.currentUserIsTeamAdmin,description:this.props.team.description,update:this.props.updateDescription,placeholder:"Tell us about your team"}))),p.a.createElement(E,null,p.a.createElement(ap,Bm({},this.props,{teamProjects:this.props.team.projects,api:this.props.api}))),p.a.createElement(Rf,{projects:this.props.team.projects,pins:this.props.team.teamPins,isAuthorized:this.props.currentUserIsOnTeam,removePin:this.props.removePin,projectOptions:this.getProjectOptions(),api:this.props.api}),p.a.createElement(Rf,{projects:this.props.team.projects,pins:this.props.team.teamPins,isAuthorized:this.props.currentUserIsOnTeam,addPin:this.props.addPin,projectOptions:this.getProjectOptions(),api:this.props.api}),0===this.props.team.projects.length&&this.props.currentUserIsOnTeam&&p.a.createElement("aside",{className:"inline-banners add-project-to-empty-team-banner"},p.a.createElement("div",{className:"description-container"},p.a.createElement("img",{className:"project-pals",src:"https://cdn.glitch.com/02ae6077-549b-429d-85bc-682e0e3ced5c%2Fcollaborate.svg?1540583258925",alt:""}),p.a.createElement("div",{className:"description"},"Add projects to share them with your team"))),p.a.createElement(E,null,p.a.createElement(pr,{get:function(){return c.props.api.get(`collections?teamId=${c.props.team.id}`)},renderLoader:function(){return p.a.createElement(rd,Bm({},c.props,{collections:c.props.team.collections}))}},function(e){var t=e.data;return p.a.createElement(rd,Bm({},c.props,{collections:t}))})),this.props.currentUserIsOnTeam&&p.a.createElement(E,null,p.a.createElement(Vm,{api:this.props.api,id:this.props.team.id,currentUserIsOnTeam:this.props.currentUserIsOnTeam,projects:this.props.team.projects,addProject:this.props.addProject,myProjects:this.props.currentUser?this.props.currentUser.projects:[]})),this.props.currentUserIsTeamAdmin&&p.a.createElement(hp,{api:function(){return c.props.api},teamId:this.props.team.id,teamName:this.props.team.name,teamAdmins:this.teamAdmins(),users:this.props.team.users}),!this.props.currentUserIsOnTeam&&p.a.createElement(p.a.Fragment,null,p.a.createElement(jc,{reportedType:"team",reportedModel:this.props.team}),p.a.createElement(Ep,null)))}}])&&Ym(r.prototype,n),a&&Ym(r,a),t}();nd.propTypes={team:h.a.shape({_cacheAvatar:h.a.number.isRequired,_cacheCover:h.a.number.isRequired,adminIds:h.a.array.isRequired,backgroundColor:h.a.string.isRequired,coverColor:h.a.string.isRequired,description:h.a.string.isRequired,hasAvatarImage:h.a.bool.isRequired,hasCoverImage:h.a.bool.isRequired,id:h.a.number.isRequired,isVerified:h.a.bool.isRequired,name:h.a.string.isRequired,projects:h.a.array.isRequired,teamPins:h.a.array.isRequired,users:h.a.array.isRequired,whitelistedDomain:h.a.string}),addPin:h.a.func.isRequired,addProject:h.a.func.isRequired,deleteProject:h.a.func.isRequired,updateWhitelistedDomain:h.a.func.isRequired,inviteEmail:h.a.func.isRequired,inviteUser:h.a.func.isRequired,api:h.a.func.isRequired,clearCover:h.a.func.isRequired,currentUser:h.a.object,currentUserIsOnTeam:h.a.bool.isRequired,currentUserIsTeamAdmin:h.a.bool.isRequired,removeUserFromTeam:h.a.func.isRequired,removePin:h.a.func.isRequired,removeProject:h.a.func.isRequired,updateName:h.a.func.isRequired,updateUrl:h.a.func.isRequired,updateDescription:h.a.func.isRequired,uploadAvatar:h.a.func.isRequired,uploadCover:h.a.func.isRequired};var ad=function(e){var t=e.team;return p.a.createElement(ue,null,function(e){return function(e,t){return!(!t||!t.login)&&t.login.toLowerCase()===e.url}(t,e)&&p.a.createElement(Bl,null)})},od=function(e){var t=e.api,r=e.initialTeam,n=e.children;return p.a.createElement(nl,{api:t,initialTeam:r},function(e,r){for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return p.a.createElement(ec,{api:t,projects:e.projects},function(t,a){var i=function(){var e=Jm(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.removeUserFromTeam(t,n);case 2:a.apply(void 0,Hm(n));case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),c=function(){var e=Jm(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.joinTeamProject(t);case 2:a(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Jm(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.leaveTeamProject(t);case 2:a(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return n.apply(void 0,[Xm({},e,{projects:t}),Xm({},r,{removeUserFromTeam:i,joinTeamProject:c,leaveTeamProject:s})].concat(o))})})},id=function(e){var t=e.api,r=e.team,n=Gm(e,["api","team"]);return p.a.createElement(U,{properties:{origin:"team"},context:{groupId:r.id.toString()}},p.a.createElement(od,{api:t,initialTeam:r},function(e,r,a,o){return p.a.createElement(p.a.Fragment,null,p.a.createElement(Be.a,null,p.a.createElement("title",null,e.name)),p.a.createElement(ue,null,function(i){return p.a.createElement(nd,Bm({api:t,team:e},r,{currentUser:i,currentUserIsOnTeam:a,currentUserIsTeamAdmin:o},n))}),p.a.createElement(ad,{team:e}))}))};function cd(){return(cd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function sd(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ud(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function ld(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){ud(o,n,a,i,c,"next",e)}function c(e){ud(o,n,a,i,c,"throw",e)}i(void 0)})}}function pd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function md(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dd(e){return(dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hd(e,t){return(hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=md(this,dd(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){pd(e,t,r[t])})}return e}({},e.initialUser,{_deletedProjects:[],_cacheCover:Date.now()}),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hd(e,t)}(t,p.a.Component),r=t,(n=[{key:"isCurrentUser",value:function(){return!!this.props.currentUser&&this.state.id===this.props.currentUser.id}},{key:"updateFields",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`users/${this.state.id}`,t);case 2:r=e.sent,n=r.data,this.setState(n),this.isCurrentUser()&&this.props.updateCurrentUser(n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"uploadAvatar",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){var r,n,a,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au(this.props.api,this.state.id);case 2:return r=e.sent,n=r.data,e.next=6,this.props.uploadAsset(t,n,"temporary-user-avatar");case 6:return a=e.sent,e.next=9,Su(t);case 9:return o=e.sent,i=Uu(o),e.next=13,this.updateFields({avatarUrl:a,color:i});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"uploadCover",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au(this.props.api,this.state.id);case 2:return r=e.sent,n=r.data,e.next=6,this.props.uploadAssetSizes(t,n,xu);case 6:return e.next=8,Su(t);case 8:return a=e.sent,o=Uu(a),e.next=12,this.updateFields({hasCoverImage:!0,coverColor:o});case 12:this.setState({_cacheCover:Date.now()});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addPin",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`users/${this.state.id}/pinned-projects/${t}`);case 2:this.setState(function(e){var r=e.pins;return{pins:[].concat(sd(r),[{projectId:t}])}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"removePin",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`users/${this.state.id}/pinned-projects/${t}`);case 2:this.setState(function(e){return{pins:e.pins.filter(function(e){return e.projectId!==t})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"leaveProject",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`/projects/${t}/authorization`,{data:{targetUserId:this.state.id}});case 2:this.setState(function(e){return{projects:e.projects.filter(function(e){return e.id!==t})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteProject",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`/projects/${t}`);case 2:return e.next=4,this.props.api.get(`projects/${t}?showDeleted=true`);case 4:r=e.sent,n=r.data,this.setState(function(e){var r=e.projects,a=e._deletedProjects;return{projects:r.filter(function(e){return e.id!==t}),_deletedProjects:[n].concat(sd(a))}});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"undeleteProject",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.post(`/projects/${t}/undelete`);case 2:return e.next=4,this.props.api.get(`projects/${t}`);case 4:if(r=e.sent,!(n=r.data).domain.endsWith("-deleted")){e.next=17;break}return e.prev=7,a=n.domain.replace(/-deleted$/,""),e.next=11,this.props.api.patch(`/projects/${t}`,{domain:a});case 11:n.domain=a,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.warn("failed to rename project on undelete",e.t0);case 17:this.setState(function(e){var r=e.projects,a=e._deletedProjects;return{projects:[].concat(sd(r),[n]),_deletedProjects:a.filter(function(e){return e.id!==t})}});case 18:case"end":return e.stop()}},e,this,[[7,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"addProjectToCollection",value:function(){var e=ld(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${r.id}/add/${t.id}`);case 2:this.loadCollections();case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"loadCollections",value:function(){var e=ld(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.get(`collections?userId=${this.state.id}`);case 2:t=e.sent,r=t.data,this.setState({collections:r});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"featureProject",value:function(){var e=ld(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateFields({featured_project_id:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unfeatureProject",value:function(){var e=ld(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateFields({featured_project_id:null});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadCollections()}},{key:"render",value:function(){var e=this,t=this.props,r=t.handleError,n=t.handleErrorForInput,a={updateName:function(t){return e.updateFields({name:t}).catch(n)},updateLogin:function(t){return e.updateFields({login:t}).catch(n)},updateDescription:function(t){return e.updateFields({description:t}).catch(r)},uploadAvatar:function(){return Iu(function(t){return e.uploadAvatar(t).catch(r)})},uploadCover:function(){return Iu(function(t){return e.uploadCover(t).catch(r)})},clearCover:function(){return e.updateFields({hasCoverImage:!1}).catch(r)},addPin:function(t){return e.addPin(t).catch(r)},removePin:function(t){return e.removePin(t).catch(r)},leaveProject:function(t){return e.leaveProject(t).catch(r)},deleteProject:function(t){return e.deleteProject(t).catch(r)},undeleteProject:function(t){return e.undeleteProject(t).catch(r)},setDeletedProjects:function(t){return e.setState({_deletedProjects:t})},addProjectToCollection:function(t,n){return e.addProjectToCollection(t,n).catch(r)},featureProject:function(t){return e.featureProject(t).catch(r)},unfeatureProject:function(t){return e.unfeatureProject(t).catch(r)}};return this.props.children(this.state,a,this.isCurrentUser())}}])&&fd(r.prototype,n),a&&fd(r,a),t}();vd.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,currentUser:h.a.object,updateCurrentUser:h.a.func.isRequired,handleError:h.a.func.isRequired,handleErrorForInput:h.a.func.isRequired,initialUser:h.a.shape({id:h.a.number.isRequired}).isRequired,uploadAsset:h.a.func.isRequired,uploadAssetSizes:h.a.func.isRequired};var yd=function(e){var t=e.api,r=e.children,n=e.initialUser;return p.a.createElement(ds,null,function(e){return p.a.createElement(Hu,null,function(a){return p.a.createElement(ue,null,function(o,i,c){var s=c.update;return p.a.createElement(vd,cd({api:t,currentUser:o,initialUser:n},{updateCurrentUser:s},a,e),r)})})})};yd.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,initialUser:h.a.object.isRequired};var bd=yd;function gd(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wd(e,t){return(wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Od(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Pd=function(e){var t=e.id,r=e.domain,n=e.onClick;return p.a.createElement(A,{name:"Undelete clicked"},p.a.createElement("button",{className:"button-unstyled",onClick:function(e){return t=n,(r=e.target.closest("li")).addEventListener("animationend",t,{once:!0}),void r.classList.add("slide-up");var t,r}},p.a.createElement("div",{className:"deleted-project"},p.a.createElement("img",{className:"avatar",src:ft(t),alt:""}),p.a.createElement("div",{className:"deleted-project-name"},r),p.a.createElement("div",{className:"button button-small"},"Undelete"))))};Pd.propTypes={id:h.a.string.isRequired,domain:h.a.string.isRequired,onClick:h.a.func.isRequired};var kd=function(e){var t=e.deletedProjects,r=e.undelete;return p.a.createElement("ul",{className:"deleted-projects-container"},t.map(function(e){var t=e.id,n=e.domain;return p.a.createElement("li",{key:t,className:"deleted-project-container"},p.a.createElement(Pd,{id:t,domain:n,onClick:function(){return r(t)}}))}))};kd.propTypes={deletedProjects:h.a.array.isRequired,undelete:h.a.func.isRequired};var Rd=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=jd(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Od(n):a).state={shown:!1,loaded:!1},r.clickShow=r.clickShow.bind(Od(Od(r))),r.clickHide=r.clickHide.bind(Od(Od(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wd(e,t)}(t,p.a.Component),r=t,(n=[{key:"clickHide",value:function(){this.setState({shown:!1,loaded:!1})}},{key:"clickShow",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({shown:!0}),e.prev=1,e.next=4,this.props.api.get("user/deleted-projects");case 4:t=e.sent,r=t.data,this.props.setDeletedProjects(r),this.setState({loaded:!0}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({shown:!1});case 13:case"end":return e.stop()}},e,this,[[1,10]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){gd(o,n,a,i,c,"next",e)}function c(e){gd(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"renderContents",value:function(){return this.state.shown?this.state.loaded?this.props.deletedProjects.length?p.a.createElement(p.a.Fragment,null,p.a.createElement(kd,this.props),p.a.createElement("button",{className:"button button-tertiary",onClick:this.clickHide},"Hide Deleted Projects")):"nothing found":p.a.createElement(lr,null):p.a.createElement("button",{className:"button button-tertiary",onClick:this.clickShow},"Show")}},{key:"render",value:function(){return p.a.createElement("article",{className:"deleted-projects"},p.a.createElement("h2",null,"Deleted Projects ",p.a.createElement("span",{className:"emoji bomb emoji-in-title"})),this.renderContents())}}])&&Ed(r.prototype,n),a&&Ed(r,a),t}();function Cd(e){var t=e.unfeatureProject;return p.a.createElement(Lt,null,function(e){var r=e.togglePopover,n=e.visible;return p.a.createElement("div",null,p.a.createElement("button",{className:"project-options button-borderless opens-pop-over",onClick:r},p.a.createElement("div",{className:"down-arrow"})),n&&p.a.createElement("dialog",{className:"pop-over project-options-pop"},p.a.createElement("section",{className:"pop-over-actions"},p.a.createElement(cl,{onClick:function(){return function(e){document.getElementById("featured-project-embed").classList.add("slide-down"),e(),t()}(r)},text:"Un-feature",emoji:"arrow-down"}))))})}Rd.propTypes={api:h.a.any.isRequired,deletedProjects:h.a.array.isRequired,setDeletedProjects:h.a.func.isRequired},Cd.propTypes={api:h.a.func.isRequired,project:h.a.object,unfeatureProject:h.a.func.isRequired};var Td=function(e){var t=e.api,r=e.isAuthorized,n=e.currentUser,a=e.unfeatureProject,o=e.addProjectToCollection,i=e.featuredProject,c=p.a.createElement("div",{className:"buttons buttons-left"},p.a.createElement(jc,{className:"button-small",reportedType:"project",reportedModel:i})),s=p.a.createElement(p.a.Fragment,null,"Featured Project",p.a.createElement("span",{className:"emoji clapper emoji-in-title"}));return p.a.createElement(p.a.Fragment,null,p.a.createElement("section",{id:"featured-project-embed"},p.a.createElement("h2",null,s),r&&p.a.createElement(Cd,{api:t,unfeatureProject:a}),p.a.createElement(Xa,{domain:i.domain}),r?p.a.createElement("div",{className:"buttons buttons-left"},p.a.createElement(Gs,{className:"button-small button-edit",name:i.id,isMember:r})):c,p.a.createElement("div",{className:"buttons buttons-right"},n.login&&p.a.createElement(Ys,{className:"button-small",api:t,currentUser:n,project:i,fromProject:!0,addProjectToCollection:o}),p.a.createElement(A,{name:"Click Remix",properties:{baseProjectId:i.id,baseDomain:i.domain}},p.a.createElement(Hs,{className:"button-small",name:i.domain,isMember:r})))))};Td.propTypes={api:h.a.func,isAuthorized:h.a.bool.isRequired,currentUser:h.a.object.isRequired,unfeatureProject:h.a.func,featuredProject:h.a.object,addProjectToCollection:h.a.func};var Nd=Td;function xd(){return(xd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Sd(e,t,r[t])})}return e}function Sd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _d(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ud=function(e){var t=e.name,r=e.login,n=e.isAuthorized,a=e.updateName,o=e.updateLogin;return r?n?p.a.createElement(p.a.Fragment,null,p.a.createElement("h1",{className:"username"},p.a.createElement(Fr,{value:t||"",update:a,placeholder:"What's your name?"})),p.a.createElement("h2",{className:"login"},p.a.createElement(Fr,{value:r,update:o,prefix:"@",placeholder:"Nickname?"}))):t?p.a.createElement(p.a.Fragment,null,p.a.createElement("h1",{className:"username"},t),p.a.createElement("h2",{className:"login"},"@",r)):p.a.createElement("h1",{className:"login"},"@",r):p.a.createElement("h1",{className:"login"},"Anonymous")};Ud.propTypes={name:h.a.string,login:h.a.string,isAuthorized:h.a.bool.isRequired,updateName:h.a.func,updateLogin:h.a.func};var Id=function(e){var t=e.user,r=t._deletedProjects,n=t._cacheCover,a=t.featuredProjectId,o=_d(t,["_deletedProjects","_cacheCover","featuredProjectId"]),i=e.api,c=e.isAuthorized,s=e.maybeCurrentUser,u=e.updateDescription,l=e.updateName,f=e.updateLogin,m=e.uploadCover,d=e.clearCover,h=e.uploadAvatar,v=e.addPin,y=e.removePin,b=e.leaveProject,g=e.deleteProject,E=e.undeleteProject,j=e.featureProject,w=e.unfeatureProject,O=e.setDeletedProjects,P=e.addProjectToCollection,k=new Set(o.pins.map(function(e){return e.projectId})),R=o.projects.filter(function(e){var t=e.id;return k.has(t)}).filter(function(e){return e.id!=a}),C=o.projects.filter(function(e){var t=e.id;return!k.has(t)}).filter(function(e){return e.id!=a}),T=o.projects.find(function(e){return e.id===a});return p.a.createElement("main",{className:"profile-page user-page"},p.a.createElement("section",null,p.a.createElement(Li,{avatarStyle:at(o),coverStyle:ot(qd({},o,{cache:n})),coverButtons:c&&!!o.login&&p.a.createElement(Ai,{name:"Cover",uploadImage:m,clearImage:o.hasCoverImage?d:null}),avatarButtons:c&&!!o.login&&p.a.createElement(Ai,{name:"Avatar",uploadImage:h}),teams:o.teams},p.a.createElement(Ud,xd({name:o.name,login:o.login},{isAuthorized:c,updateName:l},{updateLogin:function(e){return f(e).then(function(){return function(e){history.replaceState(null,null,rt({login:e}))}(e)})}})),!!o.thanksCount&&p.a.createElement(Dl,{count:o.thanksCount}),p.a.createElement($s,{authorized:c&&!!o.login,description:o.description,update:u,placeholder:"Tell us about yourself"}))),T&&p.a.createElement(Nd,{featuredProject:T,api:i,isAuthorized:c,unfeatureProject:w,addProjectToCollection:P,currentUser:s}),p.a.createElement(Rf,{projects:R,isAuthorized:c,api:i,removePin:y,projectOptions:{featureProject:j,leaveProject:b,deleteProject:g,addProjectToCollection:P},addProjectToCollection:P,currentUser:s}),!!o.login&&p.a.createElement(Ul,{title:"Collections",collections:o.collections.map(function(e){return qd({},e,{user:o})}),api:i,isAuthorized:c,maybeCurrentUser:s}),p.a.createElement(Rf,{projects:C,isAuthorized:c,api:i,addPin:v,projectOptions:{featureProject:j,leaveProject:b,deleteProject:g,addProjectToCollection:P}}),c&&p.a.createElement(Rd,{api:i,setDeletedProjects:O,deletedProjects:r,undelete:E}),!c&&p.a.createElement(jc,{reportedType:"user",reportedModel:o}))};Id.propTypes={clearCover:h.a.func.isRequired,maybeCurrentUser:h.a.object,isAuthorized:h.a.bool.isRequired,leaveProject:h.a.func.isRequired,uploadAvatar:h.a.func.isRequired,uploadCover:h.a.func.isRequired,user:h.a.shape({name:h.a.string,login:h.a.string,id:h.a.number.isRequired,thanksCount:h.a.number.isRequired,hasCoverImage:h.a.bool.isRequired,avatarUrl:h.a.string,color:h.a.string.isRequired,coverColor:h.a.string,_cacheCover:h.a.number.isRequired,_deletedProjects:h.a.array.isRequired}).isRequired,addProjectToCollection:h.a.func.isRequired,featureProject:h.a.func.isRequired,unfeatureProject:h.a.func.isRequired};var Ad=function(e){var t=e.api,r=e.user;return p.a.createElement(U,{properties:{origin:"user"}},p.a.createElement(bd,{api:t,initialUser:r},function(e,r,n){return p.a.createElement(p.a.Fragment,null,p.a.createElement(Be.a,null,p.a.createElement("title",null,e.name||(e.login?`@${e.login}`:`User ${e.id}`))),p.a.createElement(ue,null,function(a){return p.a.createElement(ec,{api:t,projects:e.projects},function(o){return p.a.createElement(Id,xd({api:t,isAuthorized:n,maybeCurrentUser:a},{user:qd({},e,{projects:o})},r))})}))}))};function Fd(){return(Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Dd(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $d(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ld(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){$d(o,n,a,i,c,"next",e)}function c(e){$d(o,n,a,i,c,"throw",e)}i(void 0)})}}var Md=function(){var e=Ld(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get(r);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0||!e.t0.response||404!==e.t0.response.status){e.next=12;break}return e.abrupt("return",null);case 12:throw e.t0;case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,r){return e.apply(this,arguments)}}(),zd=function(){var e=Ld(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md(t,`/users/${r}`);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Vd=function(){var e=Ld(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md(t,`/userId/byLogin/${r}`);case 2:if("NOT FOUND"!==(n=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,zd(t,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Gd=function(e){var t=e.users.filter(function(e){return 30===e.teamsUser.accessLevel});return e.adminIds=t.map(function(e){return e.id}),e},Hd=function(){var e=Ld(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md(t,`/teams/${r}`);case 2:return n=e.sent,e.abrupt("return",n&&Gd(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Bd=function(){var e=Ld(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Md(t,`/teams/byUrl/${r}`);case 2:return n=e.sent,e.abrupt("return",n&&Gd(n));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),Wd=function(e){var t=e.api,r=e.id,n=e.name,a=Dd(e,["api","id","name"]);return p.a.createElement(pr,{get:function(){return Hd(t,r)}},function(e){return e?p.a.createElement(id,Fd({api:t,team:e},a)):p.a.createElement(_c,{name:n})})};Wd.propTypes={api:h.a.any.isRequired,id:h.a.number.isRequired,name:h.a.string.isRequired};var Jd=function(e){var t=e.api,r=e.id,n=e.name,a=Dd(e,["api","id","name"]);return p.a.createElement(pr,{get:function(){return zd(t,r)}},function(e){return e?p.a.createElement(Ad,Fd({api:t,user:e},a)):p.a.createElement(_c,{name:n})})};Jd.propTypes={api:h.a.any.isRequired,id:h.a.number.isRequired,name:h.a.string.isRequired};var Yd=function(e){var t=e.api,r=e.name,n=Dd(e,["api","name"]);return p.a.createElement(pr,{get:function(){return Bd(t,r)}},function(e){return e?p.a.createElement(id,Fd({api:t,team:e},n)):p.a.createElement(pr,{get:function(){return Vd(t,r)}},function(e){return e?p.a.createElement(Ad,Fd({api:t,user:e},n)):p.a.createElement(_c,{name:r})})})};Yd.propTypes={api:h.a.any.isRequired,name:h.a.string.isRequired};var Zd=function(e,t,r){return p.a.createElement(za,{api:e},p.a.createElement(t,Fd({api:e},r)))},Kd=function(e){var t=e.api,r=e.id,n=e.name;return Zd(t,Wd,{id:r,name:n})},Qd=function(e){var t=e.api,r=e.id,n=e.name;return Zd(t,Jd,{id:r,name:n})},Xd=function(e){var t=e.api,r=e.name;return Zd(t,Yd,{name:r})},eh=Object($e.a)(function(e){var t=e.href,r=e.children,n=e.className,a=e.style,o=e.history;return p.a.createElement("div",{"data-href":!0,onClick:function(e){e.target.closest("a[href], button, input")||e.target.closest("[data-href]")===e.currentTarget&&o.push(t)},className:n,style:a,role:"presentation"},r)});eh.propTypes={href:h.a.string.isRequired,children:h.a.element.isRequired,className:h.a.string,style:h.a.object};var th=eh;function rh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nh(e){var t=e.team,r=Qe(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){rh(e,t,r[t])})}return e}({},t,{size:"medium"})),n=t.users.reduce(function(e,t){return e+t.thanksCount},0);return p.a.createElement(th,{href:Ze(t),className:"item button-area",style:r},p.a.createElement("div",{className:"content"},p.a.createElement("img",{className:"avatar",src:Ke(t),alt:""}),p.a.createElement("div",{className:"information"},p.a.createElement(Ot,{team:t,className:"button"},t.name),!!t.isVerified&&p.a.createElement(jp,null),p.a.createElement(Dn,{users:t.users}),n>0&&p.a.createElement(Dl,{count:n}),!!t.description&&p.a.createElement("p",{className:"description"},p.a.createElement(ua,{length:96},t.description)))))}function ah(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oh(e){e.target.src=et}function ih(e){var t,r,n,a=e.user,o=ot(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ah(e,t,r[t])})}return e}({},a,{size:"medium"}));return p.a.createElement(Pt,{user:a,className:"button-area"},p.a.createElement("div",{className:"item",style:o},p.a.createElement("div",{className:"content"},p.a.createElement("img",{onError:oh,className:"avatar",src:(t=a,r=t.login,n=t.avatarUrl,r&&n?n:et),alt:""}),p.a.createElement("div",{className:"information"},!!a.name&&p.a.createElement("h3",{className:"name"},a.name),p.a.createElement("div",{className:"button"},"@",a.login),a.thanksCount>0&&p.a.createElement(Dl,{count:a.thanksCount}),!!a.description&&p.a.createElement("p",{className:"description"},p.a.createElement(ua,{length:96},a.description))))))}function ch(){return(ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function sh(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function uh(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){sh(o,n,a,i,c,"next",e)}function c(e){sh(o,n,a,i,c,"throw",e)}i(void 0)})}}function lh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ph(e){return(ph=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fh(e,t){return(fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}nh.propTypes={team:h.a.shape({id:h.a.number.isRequired,coverColor:h.a.string.isRequired,description:h.a.string.isRequired,hasAvatarImage:h.a.bool.isRequired,hasCoverImage:h.a.bool.isRequired,isVerified:h.a.bool.isRequired,name:h.a.string.isRequired,users:h.a.array.isRequired,url:h.a.string.isRequired})},ih.propTypes={user:h.a.shape({avatarUrl:h.a.string,coverColor:h.a.string,description:h.a.string,hasCoverImage:h.a.bool.isRequired,id:h.a.number.isRequired,login:h.a.string.isRequired,name:h.a.string,thanksCount:h.a.number.isRequired})};var dh=function(e){var t=e.teams;return p.a.createElement("article",null,p.a.createElement("h2",null,"Teams"),p.a.createElement("ul",{className:"teams-container"},t?t.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(nh,{team:e}))}):p.a.createElement(lr,null)))},hh=function(e){var t=e.users;return p.a.createElement("article",null,p.a.createElement("h2",null,"Users"),p.a.createElement("ul",{className:"users-container"},t?t.map(function(e){return p.a.createElement("li",{key:e.id},p.a.createElement(ih,{user:e}))}):p.a.createElement(lr,null)))},vh=function(e){var t=e.addProjectToCollection,r=e.api,n=e.projects,a=e.currentUser;return n?a.login?p.a.createElement(bi,{title:"Projects",projects:n,api:r,projectOptions:{addProjectToCollection:t}}):p.a.createElement(bi,{title:"Projects",projects:n}):p.a.createElement("article",null,p.a.createElement("h2",null,"Projects"),p.a.createElement(lr,null))},yh=function(e){return!e||!!e.length},bh=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=ph(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?mh(n):a).state={teams:null,users:null,projects:null},r.addProjectToCollection=r.addProjectToCollection.bind(mh(mh(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fh(e,t)}(t,p.a.Component),r=t,(n=[{key:"searchTeams",value:function(){var e=uh(regeneratorRuntime.mark(function e(){var t,r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,n=t.query,e.next=3,r.get(`teams/search?q=${n}`);case 3:a=e.sent,o=a.data,this.setState({teams:o.slice(0,20)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchUsers",value:function(){var e=uh(regeneratorRuntime.mark(function e(){var t,r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,n=t.query,e.next=3,r.get(`users/search?q=${n}`);case 3:a=e.sent,o=a.data,this.setState({users:o.slice(0,20)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchProjects",value:function(){var e=uh(regeneratorRuntime.mark(function e(){var t,r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,r=t.api,n=t.query,e.next=3,r.get(`projects/search?q=${n}`);case 3:a=e.sent,o=a.data,this.setState({projects:o.filter(function(e){return!e.notSafeForKids}).slice(0,20)});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addProjectToCollection",value:function(){var e=uh(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${r.id}/add/${t.id}`);case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.props.handleError;this.searchTeams().catch(e),this.searchUsers().catch(e),this.searchProjects().catch(e)}},{key:"render",value:function(){var e=this.state,t=e.teams,r=e.users,n=e.projects,a=[t,r,n].every(function(e){return!yh(e)});return p.a.createElement("main",{className:"search-results"},yh(t)&&p.a.createElement(dh,{teams:t}),yh(r)&&p.a.createElement(hh,{users:r}),yh(n)&&p.a.createElement(vh,{projects:n,currentUser:this.props.currentUser,api:this.props.api,addProjectToCollection:this.addProjectToCollection}),a&&p.a.createElement(_c,{name:"any results"}))}}])&&lh(r.prototype,n),a&&lh(r,a),t}();bh.propTypes={api:h.a.any.isRequired,query:h.a.string.isRequired,currentUser:h.a.object.isRequired};var gh=function(e){var t=e.api,r=e.query;return p.a.createElement(za,{api:t,searchQuery:r},p.a.createElement(Be.a,null,!!r&&p.a.createElement("title",null,"Search for ",r)),r?p.a.createElement(ds,null,function(e){return p.a.createElement(ue,null,function(n){return p.a.createElement(bh,ch({},e,{api:t,query:r,currentUser:n}))})}):p.a.createElement(_c,{name:"anything"}),p.a.createElement(Va,null))};gh.propTypes={api:h.a.any.isRequired,query:h.a.string};var Eh=gh;function jh(){return(jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wh(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Oh(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Ph(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){Oh(o,n,a,i,c,"next",e)}function c(e){Oh(o,n,a,i,c,"throw",e)}i(void 0)})}}function kh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ch(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Th(e){return(Th=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nh(e,t){return(Nh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xh=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ch(this,Th(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){kh(e,t,r[t])})}return e}({},e.initialCollection),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nh(e,t)}(t,p.a.Component),r=t,(n=[{key:"userIsAuthor",value:function(){if(!this.props.currentUser)return!1;var e=this.props.currentUser.id;return this.state.user?this.state.user.id===e:!!this.state.team&&this.state.team.users.some(function(t){return t.id===e})}},{key:"updateFields",value:function(){var e=Ph(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${this.state.id}`,t);case 2:r=e.sent,n=r.data,this.setState(n);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addProjectToCollection",value:function(){var e=Ph(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.id==this.state.id&&this.setState(function(e){var r=e.projects;return{projects:[].concat(wh(r),[t])}}),e.next=3,this.props.api.patch(`collections/${r.id}/add/${t.id}`);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeProjectFromCollection",value:function(){var e=Ph(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.patch(`collections/${this.state.id}/remove/${t.id}`);case 2:this.setState(function(e){return{projects:e.projects.filter(function(e){return e.id!==t.id})}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCollection",value:function(){var e=Ph(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.api.delete(`/collections/${this.state.id}`);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,r=t.handleError,n=t.handleErrorForInput,a={addProjectToCollection:function(t,n){return e.addProjectToCollection(t,n).catch(r)},removeProjectFromCollection:function(t){return e.removeProjectFromCollection(t).catch(r)},deleteCollection:function(){return e.deleteCollection().catch(r)},updateNameAndUrl:function(t){var r=t.name,a=t.url;return e.updateFields({name:r,url:a}).catch(n)},updateDescription:function(t){return e.updateFields({description:t}).catch(r)},updateColor:function(t){return e.updateFields({coverColor:t})}};return this.props.children(this.state,a,this.userIsAuthor())}}])&&Rh(r.prototype,n),a&&Rh(r,a),t}();xh.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,currentUser:h.a.object,handleError:h.a.func.isRequired,handleErrorForInput:h.a.func.isRequired,initialCollection:h.a.object.isRequired};var qh=function(e){var t=e.api,r=e.children,n=e.initialCollection;return p.a.createElement(ds,null,function(e){return p.a.createElement(ue,null,function(a){return p.a.createElement(xh,jh({api:t,currentUser:a,initialCollection:n},e),r)})})};qh.propTypes={api:h.a.any.isRequired,children:h.a.func.isRequired,initialCollection:h.a.object.isRequired};var Sh=qh;function _h(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function Uh(){return(Uh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ih(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Ah=function(e){var t=e.addProjectToCollection,r=e.api,n=e.category,a=e.currentUser,o=Ih(e,["addProjectToCollection","api","category","currentUser"]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(Be.a,null,p.a.createElement("title",null,n.name)),p.a.createElement("main",{className:"collection-page"},p.a.createElement("article",{className:"projects",style:{backgroundColor:n.backgroundColor}},p.a.createElement("header",{className:"collection"},p.a.createElement("h1",{className:"collection-name"},n.name),p.a.createElement("div",{className:"collection-image-container"},p.a.createElement("img",{src:n.avatarUrl,alt:""})),p.a.createElement("p",{className:"description"},n.description)),p.a.createElement(ec,{api:r,projects:n.projects},function(e){return p.a.createElement("div",{className:"collection-contents"},p.a.createElement("div",{className:"collection-project-container-header"},p.a.createElement("h3",null,"Projects (",n.projects.length,")")),a.login?p.a.createElement(yi,Uh({projects:e,currentUser:a,api:r,addProjectToCollection:t},{category:!0,projectOptions:{addProjectToCollection:t}},o)):p.a.createElement(yi,Uh({projects:e,currentUser:a,api:r,addProjectToCollection:t},{category:!0,projectOptions:{}},o)))}))),p.a.createElement(Va,null))};function Fh(){var e;return e=regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(`categories/${r}`);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)}),(Fh=function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){_h(o,n,a,i,c,"next",e)}function c(e){_h(o,n,a,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}Ah.propTypes={category:h.a.shape({avatarUrl:h.a.string.isRequired,backgroundColor:h.a.string.isRequired,description:h.a.string.isRequired,name:h.a.string.isRequired,projects:h.a.array.isRequired}).isRequired,api:h.a.any.isRequired,addProjectToCollection:h.a.func.isRequired};var Dh=function(e){var t=e.api,r=e.category,n=Ih(e,["api","category"]);return p.a.createElement(za,{api:t},p.a.createElement(U,{properties:{origin:"category"}},p.a.createElement(pr,{get:function(){return function(e,t){return Fh.apply(this,arguments)}(t,r.id)}},function(e){return p.a.createElement(Sh,{api:t,initialCollection:e},function(e,r){return p.a.createElement(ue,null,function(a){return p.a.createElement(Ah,Uh({category:e,api:t,userIsAuthor:!1,currentUser:a},r,n))})})})))};Dh.propTypes={api:h.a.any.isRequired,category:h.a.object.isRequired};var $h=Dh,Lh=r(222),Mh=r.n(Lh);function zh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vh(e){return(Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gh(e,t){return(Gh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Bh=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=Vh(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?Hh(n):a).state={query:r.props.initialColor,color:r.props.initialColor,maybeRequest:null,maybeResults:null},r.onClick=r.onClick.bind(Hh(Hh(r))),r.handleChange=r.handleChange.bind(Hh(Hh(r))),r.keyPress=r.keyPress.bind(Hh(Hh(r))),r.getRandomColor=r.getRandomColor.bind(Hh(Hh(r))),r.changeColor=Mh()(r.changeColor.bind(Hh(Hh(r))),250),r.update=r.props.updateColor,r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gh(e,t)}(t,p.a.Component),r=t,(n=[{key:"handleChange",value:function(e){var t=e.currentTarget.value.trim(),r=document.getElementsByClassName("editable-field-error-message")[0];r.style.display="none",this.setState({query:t}),t&&t.length<=7&&/[0-9A-Fa-f]{6}/g.test(t)?("#"!==t[0]&&(t="#"+t),this.setState({color:t}),this.update(t)):r.style.display="inherit"}},{key:"keyPress",value:function(e){13==e.which||13==e.keyCode?this.props.togglePopover():document.getElementsByClassName("editable-field-error-message")[0].style.display="none"}},{key:"onClick",value:function(){this.props.togglePopover()}},{key:"getRandomColor",value:function(){var e=bo()({luminosity:"light"});this.setState({color:e}),this.setState({query:e}),this.update(e)}},{key:"changeColor",value:function(e){document.getElementById("color-picker").value=e,document.getElementById("color-picker").style.backgroundColor=e,this.setState({color:e}),this.setState({query:e}),this.update(e)}},{key:"render",value:function(){var e=this;return p.a.createElement("dialog",{className:"pop-over edit-collection-color-pop"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("input",{className:"color-picker",type:"color",value:this.state.color,onChange:function(t){return e.changeColor(t.target.value)},style:{backgroundColor:this.state.color},id:"color-picker"}),p.a.createElement("div",{className:"custom-color-input"},p.a.createElement("input",{id:"color-picker-hex",value:this.state.query,onChange:this.handleChange,onKeyPress:this.keyPress,className:"pop-over-input pop-over-search",placeholder:"Custom color hex"}),p.a.createElement("div",{className:"editable-field-error-message"},"Invalid Hex"))),p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("button",{className:"random-color-btn button-tertiary",onClick:this.getRandomColor},"Random ",p.a.createElement("span",{className:"emoji bouquet"}))))}}])&&zh(r.prototype,n),a&&zh(r,a),t}();Bh.propTypes={updateColor:h.a.func.isRequired,initialColor:h.a.string.isRequired};var Wh=Bh;function Jh(){return(Jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Yh(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Zh=function(e){var t=e.update,r=e.initialColor,n=Yh(e,["update","initialColor"]);return p.a.createElement($r,{containerClass:"edit-collection-color-btn",buttonClass:"button add-project opens-pop-over",buttonText:"Color",passToggleToPop:!0},p.a.createElement(Wh,Jh({},n,{updateColor:t,initialColor:r})))},Kh=Zh;function Qh(){return(Qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Xh(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ev(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tv(e){return(tv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rv(e,t){return(rv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Zh.propTypes={update:h.a.func.isRequired,initialColor:h.a.string.isRequired};var av=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=tv(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?nv(n):a).state={id:mr()("editable-field-")},r.onChange=r.onChange.bind(nv(nv(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rv(e,t)}(t,p.a.Component),r=t,(n=[{key:"onChange",value:function(e){this.props.update(e.target.value.replace(/\r?\n/g,""))}},{key:"render",value:function(){var e=["content-editable",this.props.error?"error":""].join(" "),t={id:this.state.id,className:e,value:this.props.value,onChange:this.onChange,spellCheck:!1,autoComplete:"off",placeholder:this.props.placeholder,autoFocus:this.props.autoFocus};return p.a.createElement("label",{htmlFor:t.id},p.a.createElement(qs.a,t),!!this.props.error&&p.a.createElement(Rr,{error:this.props.error}))}}])&&ev(r.prototype,n),a&&ev(r,a),t}();av.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,autoFocus:h.a.bool,error:h.a.string};var ov=function(e){var t=e.value,r=e.update,n=Xh(e,["value","update"]);return p.a.createElement(Or,{value:t,update:r,resetOnError:!1},function(e){var t=e.value,r=e.update,a=e.error;return p.a.createElement(Pr,{value:t,update:r},function(e){return p.a.createElement(av,Qh({},n,e,{error:a}))})})};ov.propTypes={value:h.a.string.isRequired,placeholder:h.a.string.isRequired,update:h.a.func.isRequired,autoFocus:h.a.bool};var iv=function(e){var t=e.name,r=e.url,n=e.update,a=e.isAuthorized;return p.a.createElement(Or,{value:{name:t,url:r},update:n,resetOnError:!1},function(e){var t=e.value,r=e.update,n=e.error;return p.a.createElement(Pr,{value:t.name,update:function(e){return r({name:e,url:Kt()(e)})}},function(e){var t=e.value,r=e.update;return p.a.createElement("h1",{className:"collection-name"},a?p.a.createElement(av,{value:t,update:r,placeholder:"Name your collection",error:n}):t)})})};iv.propTypes={name:h.a.string.isRequired,url:h.a.string.isRequired,update:h.a.func.isRequired,isAuthorized:h.a.bool.isRequired};var cv=iv;function sv(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function uv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lv(e){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pv(e,t){return(pv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mv=function(e){var t=e.projects,r=e.collection,n=e.onClick;return p.a.createElement("ul",{className:"results"},t.map(function(e){return p.a.createElement(De,{key:e.id},function(t){var a=t.createNotification;return p.a.createElement("li",null,p.a.createElement(A,{name:"Project Added to Collection",properties:{origin:"Add Project collection"}},p.a.createElement(Mn,{domain:e.domain,description:e.description,users:e.users,id:e.id,isActive:!1,collection:r,onClick:function(){return n(e,r,a)},isPrivate:e.private})))})}))};mv.propTypes={projects:h.a.array.isRequired,collection:h.a.object.isRequired,onClick:h.a.func.isRequired};var dv=function(e){var t=e.projects,r=e.collection,n=e.onClick,a=e.projectName,o=e.excludedProjectsCount;if(t.length>0){var i=r.projects.map(function(e){return e.id});return t=t.filter(function(e){return!i.includes(e.id)}),p.a.createElement(mv,{projects:t,collection:r,onClick:n})}return a?p.a.createElement("p",{className:"results-empty"},a," is already in this collection",p.a.createElement("span",{role:"img","aria-label":""},"💫")):p.a.createElement("p",{className:"results-empty"},"nothing found ",p.a.createElement("span",{role:"img","aria-label":""},"💫"),p.a.createElement("br",null),o>0&&p.a.createElement("span",null,"(Excluded ",o," search ",o>1?"results":"result"," already found in collection)"))};function hv(e){try{return new URL(e),!0}catch(t){return!1}}dv.propTypes={collection:h.a.object.isRequired,projectName:h.a.string,excludedProjectsCount:h.a.number};var vv=function(e){function t(e){var r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(a=lv(t).call(this,e))||"object"!=typeof a&&"function"!=typeof a?fv(n):a).state={query:"",maybeRequest:null,maybeResults:null,projectName:"",excludedProjectsCount:0},r.handleChange=r.handleChange.bind(fv(fv(r))),r.clearSearch=r.clearSearch.bind(fv(fv(r))),r.startSearch=Xt()(r.startSearch.bind(fv(fv(r))),300),r.onClick=r.onClick.bind(fv(fv(r))),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pv(e,t)}(t,p.a.Component),r=t,(n=[{key:"handleChange",value:function(e){var t=e.currentTarget.value.trim();this.setState({query:t}),t?this.startSearch():this.clearSearch()}},{key:"clearSearch",value:function(){this.setState({maybeRequest:null,maybeResults:null,projectName:"",excludedProjectsCount:0})}},{key:"startSearch",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,r,n,a,o,i,c,s,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.query){e.next=2;break}return e.abrupt("return",this.clearSearch());case 2:return this.setState({maybeResults:null}),t=!1,r=this.state.query,n=this.props.collection.projects.map(function(e){return e.id}),hv(r)&&(t=!0,a=new URL(r),r=a.href.includes("me")&&!a.href.includes("~")?a.hostname.substring(0,a.hostname.indexOf(".")):a.pathname.substring(a.pathname.indexOf("~")+1)),o=null,t?(o=this.props.api.get(`projects/${r}`),this.setState({maybeRequest:o})):(o=this.props.api.get(`projects/search?q=${r}`),this.setState({maybeRequest:o})),e.next=11,o;case 11:i=e.sent,c=i.data,t&&(c=[c]),u=(s=c).length,l=[],t?(l=s.filter(function(e){return e.domain==r})).length>0&&n.includes(l[0].id)&&(l=[],this.setState({projectName:r})):(l=s.filter(function(e){return!n.includes(e.id)})).length!==u&&(1===u?this.setState({projectName:r}):this.setState({excludedProjectsCount:u})),this.setState(function(e){var t=e.maybeRequest;return o===t?{maybeRequest:null,maybeResults:l,recentProjects:null}:{}});case 19:case"end":return e.stop()}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){sv(o,n,a,i,c,"next",e)}function c(e){sv(o,n,a,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}()},{key:"onClick",value:function(e,t,r){this.props.togglePopover(),this.props.addProjectToCollection(e,t),r(p.a.createElement("p",null,"Added ",p.a.createElement("b",null,p.a.createElement("span",{className:"project-name"},e.domain))),"notifySuccess")}},{key:"render",value:function(){var e=this,t=this.props.collection.team?this.props.collection.team.projects:this.props.currentUser.projects,r=this.state.query?this.state.maybeResults:t.slice(0,20),n=!!(this.state.query||r&&r.length),a=!(!this.state.maybeRequest&&r);return p.a.createElement("dialog",{className:"pop-over add-collection-project-pop wide-pop"},p.a.createElement("section",{className:"pop-over-info"},p.a.createElement("input",{autoFocus:!0,value:this.state.query,onChange:this.handleChange,className:"pop-over-input search-input pop-over-search",placeholder:"Search by project name or URL"})),n&&p.a.createElement("section",{className:"pop-over-actions last-section results-list"},a&&p.a.createElement(lr,null),!!r&&p.a.createElement(ec,{api:this.props.api,projects:r},function(t){return p.a.createElement(dv,{projects:t,onClick:e.onClick,collection:e.props.collection,projectName:e.state.projectName,excludedProjectsCount:e.state.excludedProjectsCount})})))}}])&&uv(r.prototype,n),a&&uv(r,a),t}();vv.propTypes={api:h.a.func.isRequired,collection:h.a.object.isRequired,addProjectToCollection:h.a.func.isRequired,togglePopover:h.a.func,currentUser:h.a.object.isRequired};var yv=vv;function bv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var gv=function(e){var t=e.currentUserIsOwner,r=bv(e,["currentUserIsOwner"]);return t?p.a.createElement($r,{buttonClass:"button add-project opens-pop-over",buttonText:"Add Project",passToggleToPop:!0},p.a.createElement(yv,r)):null};gv.propTypes={currentUserIsOwner:h.a.bool.isRequired,collection:h.a.object.isRequired,currentUser:h.a.object.isRequired,addProjectToCollection:h.a.func.isRequired,api:h.a.func.isRequired};var Ev=gv;function jv(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,a)}function wv(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){jv(o,n,a,i,c,"next",e)}function c(e){jv(o,n,a,i,c,"throw",e)}i(void 0)})}}function Ov(){return(Ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pv(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rv(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cv(e){return(Cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tv(e,t){return(Tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xv(e,t){history.replaceState(null,null,lt(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Nv(e,t,r[t])})}return e}({},e,{url:t})))}var qv=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Rv(this,Cv(t).call(this,e))).state={done:!1},r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tv(e,t)}(t,p.a.Component),r=t,(n=[{key:"render",value:function(){var e=this;return this.state.done?p.a.createElement(Ge.a,{to:ut(this.props.collection)}):p.a.createElement("button",{className:"button delete-collection button-tertiary",onClick:function(){window.confirm("Are you sure you want to delete your collection?")&&(e.props.deleteCollection(),e.setState({done:!0}))}},"Delete Collection")}}])&&kv(r.prototype,n),a&&kv(r,a),t}();qv.propTypes={collection:h.a.shape({team:h.a.object,user:h.a.object,url:h.a.string.isRequired}).isRequired,deleteCollection:h.a.func.isRequired};var Sv=function(e){var t=e.api,r=e.collection,n=e.currentUser,a=e.deleteCollection,o=e.isAuthorized,i=e.updateNameAndUrl,c=e.updateDescription,s=e.addProjectToCollection,u=e.removeProjectFromCollection,l=e.updateColor,f=Pv(e,["api","collection","currentUser","deleteCollection","isAuthorized","updateNameAndUrl","updateDescription","addProjectToCollection","removeProjectFromCollection","updateColor"]);return p.a.createElement(p.a.Fragment,null,p.a.createElement(Be.a,null,p.a.createElement("title",null,r.name)),p.a.createElement("main",{className:"collection-page"},p.a.createElement("article",{className:"projects",style:{backgroundColor:r.coverColor}},p.a.createElement("header",{className:"collection "+("white"==ct(r.coverColor)?"dark":"")},p.a.createElement("div",{className:"collection-image-container"},p.a.createElement($o,{backgroundColor:st(r.coverColor)})),p.a.createElement(cv,{isAuthorized:o,name:r.name,url:r.url,update:function(e){return i(e).then(function(){return xv(r,e.url)})}}),r.team&&p.a.createElement(qi,{team:r.team}),r.user&&p.a.createElement(Un,r.user),p.a.createElement("div",{className:"collection-description"},p.a.createElement($s,{authorized:o,description:r.description,update:c,placeholder:"Tell us about your collection"})),o&&p.a.createElement(Kh,{update:l,initialColor:r.coverColor})),!!r&&p.a.createElement(ec,{api:t,projects:r.projects},function(e){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"collection-contents"},p.a.createElement("div",{className:"collection-project-container-header"},p.a.createElement("h3",null,"Projects (",r.projects.length,")"),!!o&&p.a.createElement(Ev,{addProjectToCollection:s,collection:r,api:t,currentUserIsOwner:o,currentUser:n})),r.projects.length>0?o?p.a.createElement(yi,Ov({projects:e,currentUser:n,api:t},{projectOptions:{removeProjectFromCollection:u,addProjectToCollection:s}},f)):n&&n.login?p.a.createElement(yi,Ov({projects:e,currentUser:n,api:t},{projectOptions:{addProjectToCollection:s}},f)):p.a.createElement(yi,Ov({projects:e,currentUser:n,api:t},{projectOptions:{}},f)):o?p.a.createElement("div",{className:"empty-collection-hint"},p.a.createElement("img",{src:"https://cdn.glitch.com/1afc1ac4-170b-48af-b596-78fe15838ad3%2Fpsst-pink.svg?1541086338934",alt:""}),p.a.createElement("p",null,"You can add any project, created by any user")):p.a.createElement("div",{className:"empty-collection-hint"},"No projects to see in this collection just yet.")))})),!o&&p.a.createElement(jc,{reportedType:"collection",reportedModel:r})),o&&p.a.createElement(qv,{collection:r,deleteCollection:a}))};Sv.propTypes={addProjectToCollection:h.a.func,api:h.a.any.isRequired,collection:h.a.shape({avatarUrl:h.a.string.isRequired,backgroundColor:h.a.string,description:h.a.string.isRequired,name:h.a.string.isRequired,projects:h.a.array.isRequired}).isRequired,children:h.a.node,currentUser:h.a.object,deleteCollection:h.a.func.isRequired,isAuthorized:h.a.any.isRequired,removeProjectFromCollection:h.a.func,uploadAvatar:h.a.func};var _v=function(){var e=wv(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get(r);case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0||!e.t0.response||404!==e.t0.response.status){e.next=12;break}return e.abrupt("return",null);case 12:throw e.t0;case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,r){return e.apply(this,arguments)}}();function Uv(e,t){return Iv.apply(this,arguments)}function Iv(){return(Iv=wv(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(`userid/byLogin/${r}`);case 2:if(n=e.sent,"NOT FOUND"!==(a=n.data)){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Av(){return(Av=wv(regeneratorRuntime.mark(function e(t,r,n){var a,o,i,c,s,u,l,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,_v(t,`teams/byUrl/${r}`);case 3:if(!(o=e.sent)){e.next=12;break}return e.next=7,t.get(`collections?teamId=${o.id}`);case 7:i=e.sent,c=i.data,a=c,e.next=21;break;case 12:return e.next=14,Uv(t,r);case 14:if(!(s=e.sent)){e.next=21;break}return e.next=18,t.get(`collections?userId=${s}`);case 18:u=e.sent,l=u.data,a=l;case 21:if(p=a.find(function(e){return e.url==n}),e.t0=p,!e.t0){e.next=27;break}return e.next=26,_v(t,`collections/${p.id}`);case 26:e.t0=e.sent;case 27:if(f=e.t0){e.next=30;break}return e.abrupt("return",null);case 30:return o&&(f.team=o),e.abrupt("return",f);case 32:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Fv=function(e){var t=e.api,r=e.ownerName,n=e.name,a=Pv(e,["api","ownerName","name"]);return p.a.createElement(za,{api:t},p.a.createElement(pr,{get:function(){return function(e,t,r){return Av.apply(this,arguments)}(t,r,n)}},function(e){return e?p.a.createElement(U,{properties:{origin:"collection"},context:{groupId:e.team?e.team.id.toString():"0"}},p.a.createElement(ue,null,function(r){return p.a.createElement(Sh,{api:t,initialCollection:e},function(e,n,o){return p.a.createElement(Sv,Ov({collection:e,api:t,currentUser:r,isAuthorized:o},n,a))})})):p.a.createElement(_c,{name:n})}))};function Dv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $v(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lv(e){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mv(e,t){return(Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$v(this,Lv(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mv(e,t)}(t,p.a.Component),r=t,(n=[{key:"componentDidMount",value:function(){var e=new Audio("https://cdn.glitch.com/a5a035b7-e3db-4b07-910a-b5c3ca9d8e86%2Fsecret.mp3?1535396729988").play();e&&e.then(function(){}).catch(function(){})}},{key:"render",value:function(){return null}}])&&Dv(r.prototype,n),a&&Dv(r,a),t}(),Vv=function(e){var t=e.enabledToggles,r=e.toggleData,n=e.setEnabledToggles,a=function(e){return t&&t.includes(e)};return p.a.createElement("section",{className:"secretPage"},p.a.createElement("div",{className:"filler"}),p.a.createElement(Be.a,null,p.a.createElement("title",null,"Glitch - It's a secret to everybody.")),p.a.createElement(zv,null),p.a.createElement("ul",null,r.map(function(e){var r=e.name,o=e.description;return p.a.createElement("li",{key:r},p.a.createElement("button",{title:o,onClick:function(){return function(e){var r=null;r=a(e)?t.filter(function(t){return t!==e}):t.concat([e]),n(r)}(r)},className:a(r)?"lit":"dark"},r))})))};Vv.propTypes={toggleData:h.a.array.isRequired,enabledToggles:h.a.array.isRequired,setEnabledToggles:h.a.func.isRequired};var Gv=function(){return p.a.createElement(ke,null,function(e,t,r){return p.a.createElement(Vv,{enabledToggles:e,toggleData:t,setEnabledToggles:r})})};function Hv(){return(Hv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jv(e,t,r){return t&&Wv(e.prototype,t),r&&Wv(e,r),e}function Yv(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zv(e){return(Zv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qv(e,t)}function Qv(e,t){return(Qv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xv=function(e,t){return new URLSearchParams(e).get(t)},ey=function(e){function t(){return Bv(this,t),Yv(this,Zv(t).apply(this,arguments))}return Kv(t,p.a.Component),Jv(t,[{key:"componentDidMount",value:function(){window.location.reload()}},{key:"render",value:function(){return null}}]),t}(),ty=function(e){function t(){return Bv(this,t),Yv(this,Zv(t).apply(this,arguments))}return Kv(t,p.a.Component),Jv(t,[{key:"track",value:function(){try{var e=window.analytics;e&&e.page({},{groupId:"0"})}catch(t){console.error("Error tracking page transition.",t)}}},{key:"componentDidUpdate",value:function(e){this.props.location.key!==e.location.key&&(window.scrollTo(0,0),this.props.reloadCurrentUser(),this.track())}},{key:"componentDidMount",value:function(){this.track()}},{key:"render",value:function(){return null}}]),t}(),ry=Object($e.a)(function(e){var t=e.location;return p.a.createElement(ue,null,function(e,r,n){var a=n.reload;return p.a.createElement(ty,{location:t,reloadCurrentUser:a})})}),ny=function(e){var t=e.api;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ry,null),p.a.createElement(Le.a,null,p.a.createElement(Me.a,{path:"/",exact:!0,render:function(e){var r=e.location;return p.a.createElement(qc,{key:r.key,api:t})}}),p.a.createElement(Me.a,{path:"/index.html",exact:!0,strict:!0,render:function(e){var r=e.location;return p.a.createElement(qc,{key:r.key,api:t})}}),p.a.createElement(Me.a,{path:"/login/facebook",exact:!0,render:function(e){var r=e.location;return p.a.createElement(es,{key:r.key,api:t,code:Xv(r.search,"code"),hash:Xv(r.search,"hash")})}}),p.a.createElement(Me.a,{path:"/login/github",exact:!0,render:function(e){var r=e.location;return p.a.createElement(ts,{key:r.key,api:t,code:Xv(r.search,"code"),hash:Xv(r.search,"hash")})}}),p.a.createElement(Me.a,{path:"/login/email",exact:!0,render:function(e){var r=e.location;return p.a.createElement(rs,{key:r.key,api:t,token:Xv(r.search,"token"),hash:Xv(r.search,"hash")})}}),p.a.createElement(Me.a,{path:"/join/@:teamUrl/:joinToken",exact:!0,render:function(e){var r=e.match;return p.a.createElement(ls,Hv({key:location.key,api:t},r.params))}}),p.a.createElement(Me.a,{path:"/questions",exact:!0,render:function(e){var r=e.location;return p.a.createElement(fs,{key:r.key,api:t})}}),p.a.createElement(Me.a,{path:"/~:name",exact:!0,render:function(e){var r=e.location,n=e.match;return p.a.createElement(yu,{key:r.key,api:t,name:n.params.name})}}),p.a.createElement(Me.a,{path:"/~:name/404",exact:!0,render:function(e){var r=e.location,n=e.match;return p.a.createElement(Vc,{key:r.key,api:t,name:n.params.name})}}),p.a.createElement(Me.a,{path:"/@:name",exact:!0,render:function(e){var r=e.location,n=e.match;return p.a.createElement(Xd,{key:r.key,api:t,name:n.params.name})}}),p.a.createElement(Me.a,{path:"/@:owner/:name",exact:!0,render:function(e){var r=e.location,n=e.match;return p.a.createElement(Fv,{key:r.key,api:t,ownerName:n.params.owner,name:n.params.name})}}),p.a.createElement(Me.a,{path:"/user/:id(\\d+)",exact:!0,render:function(e){var r=e.location,n=e.match;return p.a.createElement(Qd,{key:r.key,api:t,id:parseInt(n.params.id,10),name:`user ${n.params.id}`})}}),Object.keys(Ve.a).map(function(e){return p.a.createElement(Me.a,{key:e,path:`/${e}`,exact:!0,render:function(r){var n=r.location;return p.a.createElement(Kd,{key:n.key,api:t,id:Ve.a[e],name:e})}})}),p.a.createElement(Me.a,{path:"/search",exact:!0,render:function(e){var r=e.location;return p.a.createElement(Eh,{key:r.key,api:t,query:Xv(r.search,"q")})}}),ze.a.map(function(e){return p.a.createElement(Me.a,{key:e.url,path:`/${e.url}`,exact:!0,render:function(r){var n=r.location;return p.a.createElement($h,{key:n.key,api:t,category:e})}})}),p.a.createElement(Me.a,{path:"/secret",exact:!0,render:function(e){var t=e.location;return p.a.createElement(Gv,{key:t.key})}}),EXTERNAL_ROUTES.map(function(e){return p.a.createElement(Me.a,{key:e,path:e,render:function(e){var t=e.location;return p.a.createElement(ey,{key:t.key})}})}),p.a.createElement(Me.a,{render:function(e){var r=e.location;return p.a.createElement($c,{api:t,key:r.key})}})))};ny.propTypes={api:h.a.any.isRequired};var ay=ny,oy=function(){return p.a.createElement(E,{fallback:"Something went very wrong, try refreshing?"},p.a.createElement(m.a,null,p.a.createElement(Fe,null,p.a.createElement(ye,null,p.a.createElement(Pe,null,p.a.createElement(U,{context:{groupId:"0"}},p.a.createElement(se,null,function(e){return p.a.createElement(ay,{api:e})})))))))};o.a.extend(c.a),o.a.extend(u.a),window.bootstrap=function(){if(location.hash.startsWith("#!/"))window.location.replace(EDITOR_URL+window.location.hash);else{Object(n.configureScope)(function(e){e.setTag("bootstrap","true")});var e=document.createElement("div");document.body.appendChild(e),Object(f.render)(p.a.createElement(oy,null),e)}}},7:function(e,t,r){"use strict";r(46),r(130);var n=r(53);r.o(n,"captureException")&&r.d(t,"captureException",function(){return n.captureException}),r.o(n,"captureMessage")&&r.d(t,"captureMessage",function(){return n.captureMessage}),r.o(n,"configureScope")&&r.d(t,"configureScope",function(){return n.configureScope});try{n.init({dsn:"https://4f1a68242b6944738df12eecc34d377c@sentry.io/1246508",environment:ENVIRONMENT,beforeSend:function(e){var t=JSON.stringify(e);return["facebookToken","githubToken","persistentToken"].forEach(function(e){var r=new RegExp(`"${e}":"[^"]+"`,"g");t=t.replace(r,`"${e}":"****"`)}),JSON.parse(t)}}),n.configureScope(function(e){e.setTag("PROJECT_DOMAIN",PROJECT_DOMAIN)}),window.Sentry=n}catch(a){console.warn("Error initializing Sentry",a)}}});
//# sourceMappingURL=client.js.map?a9d7db7cd1d8233d6e1a